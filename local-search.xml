<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>åœ¨powershellä¸Šç¦æ­¢è¿è¡Œè„šæœ¬</title>
    <link href="/2025/02/08/034%20Powershell%E9%99%90%E5%88%B6/"/>
    <url>/2025/02/08/034%20Powershell%E9%99%90%E5%88%B6/</url>
    
    <content type="html"><![CDATA[<p>åœ¨ä½¿ç”¨<code>tabby</code>è¿è¡Œ<code>PowerShell</code>æ—¶ï¼Œè¾“å…¥å‘½ä»¤è¡Œ<code>hexo s</code>å‡ºç°å¦‚ä¸‹æŠ¥é”™</p><p><img src="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/picgo/image-20250208144105189.png" alt="image-20250208144105189"></p><p><strong>åˆ†æåŸå› </strong></p><p><code>PowerShell</code>æ‰§è¡Œç­–ç•¥æ˜¯<code>Restricted</code> ã€‚<code>Restricted</code> æ‰§è¡Œç­–ç•¥ä¸å…è®¸ä»»ä½•è„šæœ¬è¿è¡Œã€‚</p><p>æŸ¥çœ‹æ‰§è¡Œç­–ç•¥<code>get-executionpolicy</code></p><p><img src="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/picgo/image-20250208143829255.png" alt="image-20250208143829255"></p><p><strong>è§£å†³æ–¹æ³•</strong></p><p>ç®¡ç†å‘˜èº«ä»½æ‰“å¼€<code>PowerShell</code> è¾“å…¥ <code>set-executionpolicy remotesigned</code>æ›´æ”¹æ‰§è¡Œç­–ç•¥</p><p><img src="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/picgo/image-20250208143928799.png" alt="image-20250208143928799"></p>]]></content>
    
    
    <categories>
      
      <category>æŠ€æœ¯</category>
      
    </categories>
    
    
    <tags>
      
      <tag>powershell</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>The Spalart-Allmaras Turbulence Model</title>
    <link href="/2024/07/30/033%20%E6%B9%8D%E6%B5%81%E6%A8%A1%E5%9E%8B%E4%B9%8BSpalart-Allmaras/"/>
    <url>/2024/07/30/033%20%E6%B9%8D%E6%B5%81%E6%A8%A1%E5%9E%8B%E4%B9%8BSpalart-Allmaras/</url>
    
    <content type="html"><![CDATA[<h1 id="1ã€å†å²å‘å±•"><a href="#1ã€å†å²å‘å±•" class="headerlink" title="1ã€å†å²å‘å±•"></a>1ã€å†å²å‘å±•</h1><p>æµä½“åŠ¨åŠ›å­¦ä¸­æè¿°æµä½“åœ¨å¤–åŠ›ä½œç”¨ä¸‹æµåŠ¨çš„ä¸»è¦æ§åˆ¶æ–¹ç¨‹æ˜¯<strong>çº³ç»´-æ–¯æ‰˜å…‹æ–¯æ–¹ç¨‹</strong>ã€‚è¿™äº›æ–¹ç¨‹çš„å¼ºå¤§ä¹‹å¤„åœ¨äºå®ƒä»¬èƒ½å¤Ÿæè¿°ä½œç”¨åœ¨æµä½“ä¸Šçš„ä»»ä½•åŠ›çš„å½±å“ä»¥åŠç”±æ­¤äº§ç”Ÿçš„æµåŠ¨è¡Œä¸ºã€‚ç„¶è€Œï¼Œ<em>å®ƒä»¬ä¸èƒ½é’ˆå¯¹æ¯ä¸ªç³»ç»Ÿæˆ–æµé‡æƒ…å†µä»¥å°é—­å½¢å¼æ±‚è§£ã€‚</em></p><p>ç”±äºæœ€æ—© 1973 å¹´æå‡ºçš„ ke æ¨¡å‹æ— æ³•å‡†ç¡®é¢„æµ‹é€†å‹åŠ›æ¢¯åº¦ adverse pressure gradient ä¸‹çš„è¾¹ç•Œå±‚è¿åŠ¨ï¼ŒSpalart-Allmaras Modelï¼ˆ1994ï¼‰ã€ï¼ˆ1998ï¼‰ä»¥åŠ ï¼ˆ1994ï¼‰åˆ†åˆ«è¢«æå‡ºã€‚</p><p>åœ¨ç‰©ç†å­¦ä¸­ï¼ŒSpalart-Allmaras æ¨¡å‹æ˜¯ä¸€ç§å•æ–¹ç¨‹æ¨¡å‹ï¼Œå¯æ±‚è§£è¿åŠ¨æ¶¡æµæ¹æµç²˜åº¦çš„æ¨¡æ‹Ÿè¾“è¿æ–¹ç¨‹ã€‚åœ¨å…¶åŸå§‹å½¢å¼ä¸­ï¼Œè¯¥æ¨¡å‹å®é™…ä¸Šæ˜¯ä¸€ä¸ªä½é›·è¯ºæ•°æ¨¡å‹ï¼Œéœ€è¦æ­£ç¡®è§£æè¾¹ç•Œå±‚çš„ç²˜åº¦å½±å“åŒºåŸŸï¼ˆy+ ~1 ä¸ªç½‘æ ¼ï¼‰ã€‚å®ƒæ²¡æœ‰é’ˆå¯¹ä¸€èˆ¬å·¥ä¸šæµåŠ¨è¿›è¡Œæ ‡å®šï¼Œå¯¹äºä¸€äº›è‡ªç”±å‰ªåˆ‡æµï¼Œå°¤å…¶æ˜¯å¹³é¢å’Œåœ†å½¢å°„æµï¼Œç¡®å®ä¼šäº§ç”Ÿè¾ƒå¤§çš„è¯¯å·®ã€‚æ­¤å¤–ï¼Œä¸èƒ½ä¾é å®ƒæ¥é¢„æµ‹å‡åŒ€ã€å„å‘åŒæ€§æ¹æµçš„è¡°å‡ã€‚</p><h1 id="2ã€åŸºæœ¬å½¢å¼"><a href="#2ã€åŸºæœ¬å½¢å¼" class="headerlink" title="2ã€åŸºæœ¬å½¢å¼"></a>2ã€åŸºæœ¬å½¢å¼</h1><p>$$\tau_{ij}&#x3D;2\mu_t\left(S_{ij}-\frac{1}{3}\frac{\partial u_k}{\partial x_k}\delta_{ij}\right)-\frac{2}{3}\rho k\delta_{ij}$$</p><p>Spalart-Allmaras æ¹æµæ¨¡å‹éµå¾ªä¸€ä¸ªæè¿°è¿åŠ¨ç²˜åº¦ç±»å˜é‡ï¼ˆç§°ä¸º Spalart-Allmaras å˜é‡ï¼‰çš„åŠ¨æ€æ–¹ç¨‹ï¼š</p><p>$$\frac{\partial\bar{v}}{\partial t}+u_{j}\frac{\partial\bar{v}}{\partial x_{j}}&#x3D;C_{b,1}(1-f_{t,2})\hat{S}\bar{v}-<a href="%5Cfrac%7B%5Cbar%7Bv%7D%7D%7Bd%7D">c_{w,1}f_{w}-\frac{c_{b,1}}{\kappa^{2}}f_{t,2}</a>^{2}+\frac{1}{\sigma}[\frac{\partial}{\partial x_{j}}((v+\bar{v})\frac{\partial\bar{v}}{\partial x_{j}})+c_{b,2}\frac{\partial\bar{v}}{\partial x_{i}}\frac{\partial\bar{v}}{\partial x_{i}}]$$</p><p>è¯¥æ–¹ç¨‹çš„ç›®æ ‡æ˜¯ç¡®å®šæ¹æµæ¶¡æµç²˜åº¦ï¼Œå…¶ç”±ä»¥ä¸‹å…¬å¼ç¡®å®šï¼š</p><p><img src="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/20240730194639.png"></p><p>åœ¨è¿™äº›æ–¹ç¨‹ä¸­ï¼Œåˆ†å­è¿åŠ¨ç²˜åº¦ä¸º ğœˆ &#x3D; Î¼&#x2F;â´ï¼Œæµä½“å¯†åº¦ä¸º â´ï¼ŒÎ¼ æ˜¯æµä½“çš„åˆ†å­åŠ¨åŠ›ç²˜åº¦ã€‚æ¨¡å‹ä¸­çš„å…¶ä»–å‚æ•°ä»¥åœºç‚¹åˆ°æœ€è¿‘å£ d çš„è·ç¦»å’Œæ¶¡åº¦å¤§å°ç»™å‡º</p><p><img src="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/20240730194722.png"></p><p><img src="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/20240730194738.png"></p><p>ä»¥ä¸‹å®šä¹‰ï¼š</p><p><img src="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/20240730194758.png"></p><p>ä»ä¸Šé¢çš„å®šä¹‰ä¸­å¯ä»¥çœ‹å‡ºå‡ ä¸ªå¸¸é‡ã€‚è¿™äº›å¸¸é‡å®šä¹‰å¦‚ä¸‹ï¼š</p><p><img src="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/20240730194819.png"></p><p>ç”±äºæ‰€è€ƒè™‘çš„ç³»ç»Ÿä»¥å¢™ä¸ºç•Œï¼Œå› æ­¤æ²¿ç€å¢™çš„è¡¨é¢æœ‰ä¸€ä¸ªå›ºå®šè¾¹ç•Œæ¡ä»¶ã€‚å…¶ä»–è¾¹ç•Œæ¡ä»¶å¯èƒ½ä¼šæ–½åŠ åœ¨ç³»ç»Ÿçš„å…¶ä»–åœ°æ–¹ï¼Œå°½ç®¡è¿™äº›è¾¹ç•Œæ¡ä»¶æ˜¯å¦ä¼šå¹²æ‰°è§£å†³è¿œç¦»å£æœ¬èº«çš„æ¶¡æµå¯èƒ½å€¼å¾—æ€€ç–‘ã€‚æœ€åï¼Œæˆ‘ä»¬å¯¹è¿œåœº Spalart-Allmaras å˜é‡æœ‰ä»¥ä¸‹æ¡ä»¶ï¼š</p><p><img src="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/20240730194845.png"></p><p>ä¼˜ç‚¹ï¼š</p><ol><li>é™ç»´å¯ä»¥é™ä½é—®é¢˜çš„å¤æ‚æ€§å’Œæ•´ä½“æ¨¡æ‹Ÿæ—¶é—´ã€‚</li><li>æ— éœ€ä½¿ç”¨æ²¿æ¹æµçš„å‰ªåˆ‡å±‚çš„å±€éƒ¨åšåº¦æ¥è®¡ç®—é•¿åº¦å°ºåº¦ã€‚</li><li>å¯¹äºå…·æœ‰<strong>ä»»æ„å‹åŠ›æ¢¯åº¦</strong>çš„è¾¹ç•Œå±‚æµå¾ˆæœ‰ç”¨ã€‚</li><li>ç¨³å¥ï¼›å¯¹äºä½é›·è¯ºæ•° k - Îµ æ¨¡å‹ä¸æ”¶æ•›ç”šè‡³å‘æ•£çš„ç›¸å¯¹ç²—ç³™çš„ç½‘æ ¼ï¼Œå®ƒå¯ä»¥ç»™å‡ºåˆç†çš„ç»“æœ</li></ol><p>ç¼ºç‚¹ï¼š</p><ol><li>ä¸é€‚ç”¨äºæ¶‰åŠå–·å°„çŠ¶è‡ªç”±å‰ªåˆ‡åŒºåŸŸçš„åº”ç”¨</li><li></li></ol><h1 id="3ã€ç”¨é€”"><a href="#3ã€ç”¨é€”" class="headerlink" title="3ã€ç”¨é€”"></a>3ã€ç”¨é€”</h1><h1 id="4ã€æ³¨æ„äº‹é¡¹"><a href="#4ã€æ³¨æ„äº‹é¡¹" class="headerlink" title="4ã€æ³¨æ„äº‹é¡¹"></a>4ã€æ³¨æ„äº‹é¡¹</h1><p>å‚è€ƒï¼š</p><ol><li><a href="https://resources.system-analysis.cadence.com/blog/msa2024-what-is-the-spalart-allmaras-turbulence-model">https://resources.system-analysis.cadence.com/blog/msa2024-what-is-the-spalart-allmaras-turbulence-model</a></li><li><a href="https://www.cfd-online.com/Wiki/Spalart-Allmaras_model">https://www.cfd-online.com/Wiki/Spalart-Allmaras_model</a></li><li><a href="https://www.youtube.com/watch?v=Xivc0EIGFQw">https://www.youtube.com/watch?v=Xivc0EIGFQw</a></li><li><a href="https://zhuanlan.zhihu.com/p/408434524">https://zhuanlan.zhihu.com/p/408434524</a></li></ol>]]></content>
    
    
    <categories>
      
      <category>æ¨¡æ‹Ÿ</category>
      
      <category>Fluent</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Fluent</tag>
      
      <tag>æ¨¡æ‹Ÿ</tag>
      
      <tag>å­¦ä¹ ç¬”è®°</tag>
      
      <tag>æ¹æµæ¨¡å‹</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Pythonè‡ªåŠ¨æ‰§è¡Œfluent</title>
    <link href="/2024/07/30/032%20Python%E8%87%AA%E5%8A%A8%E6%89%A7%E8%A1%8Cfluent/"/>
    <url>/2024/07/30/032%20Python%E8%87%AA%E5%8A%A8%E6%89%A7%E8%A1%8Cfluent/</url>
    
    <content type="html"><![CDATA[<h1 id="TUI-å‘½ä»¤"><a href="#TUI-å‘½ä»¤" class="headerlink" title="TUI å‘½ä»¤"></a>TUI å‘½ä»¤</h1><p>TUI å‘½ä»¤åŒ…æ‹¬ Fluent ä¸­çš„å…¨éƒ¨è®¾ç½®ï¼Œè§ä¸Šä¸€ç¯‡ Fluent TUI å‘½ä»¤ã€‚</p><p>æœ€é‡è¦çš„æ˜¯è¦åŒ…å«æ¨å‡ºç¨‹åºå‘½ä»¤ï¼Œå³<code>exit ok</code></p><p>å…¨éƒ¨ TUI å‘½ä»¤å¦‚ä¸‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br></pre></td><td class="code"><pre><code class="hljs tui">; 1ã€è¯»å–ç½‘æ ¼æ–‡ä»¶<br>rc fluent.msh<br>mesh/check<br>mesh/quality<br><br><br>display mesh-outline<br><br>; 2ã€å‹¾é€‰ç¬æ€<br>/define/models/unsteady-2nd-order yes<br><br>; 3ã€è®¾ç½®é‡åŠ›åŠ é€Ÿåº¦<br>/define/operating-conditions/gravity yes 0 -9.81 0<br><br>; 4ã€å¼€å¯èƒ½é‡æ–¹ç¨‹<br>/define/models/energy y y y<br><br>; 5ã€æ¹æµæ¨¡å‹<br>/define/models/viscous/spalart-allmaras y<br><br>; 6ã€æ–°å¢æ··åˆæ°”ä½“<br>/define/models/species/species-transport y hydrogen-air<br>/define/materials/change-create hydrogen-air hydrogen-air y 2 h2 air 0 0 n n n n n n<br><br>; 7ã€ç®¡é“ææ–™åŠåœŸå£¤ææ–™<br>/define/materials/copy/solid/steel<br>/define/materials/change-create aluminum soil y constant 2650 y constant 789 y constant 2.9 y<br><br>; 8ã€è®¾ç½®è¾¹ç•Œæ¡ä»¶<br>/define/boundary-conditions/fluid solid fluid no no no no no  0 no 0 no 0 no  0 no 0 no 0 no no no no yes no no 1 no 0 no 0 no  0 no 1 no 0 yes no 245000000000 no 245000000000 no 245000000000 no no 502000 no 502000 no 502000 0 0 no 0.43 constant 1 yes no no no<br><br>/define/boundary-conditions/zone-type inlet pressure-inlet<br>/define/boundary-conditions/set/pressure-inlet inlet () p0 no 400000 q<br>/define/boundary-conditions/set/pressure-inlet inlet () supersonic/initial-gauge-pressure no 400000 q<br>/define/boundary-conditions/set/pressure-inlet inlet () ke-spec no no no yes q<br>/define/boundary-conditions/set/pressure-inlet inlet () turb-hydraulic-diam 0.01 q<br>/define/boundary-conditions/set/pressure-inlet inlet () t0 no 288.15 q<br>/define/boundary-conditions/set/pressure-inlet inlet () species-in-mole-fractions yes q<br>/define/boundary-conditions/set/pressure-inlet inlet () mf no 1 q<br><br>/define/boundary-conditions/set/pressure-outlet outlet_x1 outlet_x2 outlet_y1 outlet_z1 outlet_z2 () t0 no 288.15 q<br><br>/define/boundary-conditions wall pipe 0 no 0 yes steel no no 0 no no no no no 0 no 0.5 yes no 1<br>/define/boundary-conditions wall ground 0 no 0 yes soil no no 0 no no no no no 0 no 0.5 yes no 1<br><br>; 9ã€åˆ›å»ºå¹¶è®¾ç½®ç›‘æµ‹ç‚¹å’Œé¢<br>surf point-surf point-1 0 0.4 0 q<br>surf point-surf point-2 0 0.5 0 q<br>surf point-surf point-3 2 0.4 0 q<br><br>/solve/report-definitions add report1 surface-vertexavg field molef-h2 surface-names point-1 () q<br><br>/surface/plane plane1 0 0 0 0 1 0 0 0 1<br><br>; 10ã€åˆå§‹åŒ–<br>/solve/initialize/set-defaults/ temperature 288.15<br>/solve/initialize/set-defaults/ pressure 0<br>/solve/initialize/set-defaults/ species-0 0<br><br>/solve/initialize initialize-flow ok<br>; æ˜¾ç¤ºä¸€ä¸‹contour<br>;/display/contour molef-h2 0 1<br><br><br>; 11ã€è®¾ç½®ä¿å­˜æ ¼å¼åŠé¢‘ç‡<br>; è®¾ç½®æ•°æ®ä¿å­˜å†…å®¹<br>/file/data-file-options molef-h2 molef-air absolute-pressure air h2 velocity-magnitude mesh-x-velocity mesh-y-velocity mesh-z-velocity pressure density total-pressure total-temperature  x-velocity y-velocity z-velocity viscosity-eff viscosity-lam viscosity-ratio viscosity-turb vorticity-mag q<br>; ä¿å­˜tecplotæ–‡ä»¶<br>/file/transient-export/tecplot  C:/Users/23984/Desktop/tui_test/tecplot1 ground inlet outlet_x1 outlet_x2 outlet_y1 outlet_z1 outlet_z2 pipe () molef-h2 molef-air absolute-pressure air h2 velocity-magnitude mesh-x-velocity mesh-y-velocity mesh-z-velocity pressure density total-pressure total-temperature  x-velocity y-velocity z-velocity viscosity-eff viscosity-lam viscosity-ratio viscosity-turb vorticity-mag q tecplot1 10 time-step<br><br>; 12ã€åˆ›å»ºcontourå¹¶ä¿å­˜åŠ¨ç”»<br>/display/objects/create contour &quot;contour-1&quot; filled yes field molef-h2 surfaces-list plane1 () q<br>/solve/animate/objects/create &quot;animation-1&quot; animate-on contour-1 storage-dir C:\Users\23984\Desktop\tui_test frequency-of &quot;Time Step&quot; q<br><br>; 13ã€è®¾ç½®è¿­ä»£å‚æ•°<br>/solve/set/max-iterations-per-time-step 50<br>/solve/set/time-step 1<br>/solve/set/number-of-time-steps 1000<br>/file/write-case/setting1.cas<br><br>; 14ã€å¼€å§‹è®¡ç®—<br>/solve/dual-time-iterate 1 2<br><br>exit ok<br></code></pre></td></tr></table></figure><h1 id="Python-ä»£ç "><a href="#Python-ä»£ç " class="headerlink" title="Python ä»£ç "></a>Python ä»£ç </h1><p>å«æ³¨é‡Š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> os<br><span class="hljs-keyword">import</span> subprocess<br><span class="hljs-keyword">import</span> time<br><br><span class="hljs-comment"># è·å–pythonæ–‡ä»¶è¿è¡Œçš„ç›®å½•æ–‡ä»¶å¤¹</span><br>path, filename = os.path.split(os.path.abspath(__file__))<br><br><span class="hljs-comment"># å®šä¹‰fluent.exeçš„ç›®å½•</span><br>fluent_path = <span class="hljs-string">&quot;D:\\ANSYS18\\ANSYS Inc\\v180\\fluent\\ntbin\\win64&quot;</span><br><br><span class="hljs-comment"># å®šä¹‰è¦è¿è¡Œçš„å‘½ä»¤</span><br>command_list = []<br>command_list.append(<span class="hljs-string">f&#x27;&quot;<span class="hljs-subst">&#123;fluent_path&#125;</span>\\fluent.exe&quot; 3ddp -t4 -i jou1.jou&#x27;</span>)<br>command_list.append(<span class="hljs-string">f&#x27;&quot;<span class="hljs-subst">&#123;fluent_path&#125;</span>\\fluent.exe&quot; 3ddp -t4 -i jou2.jou&#x27;</span>)<br><br>time.sleep(<span class="hljs-number">1</span>)<br><br><span class="hljs-comment"># å®šä¹‰fluentç¨‹åºå¾ªç¯</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">run_fluent</span>(<span class="hljs-params">command,path</span>):<br>    process = subprocess.Popen(command, stdout=subprocess.PIPE, stderr=subprocess.PIPE, cwd=path, shell=<span class="hljs-literal">True</span>, universal_newlines=<span class="hljs-literal">True</span>)<br>    <span class="hljs-comment"># æŒç»­ç›‘æ§è¾“å‡ºï¼Œå¦‚æœæ£€æµ‹åˆ°ç¨‹åºç»“æŸå°±å¾€ä¸‹æ‰§è¡Œ</span><br>    <span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:<br>        output = process.stdout.readline()<br>        <span class="hljs-keyword">if</span> output == <span class="hljs-string">&#x27;&#x27;</span> <span class="hljs-keyword">and</span> process.poll() <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> <span class="hljs-literal">None</span>:<br>            <span class="hljs-keyword">break</span><br>        <span class="hljs-keyword">if</span> output:<br>            <span class="hljs-built_in">print</span>(output.strip())<br>    rc = process.poll()<br><br>count = <span class="hljs-number">10</span><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">0</span>,count):<br>  <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;å¼€å§‹å¾ªç¯ç¬¬<span class="hljs-subst">&#123;i&#125;</span>ä¸ª&quot;</span>)<br>  run_fluent(command_list[i],path)<br>  <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;ç¬¬<span class="hljs-subst">&#123;i&#125;</span>ä¸ªå¾ªç¯ç»“æŸ&quot;</span>)<br><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;ç¨‹åºç»“æŸ&quot;</span>)<br></code></pre></td></tr></table></figure><blockquote><p>è¿™é‡Œå¦‚æœæƒ³ä½¿ç”¨ python ç®—ä¸€äº›å˜é‡ï¼Œç„¶åä¼ å…¥ç¨‹åºä¸­è‡ªåŠ¨æ‰§è¡Œï¼Œè¿™é‡Œæä¾›ä¸€ç§æ–¹æ³•ï¼Œå°±æ˜¯ä¿®æ”¹ tui æ–‡ä»¶ï¼ˆ.jouï¼‰å†…çš„å†…å®¹ã€‚</p></blockquote>]]></content>
    
    
    <categories>
      
      <category>æ¨¡æ‹Ÿ</category>
      
      <category>Fluent</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Fluent</tag>
      
      <tag>æ¨¡æ‹Ÿ</tag>
      
      <tag>Python</tag>
      
      <tag>å­¦ä¹ ç¬”è®°</tag>
      
      <tag>TUI</tag>
      
      <tag>è‡ªåŠ¨åŒ–</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>TUIå‘½ä»¤</title>
    <link href="/2024/07/27/031%20Fleunt%20Tui%E5%91%BD%E4%BB%A4/"/>
    <url>/2024/07/27/031%20Fleunt%20Tui%E5%91%BD%E4%BB%A4/</url>
    
    <content type="html"><![CDATA[<h1 id="1ã€TUI-å‘½ä»¤åŸºæœ¬è®¤è¯†"><a href="#1ã€TUI-å‘½ä»¤åŸºæœ¬è®¤è¯†" class="headerlink" title="1ã€TUI å‘½ä»¤åŸºæœ¬è®¤è¯†"></a>1ã€TUI å‘½ä»¤åŸºæœ¬è®¤è¯†</h1><p>Fluent ä¸­çš„ Tui å‘½ä»¤èƒ½ä½¿ Fluent è‡ªåŠ¨åŒ–æ“ä½œï¼ŒåŒ…æ‹¬æ–‡ä»¶è®¾ç½®ã€æ¡ˆä¾‹è¯»å–ã€å‚æ•°è®¾ç½®ç­‰åŠŸèƒ½ã€‚</p><h1 id="2ã€åŸºæœ¬æ“ä½œ"><a href="#2ã€åŸºæœ¬æ“ä½œ" class="headerlink" title="2ã€åŸºæœ¬æ“ä½œ"></a>2ã€åŸºæœ¬æ“ä½œ</h1><p>åœ¨ Fluent ä¸­çš„å‘½ä»¤è¡Œå¯è¿›è¡Œ tui å‘½ä»¤æ“ä½œ</p><ul><li>å›è½¦å¯æŸ¥çœ‹å‘½ä»¤æç¤ºï¼›</li><li>qï¼šè¿”å›ä¸Šä¸€çº§</li></ul><p><img src="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/20240727213342.png"></p><h1 id="3ã€æ¡ˆä¾‹"><a href="#3ã€æ¡ˆä¾‹" class="headerlink" title="3ã€æ¡ˆä¾‹"></a>3ã€æ¡ˆä¾‹</h1><p>æ¡ˆä¾‹ä¸­åŒ…å«æ³¨é‡Š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><code class="hljs jou">; 1ã€è¯»å–ç½‘æ ¼æ–‡ä»¶<br>rc fluent.msh<br>mesh/check<br>mesh/quality<br><br><br>display mesh-outline<br><br>; 2ã€å‹¾é€‰ç¬æ€<br>/define/models/unsteady-2nd-order yes<br><br>; 3ã€è®¾ç½®é‡åŠ›åŠ é€Ÿåº¦<br>/define/operating-conditions/gravity yes 0 -9.81 0<br><br>; 4ã€å¼€å¯èƒ½é‡æ–¹ç¨‹<br>/define/models/energy y y y<br><br>; 5ã€æ¹æµæ¨¡å‹<br>/define/models/viscous/spalart-allmaras y<br><br>; 6ã€æ–°å¢æ··åˆæ°”ä½“<br>/define/models/species/species-transport y hydrogen-air<br>/define/materials/change-create hydrogen-air hydrogen-air y 2 h2 air 0 0 n n n n n n<br><br>; 7ã€ç®¡é“ææ–™åŠåœŸå£¤ææ–™<br>/define/materials/copy/solid/steel<br>/define/materials/change-create aluminum soil y constant 2650 y constant 789 y constant 2.9 y<br><br>; 8ã€è®¾ç½®è¾¹ç•Œæ¡ä»¶<br>/define/boundary-conditions/fluid solid fluid no no no no no  0 no 0 no 0 no  0 no 0 no 0 no no no no yes no no 1 no 0 no 0 no  0 no 1 no 0 yes no 245000000000 no 245000000000 no 245000000000 no no 502000 no 502000 no 502000 0 0 no 0.43 constant 1 yes no no no<br><br>/define/boundary-conditions/zone-type inlet pressure-inlet<br>/define/boundary-conditions/set/pressure-inlet inlet () p0 no 400000 q<br>/define/boundary-conditions/set/pressure-inlet inlet () supersonic/initial-gauge-pressure no 400000 q<br>/define/boundary-conditions/set/pressure-inlet inlet () ke-spec no no no yes q<br>/define/boundary-conditions/set/pressure-inlet inlet () turb-hydraulic-diam 0.01 q<br>/define/boundary-conditions/set/pressure-inlet inlet () t0 no 288.15 q<br>/define/boundary-conditions/set/pressure-inlet inlet () species-in-mole-fractions yes q<br>/define/boundary-conditions/set/pressure-inlet inlet () mf no 1 q<br><br>/define/boundary-conditions/set/pressure-outlet outlet_x1 outlet_x2 outlet_y1 outlet_z1 outlet_z2 () t0 no 288.15 q<br><br>/define/boundary-conditions wall pipe 0 no 0 yes steel no no 0 no no no no no 0 no 0.5 yes no 1<br>/define/boundary-conditions wall ground 0 no 0 yes soil no no 0 no no no no no 0 no 0.5 yes no 1<br><br>; 9ã€åˆ›å»ºå¹¶è®¾ç½®ç›‘æµ‹ç‚¹å’Œé¢<br>surf point-surf point-1 0 0.4 0 q<br>surf point-surf point-2 0 0.5 0 q<br>surf point-surf point-3 2 0.4 0 q<br><br>/solve/report-definitions add report1 surface-vertexavg field molef-h2 surface-names point-1 () q<br><br>/surface/plane plane1 0 0 0 0 1 0 0 0 1<br><br>; 10ã€åˆå§‹åŒ–<br>/solve/initialize/set-defaults/ temperature 288.15<br>/solve/initialize/set-defaults/ pressure 0<br>/solve/initialize/set-defaults/ species-0 0<br><br>/solve/initialize initialize-flow ok<br>; æ˜¾ç¤ºä¸€ä¸‹contour<br>;/display/contour molef-h2 0 1<br><br><br>; 11ã€è®¾ç½®ä¿å­˜æ ¼å¼åŠé¢‘ç‡<br>; è®¾ç½®æ•°æ®ä¿å­˜å†…å®¹<br>/file/data-file-options molef-h2 molef-air absolute-pressure air h2 velocity-magnitude mesh-x-velocity mesh-y-velocity mesh-z-velocity pressure density total-pressure total-temperature  x-velocity y-velocity z-velocity viscosity-eff viscosity-lam viscosity-ratio viscosity-turb vorticity-mag q<br>; ä¿å­˜tecplotæ–‡ä»¶<br>/file/transient-export/tecplot  C:/Users/23984/Desktop/tui_test/tecplot1 ground inlet outlet_x1 outlet_x2 outlet_y1 outlet_z1 outlet_z2 pipe () molef-h2 molef-air absolute-pressure air h2 velocity-magnitude mesh-x-velocity mesh-y-velocity mesh-z-velocity pressure density total-pressure total-temperature  x-velocity y-velocity z-velocity viscosity-eff viscosity-lam viscosity-ratio viscosity-turb vorticity-mag q tecplot1 10 time-step<br><br>; 12ã€åˆ›å»ºcontourå¹¶ä¿å­˜åŠ¨ç”»<br>/display/objects/create contour &quot;contour-1&quot; filled yes field molef-h2 surfaces-list plane1 () q<br>/solve/animate/objects/create &quot;animation-1&quot; animate-on contour-1 storage-dir C:\Users\23984\Desktop\tui_test frequency-of &quot;Time Step&quot; q<br><br>; 13ã€è®¾ç½®è¿­ä»£å‚æ•°<br>/solve/set/max-iterations-per-time-step 50<br>/solve/set/time-step 1<br>/solve/set/number-of-time-steps 1000<br>/file/write-case/setting.cas<br><br>; 14ã€å¼€å§‹è®¡ç®—<br>/solve/dual-time-iterate 1000 20<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>æ¨¡æ‹Ÿ</category>
      
      <category>Fluent</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Fluent</tag>
      
      <tag>æ¨¡æ‹Ÿ</tag>
      
      <tag>å­¦ä¹ ç¬”è®°</tag>
      
      <tag>TUI</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>åº“æœ—æ•°</title>
    <link href="/2024/07/26/030%20%E5%BA%93%E6%9C%97%E6%95%B0/"/>
    <url>/2024/07/26/030%20%E5%BA%93%E6%9C%97%E6%95%B0/</url>
    
    <content type="html"><![CDATA[<h1 id="æ—¶é—´æ­¥é•¿çš„ç¡®å®š"><a href="#æ—¶é—´æ­¥é•¿çš„ç¡®å®š" class="headerlink" title="æ—¶é—´æ­¥é•¿çš„ç¡®å®š"></a>æ—¶é—´æ­¥é•¿çš„ç¡®å®š</h1><p><a href="https://blog.csdn.net/staywithmoon/article/details/124253642">https://blog.csdn.net/staywithmoon/article/details/124253642</a></p><p><a href="https://blog.csdn.net/weixin_45560646/article/details/126922667">https://blog.csdn.net/weixin_45560646/article/details/126922667</a></p><p><a href="https://www.youtube.com/watch?v=WBWY46ynRk0">https://www.youtube.com/watch?v=WBWY46ynRk0</a></p><h2 id="1ã€åº“æœ—æ•°"><a href="#1ã€åº“æœ—æ•°" class="headerlink" title="1ã€åº“æœ—æ•°"></a>1ã€åº“æœ—æ•°</h2><h3 id="1-1-åŸºæœ¬æ¦‚å¿µ"><a href="#1-1-åŸºæœ¬æ¦‚å¿µ" class="headerlink" title="1.1 åŸºæœ¬æ¦‚å¿µ"></a>1.1 åŸºæœ¬æ¦‚å¿µ</h3><p>åº“æœ—æ•°æ˜¯ç”¨æ¥è¡¡é‡æ•°å€¼è®¡ç®—ç¨³å®šæ€§çš„ä¸€ä¸ªç‰©ç†é‡ï¼Œä¹Ÿè¢«ç§°ä¸º<code>CFL</code>æ•°ã€<code>CFL</code>å‡†åˆ™ã€‚</p><p>$$Courant&#x3D;\frac{u\Delta t}{\Delta x}$$</p><p>u ä¸ºæµä½“é€Ÿåº¦ï¼›Î”t ä¸ºæ—¶é—´æ­¥é•¿ï¼›Î”x ä¸ºç½‘æ ¼å°ºå¯¸ï¼›</p><blockquote><p><code>u*Î”t</code>è¡¨ç¤ºæµä½“åœ¨ Î”t æ—¶é—´å†…æµåŠ¨çš„è·ç¦»ï¼Œé™¤ä»¥ç½‘æ ¼å°ºå¯¸ï¼Œåˆ™è¡¨ç¤ºæµä½“åœ¨ä¸€ä¸ªæ—¶é—´æ­¥é•¿å†…æµè¿‡äº†å¤šå°‘ä¸ªç½‘æ ¼ã€‚</p></blockquote><p>ä¸€èˆ¬å–å€¼åœ¨<strong>1~10</strong>ä¹‹é—´æ¯”è¾ƒåˆé€‚ï¼Œå½“ç„¶è¦æ ¹æ®å®é™…æƒ…å†µï¼Œå¦‚æ”¶æ•›æ€§æ¯”è¾ƒå·®ï¼Œå¯é€‚å½“é™ä½è¿™ä¸ªæ•°å€¼ã€‚æ”¶æ•›æ€§æ¯”è¾ƒå¥½ï¼Œæ”¶æ•›é€Ÿåº¦æ…¢ï¼Œå¯é€‚å½“å¢åŠ åº“æœ—æ•°ã€‚Fluent å¸®åŠ©æ–‡æ¡£è®¤ä¸ºå¯¹äºå¤§å¤šæ•°é—®é¢˜ï¼Œåº“æœ—æ•°è®¾ç½®ä¸º 1 èƒ½å¤Ÿæ»¡è¶³è¦æ±‚ã€‚</p><p>å®é™…ä¸Šï¼ŒFluent å¾ˆå¤šæ¡ˆä¾‹çš„åº“æœ—æ•°éƒ½æ˜¯ 50ï¼Œè¿™ä¸»è¦æ˜¯é€‰æ‹©äº†éšå¼ç®—æ³•çš„åŸå› </p><h3 id="1-2-åº“æœ—æ•°çš„è®¾ç½®"><a href="#1-2-åº“æœ—æ•°çš„è®¾ç½®" class="headerlink" title="1.2 åº“æœ—æ•°çš„è®¾ç½®"></a>1.2 <strong>åº“æœ—æ•°çš„è®¾ç½®</strong></h3><ul><li>æ˜¾ç¤ºæ ¼å¼ Explicit Formulationï¼šé»˜è®¤æ˜¯ 1ï¼Œå¯¹äº 2 ç»´é—®é¢˜å¯é€‚å½“å¢åŠ åº“æœ—æ•°ï¼Œä½†ä¸è¦è¶…è¿‡ 2.0ã€‚å¦‚æœè®¾ç½®æ²¡æœ‰é—®é¢˜ï¼Œä½†æ˜¯è®¡ç®—å‘æ•£äº†ï¼Œæˆ–è€…æ®‹å·®ä¸Šå‡å¾—éå¸¸å¿«ï¼Œå°±å¿…é¡»é™ä½ Courant numberï¼Œå¯èƒ½éœ€è¦é™ä½åˆ° 0.5ï¼Œç”šè‡³ 0.1ã€‚ä½†å¦‚æœæ”¶æ•›æ€§å¾ˆå¥½ï¼Œå°±å¯ä»¥å¢åŠ  Courant numberã€‚</li><li>éšå¼æ ¼å¼ Implicit Formulationï¼šé»˜è®¤åº“æœ—æ•°ä¸º 5.0ã€‚é€šå¸¸å¯ä»¥ å¢åŠ åˆ° 10ã€20ã€100 ç”šè‡³æ›´é«˜ã€‚ä¸æ˜¾ç¤ºä¸€æ ·å¯æ ¹æ®æ”¶æ•›æƒ…å†µè¿›è¡Œæ›´æ”¹ã€‚</li></ul><blockquote><p>å¯¹äºéšå¼éå®šå¸¸æ ¼å¼ï¼šå¯¹äºä¸å¯å‹æµåŠ¨ï¼Œåœ¨æ¯ä¸ªæ—¶é—´æ­¥å†…ï¼Œä¸å¯å‹è§£å¿…é¡»è¿­ä»£ç›´è‡³æ”¶æ•›ã€‚</p><p>å¯¹äºæ˜¾å¼éå®šå¸¸æ ¼å¼ï¼šæ¯ä¸€ä¸ªè¿­ä»£å°±æ˜¯ä¸€ä¸ªæ—¶é—´æ­¥</p></blockquote><p>æ¯ä¸ªæ—¶é—´æ­¥å†…ç»“æœæ²¡æœ‰å¾—åˆ°æ”¶æ•›ï¼Œåˆ™å¾ˆæœ‰å¯èƒ½ä½ æ‰€å¾—åˆ°çš„ç»“æœæ˜¯ä¸çœŸå®çš„</p><h3 id="1-3-åº“æœ—æ•°æ¨è"><a href="#1-3-åº“æœ—æ•°æ¨è" class="headerlink" title="1.3 åº“æœ—æ•°æ¨è"></a>1.3 åº“æœ—æ•°æ¨è</h3><ul><li>Large Eddy Simulation(0.5-1)</li><li>Free Surface Flows(&lt;1)</li><li>Compressible Flows(depends on speed of sound)</li><li>Turbomachinery(&lt;80)</li><li>Explicit Time Stepping(&lt;1)</li></ul>]]></content>
    
    
    <categories>
      
      <category>æ¨¡æ‹Ÿ</category>
      
      <category>Fluent</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Fluent</tag>
      
      <tag>æ¨¡æ‹Ÿ</tag>
      
      <tag>å­¦ä¹ ç¬”è®°</tag>
      
      <tag>åº“æœ—æ•°</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>DPMé¢—ç²’æ¨¡å‹</title>
    <link href="/2024/07/26/029%20Fluent%20DPM%E6%A8%A1%E5%9E%8B/"/>
    <url>/2024/07/26/029%20Fluent%20DPM%E6%A8%A1%E5%9E%8B/</url>
    
    <content type="html"><![CDATA[<h1 id="1-å­¦ä¹ ç¬”è®°"><a href="#1-å­¦ä¹ ç¬”è®°" class="headerlink" title="1 å­¦ä¹ ç¬”è®°"></a>1 å­¦ä¹ ç¬”è®°</h1><h2 id="0ã€Fluent-é¢—ç²’æµ"><a href="#0ã€Fluent-é¢—ç²’æµ" class="headerlink" title="0ã€Fluent é¢—ç²’æµ"></a>0ã€Fluent é¢—ç²’æµ</h2><p>Fluent æœ‰ 3 ç§é¢—ç²’æ¨¡æ‹Ÿæ–¹æ³•</p><ol><li>æ¬§æ‹‰é¢—ç²’æµï¼ˆåŒæµä½“æ¨¡å‹ï¼‰ï¼šæŠŠé¢—ç²’å½“åšè¿ç»­ä»‹è´¨å¤„ç†ï¼Œä¼˜ç‚¹æ˜¯è®¡ç®—é‡å°ï¼Œä½†éœ€è¦æ›´å¤šçš„ç›¸äº’ä½œç”¨æ¨¡å‹ï¼Œæ¯”å¦‚é˜»åŠ›ç­‰ï¼Œå¤šç”¨äºæµåŒ–åºŠã€‚</li><li>DPM æ¨¡å‹ï¼ˆç¦»æ•£ç›¸æ¨¡å‹ï¼‰ï¼šDPM æ¨¡å‹ä¹‹é—´ä¸è€ƒè™‘ç¢°æ’ä¹Ÿä¸è€ƒè™‘ä½“ç§¯ç©ºé—´ï¼Œé€‚ç”¨äºæµä½“å ä¸»å¯¼ä½œç”¨çš„ï¼Œé¢—ç²’å æ¯”ä¸è¶…è¿‡ 10%ã€‚æ¨¡æ‹Ÿä¸€èˆ¬ç°å°˜ã€æ°”æº¶èƒ¶ç­‰å°é¢—ç²’çš„è¿åŠ¨ï¼Œä¹Ÿç»å¸¸é…åˆåŒ–å­¦ååº”ã€‚</li><li>DDPM æ¨¡å‹ï¼ˆç¨ å¯†ç¦»æ•£ç›¸æ¨¡å‹ï¼‰ï¼šDDPM æ˜¯ Dense Discrete Phase Model çš„ç¼©å†™ï¼Œæ˜¯ä¸“é—¨ç”¨æ¥æ¨¡æ‹Ÿä¾‹å¦‚æµåŒ–åºŠè¿™ç§ç¨ å¯†é¢—ç²’æµçš„æ¨¡å‹ï¼Œå¯ä»¥ç†è§£ä¸ºç®€åŒ–äº†çš„ DEMã€‚ä»–å’Œ DPM çš„åŒºåˆ«å°±æ˜¯è€ƒè™‘äº†<strong>ä½“ç§¯åˆ†æ•°</strong>ï¼Œæ˜¯æœ‰å­”éš™ç‡çš„ï¼Œåå¤„ç†ä¸­èƒ½å¤ŸæŸ¥çœ‹é¢—ç²’æ‰€å çš„ä½“ç§¯åˆ†æ•°ï¼Œåœ¨ç›¸é—´ç›¸äº’ä½œç”¨åŠ›ä¹Ÿå¯ä»¥è€ƒè™‘é¢—ç²’ä¹‹é—´çš„ç¢°æ’ï¼Œä½†æ˜¯å¯¹äºç¢°æ’çš„è®¡ç®—æ˜¯è¿›è¡Œäº†æ¨¡åŒ–çš„ï¼Œä¸æ˜¯ç”¨è½¯çƒæ¨¡å‹è®¡ç®—çœŸå®çš„ç¢°æ’è¿‡ç¨‹ï¼Œé¢—ç²’é—´çš„ç¢°æ’äº§ç”Ÿçš„åŠ›æ˜¯æ ¹æ® KTGF ä¸‹é¢—ç²’çš„ stress tensori è®¡ç®—å¾—åˆ°ã€‚</li><li>DEM ç¦»æ•£å…ƒæ¨¡å‹ï¼šå¯è€ƒè™‘é¢—ç²’çš„çœŸå®ç¢°æ’ï¼Œå¯é‡‡ç”¨å¼¹æ€§ å¼¹æ€§é˜»å°¼ èµ«å…¹ èµ«å…¹é˜»å°¼ç¢°æ’æ¨¡å‹ï¼Œä¸€èˆ¬ DDPM+DEM ä¸€èµ·ä½¿ç”¨</li></ol><h2 id="1ã€è€¦åˆ"><a href="#1ã€è€¦åˆ" class="headerlink" title="1ã€è€¦åˆ"></a>1ã€è€¦åˆ</h2><ol><li>å•å‘è€¦åˆ</li><li>åŒå‘è€¦åˆ</li></ol><h3 id="1-1-å•å‘è€¦åˆ"><a href="#1-1-å•å‘è€¦åˆ" class="headerlink" title="1.1 å•å‘è€¦åˆ"></a>1.1 å•å‘è€¦åˆ</h3><p>å•å‘è€¦åˆï¼šç¦»æ•£ç›¸å¯¹è¿ç»­ç›¸å½±å“å¾ˆå°æ— éœ€è®¾ç½®ç›¸é—´è€¦åˆ.</p><p>å•å‘è€¦åˆé—®é¢˜ï¼šåªè¦åœ¨åŠ å…¥ç¦»æ•£ç›¸ç²’å­å‰è®¡ç®—è¿ç»­ç›¸æµåœºç›´è‡³æ”¶æ•›ï¼Œç„¶åæ‰“å¼€ç¦»æ•£ç›¸æ¨¡å‹ï¼ŒåŠ å…¥ç¦»æ•£ç›¸ç²’å­ï¼Œæ— éœ€è¿­ä»£è®¡ç®—å› ä¸ºå·²ç»è®¡ç®—æ”¶æ•›æµåœºç¨³å®šäº†.</p><p>è¿ç»­ç›¸ï¼ˆä¹Ÿå°±æ˜¯æµåœºï¼‰è®¡ç®—å¯ä»¥æ˜¯ steadyï¼ˆå®šå¸¸&#x2F;ç¨³æ€æµåœºï¼‰ä¹Ÿå¯ä»¥æ˜¯ unsteadyï¼ˆéå®šå¸¸&#x2F;ç¬æ€&#x2F;transientï¼‰ã€‚è¿™ä¸¤ç§è¿ç»­ç›¸çš„æµåœºä¸­ç¦»æ•£ç›¸è®¡ç®—éƒ½å¯ä»¥ç”¨éè€¦åˆç²’å­è®¡ç®—ã€‚</p><p>å•ç›¸è€¦åˆè®¡ç®—ä¸è€ƒè™‘ç¦»æ•£ç›¸å¯¹è¿ç»­ç›¸çš„å½±å“ï¼Œç¦»æ•£ç›¸çš„åŠ¨é‡ã€è´¨é‡ã€æ¸©åº¦ç­‰ä¿¡æ¯ä¸ä¼šåé¦ˆç»™æµåœºï¼Œå› ä¸ºæµåœºäº‹å…ˆå·²ç»è®¡ç®—æ”¶æ•›äº†ï¼Œä¸èƒ½å˜äº†ï¼Œå½“å¼€ DPM æ—¶å€™ï¼Œå°±æ˜¯é€šè¿‡æµåœºçš„ä¿¡æ¯è®¡ç®— DPM äº†ï¼Œç®€å•è¯´æ˜¯æµåœºäº§ç”Ÿ DPM åœºçš„æ¦‚å¿µã€‚</p><h3 id="1-2-åŒå‘è€¦åˆ"><a href="#1-2-åŒå‘è€¦åˆ" class="headerlink" title="1.2 åŒå‘è€¦åˆ"></a>1.2 åŒå‘è€¦åˆ</h3><p>è€¦åˆè®¡ç®—çš„æ­¥éª¤ï¼š</p><ol><li>æ±‚è§£è¿ç»­ç›¸æµåœºï¼ˆåœ¨å¼•å…¥ç¦»æ•£ç›¸ä¹‹å‰ï¼‰ï¼‰</li><li>é€šè¿‡è®¡ç®—æ¯ä¸ªç¦»æ•£ç›¸æ³¨å…¥çš„ç²’å­è½¨è¿¹æ¥å¼•å…¥ç¦»æ•£ç›¸ã€‚</li><li>ä½¿ç”¨å…ˆå‰ç²’å­è®¡ç®—æœŸé—´ç¡®å®šçš„åŠ¨é‡ã€çƒ­é‡å’Œè´¨é‡çš„ç›¸é—´äº¤æ¢ï¼Œé‡æ–°è®¡ç®—è¿ç»­ç›¸æµã€‚</li><li>é‡æ–°è®¡ç®—ä¿®æ”¹çš„è¿ç»­ç›¸æµåœºä¸­çš„ç¦»æ•£ç›¸è½¨è¿¹ã€‚</li><li>é‡å¤å‰ä¸¤ä¸ªæ­¥éª¤ï¼Œç›´åˆ°è·å¾—æ”¶æ•›è§£ï¼Œå…¶ä¸­è¿ç»­ç›¸æµåœºå’Œç¦»æ•£ç›¸é¢—ç²’è½¨è¿¹åœ¨æ¯æ¬¡é™„åŠ è®¡ç®—<br>ä¸­éƒ½ä¿æŒä¸å˜ã€‚</li></ol><h2 id="2ã€DPM-è¾¹ç•Œæ¡ä»¶"><a href="#2ã€DPM-è¾¹ç•Œæ¡ä»¶" class="headerlink" title="2ã€DPM è¾¹ç•Œæ¡ä»¶"></a>2ã€DPM è¾¹ç•Œæ¡ä»¶</h2><ol><li>escape é€ƒé€¸ï¼šé¢—ç²’ç¦»å¼€æµä½“åŸŸ</li><li>trapï¼šè¢«æ•è·å¸æ”¶</li><li>reflectï¼šåå¼¹ï¼Œä¸€èˆ¬ç”¨äºå£é¢ä¸Šï¼Œéœ€è¦æŒ‡å®šåå°„ç³»æ•°</li><li>wall jetï¼šå£é¢å°„æµï¼Œé¢—ç²’è§¦ç¢°å£é¢åä¼šåˆ†æˆæ›´å°çš„é¢—ç²’ç»§ç»­æµåŠ¨</li><li>wall filmï¼šéœ€è¦æ‰“å¼€å£é¢æ¶²è†œæ¨¡å‹ï¼Œä¸ wall jet ç›¸ä¼¼</li><li>reinjectï¼šå½“é¢—ç²’è¾¾åˆ°æŸä¸ªè®¡ç®—åŸŸè¾¹ç•Œæ—¶ï¼Œå°†ç²’å­é‡æ–°å¼•å…¥åŸŸã€‚</li></ol><p><img src="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/202308291658664.png" alt="image-20230829165815567"></p><h2 id="3ã€ç²’å­æ–¹å‘"><a href="#3ã€ç²’å­æ–¹å‘" class="headerlink" title="3ã€ç²’å­æ–¹å‘"></a>3ã€ç²’å­æ–¹å‘</h2><p>Inject Using Face Normal Directionï¼šå¼€å¯è¿™ä¸ªé€‰é¡¹åï¼Œç²’å­åœ¨å…¥å°„æ—¶çš„é€Ÿåº¦æ–¹å‘å°†ä¸é¢æ³•å‘ä¸€è‡´ï¼Œè¿™æ ·å°±æ— éœ€å®šä¹‰é¢—ç²’åœ¨ xã€yã€z ä¸‰ä¸ªæ–¹å‘çš„é€Ÿåº¦åˆ†é‡ï¼Œåªéœ€è¦å®šä¹‰é€Ÿåº¦å€¼ï¼›<br><img src="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/202309020913147.png" alt="image.png"></p><h2 id="4ã€ç²’å­å°„å…¥ç±»å‹"><a href="#4ã€ç²’å­å°„å…¥ç±»å‹" class="headerlink" title="4ã€ç²’å­å°„å…¥ç±»å‹"></a>4ã€ç²’å­å°„å…¥ç±»å‹</h2><p><a href="https://zhuanlan.zhihu.com/p/532180420">https://zhuanlan.zhihu.com/p/532180420</a><br><img src="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/202309020914955.png" alt="image.png"></p><h2 id="5ã€é¢—ç²’ç¢°æ’"><a href="#5ã€é¢—ç²’ç¢°æ’" class="headerlink" title="5ã€é¢—ç²’ç¢°æ’"></a>5ã€é¢—ç²’ç¢°æ’</h2><p><a href="https://zhuanlan.zhihu.com/p/621078742">https://zhuanlan.zhihu.com/p/621078742</a></p><h2 id="6ã€é¢—ç²’å…¶ä»–ä½œç”¨"><a href="#6ã€é¢—ç²’å…¶ä»–ä½œç”¨" class="headerlink" title="6ã€é¢—ç²’å…¶ä»–ä½œç”¨"></a>6ã€é¢—ç²’å…¶ä»–ä½œç”¨</h2><h1 id="2-æ¡ˆä¾‹ï¼šé¢—ç²’æ…æ‹Œ"><a href="#2-æ¡ˆä¾‹ï¼šé¢—ç²’æ…æ‹Œ" class="headerlink" title="2 æ¡ˆä¾‹ï¼šé¢—ç²’æ…æ‹Œ"></a>2 æ¡ˆä¾‹ï¼šé¢—ç²’æ…æ‹Œ</h1><h2 id="1ã€é‡åŠ›é¡¹"><a href="#1ã€é‡åŠ›é¡¹" class="headerlink" title="1ã€é‡åŠ›é¡¹"></a>1ã€é‡åŠ›é¡¹</h2><h2 id="2ã€ç¦»æ•£ç›¸æ¨¡å‹"><a href="#2ã€ç¦»æ•£ç›¸æ¨¡å‹" class="headerlink" title="2ã€ç¦»æ•£ç›¸æ¨¡å‹"></a>2ã€ç¦»æ•£ç›¸æ¨¡å‹</h2><p>æ‰“å¼€ã€äº¤äº’ã€‘-ã€ä¸è¿ç»­ç›¸çš„äº¤äº’ã€‘</p><ul><li>æ¯æ¬¡æµåŠ¨è¿­ä»£æ›´æ–° DPM æºé¡¹ï¼šæ„æ€æ˜¯æ¯ 10 ä¸ªæµåŠ¨è¿­ä»£æ›´æ–°ä¸€ä¸‹é¢—ç²’çš„æ•°é‡å˜åŒ–ï¼Œè¿™ä¸ªéƒ½ç»™ä»–å‹¾é€‰ä¸Šï¼Œé¢—ç²’ç ´ç¢ï¼Œè¢«å£é¢æ•è·ï¼Œæ›´æ”¹è´¨é‡æµé‡éƒ½ä¼šä½¿æ•°é‡å‘ç”Ÿå˜åŒ–ã€‚</li><li>DPM è¿­ä»£é—´éš”ï¼šè¿ç»­ç›¸æ¯æ¬¡è¿­ä»£ 10 æ­¥ï¼Œå¼€å§‹è¿›è¡Œç¦»æ•£ç›¸çš„è®¡ç®—ã€‚ï¼ˆä¸æ”¶æ•›å¯è°ƒå°ï¼‰</li><li>é¢—ç²’æ—¶æ—¶é—´æ­¥å¤§å°ï¼šå¦‚ä¸º 0.001s ä»£è¡¨é¢—ç²’ç›¸æ¯ 0.001s è¿½è¸ªä¸€æ¬¡ï¼Œä½†æ˜¯ï¼Œåœ¨å¼€å§‹è®¡ç®—é˜¶æ®µï¼Œç²’å­ä¸€è¾¹é‡Šæ”¾ä¸€è¾¹è¿½è¸ªï¼Œé‡Šæ”¾å®Œæˆåä¹Ÿåœ¨è¿½è¸ªã€‚ï¼ˆä¸æ”¶æ•›å¯è°ƒå°ï¼‰</li><li>æœ€å¤§æ­¥æ•°å’Œæ­¥é•¿å› å­ï¼šMax number of steps å’Œ Specify Length Scaleï¼Œæ¯ä¸€æ¬¡è½¨è¿¹è·Ÿè¸ªçš„æœ€å¤§ç§¯åˆ†æ—¶é—´æ­¥æ•°å’Œç§¯åˆ†é•¿åº¦æ ‡å°ºï¼Œéƒ½æ˜¯ä¸ºäº†ç¡®å®šç§¯åˆ†æ—¶é—´æ­¥é•¿ âˆ†tã€‚é€‰æ‹© Specify Length Scale é€‰é¡¹ä»¥ç¡®å®šç§¯åˆ†æ—¶é—´æ­¥é•¿æ—¶ï¼Œç§¯åˆ†æ—¶é—´æ­¥é•¿çº¦ç­‰äºæ‰€ç»™çš„é•¿åº¦å°ºåº¦ï¼ˆLength Scaleï¼‰é™¤ä»¥é¢—ç²’ç›¸å¯¹äºè¿ç»­ç›¸çš„é€Ÿåº¦å¤§å°ã€‚è€Œç§¯åˆ†æ­¥æ•°çº¦ç­‰äºé¢—ç²’æ—¶é—´æ­¥é•¿ï¼ˆParticle Time Step Sizeï¼‰é™¤ä»¥ç§¯åˆ†æ—¶é—´æ­¥é•¿ï¼Œä½†ä»¥ Max Number of Steps ä¸ºé™ï¼ˆå› æ­¤ï¼šç§¯åˆ†æ—¶é—´æ­¥é•¿ âˆ†t&lt;é¢—ç²’æ—¶é—´æ­¥é•¿ Particle Time Step Sizeâˆ†tpï¼‰ã€‚æ‰€ä»¥ï¼Œå¦‚ Max Number of Steps ä¸å¤Ÿå¤§ï¼Œåˆ™æœªåˆ°é¢—ç²’æ—¶é—´æ­¥é•¿å°±ç»“æŸä¸€ä¸ªé¢—ç²’æ—¶é—´æ­¥ï¼Œå¹¶è½¬å…¥ä¸‹ä¸€ä¸ªé¢—ç²’æ—¶é—´æ­¥ï¼Œå› è€Œé¢—ç²’ç»ˆäº†çŠ¶æ€æŠ¥å‘Šä¸º incompleteã€‚</li></ul><p><img src="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/202308291040314.png" alt="image-20230829104022213"></p><p>è®¾ç½®å–·å°„æº</p><p><img src="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/202308291041115.png" alt="image-20230829104130041"></p><h2 id="3ã€è¿½è¸ªé¢—ç²’è½¨è¿¹"><a href="#3ã€è¿½è¸ªé¢—ç²’è½¨è¿¹" class="headerlink" title="3ã€è¿½è¸ªé¢—ç²’è½¨è¿¹"></a>3ã€è¿½è¸ªé¢—ç²’è½¨è¿¹</h2><p>åˆ›å»ºé¢—ç²’è½¨è¿¹</p><p><img src="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/202308291541393.png" alt="image-20230829154138243"></p><p>åˆ›å»ºé¢—ç²’åœºæ™¯å¹¶ä¿å­˜</p><p><img src="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/202308291542031.png" alt="image-20230829154239921"></p><p>åˆ›å»ºè§£å†³æ–¹æ¡ˆåŠ¨ç”»</p><p><img src="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/202308291543657.png" alt="image-20230829154309557"></p><h2 id="4ã€å¯¼å‡ºé¢—ç²’æ•°æ®"><a href="#4ã€å¯¼å‡ºé¢—ç²’æ•°æ®" class="headerlink" title="4ã€å¯¼å‡ºé¢—ç²’æ•°æ®"></a>4ã€å¯¼å‡ºé¢—ç²’æ•°æ®</h2><p><img src="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/202308291543784.png" alt="image-20230829154336663"></p><h1 id="3-å–·å¤´æ¨¡æ‹Ÿ"><a href="#3-å–·å¤´æ¨¡æ‹Ÿ" class="headerlink" title="3 å–·å¤´æ¨¡æ‹Ÿ"></a>3 å–·å¤´æ¨¡æ‹Ÿ</h1><h2 id="ç¢³é…¸æ°¢é’ æ€§è´¨"><a href="#ç¢³é…¸æ°¢é’ æ€§è´¨" class="headerlink" title="ç¢³é…¸æ°¢é’ æ€§è´¨"></a>ç¢³é…¸æ°¢é’ æ€§è´¨</h2><p>å¯†åº¦ï¼š2.16 g&#x2F;mL<br>ç›´å¾„ï¼šåœ¨ 0.1-10mm ä¹‹é—´</p><h2 id="20230829"><a href="#20230829" class="headerlink" title="20230829"></a>20230829</h2><p>ä½¿ç”¨ä¹‹å‰çš„ç½‘æ ¼ï¼Œåªæœ‰å–·å˜´å’ŒåœºåŸŸï¼Œå‡ºå£ 5MPa å’Œå‡ºå£ 2MPa éƒ½å‘æ•£ã€‚<br>æƒ³åˆ°æ˜¨å¤©å°è¯•çš„å°†å‡ºå£éƒ½æ”¹ä¸ºå‹åŠ›å‡ºå£ï¼ˆåŒ…æ‹¬è®¡ç®—åŸŸçš„ edgeï¼‰è®¡ç®—è¾ƒå¥½ï¼Œä»Šå¤©å†è¯•ä¸€ä¸‹ï¼Œä½†è¿˜æ˜¯å‘æ•£ã€‚<br>ä½¿ç”¨æ˜¨å¤©çš„è®¾ç½®å†è·‘ä¸€è¾¹ï¼Œåªä¸è¿‡åŠ å…¥ç¦»æ•£ç›¸ã€‚ä½†æ˜¯æ˜¨å¤©åŠ å…¥äº† VOF æ¨¡å‹ï¼Œç°åœ¨å…³é—­äº†ã€‚<br><strong>æˆåŠŸè®¾ç½®</strong><br>1ã€ç¬æ€<br>2ã€èƒ½é‡<br>3ã€æ ‡å‡† k-eï¼Œæ ‡å‡†å£é¢<br>4ã€ç¦»æ•£ç›¸æ¨¡å‹ï¼š<br><img src="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/202308291913883.png" alt="image.png"><br>ç›´å¾„ 0.0001ï¼Œæ¸©åº¦ 300Kï¼Œåœæ­¢æ—¶é—´ 1e-5ï¼Œæ€»æµé‡ 100000<br><img src="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/202308291913817.png" alt="image.png"><br>5ã€ææ–™<br><img src="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/202308291914553.png" alt="image.png"><br>6ã€è¾¹ç•Œæ¡ä»¶<br><img src="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/202308291915645.png" alt="image.png"><br>å‹åŠ›è¿›å£ï¼ˆecapseï¼‰<br><img src="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/202308291916777.png" alt="image.png"><br>å‹åŠ›å‡ºå£ edgeï¼ˆreflectï¼‰<br><img src="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/202308291916237.png" alt="image.png"><br><img src="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/202308291917062.png" alt="image.png"><br>7ã€æ–¹æ³•<br>PISO æ–¹æ³•<br><img src="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/202308291917948.png" alt="image.png"><br>8ã€æ®‹å·®<br>1e-06<br>9ã€æ­¥é•¿<br>æ—¶é—´æ­¥é•¿ 0.01<br>æ—¶é—´æ­¥æ•° 100</p><h2 id="20230905"><a href="#20230905" class="headerlink" title="20230905"></a>20230905</h2><p>æˆªæ­¢ä»Šæ—¥ï¼Œåœ¨é›ªç ”å¸ˆå§ç”µè„‘ä¸Šå·²ç»æ¨¡æ‹Ÿå®Œæˆæ¸æ‰©å–·å¤´ 2MPa å’Œ 5MPaï¼Œåœ¨è‡ªå·±ç”µè„‘ä¸Šæ¸æ‰©å–·å¤´ï¼ˆå¸¦å­”ï¼‰2MPaï¼Œæ­¥é•¿ 1e-6ï¼Œå…± 1000 æ­¥ã€‚ä½†æ˜¯æ¨¡æ‹Ÿå‡ºçš„ç²’å­é€Ÿåº¦å¤ªå¤§ï¼Œç°åœ¨æƒ³è¦ä½¿ç”¨ udf æ”¹å˜å‹åŠ›è¾¹ç•Œæ¡ä»¶ï¼Œå‘ˆç°ä¸€ä¸ªé€’å‡çš„è¶‹åŠ¿ï¼Œæ°”ä½“ä½¿ç”¨çœŸå®æ°”ä½“çŠ¶æ€æ–¹ç¨‹è¿›è¡Œæ¨¡æ‹Ÿï¼Œå¯†åº¦åŸºæ±‚è§£å™¨ã€‚</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&quot;udf.h&quot;</span></span><br>DEFINE_PROFILE(inlet_x,thread,index)<br>&#123;<br>real y,v0,h0;<br>real x[ND_ND];<br><span class="hljs-type">face_t</span> f;<br>real flow_time = CURRENT_TIME;  <span class="hljs-comment">// è·å–å½“å‰æ¨¡æ‹Ÿçš„æ—¶é—´</span><br>begin_f_loop(f,thread)<br>&#123;<br><span class="hljs-keyword">if</span>(flow_time &gt;=<span class="hljs-number">0</span> &amp;&amp; flow_time &lt;= <span class="hljs-number">0.05</span> )<br>F_PROFILE(f,thread,index) = <span class="hljs-number">2000000</span> - <span class="hljs-number">40000000</span> * flow_time;<br><span class="hljs-keyword">else</span><br>F_PROFILE(f,thread,index) = <span class="hljs-number">0</span>;<br>&#125;<br>end_f_loop(f,thread)<br>&#125;<br></code></pre></td></tr></table></figure><p>ä¸ºäº†èƒ½ä½¿ç²’å­å–·å‡ºååˆ†æ•£å‡åŒ€ï¼Œå…±è®¾è®¡ 6 ç§å–·å¤´ç»“æ„ï¼Œåˆ†åˆ«ä¸ºæ¸æ‰©å–·å¤´ã€æ¸æ‰©å–·å¤´ï¼ˆå¸¦å­”ï¼‰ã€æ‹‰æ³•å°”å–·å¤´ã€æ‹‰æ³•å°”å–·å¤´ï¼ˆå¸¦å­”ï¼‰ã€è˜‘è‡å–·å¤´å’Œè˜‘è‡å–·å¤´ï¼ˆå¸¦å­”ï¼‰ã€‚<br>å–·å˜´å°ºå¯¸ï¼š</p><p>å–·å˜´ç½‘æ ¼ï¼š</p><h3 id="ç©ºæ°”"><a href="#ç©ºæ°”" class="headerlink" title="ç©ºæ°”"></a>ç©ºæ°”</h3><p>ä½¿ç”¨é«˜å‹ç©ºæ°”ä½œä¸ºé©±åŠ¨æ°”å……å…¥å–·ç²‰ç½ä¸­ï¼Œç©ºæ°”æºå¸¦ç²’å­ä»¥ 2MPa å’Œ 5MPa çš„å‹åŠ›å–·å‡ºã€‚å‹åŠ›ä»¥ 40MPa&#x2F;s é€Ÿåº¦è¡°å‡ï¼Œåœ¨ 50ms æ—¶è¡°å‡ä¸º 0ã€‚<br>ä½¿ç”¨ç†æƒ³æ°”ä½“ï¼Œå¯†åº¦å˜åŒ–ã€‚</p><h3 id="ç²’å­"><a href="#ç²’å­" class="headerlink" title="ç²’å­"></a>ç²’å­</h3><p>æŠ‘çˆ†å‰‚ç²’å­é€‰ç”¨ NaHCO3 ç²’å­ï¼Œå¯†åº¦ä¸º 2.16g&#x2F;cmÂ³ï¼Œæ¯”çƒ­ä¸º 2170J&#x2F;(kg K)<br>ç²’å­çš„ç›´å¾„åˆ†å¸ƒåœ¨ 1~100um èŒƒå›´å†…ï¼Œå¹³å‡ç›´å¾„ä¸º 50umï¼Œå…± 10 ç§ç²’å­å¤§å°ã€‚<br>ç²’å­æ€»è´¨é‡ 100gï¼Œåœ¨ 50ms å†…å–·å®Œã€‚å³äº§ç”Ÿé€Ÿç‡ä¸º 2kg&#x2F;sã€‚ï¼ˆå‡è®¾é˜€é—¨ 50ms æ‰“å¼€ï¼‰<br>ç²’å­é€Ÿåº¦ä¸º 0.1m&#x2F;s ä»å£é¢å‡ºæ¥<br>åŒå‘è€¦åˆï¼Œè€ƒè™‘ç²’å­çš„ç¢°æ’</p><h3 id="æ±‚è§£å™¨è®¾ç½®ï¼š"><a href="#æ±‚è§£å™¨è®¾ç½®ï¼š" class="headerlink" title="æ±‚è§£å™¨è®¾ç½®ï¼š"></a>æ±‚è§£å™¨è®¾ç½®ï¼š</h3><p>å› å–·å‡ºé€Ÿåº¦è¾ƒå¤§ï¼Œæ±‚è§£å™¨é€‰ç”¨å¯†åº¦åŸºã€‚</p>]]></content>
    
    
    <categories>
      
      <category>æ¨¡æ‹Ÿ</category>
      
      <category>Fluent</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Fluent</tag>
      
      <tag>æ¨¡æ‹Ÿ</tag>
      
      <tag>å­¦ä¹ ç¬”è®°</tag>
      
      <tag>DPM</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>æ·±åº¦å­¦ä¹ å…¥é—¨</title>
    <link href="/2024/06/30/028%20%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E5%85%A5%E9%97%A8/"/>
    <url>/2024/06/30/028%20%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E5%85%A5%E9%97%A8/</url>
    
    <content type="html"><![CDATA[<h1 id="åŸºæœ¬é…ç½®"><a href="#åŸºæœ¬é…ç½®" class="headerlink" title="åŸºæœ¬é…ç½®"></a>åŸºæœ¬é…ç½®</h1><p><a href="https://github.com/baiqinglun/pytorch_learning.git">github</a></p><p><a href="https://www.bilibili.com/video/BV1Z8411R7PH/?spm_id_from=333.788&vd_source=33b50a4dd201d7564e6e63d321809ce9">å­¦ä¹ è§†é¢‘åœ°å€</a></p><h2 id="ç¯å¢ƒé…ç½®"><a href="#ç¯å¢ƒé…ç½®" class="headerlink" title="ç¯å¢ƒé…ç½®"></a>ç¯å¢ƒé…ç½®</h2><ol><li>åœ¨ anaconda ä¸­æ–°å»ºè™šæ‹Ÿç¯å¢ƒ<code>conda create -n Pytorch python=3.9</code></li><li>æ¿€æ´»è™šæ‹Ÿç¯å¢ƒå¹¶å®‰è£… numpyã€matplotlibã€pandas åº“</li><li>åœ¨ç»ˆç«¯å‘½ä»¤è¡Œè¾“å…¥ï¼š<code>nvidia-smi</code>æŸ¥çœ‹ CUNDA ç‰ˆæœ¬ï¼Œåœ¨å®‰è£… pytorch æ—¶éœ€è¦æ³¨æ„ç‰ˆæœ¬ï¼šCONDA &gt; conda</li></ol><p><img src="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/202406301747100.png"></p><h2 id="æ›´æ”¹-jupyter-é»˜è®¤æ‰“å¼€ç›®å½•"><a href="#æ›´æ”¹-jupyter-é»˜è®¤æ‰“å¼€ç›®å½•" class="headerlink" title="æ›´æ”¹ jupyter é»˜è®¤æ‰“å¼€ç›®å½•"></a>æ›´æ”¹ jupyter é»˜è®¤æ‰“å¼€ç›®å½•</h2><ol><li>é¦–å…ˆä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ç”Ÿæˆ jupyter é…ç½®æ–‡ä»¶ï¼Œç”Ÿæˆçš„æ–‡ä»¶ä¸€èˆ¬åœ¨<code> C:\Users\ç”¨æˆ·å\.jupyter</code>æ–‡ä»¶å¤¹å†…</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">jupyter notebook --generate-config<br></code></pre></td></tr></table></figure><ol start="2"><li><p>æŸ¥æ‰¾è¯¥æ–‡ä»¶ä¸­çš„<code>c.NotebookApp.notebook_dir</code>æ›´æ”¹ä¸º<code>c.NotebookApp.notebook_dir = &#39;F:\Jupyter&#39;</code>å¹¶ä¿å­˜ï¼Œæ­¤æ—¶é»˜è®¤è·¯å¾„å°±æ›´æ”¹ä¸º<code>&#39;F:\Jupyter&#39;</code></p></li><li><p>ä¿®æ”¹ jupyter å¿«æ·æ–¹å¼çš„æ‰“å¼€æ–¹å¼ï¼Œåˆ é™¤åé¢çš„ç¯å¢ƒå˜é‡ï¼Œè‡³æ­¤ä¿®æ”¹æˆåŠŸã€‚</p></li></ol><p><img src="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/202406301822505.png"></p><h2 id="å°†-conda-è™šæ‹Ÿç¯å¢ƒå…³è”è‡³-jupyter"><a href="#å°†-conda-è™šæ‹Ÿç¯å¢ƒå…³è”è‡³-jupyter" class="headerlink" title="å°† conda è™šæ‹Ÿç¯å¢ƒå…³è”è‡³ jupyter"></a>å°† conda è™šæ‹Ÿç¯å¢ƒå…³è”è‡³ jupyter</h2><p>å®‰è£… ipykernel</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">conda activate pytorch<br>pip install ipykernel<br></code></pre></td></tr></table></figure><p>å¯¼å…¥</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">python -m ipykernel install --user --name=pytorch<br></code></pre></td></tr></table></figure><p><img src="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/202406301827885.png"></p><h2 id="æµ‹è¯•-conda-æ˜¯å¦å¯ç”¨"><a href="#æµ‹è¯•-conda-æ˜¯å¦å¯ç”¨" class="headerlink" title="æµ‹è¯• conda æ˜¯å¦å¯ç”¨"></a>æµ‹è¯• conda æ˜¯å¦å¯ç”¨</h2><p><img src="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/202406301828813.png"></p><h1 id="2ã€DNN-åŸºæœ¬åŸç†"><a href="#2ã€DNN-åŸºæœ¬åŸç†" class="headerlink" title="2ã€DNN åŸºæœ¬åŸç†"></a>2ã€DNN åŸºæœ¬åŸç†</h1><p>ä¸»è¦å¯åˆ†ä¸ºä»¥ä¸‹ 4 ä¸ªæ­¥éª¤ï¼š</p><ol><li>åˆ’åˆ†æ•°æ®é›†</li><li>è®­ç»ƒç½‘ç»œ</li><li>æµ‹è¯•ç½‘ç»œ</li><li>ä½¿ç”¨ç½‘ç»œ</li></ol><h2 id="2-1-åˆ’åˆ†æ•°æ®é›†"><a href="#2-1-åˆ’åˆ†æ•°æ®é›†" class="headerlink" title="2.1 åˆ’åˆ†æ•°æ®é›†"></a>2.1 åˆ’åˆ†æ•°æ®é›†</h2><p><img src="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/202406301841002.png"></p><p><img src="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/202406301841606.png" alt="ç¥ç»ç½‘ç»œçš„ç»“æ„"></p><p>è€ƒè™‘åˆ° Python åˆ—è¡¨ã€NumPy æ•°ç»„ä»¥åŠ PyTorch å¼ é‡éƒ½æ˜¯ä»ç´¢å¼•[0]å¼€å§‹ï¼Œå†åŠ ä¹‹è¾“å…¥å±‚æ²¡æœ‰å†…éƒ¨å‚æ•°ï¼ˆæƒé‡ Ï‰ ä¸åç½® bï¼‰ï¼Œæ‰€ä»¥ä¹ æƒ¯å°†è¾“å…¥å±‚ç§°ä¹‹ä¸ºç¬¬ 0 å±‚ã€‚</p><h2 id="2-2-è®­ç»ƒç½‘ç»œ"><a href="#2-2-è®­ç»ƒç½‘ç»œ" class="headerlink" title="2.2 è®­ç»ƒç½‘ç»œ"></a>2.2 è®­ç»ƒç½‘ç»œ</h2><p>ç¥ç»ç½‘ç»œçš„è®­ç»ƒè¿‡ç¨‹ï¼Œå°±æ˜¯ç»è¿‡å¾ˆå¤šæ¬¡å‰å‘ä¼ æ’­ä¸åå‘ä¼ æ’­çš„è½®å›ï¼Œæœ€ç»ˆä¸æ–­è°ƒæ•´å…¶å†…éƒ¨å‚æ•°ï¼ˆæƒé‡ Ï‰ ä¸åç½® bï¼‰ï¼Œä»¥æ‹Ÿåˆä»»æ„å¤æ‚å‡½æ•°çš„è¿‡ç¨‹ã€‚å†…éƒ¨å‚æ•°ä¸€å¼€å§‹æ˜¯éšæœºçš„ï¼ˆå¦‚ Xavier åˆå§‹å€¼ã€He åˆå§‹å€¼ï¼‰ï¼Œæœ€ç»ˆä¼šä¸æ–­ä¼˜åŒ–åˆ°æœ€ä½³ã€‚</p><p>ä¹ æƒ¯æŠŠå†…éƒ¨å‚æ•°ç§°ä¸ºå‚æ•°ï¼Œå¤–éƒ¨å‚æ•°ç§°ä¸ºè¶…å‚æ•°ã€‚</p><p>ï¼ˆ1ï¼‰å‰å‘ä¼ æ’­</p><p>å°†å•ä¸ªæ ·æœ¬çš„ 3 ä¸ªè¾“å…¥ç‰¹å¾é€å…¥ç¥ç»ç½‘ç»œçš„è¾“å…¥å±‚åï¼Œç¥ç»ç½‘ç»œä¼šé€å±‚è®¡ç®—åˆ°è¾“å‡ºå±‚ï¼Œæœ€ç»ˆå¾—åˆ°ç¥ç»ç½‘ç»œé¢„æµ‹çš„ 3 ä¸ªè¾“å‡ºç‰¹å¾ã€‚</p><p>è¯¥ç¥ç»å…ƒèŠ‚ç‚¹çš„è®¡ç®—è¿‡ç¨‹ä¸º$y&#x3D;\omega_1x_1+\omega_2x_2+\omega_3x_3+b$ã€‚ä½ å¯ä»¥ç†è§£ä¸ºï¼Œæ¯ä¸€æ ¹<br>çº¿å°±æ˜¯ä¸€ä¸ªæƒé‡ Ï‰ï¼Œæ¯ä¸€ä¸ªç¥ç»å…ƒèŠ‚ç‚¹ä¹Ÿéƒ½æœ‰å®ƒè‡ªå·±çš„åç½® bã€‚å½“ç„¶ï¼Œæ¯ä¸ªç¥ç»å…ƒèŠ‚ç‚¹åœ¨è®¡ç®—å®Œåï¼Œç”±äºè¿™ä¸ªæ–¹ç¨‹æ˜¯çº¿æ€§çš„ï¼Œå› æ­¤å¿…é¡»åœ¨å¤–é¢å¥—ä¸€ä¸ªéçº¿æ€§çš„å‡½æ•°ï¼š$y&#x3D;\sigma\left(\omega_1x_1+\omega_2x_2+\omega_3x_3+b\right)$ ï¼ŒÏƒ è¢«ç§°ä¸ºæ¿€æ´»å‡½æ•°ã€‚<strong>å¦‚æœä½ ä¸å¥—éçº¿æ€§å‡½æ•°ï¼Œé‚£ä¹ˆå³ä½¿ 10 å±‚çš„ç½‘ç»œï¼Œä¹Ÿå¯ä»¥ç”¨ 1 å±‚å°±æ‹Ÿåˆå‡ºåŒæ ·çš„æ–¹ç¨‹ã€‚</strong></p><p>ï¼ˆ2ï¼‰åå‘ä¼ æ’­</p><p>ç»è¿‡å‰å‘ä¼ æ’­ï¼Œç½‘ç»œä¼šæ ¹æ®å½“å‰çš„å†…éƒ¨å‚æ•°è®¡ç®—å‡ºè¾“å‡ºç‰¹å¾çš„é¢„æµ‹å€¼ã€‚ä¸ºè®¡ç®—é¢„æµ‹å€¼ä¸çœŸå®å€¼ä¹‹é—´çš„å·®è·ï¼Œéœ€è¦ä¸€ä¸ªæŸå¤±å‡½æ•°ã€‚</p><p>æŸå¤±å‡½æ•°è®¡ç®—å¥½åï¼Œé€å±‚é€€å›æ±‚æ¢¯åº¦ã€‚å³çœ‹æ¯ä¸€ä¸ªå†…éƒ¨å‚æ•°æ˜¯å˜å¤§è¿˜æ˜¯å˜å°ï¼Œæ‰ä¼šä½¿å¾—æŸå¤±å‡½æ•°å˜å°ã€‚è¿™æ ·å°±è¾¾åˆ°äº†ä¼˜åŒ–å†…éƒ¨å‚æ•°çš„ç›®çš„ã€‚</p><p>å…³é”®å‚æ•°ï¼šå¤–éƒ¨å‚æ•°å«å­¦ä¹ ç‡ã€‚å­¦ä¹ ç‡è¶Šå¤§ï¼Œå†…éƒ¨å‚æ•°çš„ä¼˜åŒ–è¶Šå¿«ï¼Œä½†è¿‡å¤§çš„å­¦ä¹ ç‡å¯èƒ½ä¼šä½¿æŸå¤±å‡½æ•°è¶Šè¿‡æœ€ä½ç‚¹ï¼Œå¹¶åœ¨è°·åº•åå¤æ¨ªè·³ã€‚</p><p>ï¼ˆ3ï¼‰batch_size</p><p>å‰å‘ä¼ æ’­ä¸åå‘ä¼ æ’­ä¸€æ¬¡æ—¶ï¼Œæœ‰ä¸‰ç§æƒ…å†µï¼š</p><ul><li>æ‰¹é‡æ¢¯åº¦ä¸‹é™ï¼ˆBatch Gradient Descentï¼ŒBGDï¼‰ï¼ŒæŠŠæ‰€æœ‰æ ·æœ¬ä¸€æ¬¡æ€§è¾“å…¥è¿›ç½‘ç»œï¼Œè¿™ç§æ–¹å¼è®¡ç®—é‡å¼€é”€å¾ˆå¤§ï¼Œé€Ÿåº¦ä¹Ÿå¾ˆæ…¢ã€‚</li><li>éšæœºæ¢¯åº¦ä¸‹é™ï¼ˆStochastic Gradient Descentï¼ŒSGDï¼‰ï¼Œæ¯æ¬¡åªæŠŠä¸€ä¸ªæ ·æœ¬è¾“å…¥è¿›ç½‘ç»œï¼Œæ¯è®¡ç®—ä¸€ä¸ªæ ·æœ¬å°±æ›´æ–°å‚æ•°ã€‚è¿™ç§æ–¹å¼è™½ç„¶é€Ÿåº¦æ¯”è¾ƒå¿«ï¼Œä½†æ˜¯æ”¶æ•›æ€§èƒ½å·®ï¼Œå¯èƒ½ä¼šåœ¨æœ€ä¼˜ç‚¹é™„è¿‘éœ‡è¡ï¼Œä¸¤æ¬¡å‚æ•°çš„æ›´æ–°ä¹Ÿæœ‰å¯èƒ½æŠµæ¶ˆã€‚</li><li>å°æ‰¹é‡æ¢¯åº¦ä¸‹é™ï¼ˆMini-Batch Gradient Decentï¼ŒMBGDï¼‰æ˜¯ä¸ºäº†ä¸­å’Œä¸Šé¢äºŒè€…è€Œç”Ÿï¼Œè¿™ç§åŠæ³•æŠŠæ ·æœ¬åˆ’åˆ†ä¸ºè‹¥å¹²ä¸ªæ‰¹ï¼ŒæŒ‰æ‰¹æ¥æ›´æ–°å‚æ•°ã€‚</li></ul><blockquote><p>PyTorch åªæ”¯æŒæ‰¹é‡ä¸å°æ‰¹é‡</p></blockquote><p>ï¼ˆ4ï¼‰epochs</p><p>1 ä¸ª epoch å°±æ˜¯æŒ‡å…¨éƒ¨æ ·æœ¬è¿›è¡Œ 1 æ¬¡å‰å‘ä¼ æ’­ä¸åå‘ä¼ æ’­ã€‚</p><p>å‡è®¾æœ‰ 10240 ä¸ªè®­ç»ƒæ ·æœ¬ï¼Œbatch_size æ˜¯ 1024ï¼Œepochs æ˜¯ 5ã€‚é‚£ä¹ˆï¼š</p><ul><li>å…¨éƒ¨æ ·æœ¬å°†è¿›è¡Œ 5 æ¬¡å‰å‘ä¼ æ’­ä¸åå‘ä¼ æ’­ï¼›</li><li>1 ä¸ª epochï¼Œå°†å‘ç”Ÿ 10 æ¬¡ï¼ˆ10240x1024ï¼‰å‰å‘ä¼ æ’­ä¸åå‘ä¼ æ’­ï¼›</li><li>ä¸€å…±å‘ç”Ÿ 50 æ¬¡ï¼ˆ10ï‚´5ï¼‰å‰å‘ä¼ æ’­å’Œåå‘ä¼ æ’­ã€‚</li></ul><h2 id="2-3-æµ‹è¯•ç½‘ç»œ"><a href="#2-3-æµ‹è¯•ç½‘ç»œ" class="headerlink" title="2.3 æµ‹è¯•ç½‘ç»œ"></a>2.3 æµ‹è¯•ç½‘ç»œ</h2><p>ç›®çš„ï¼šé˜²æ­¢è¿‡æ‹Ÿåˆã€‚<br>è¿‡æ‹Ÿåˆï¼šç½‘ç»œä¼˜åŒ–å¥½çš„å†…éƒ¨å‚æ•°æ”¯é˜Ÿæœ¬è®­ç»ƒæ ·æœ¬æœ‰æ•ˆã€‚</p><p>æµ‹è¯•é›†æ—¶ï¼Œåªéœ€è¦ä¸€æ¬¡å‰å‘ä¼ æ’­ã€‚</p><p><img src="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/202406301948453.png"></p><h2 id="2-4-ä½¿ç”¨ç½‘ç»œ"><a href="#2-4-ä½¿ç”¨ç½‘ç»œ" class="headerlink" title="2.4 ä½¿ç”¨ç½‘ç»œ"></a>2.4 ä½¿ç”¨ç½‘ç»œ</h2><p>ç›´æ¥å°†æ ·æœ¬è¿›è¡Œ 1 æ¬¡å‰å‘ä¼ æ’­ã€‚</p><h1 id="3ã€DNN-çš„å®ç°"><a href="#3ã€DNN-çš„å®ç°" class="headerlink" title="3ã€DNN çš„å®ç°"></a>3ã€DNN çš„å®ç°</h1><h2 id="3-1-åˆ¶ä½œæ•°æ®é›†"><a href="#3-1-åˆ¶ä½œæ•°æ®é›†" class="headerlink" title="3.1 åˆ¶ä½œæ•°æ®é›†"></a>3.1 åˆ¶ä½œæ•°æ®é›†</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> torch<br><span class="hljs-keyword">import</span> torch.nn <span class="hljs-keyword">as</span> nn<br><span class="hljs-keyword">import</span> matplotlib.pyplot <span class="hljs-keyword">as</span> plt<br><br><span class="hljs-comment"># å±•ç¤ºé«˜æ¸…å›¾</span><br><span class="hljs-keyword">from</span> matplotlib_inline <span class="hljs-keyword">import</span> backend_inline<br>backend_inline.set_matplotlib_formats(<span class="hljs-string">&#x27;svg&#x27;</span>)<br><br>X1 = torch.rand(<span class="hljs-number">10000</span>,<span class="hljs-number">1</span>) <span class="hljs-comment"># è¾“å…¥ç‰¹å¾1</span><br>X2 = torch.rand(<span class="hljs-number">10000</span>,<span class="hljs-number">1</span>) <span class="hljs-comment"># è¾“å…¥ç‰¹å¾2</span><br>X3 = torch.rand(<span class="hljs-number">10000</span>,<span class="hljs-number">1</span>) <span class="hljs-comment"># è¾“å…¥ç‰¹å¾3</span><br><br>Y1 = ( (X1+X2+X3)&lt;<span class="hljs-number">1</span> ).<span class="hljs-built_in">float</span>() <span class="hljs-comment"># è¾“å‡ºç‰¹å¾1</span><br>Y2 = ( (<span class="hljs-number">1</span>&lt;(X1+X2+X3)) &amp; ((X1+X2+X3)&lt;<span class="hljs-number">2</span>) ).<span class="hljs-built_in">float</span>() <span class="hljs-comment"># è¾“å‡ºç‰¹å¾2</span><br>Y3 = ( (X1+X2+X3)&gt;<span class="hljs-number">2</span> ).<span class="hljs-built_in">float</span>() <span class="hljs-comment"># è¾“å‡ºç‰¹å¾3</span><br>Data = torch.cat([X1,X2,X3,Y1,Y2,Y3],axis=<span class="hljs-number">1</span>) <span class="hljs-comment"># æ•´åˆæ•°æ®é›†</span><br>Data = Data.to(<span class="hljs-string">&#x27;cuda:0&#x27;</span>) <span class="hljs-comment"># æŠŠæ•°æ®é›†æ¬åˆ°GPU ä¸Š</span><br><br><span class="hljs-comment"># åˆ’åˆ†è®­ç»ƒé›†ä¸æµ‹è¯•é›†</span><br>train_size = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">len</span>(Data) * <span class="hljs-number">0.7</span>) <span class="hljs-comment"># è®­ç»ƒé›†çš„æ ·æœ¬æ•°é‡</span><br>test_size = <span class="hljs-built_in">len</span>(Data) - train_size <span class="hljs-comment"># æµ‹è¯•é›†çš„æ ·æœ¬æ•°é‡</span><br>Data = Data[torch.randperm( Data.size(<span class="hljs-number">0</span>)) , : ] <span class="hljs-comment"># æ‰“ä¹±æ ·æœ¬çš„é¡ºåº</span><br>train_Data = Data[ : train_size , : ] <span class="hljs-comment"># è®­ç»ƒé›†æ ·æœ¬</span><br>test_Data = Data[ train_size : , : ] <span class="hljs-comment"># æµ‹è¯•é›†æ ·æœ¬</span><br>train_Data.shape, test_Data.shape<br></code></pre></td></tr></table></figure><h2 id="3-2-æ­å»ºç¥ç»ç½‘ç»œ"><a href="#3-2-æ­å»ºç¥ç»ç½‘ç»œ" class="headerlink" title="3.2 æ­å»ºç¥ç»ç½‘ç»œ"></a>3.2 æ­å»ºç¥ç»ç½‘ç»œ</h2><p>é€šå¸¸ä»¥ nn.Module ä½œä¸ºçˆ¶ç±»ï¼Œè‡ªå·±çš„ç¥ç»ç½‘ç»œå¯ç›´æ¥ç»§æ‰¿çˆ¶ç±»çš„æ–¹æ³•å’Œå±æ€§ã€‚</p><p>åœ¨å®šä¹‰ç¥ç»ç½‘ç»œæ—¶é€šå¸¸éœ€è¦åŒ…å« 2 ä¸ªæ–¹æ³•ï¼Œ<code>__init__</code>å’Œ<code>forward</code></p><ul><li><code>__init__</code>ï¼šç”¨äºæ„å»ºè‡ªå·±çš„ç¥ç»ç½‘ç»œ</li><li><code>forward</code>ï¼šç”¨äºè¾“å…¥æ•°æ®è¿›è¡Œå‘å‰ä¼ æ’­</li></ul><p><strong>ï¼ˆ1ï¼‰æ­å»ºç¥ç»ç½‘ç»œç»“æ„</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">DNN</span>(nn.Module):<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-string">&#x27;&#x27;&#x27; æ­å»ºç¥ç»ç½‘ç»œå„å±‚ &#x27;&#x27;&#x27;</span><br>        <span class="hljs-built_in">super</span>(DNN,self).__init__()<br>        self.net = nn.Sequential( <span class="hljs-comment"># æŒ‰é¡ºåºæ­å»ºå„å±‚</span><br>            nn.Linear(<span class="hljs-number">3</span>, <span class="hljs-number">5</span>), nn.ReLU(), <span class="hljs-comment"># ç¬¬1 å±‚ï¼šå…¨è¿æ¥å±‚</span><br>            nn.Linear(<span class="hljs-number">5</span>, <span class="hljs-number">5</span>), nn.ReLU(), <span class="hljs-comment"># ç¬¬2 å±‚ï¼šå…¨è¿æ¥å±‚</span><br>            nn.Linear(<span class="hljs-number">5</span>, <span class="hljs-number">5</span>), nn.ReLU(), <span class="hljs-comment"># ç¬¬3 å±‚ï¼šå…¨è¿æ¥å±‚</span><br>            nn.Linear(<span class="hljs-number">5</span>, <span class="hljs-number">3</span>) <span class="hljs-comment"># ç¬¬4 å±‚ï¼šå…¨è¿æ¥å±‚</span><br>        )<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">forward</span>(<span class="hljs-params">self, x</span>):<br>        <span class="hljs-string">&#x27;&#x27;&#x27; å‰å‘ä¼ æ’­ &#x27;&#x27;&#x27;</span><br>        y = self.net(x) <span class="hljs-comment"># x å³è¾“å…¥æ•°æ®</span><br>        <span class="hljs-keyword">return</span> y <span class="hljs-comment"># y å³è¾“å‡ºæ•°æ®</span><br></code></pre></td></tr></table></figure><p><strong>ä»£ç è§£æ</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">nn.Linear(<span class="hljs-number">3</span>, <span class="hljs-number">5</span>), nn.ReLU()<br></code></pre></td></tr></table></figure><ul><li>è¡¨ç¤ºä¸€ä¸ªéšè—å±‚ï¼Œç¬¬ä¸€ä¸ªéšè—å±‚ä¸ºçº¿æ€§å±‚ï¼Œæœå˜ä¼šç»™ä½ ä¸€ä¸ªç¥ç»å…ƒèŠ‚ç‚¹æ•°æ˜¯ 3ï¼Œè¿™å±‚èŠ‚ç‚¹æ•°æ˜¯ 5</li><li>åé¢çš„<code>nn.ReLU()</code>è¡¨ç¤ºä¸€ä¸ªæ¿€æ´»å‡½æ•°</li></ul><p><strong>ä»£ç è§£æ</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python">nn.Linear(<span class="hljs-number">3</span>, <span class="hljs-number">5</span>), nn.ReLU(), <span class="hljs-comment"># ç¬¬1 å±‚ï¼šå…¨è¿æ¥å±‚</span><br>nn.Linear(<span class="hljs-number">5</span>, <span class="hljs-number">5</span>), nn.ReLU(), <span class="hljs-comment"># ç¬¬2 å±‚ï¼šå…¨è¿æ¥å±‚</span><br>nn.Linear(<span class="hljs-number">5</span>, <span class="hljs-number">5</span>), nn.ReLU(), <span class="hljs-comment"># ç¬¬3 å±‚ï¼šå…¨è¿æ¥å±‚</span><br>nn.Linear(<span class="hljs-number">5</span>, <span class="hljs-number">3</span>) <span class="hljs-comment"># ç¬¬4 å±‚ï¼šå…¨è¿æ¥å±‚</span><br></code></pre></td></tr></table></figure><p>ç¬¬äºŒå±‚çš„ç¬¬ä¸€ä¸ªæ•°è¦å’Œç¬¬ä¸€å±‚çš„ç¬¬äºŒä¸ªæ•°å¯¹åº”</p><p><strong>ï¼ˆ2ï¼‰åˆ›å»ºç¥ç»ç½‘ç»œ</strong></p><p>åˆ›å»º model å®ä¾‹ï¼Œå¹¶å°†å…¶è½¬ç§»æ‰ gpu ä¸Š</p><p><img src="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/202406302117031.png"></p><ul><li>æ¯ä¸ªéšè—å±‚éƒ½æœ‰ä¸€ä¸ªæ¿€æ´»å‡½æ•°ã€‚</li><li>å„å±‚çš„ç¥ç»å…ƒèŠ‚ç‚¹æ•°ä½ 3 5 5 5 3</li></ul><blockquote><p>è¾“å…¥å±‚çš„ç¥ç»å…ƒæ•°é‡å¿…é¡»ä¸æ¯ä¸ªæ ·æœ¬çš„è¾“å…¥ç‰¹å¾æ•°é‡ä¸€è‡´ï¼Œè¾“å‡ºå±‚çš„ç¥ç»æ•°é‡å¿…é¡»ä¸æ¯ä¸ªæ ·æœ¬çš„è¾“å‡ºç‰¹å¾æ•°é‡ä¸€è‡´ã€‚</p></blockquote><h2 id="3-3-ç½‘ç»œçš„å†…éƒ¨å‚æ•°"><a href="#3-3-ç½‘ç»œçš„å†…éƒ¨å‚æ•°" class="headerlink" title="3.3 ç½‘ç»œçš„å†…éƒ¨å‚æ•°"></a>3.3 ç½‘ç»œçš„å†…éƒ¨å‚æ•°</h2><p>æƒé‡ä¸åç½®</p><p>æŸ¥çœ‹ç½‘ç»œå†…éƒ¨å‚æ•°</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">for</span> name,param <span class="hljs-keyword">in</span> model.named_parameters():<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;å‚æ•°:<span class="hljs-subst">&#123;name&#125;</span>\nå½¢çŠ¶:<span class="hljs-subst">&#123;param.shape&#125;</span>\næ•°å€¼:<span class="hljs-subst">&#123;param&#125;</span>&quot;</span>)<br></code></pre></td></tr></table></figure><p><img src="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/202406302123628.png"></p><ul><li>net.0.weight æƒé‡å½¢çŠ¶ä¸º[5,3]ï¼Œ5 è¡¨ç¤ºè‡ªå·±çš„èŠ‚ç‚¹æ•°ï¼Œ3 è¡¨ç¤ºå‰ä¸€å±‚çš„èŠ‚ç‚¹æ•°</li><li><code>device=&#39;cuda:0&#39;</code>è¡¨ç¤ºåœ¨ gpu ä¸Š</li><li><code>requires_grad=True</code>è¡¨ç¤ºæ‰“å¼€æ¢¯åº¦è®¡ç®—åŠŸèƒ½</li></ul><h2 id="3-4-ç½‘ç»œå¤–éƒ¨å‚æ•°"><a href="#3-4-ç½‘ç»œå¤–éƒ¨å‚æ•°" class="headerlink" title="3.4 ç½‘ç»œå¤–éƒ¨å‚æ•°"></a>3.4 ç½‘ç»œå¤–éƒ¨å‚æ•°</h2><p>åˆå«è¶…å‚æ•°ã€‚</p><ul><li>æ­å»ºç½‘ç»œæ—¶çš„è¶…å‚æ•°ï¼šç½‘ç»œçš„å±‚æ•°ã€å„éšè—å±‚èŠ‚ç‚¹æ•°ã€å„èŠ‚ç‚¹æ¿€æ´»å‡½æ•°ã€å†…éƒ¨å‚æ•°çš„åˆå§‹å€¼ç­‰ã€‚</li><li>è®­ç»ƒç½‘ç»œæ—¶çš„è¶…å‚æ•°ï¼šæŸå¤±å‡½æ•°ã€å­¦ä¹ ç‡ã€ä¼˜åŒ–ç®—æ³•ã€batch_sizeã€epochs ç­‰ã€‚</li></ul><p><strong>ï¼ˆ1ï¼‰æ¿€æ´»å‡½æ•°</strong></p><p>å¼•å…¥éçº¿æ€§å› ç´ ï¼Œä»è€Œä½¿ç¥ç»ç½‘ç»œèƒ½å¤Ÿå­¦ä¹ å’Œè¡¨è¾¾æ›´åŠ å¤æ‚çš„å‡½æ•°å…³ç³»ã€‚</p><p><a href="https://pytorch.org/docs/2.3/nn.html#non-linear-activations-weighted-sum-nonlinearity">å®˜ç½‘</a></p><p><a href="https://cloud.tencent.com/developer/article/1797190">https://cloud.tencent.com/developer/article/1797190</a></p><p><strong>ï¼ˆ2ï¼‰æŸå¤±å‡½æ•°</strong></p><p>è®¡ç®—ç¥ç»ç½‘ç»œæ¯æ¬¡è¿­ä»£çš„å‰å‘è®¡ç®—ç»“æœä¸çœŸå®å€¼çš„å·®è·ï¼Œä»è€ŒæŒ‡å¯¼ä¸‹ä¸€æ­¥çš„è®­ç»ƒå‘æ­£ç¡®çš„æ–¹å‘è¿›è¡Œã€‚</p><p><a href="https://pytorch.org/docs/2.3/optim.html">å®˜ç½‘</a></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># æŸå¤±å‡½æ•°çš„é€‰æ‹©</span><br>loss_fn = nn.MSELoss()<br><br><span class="hljs-comment"># ä¼˜åŒ–ç®—æ³•çš„é€‰æ‹©</span><br>learning_rate = <span class="hljs-number">0.01</span> <span class="hljs-comment"># è®¾ç½®å­¦ä¹ ç‡</span><br>optimizer = torch.optim.SGD(model.parameters(), lr=learning_rate)<br></code></pre></td></tr></table></figure><h2 id="3-5-è®­ç»ƒç½‘è·¯"><a href="#3-5-è®­ç»ƒç½‘è·¯" class="headerlink" title="3.5 è®­ç»ƒç½‘è·¯"></a>3.5 è®­ç»ƒç½‘è·¯</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># è®­ç»ƒç½‘ç»œ</span><br>epochs = <span class="hljs-number">1000</span><br>losses = [] <span class="hljs-comment"># è®°å½•æŸå¤±å‡½æ•°å˜åŒ–çš„åˆ—è¡¨</span><br><span class="hljs-comment"># ç»™è®­ç»ƒé›†åˆ’åˆ†è¾“å…¥ä¸è¾“å‡º</span><br>X = train_Data[ : , :<span class="hljs-number">3</span> ] <span class="hljs-comment"># å‰3 åˆ—ä¸ºè¾“å…¥ç‰¹å¾</span><br>Y = train_Data[ : , -<span class="hljs-number">3</span>: ] <span class="hljs-comment"># å3 åˆ—ä¸ºè¾“å‡ºç‰¹å¾</span><br><span class="hljs-keyword">for</span> epoch <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(epochs):<br>    Pred = model(X) <span class="hljs-comment"># ä¸€æ¬¡å‰å‘ä¼ æ’­ï¼ˆæ‰¹é‡ï¼‰</span><br>    loss = loss_fn(Pred, Y) <span class="hljs-comment"># è®¡ç®—æŸå¤±å‡½æ•°</span><br>    losses.append(loss.item()) <span class="hljs-comment"># è®°å½•æŸå¤±å‡½æ•°çš„å˜åŒ–</span><br>    optimizer.zero_grad() <span class="hljs-comment"># æ¸…ç†ä¸Šä¸€è½®æ»ç•™çš„æ¢¯åº¦</span><br>    loss.backward() <span class="hljs-comment"># ä¸€æ¬¡åå‘ä¼ æ’­</span><br>    optimizer.step() <span class="hljs-comment"># ä¼˜åŒ–å†…éƒ¨å‚æ•°</span><br>Fig = plt.figure()<br>plt.plot(<span class="hljs-built_in">range</span>(epochs), losses)<br>plt.ylabel(<span class="hljs-string">&#x27;loss&#x27;</span>), plt.xlabel(<span class="hljs-string">&#x27;epoch&#x27;</span>)<br>plt.show()<br></code></pre></td></tr></table></figure><p><img src="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/202406302139653.png"></p><h2 id="3-6-æµ‹è¯•ç¥ç½‘ç»œ"><a href="#3-6-æµ‹è¯•ç¥ç½‘ç»œ" class="headerlink" title="3.6 æµ‹è¯•ç¥ç½‘ç»œ"></a>3.6 æµ‹è¯•ç¥ç½‘ç»œ</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># æµ‹è¯•ç½‘ç»œ</span><br><span class="hljs-comment"># ç»™æµ‹è¯•é›†åˆ’åˆ†è¾“å…¥ä¸è¾“å‡º</span><br>X = test_Data[:, :<span class="hljs-number">3</span>] <span class="hljs-comment"># å‰3 åˆ—ä¸ºè¾“å…¥ç‰¹å¾</span><br>Y = test_Data[:, -<span class="hljs-number">3</span>:] <span class="hljs-comment"># å3 åˆ—ä¸ºè¾“å‡ºç‰¹å¾</span><br><span class="hljs-keyword">with</span> torch.no_grad(): <span class="hljs-comment"># è¯¥å±€éƒ¨å…³é—­æ¢¯åº¦è®¡ç®—åŠŸèƒ½</span><br>    Pred = model(X) <span class="hljs-comment"># ä¸€æ¬¡å‰å‘ä¼ æ’­ï¼ˆæ‰¹é‡ï¼‰</span><br>    Pred[:,torch.argmax(Pred, axis=<span class="hljs-number">1</span>)] = <span class="hljs-number">1</span><br>    Pred[Pred!=<span class="hljs-number">1</span>] = <span class="hljs-number">0</span><br>    correct = torch.<span class="hljs-built_in">sum</span>( (Pred == Y).<span class="hljs-built_in">all</span>(<span class="hljs-number">1</span>) ) <span class="hljs-comment"># é¢„æµ‹æ­£ç¡®çš„æ ·æœ¬</span><br>    total = Y.size(<span class="hljs-number">0</span>) <span class="hljs-comment"># å…¨éƒ¨çš„æ ·æœ¬æ•°é‡</span><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&#x27;æµ‹è¯•é›†ç²¾å‡†åº¦: <span class="hljs-subst">&#123;<span class="hljs-number">100</span>*correct/total&#125;</span> %&#x27;</span>)<br></code></pre></td></tr></table></figure><h2 id="3-7-ä¿å­˜ä¸å¯¼å…¥ç½‘ç»œ"><a href="#3-7-ä¿å­˜ä¸å¯¼å…¥ç½‘ç»œ" class="headerlink" title="3.7 ä¿å­˜ä¸å¯¼å…¥ç½‘ç»œ"></a>3.7 ä¿å­˜ä¸å¯¼å…¥ç½‘ç»œ</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># ä¿å­˜ç½‘ç»œ</span><br>torch.save(model,<span class="hljs-string">&#x27;model.pth&#x27;</span>)<br><br><span class="hljs-comment"># å¯¼å…¥ç½‘ç»œ</span><br>new_model =torch.load(<span class="hljs-string">&#x27;model.pth&#x27;</span>)<br><br><span class="hljs-comment"># æµ‹è¯•æ–°ç½‘ç»œ</span><br><span class="hljs-comment"># ç»™æµ‹è¯•é›†åˆ’åˆ†è¾“å…¥ä¸è¾“å‡º</span><br>X = test_Data[:, :<span class="hljs-number">3</span>] <span class="hljs-comment"># å‰3 åˆ—ä¸ºè¾“å…¥ç‰¹å¾</span><br>Y = test_Data[:, -<span class="hljs-number">3</span>:] <span class="hljs-comment"># å3 åˆ—ä¸ºè¾“å‡ºç‰¹å¾</span><br><span class="hljs-keyword">with</span> torch.no_grad(): <span class="hljs-comment"># è¯¥å±€éƒ¨å…³é—­æ¢¯åº¦è®¡ç®—åŠŸèƒ½</span><br>    Pred = new_model(X) <span class="hljs-comment"># ç”¨æ–°æ¨¡å‹è¿›è¡Œä¸€æ¬¡å‰å‘ä¼ æ’­</span><br>    Pred[:,torch.argmax(Pred, axis=<span class="hljs-number">1</span>)] = <span class="hljs-number">1</span><br>    Pred[Pred!=<span class="hljs-number">1</span>] = <span class="hljs-number">0</span><br>    correct = torch.<span class="hljs-built_in">sum</span>( (Pred == Y).<span class="hljs-built_in">all</span>(<span class="hljs-number">1</span>) ) <span class="hljs-comment"># é¢„æµ‹æ­£ç¡®çš„æ ·æœ¬</span><br>    total = Y.size(<span class="hljs-number">0</span>) <span class="hljs-comment"># å…¨éƒ¨çš„æ ·æœ¬æ•°é‡</span><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&#x27;æµ‹è¯•é›†ç²¾å‡†åº¦: <span class="hljs-subst">&#123;<span class="hljs-number">100</span>*correct/total&#125;</span> %&#x27;</span>)<br></code></pre></td></tr></table></figure><h1 id="4ã€æ‰¹é‡æ¢¯åº¦ä¸‹é™æ¡ˆä¾‹ä»£ç "><a href="#4ã€æ‰¹é‡æ¢¯åº¦ä¸‹é™æ¡ˆä¾‹ä»£ç " class="headerlink" title="4ã€æ‰¹é‡æ¢¯åº¦ä¸‹é™æ¡ˆä¾‹ä»£ç "></a>4ã€æ‰¹é‡æ¢¯åº¦ä¸‹é™æ¡ˆä¾‹ä»£ç </h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np<br><span class="hljs-keyword">import</span> pandas <span class="hljs-keyword">as</span> pd<br><span class="hljs-keyword">import</span> torch<br><span class="hljs-keyword">import</span> torch.nn <span class="hljs-keyword">as</span> nn<br><span class="hljs-keyword">import</span> matplotlib.pyplot <span class="hljs-keyword">as</span> plt<br><br><span class="hljs-comment"># å±•ç¤ºé«˜æ¸…å›¾</span><br><span class="hljs-keyword">from</span> matplotlib_inline <span class="hljs-keyword">import</span> backend_inline<br>backend_inline.set_matplotlib_formats(<span class="hljs-string">&#x27;svg&#x27;</span>)<br><br><span class="hljs-comment"># å‡†å¤‡æ•°æ®é›†</span><br>df = pd.read_csv(<span class="hljs-string">&#x27;Data.csv&#x27;</span>, index_col=<span class="hljs-number">0</span>) <span class="hljs-comment"># å¯¼å…¥æ•°æ®</span><br>arr = df.values <span class="hljs-comment"># Pandas å¯¹è±¡é€€åŒ–ä¸ºNumPy æ•°ç»„</span><br>arr = arr.astype(np.float32) <span class="hljs-comment"># è½¬ä¸ºfloat32 ç±»å‹æ•°ç»„</span><br>ts = torch.tensor(arr) <span class="hljs-comment"># æ•°ç»„è½¬ä¸ºå¼ é‡</span><br>ts = ts.to(<span class="hljs-string">&#x27;cuda&#x27;</span>) <span class="hljs-comment"># æŠŠè®­ç»ƒé›†æ¬åˆ°cuda ä¸Š</span><br><br><span class="hljs-comment"># åˆ’åˆ†è®­ç»ƒé›†ä¸æµ‹è¯•é›†</span><br>train_size = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">len</span>(ts) * <span class="hljs-number">0.7</span>) <span class="hljs-comment"># è®­ç»ƒé›†çš„æ ·æœ¬æ•°é‡</span><br>test_size = <span class="hljs-built_in">len</span>(ts) - train_size <span class="hljs-comment"># æµ‹è¯•é›†çš„æ ·æœ¬æ•°é‡</span><br>ts = ts[ torch.randperm( ts.size(<span class="hljs-number">0</span>) ) , : ] <span class="hljs-comment"># æ‰“ä¹±æ ·æœ¬çš„é¡ºåº</span><br>train_Data = ts[ : train_size , : ] <span class="hljs-comment"># è®­ç»ƒé›†æ ·æœ¬</span><br>test_Data = ts[ train_size : , : ] <span class="hljs-comment"># æµ‹è¯•é›†æ ·æœ¬</span><br><br><span class="hljs-comment"># åˆ›å»ºç¥ç»ç½‘ç»œ</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">DNN</span>(nn.Module):<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-string">&#x27;&#x27;&#x27; æ­å»ºç¥ç»ç½‘ç»œå„å±‚ &#x27;&#x27;&#x27;</span><br>        <span class="hljs-built_in">super</span>(DNN,self).__init__()<br>        self.net = nn.Sequential( <span class="hljs-comment"># æŒ‰é¡ºåºæ­å»ºå„å±‚</span><br>        nn.Linear(<span class="hljs-number">8</span>, <span class="hljs-number">32</span>), nn.Sigmoid(), <span class="hljs-comment"># ç¬¬1 å±‚ï¼šå…¨è¿æ¥å±‚</span><br>        nn.Linear(<span class="hljs-number">32</span>, <span class="hljs-number">8</span>), nn.Sigmoid(), <span class="hljs-comment"># ç¬¬2 å±‚ï¼šå…¨è¿æ¥å±‚</span><br>        nn.Linear(<span class="hljs-number">8</span>, <span class="hljs-number">4</span>), nn.Sigmoid(), <span class="hljs-comment"># ç¬¬3 å±‚ï¼šå…¨è¿æ¥å±‚</span><br>        nn.Linear(<span class="hljs-number">4</span>, <span class="hljs-number">1</span>), nn.Sigmoid() <span class="hljs-comment"># ç¬¬4 å±‚ï¼šå…¨è¿æ¥å±‚</span><br>        )<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">forward</span>(<span class="hljs-params">self, x</span>):<br>        <span class="hljs-string">&#x27;&#x27;&#x27; å‰å‘ä¼ æ’­ &#x27;&#x27;&#x27;</span><br>        y = self.net(x) <span class="hljs-comment"># x å³è¾“å…¥æ•°æ®</span><br>        <span class="hljs-keyword">return</span> y <span class="hljs-comment"># y å³è¾“å‡ºæ•°æ®</span><br><br>model = DNN().to(<span class="hljs-string">&#x27;cuda:0&#x27;</span>) <span class="hljs-comment"># åˆ›å»ºå­ç±»çš„å®ä¾‹ï¼Œå¹¶æ¬åˆ°GPU ä¸Š</span><br><br><span class="hljs-comment"># æŸå¤±å‡½æ•°çš„é€‰æ‹©</span><br>loss_fn = nn.BCELoss(reduction=<span class="hljs-string">&#x27;mean&#x27;</span>)<br><br><span class="hljs-comment"># ä¼˜åŒ–ç®—æ³•çš„é€‰æ‹©</span><br>learning_rate = <span class="hljs-number">0.005</span> <span class="hljs-comment"># è®¾ç½®å­¦ä¹ ç‡</span><br>optimizer = torch.optim.Adam(model.parameters(), lr=learning_rate)<br><br><span class="hljs-comment"># è®­ç»ƒç½‘ç»œ</span><br>epochs = <span class="hljs-number">5000</span><br>losses = [] <span class="hljs-comment"># è®°å½•æŸå¤±å‡½æ•°å˜åŒ–çš„åˆ—è¡¨</span><br><span class="hljs-comment"># ç»™è®­ç»ƒé›†åˆ’åˆ†è¾“å…¥ä¸è¾“å‡º</span><br>X = train_Data[ : , : -<span class="hljs-number">1</span> ] <span class="hljs-comment"># å‰8 åˆ—ä¸ºè¾“å…¥ç‰¹å¾</span><br>Y = train_Data[ : , -<span class="hljs-number">1</span> ].reshape((-<span class="hljs-number">1</span>,<span class="hljs-number">1</span>)) <span class="hljs-comment"># å1 åˆ—ä¸ºè¾“å‡ºç‰¹å¾</span><br><span class="hljs-comment"># æ­¤å¤„çš„.reshape((-1,1))å°†ä¸€é˜¶å¼ é‡å‡çº§ä¸ºäºŒé˜¶å¼ é‡</span><br><span class="hljs-keyword">for</span> epoch <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(epochs):<br>    Pred = model(X) <span class="hljs-comment"># ä¸€æ¬¡å‰å‘ä¼ æ’­ï¼ˆæ‰¹é‡ï¼‰</span><br>    loss = loss_fn(Pred, Y) <span class="hljs-comment"># è®¡ç®—æŸå¤±å‡½æ•°</span><br>    losses.append(loss.item()) <span class="hljs-comment"># è®°å½•æŸå¤±å‡½æ•°çš„å˜åŒ–</span><br>    optimizer.zero_grad() <span class="hljs-comment"># æ¸…ç†ä¸Šä¸€è½®æ»ç•™çš„æ¢¯åº¦</span><br>    loss.backward() <span class="hljs-comment"># ä¸€æ¬¡åå‘ä¼ æ’­</span><br>    optimizer.step() <span class="hljs-comment"># ä¼˜åŒ–å†…éƒ¨å‚æ•°</span><br>Fig = plt.figure()<br>plt.plot(<span class="hljs-built_in">range</span>(epochs), losses)<br>plt.ylabel(<span class="hljs-string">&#x27;loss&#x27;</span>)<br>plt.xlabel(<span class="hljs-string">&#x27;epoch&#x27;</span>)<br>plt.show()<br><br><span class="hljs-comment"># æµ‹è¯•ç½‘ç»œ</span><br><span class="hljs-comment"># ç»™æµ‹è¯•é›†åˆ’åˆ†è¾“å…¥ä¸è¾“å‡º</span><br>X = test_Data[ : , : -<span class="hljs-number">1</span> ] <span class="hljs-comment"># å‰8 åˆ—ä¸ºè¾“å…¥ç‰¹å¾</span><br>Y = test_Data[ : , -<span class="hljs-number">1</span> ].reshape((-<span class="hljs-number">1</span>,<span class="hljs-number">1</span>)) <span class="hljs-comment"># å1 åˆ—ä¸ºè¾“å‡ºç‰¹å¾</span><br><span class="hljs-keyword">with</span> torch.no_grad(): <span class="hljs-comment"># è¯¥å±€éƒ¨å…³é—­æ¢¯åº¦è®¡ç®—åŠŸèƒ½</span><br>    Pred = model(X) <span class="hljs-comment"># ä¸€æ¬¡å‰å‘ä¼ æ’­ï¼ˆæ‰¹é‡ï¼‰</span><br>    Pred[Pred&gt;=<span class="hljs-number">0.5</span>] = <span class="hljs-number">1</span><br>    Pred[Pred&lt;<span class="hljs-number">0.5</span>] = <span class="hljs-number">0</span><br>    correct = torch.<span class="hljs-built_in">sum</span>( (Pred == Y).<span class="hljs-built_in">all</span>(<span class="hljs-number">1</span>) ) <span class="hljs-comment"># é¢„æµ‹æ­£ç¡®çš„æ ·æœ¬</span><br>    total = Y.size(<span class="hljs-number">0</span>) <span class="hljs-comment"># å…¨éƒ¨çš„æ ·æœ¬æ•°é‡</span><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&#x27;æµ‹è¯•é›†ç²¾å‡†åº¦: <span class="hljs-subst">&#123;<span class="hljs-number">100</span>*correct/total&#125;</span> %&#x27;</span>)<br></code></pre></td></tr></table></figure><h1 id="5ã€å°æ‰¹é‡æ¢¯åº¦ä¸‹é™"><a href="#5ã€å°æ‰¹é‡æ¢¯åº¦ä¸‹é™" class="headerlink" title="5ã€å°æ‰¹é‡æ¢¯åº¦ä¸‹é™"></a>5ã€å°æ‰¹é‡æ¢¯åº¦ä¸‹é™</h1><p>åœ¨ä½¿ç”¨å°æ‰¹é‡æ¢¯åº¦ä¸‹é™æ—¶ï¼Œå¿…é¡»ä½¿ç”¨ 3 ä¸ª PyTorch å†…ç½®çš„å®ç”¨å·¥å…·ï¼ˆutilsï¼‰ï¼š</p><ul><li>DataSet ç”¨äºå°è£…æ•°æ®é›†ï¼›</li><li>DataLoader ç”¨äºåŠ è½½æ•°æ®ä¸åŒçš„æ‰¹æ¬¡ï¼›</li><li>random_split ç”¨äºåˆ’åˆ†è®­ç»ƒé›†ä¸æµ‹è¯•é›†</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np<br><span class="hljs-keyword">import</span> pandas <span class="hljs-keyword">as</span> pd<br><span class="hljs-keyword">import</span> torch<br><span class="hljs-keyword">import</span> torch.nn <span class="hljs-keyword">as</span> nn<br><span class="hljs-keyword">from</span> torch.utils.data <span class="hljs-keyword">import</span> Dataset<br><span class="hljs-keyword">from</span> torch.utils.data <span class="hljs-keyword">import</span> DataLoader<br><span class="hljs-keyword">from</span> torch.utils.data <span class="hljs-keyword">import</span> random_split<br><span class="hljs-keyword">import</span> matplotlib.pyplot <span class="hljs-keyword">as</span> plt<br>%matplotlib inline<br><br><span class="hljs-comment"># å±•ç¤ºé«˜æ¸…å›¾</span><br><span class="hljs-keyword">from</span> matplotlib_inline <span class="hljs-keyword">import</span> backend_inline<br>backend_inline.set_matplotlib_formats(<span class="hljs-string">&#x27;svg&#x27;</span>)<br><br><span class="hljs-comment"># åˆ¶ä½œæ•°æ®é›†</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyData</span>(<span class="hljs-title class_ inherited__">Dataset</span>): <span class="hljs-comment"># ç»§æ‰¿Dataset ç±»</span><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, filepath</span>):<br>        df = pd.read_csv(filepath, index_col=<span class="hljs-number">0</span>) <span class="hljs-comment"># å¯¼å…¥æ•°æ®</span><br>        arr = df.values <span class="hljs-comment"># å¯¹è±¡é€€åŒ–ä¸ºæ•°ç»„</span><br>        arr = arr.astype(np.float32) <span class="hljs-comment"># è½¬ä¸ºfloat32 ç±»å‹æ•°ç»„</span><br>        ts = torch.tensor(arr) <span class="hljs-comment"># æ•°ç»„è½¬ä¸ºå¼ é‡</span><br>        ts = ts.to(<span class="hljs-string">&#x27;cuda&#x27;</span>) <span class="hljs-comment"># æŠŠè®­ç»ƒé›†æ¬åˆ°cuda ä¸Š</span><br>        self.X = ts[ : , : -<span class="hljs-number">1</span> ] <span class="hljs-comment"># å‰8 åˆ—ä¸ºè¾“å…¥ç‰¹å¾</span><br>        self.Y = ts[ : , -<span class="hljs-number">1</span> ].reshape((-<span class="hljs-number">1</span>,<span class="hljs-number">1</span>)) <span class="hljs-comment"># å1 åˆ—ä¸ºè¾“å‡ºç‰¹å¾</span><br>        self.<span class="hljs-built_in">len</span> = ts.shape[<span class="hljs-number">0</span>] <span class="hljs-comment"># æ ·æœ¬çš„æ€»æ•°</span><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__getitem__</span>(<span class="hljs-params">self, index</span>):<br>        <span class="hljs-keyword">return</span> self.X[index], self.Y[index]<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__len__</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-keyword">return</span> self.<span class="hljs-built_in">len</span><br><br><span class="hljs-comment"># åˆ’åˆ†è®­ç»ƒé›†ä¸æµ‹è¯•é›†</span><br>Data = MyData(<span class="hljs-string">&#x27;Data.csv&#x27;</span>)<br>train_size = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">len</span>(Data) * <span class="hljs-number">0.7</span>) <span class="hljs-comment"># è®­ç»ƒé›†çš„æ ·æœ¬æ•°é‡</span><br>test_size = <span class="hljs-built_in">len</span>(Data) - train_size <span class="hljs-comment"># æµ‹è¯•é›†çš„æ ·æœ¬æ•°é‡</span><br>train_Data, test_Data = random_split(Data, [train_size, test_size])<br><br><span class="hljs-comment"># æ‰¹æ¬¡åŠ è½½å™¨</span><br>train_loader = DataLoader(dataset=train_Data, shuffle=<span class="hljs-literal">True</span>, batch_size=<span class="hljs-number">128</span>) <span class="hljs-comment"># shuffleæ´—ç‰Œ</span><br>test_loader = DataLoader(dataset=test_Data, shuffle=<span class="hljs-literal">False</span>, batch_size=<span class="hljs-number">64</span>) <span class="hljs-comment"># æµ‹è¯•é›†å°±ä¸éœ€è¦æ´—ç‰Œäº†</span><br><br><span class="hljs-comment"># æ­å»ºç¥ç»ç½‘ç»œ</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">DNN</span>(nn.Module):<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-string">&#x27;&#x27;&#x27; æ­å»ºç¥ç»ç½‘ç»œå„å±‚ &#x27;&#x27;&#x27;</span><br>        <span class="hljs-built_in">super</span>(DNN,self).__init__()<br>        self.net = nn.Sequential( <span class="hljs-comment"># æŒ‰é¡ºåºæ­å»ºå„å±‚</span><br>        nn.Linear(<span class="hljs-number">8</span>, <span class="hljs-number">32</span>), nn.Sigmoid(), <span class="hljs-comment"># ç¬¬1 å±‚ï¼šå…¨è¿æ¥å±‚</span><br>        nn.Linear(<span class="hljs-number">32</span>, <span class="hljs-number">8</span>), nn.Sigmoid(), <span class="hljs-comment"># ç¬¬2 å±‚ï¼šå…¨è¿æ¥å±‚</span><br>        nn.Linear(<span class="hljs-number">8</span>, <span class="hljs-number">4</span>), nn.Sigmoid(), <span class="hljs-comment"># ç¬¬3 å±‚ï¼šå…¨è¿æ¥å±‚</span><br>        nn.Linear(<span class="hljs-number">4</span>, <span class="hljs-number">1</span>), nn.Sigmoid() <span class="hljs-comment"># ç¬¬4 å±‚ï¼šå…¨è¿æ¥å±‚</span><br>        )<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">forward</span>(<span class="hljs-params">self, x</span>):<br>        <span class="hljs-string">&#x27;&#x27;&#x27; å‰å‘ä¼ æ’­ &#x27;&#x27;&#x27;</span><br>        y = self.net(x) <span class="hljs-comment"># x å³è¾“å…¥æ•°æ®</span><br>        <span class="hljs-keyword">return</span> y <span class="hljs-comment"># y å³è¾“å‡ºæ•°æ®</span><br><br>model = DNN().to(<span class="hljs-string">&#x27;cuda:0&#x27;</span>) <span class="hljs-comment"># åˆ›å»ºå­ç±»çš„å®ä¾‹ï¼Œå¹¶æ¬åˆ°GPU ä¸Š</span><br>model <span class="hljs-comment"># æŸ¥çœ‹è¯¥å®ä¾‹çš„å„å±‚</span><br><br><span class="hljs-comment"># ä¼˜åŒ–ç®—æ³•çš„é€‰æ‹©</span><br>learning_rate = <span class="hljs-number">0.005</span> <span class="hljs-comment"># è®¾ç½®å­¦ä¹ ç‡</span><br>optimizer = torch.optim.Adam(model.parameters(), lr=learning_rate)<br><br><span class="hljs-comment"># è®­ç»ƒç½‘ç»œ</span><br>epochs = <span class="hljs-number">500</span><br>losses = [] <span class="hljs-comment"># è®°å½•æŸå¤±å‡½æ•°å˜åŒ–çš„åˆ—è¡¨</span><br><span class="hljs-keyword">for</span> epoch <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(epochs):<br>    <span class="hljs-keyword">for</span> (x, y) <span class="hljs-keyword">in</span> train_loader: <span class="hljs-comment"># è·å–å°æ‰¹æ¬¡çš„x ä¸y</span><br>        Pred = model(x) <span class="hljs-comment"># ä¸€æ¬¡å‰å‘ä¼ æ’­ï¼ˆå°æ‰¹é‡ï¼‰</span><br>        loss = loss_fn(Pred, y) <span class="hljs-comment"># è®¡ç®—æŸå¤±å‡½æ•°</span><br>        losses.append(loss.item()) <span class="hljs-comment"># è®°å½•æŸå¤±å‡½æ•°çš„å˜åŒ–</span><br>        optimizer.zero_grad() <span class="hljs-comment"># æ¸…ç†ä¸Šä¸€è½®æ»ç•™çš„æ¢¯åº¦</span><br>        loss.backward() <span class="hljs-comment"># ä¸€æ¬¡åå‘ä¼ æ’­</span><br>        optimizer.step() <span class="hljs-comment"># ä¼˜åŒ–å†…éƒ¨å‚æ•°</span><br>Fig = plt.figure()<br>plt.plot(<span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(losses)), losses)<br>plt.show()<br><br><span class="hljs-comment"># æµ‹è¯•ç½‘ç»œ</span><br>correct = <span class="hljs-number">0</span><br>total = <span class="hljs-number">0</span><br><span class="hljs-keyword">with</span> torch.no_grad(): <span class="hljs-comment"># è¯¥å±€éƒ¨å…³é—­æ¢¯åº¦è®¡ç®—åŠŸèƒ½</span><br>    <span class="hljs-keyword">for</span> (x, y) <span class="hljs-keyword">in</span> test_loader: <span class="hljs-comment"># è·å–å°æ‰¹æ¬¡çš„x ä¸y</span><br>        Pred = model(x) <span class="hljs-comment"># ä¸€æ¬¡å‰å‘ä¼ æ’­ï¼ˆå°æ‰¹é‡ï¼‰</span><br>        Pred[Pred&gt;=<span class="hljs-number">0.5</span>] = <span class="hljs-number">1</span><br>        Pred[Pred&lt;<span class="hljs-number">0.5</span>] = <span class="hljs-number">0</span><br>        correct += torch.<span class="hljs-built_in">sum</span>( (Pred == y).<span class="hljs-built_in">all</span>(<span class="hljs-number">1</span>) )<br>        total += y.size(<span class="hljs-number">0</span>)<br><span class="hljs-built_in">print</span>(<span class="hljs-string">f&#x27;æµ‹è¯•é›†ç²¾å‡†åº¦: <span class="hljs-subst">&#123;<span class="hljs-number">100</span>*correct/total&#125;</span> %&#x27;</span>)<br></code></pre></td></tr></table></figure><p>å°æ‰¹é‡æ—¶é’ˆå¯¹å±€éƒ¨è¿›è¡Œå‘å‰å‘åï¼Œæ‰€ä»¥å‡ºæ¥çš„æŸå¤±å‡½æ•°ä¸æ˜¯æ¢¯åº¦ä¸‹é™çš„ã€‚</p><p><img src="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/202406302207424.png"></p><h1 id="6ã€æ‰‹å†™æ•°å­—è¯†åˆ«"><a href="#6ã€æ‰‹å†™æ•°å­—è¯†åˆ«" class="headerlink" title="6ã€æ‰‹å†™æ•°å­—è¯†åˆ«"></a>6ã€æ‰‹å†™æ•°å­—è¯†åˆ«</h1><p>æ‰‹å†™æ•°å­—è¯†åˆ«æ•°æ®é›†ï¼ˆMNISTï¼‰æ˜¯æœºå™¨å­¦ä¹ é¢†åŸŸçš„æ ‡å‡†æ•°æ®é›†</p><p><img src="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/202406302208601.png"></p><ul><li>è¾“å…¥ï¼šä¸€å‰¯å›¾åƒ</li><li>è¾“å‡ºï¼šä¸€ä¸ªä¸å›¾åƒä¸­å¯¹åº”çš„æ•°å­—ï¼ˆ0 è‡³ 9 ä¹‹é—´çš„ä¸€ä¸ªæ•´æ•°ï¼Œä¸æ˜¯ç‹¬çƒ­ç¼–ç ï¼‰</li></ul><blockquote><p>æˆ‘ä»¬ä¸ç”¨æ‰‹åŠ¨å°†è¾“å‡ºè½¬æ¢ä¸ºç‹¬çƒ­ç¼–ç ï¼ŒPyTorch ä¼šåœ¨æ•´ä¸ªè¿‡ç¨‹ä¸­è‡ªåŠ¨å°†æ•°æ®é›†çš„è¾“å‡ºè½¬æ¢ä¸ºç‹¬çƒ­ç¼–ç .åªæœ‰åœ¨æœ€åæµ‹è¯•ç½‘ç»œæ—¶ï¼Œæˆ‘ä»¬å¯¹æ¯”æµ‹è¯•é›†çš„é¢„æµ‹è¾“å‡ºä¸çœŸå®è¾“å‡ºæ—¶ï¼Œæ‰éœ€è¦æ³¨æ„ä¸€ä¸‹ã€‚</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> torch<br><span class="hljs-keyword">import</span> torch.nn <span class="hljs-keyword">as</span> nn<br><span class="hljs-keyword">from</span> torch.utils.data <span class="hljs-keyword">import</span> DataLoader<br><span class="hljs-keyword">from</span> torchvision <span class="hljs-keyword">import</span> transforms <span class="hljs-comment"># éœ€è¦ä½¿ç”¨pip installå®‰è£…ä¸€ä¸‹</span><br><span class="hljs-keyword">from</span> torchvision <span class="hljs-keyword">import</span> datasets<br><span class="hljs-keyword">import</span> matplotlib.pyplot <span class="hljs-keyword">as</span> plt<br>%matplotlib inline<br></code></pre></td></tr></table></figure><p>ä¸‹è½½æ—¶éœ€è¦å¼€å¯å…¨å±€ä»£ç†</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># åˆ¶ä½œæ•°æ®é›†</span><br><span class="hljs-comment"># æ•°æ®é›†è½¬æ¢å‚æ•°</span><br>transform = transforms.Compose([<br>    transforms.ToTensor(),<br>    transforms.Normalize(<span class="hljs-number">0.1307</span>, <span class="hljs-number">0.3081</span>)<br>])<br><br><span class="hljs-comment"># ä¸‹è½½è®­ç»ƒé›†ä¸æµ‹è¯•é›†</span><br>train_Data = datasets.MNIST(<br>    root = <span class="hljs-string">&#x27;F:\Jupyter\pytorch\dataset\mnist&#x27;</span>, <span class="hljs-comment"># ä¸‹è½½è·¯å¾„</span><br>    train = <span class="hljs-literal">True</span>, <span class="hljs-comment"># æ˜¯train é›†</span><br>    download = <span class="hljs-literal">True</span>, <span class="hljs-comment"># å¦‚æœè¯¥è·¯å¾„æ²¡æœ‰è¯¥æ•°æ®é›†ï¼Œå°±ä¸‹è½½</span><br>    transform = transform <span class="hljs-comment"># æ•°æ®é›†è½¬æ¢å‚æ•°</span><br>)<br><br>test_Data = datasets.MNIST(<br>    root = <span class="hljs-string">&#x27;F:\Jupyter\pytorch\dataset\mnist&#x27;</span>, <span class="hljs-comment"># ä¸‹è½½è·¯å¾„</span><br>    train = <span class="hljs-literal">False</span>, <span class="hljs-comment"># æ˜¯test é›†</span><br>    download = <span class="hljs-literal">True</span>, <span class="hljs-comment"># å¦‚æœè¯¥è·¯å¾„æ²¡æœ‰è¯¥æ•°æ®é›†ï¼Œå°±ä¸‹è½½</span><br>    transform = transform <span class="hljs-comment"># æ•°æ®é›†è½¬æ¢å‚æ•°</span><br>)<br><br><span class="hljs-comment"># æ‰¹æ¬¡åŠ è½½å™¨</span><br>train_loader = DataLoader(train_Data, shuffle=<span class="hljs-literal">True</span>, batch_size=<span class="hljs-number">64</span>)<br>test_loader = DataLoader(test_Data, shuffle=<span class="hljs-literal">False</span>, batch_size=<span class="hljs-number">64</span>)<br><br><span class="hljs-string">&#x27;&#x27;&#x27;</span><br><span class="hljs-string">æ¯ä¸ªæ ·æœ¬çš„è¾“å…¥éƒ½æ˜¯å½¢çŠ¶ä¸º28ï‚´28çš„äºŒç»´æ•°ç»„ï¼Œé‚£ä¹ˆå¯¹äº DNN æ¥è¯´ï¼Œè¾“å…¥å±‚çš„ç¥ç»å…ƒèŠ‚ç‚¹å°±è¦æœ‰28x28 = 784ä¸ªï¼›è¾“å‡ºå±‚ä½¿ç”¨ç‹¬çƒ­ç¼–ç ï¼Œéœ€è¦ 10 ä¸ªèŠ‚ç‚¹ã€‚</span><br><span class="hljs-string">&#x27;&#x27;&#x27;</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">DNN</span>(nn.Module):<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-string">&#x27;&#x27;&#x27; æ­å»ºç¥ç»ç½‘ç»œå„å±‚ &#x27;&#x27;&#x27;</span><br>        <span class="hljs-built_in">super</span>(DNN,self).__init__()<br>        self.net = nn.Sequential( <span class="hljs-comment"># æŒ‰é¡ºåºæ­å»ºå„å±‚</span><br>        nn.Flatten(), <span class="hljs-comment"># æŠŠå›¾åƒé“ºå¹³æˆä¸€ç»´</span><br>        nn.Linear(<span class="hljs-number">784</span>, <span class="hljs-number">512</span>), nn.ReLU(), <span class="hljs-comment"># ç¬¬1 å±‚ï¼šå…¨è¿æ¥å±‚</span><br>        nn.Linear(<span class="hljs-number">512</span>, <span class="hljs-number">256</span>), nn.ReLU(), <span class="hljs-comment"># ç¬¬2 å±‚ï¼šå…¨è¿æ¥å±‚</span><br>        nn.Linear(<span class="hljs-number">256</span>, <span class="hljs-number">128</span>), nn.ReLU(), <span class="hljs-comment"># ç¬¬3 å±‚ï¼šå…¨è¿æ¥å±‚</span><br>        nn.Linear(<span class="hljs-number">128</span>, <span class="hljs-number">64</span>), nn.ReLU(), <span class="hljs-comment"># ç¬¬4 å±‚ï¼šå…¨è¿æ¥å±‚</span><br>        nn.Linear(<span class="hljs-number">64</span>, <span class="hljs-number">10</span>) <span class="hljs-comment"># ç¬¬5 å±‚ï¼šå…¨è¿æ¥å±‚</span><br>    )<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">forward</span>(<span class="hljs-params">self, x</span>):<br>        <span class="hljs-string">&#x27;&#x27;&#x27; å‰å‘ä¼ æ’­ &#x27;&#x27;&#x27;</span><br>        y = self.net(x) <span class="hljs-comment"># x å³è¾“å…¥æ•°æ®</span><br>        <span class="hljs-keyword">return</span> y <span class="hljs-comment"># y å³è¾“å‡ºæ•°æ®</span><br><br>model = DNN().to(<span class="hljs-string">&#x27;cuda:0&#x27;</span>) <span class="hljs-comment"># åˆ›å»ºå­ç±»çš„å®ä¾‹ï¼Œå¹¶æ¬åˆ°GPU ä¸Š</span><br>model <span class="hljs-comment"># æŸ¥çœ‹è¯¥å®ä¾‹çš„å„å±‚</span><br><br><span class="hljs-comment"># æŸå¤±å‡½æ•°çš„é€‰æ‹©</span><br>loss_fn = nn.CrossEntropyLoss() <span class="hljs-comment"># è‡ªå¸¦softmax æ¿€æ´»å‡½æ•°</span><br><br><span class="hljs-comment"># ä¼˜åŒ–ç®—æ³•çš„é€‰æ‹©</span><br>learning_rate = <span class="hljs-number">0.01</span> <span class="hljs-comment"># è®¾ç½®å­¦ä¹ ç‡</span><br>optimizer = torch.optim.SGD(<br>    model.parameters(),<br>    lr = learning_rate,<br>    momentum = <span class="hljs-number">0.5</span><br>)<br><br><span class="hljs-comment"># è®­ç»ƒç½‘ç»œ</span><br>epochs = <span class="hljs-number">5</span><br>losses = [] <span class="hljs-comment"># è®°å½•æŸå¤±å‡½æ•°å˜åŒ–çš„åˆ—è¡¨</span><br><span class="hljs-keyword">for</span> epoch <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(epochs):<br>    <span class="hljs-keyword">for</span> (x, y) <span class="hljs-keyword">in</span> train_loader: <span class="hljs-comment"># è·å–å°æ‰¹æ¬¡çš„x ä¸y</span><br>        x, y = x.to(<span class="hljs-string">&#x27;cuda:0&#x27;</span>), y.to(<span class="hljs-string">&#x27;cuda:0&#x27;</span>)<br>        Pred = model(x) <span class="hljs-comment"># ä¸€æ¬¡å‰å‘ä¼ æ’­ï¼ˆå°æ‰¹é‡ï¼‰</span><br>        loss = loss_fn(Pred, y) <span class="hljs-comment"># è®¡ç®—æŸå¤±å‡½æ•°</span><br>        losses.append(loss.item()) <span class="hljs-comment"># è®°å½•æŸå¤±å‡½æ•°çš„å˜åŒ–</span><br>        optimizer.zero_grad() <span class="hljs-comment"># æ¸…ç†ä¸Šä¸€è½®æ»ç•™çš„æ¢¯åº¦</span><br>        loss.backward() <span class="hljs-comment"># ä¸€æ¬¡åå‘ä¼ æ’­</span><br>        optimizer.step() <span class="hljs-comment"># ä¼˜åŒ–å†…éƒ¨å‚æ•°</span><br>Fig = plt.figure()<br>plt.plot(<span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(losses)), losses)<br>plt.show()<br><br><span class="hljs-comment"># æµ‹è¯•ç½‘ç»œ</span><br>correct = <span class="hljs-number">0</span><br>total = <span class="hljs-number">0</span><br><span class="hljs-keyword">with</span> torch.no_grad(): <span class="hljs-comment"># è¯¥å±€éƒ¨å…³é—­æ¢¯åº¦è®¡ç®—åŠŸèƒ½</span><br>    <span class="hljs-keyword">for</span> (x, y) <span class="hljs-keyword">in</span> test_loader: <span class="hljs-comment"># è·å–å°æ‰¹æ¬¡çš„x ä¸y</span><br>        x, y = x.to(<span class="hljs-string">&#x27;cuda:0&#x27;</span>), y.to(<span class="hljs-string">&#x27;cuda:0&#x27;</span>)<br>        Pred = model(x) <span class="hljs-comment"># ä¸€æ¬¡å‰å‘ä¼ æ’­ï¼ˆå°æ‰¹é‡ï¼‰</span><br>        _, predicted = torch.<span class="hljs-built_in">max</span>(Pred.data, dim=<span class="hljs-number">1</span>)<br>        correct += torch.<span class="hljs-built_in">sum</span>( (predicted == y) )<br>        total += y.size(<span class="hljs-number">0</span>)<br><span class="hljs-built_in">print</span>(<span class="hljs-string">f&#x27;æµ‹è¯•é›†ç²¾å‡†åº¦: <span class="hljs-subst">&#123;<span class="hljs-number">100</span>*correct/total&#125;</span> %&#x27;</span>)<br></code></pre></td></tr></table></figure><p><img src="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/202406302232034.png"></p><p>æµ‹è¯•é›†ç²¾å‡†åº¦: 97.06999969482422 %</p>]]></content>
    
    
    <categories>
      
      <category>ç¼–ç¨‹</category>
      
      <category>python</category>
      
    </categories>
    
    
    <tags>
      
      <tag>ç¼–ç¨‹</tag>
      
      <tag>å­¦ä¹ ç¬”è®°</tag>
      
      <tag>python</tag>
      
      <tag>æ·±åº¦å­¦ä¹ </tag>
      
      <tag>pytorch</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Nestå­¦ä¹ ç¬”è®°</title>
    <link href="/2024/06/29/024%20Nest%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    <url>/2024/06/29/024%20Nest%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/</url>
    
    <content type="html"><![CDATA[<h1 id="ä¸€ã€èµ·æ­¥"><a href="#ä¸€ã€èµ·æ­¥" class="headerlink" title="ä¸€ã€èµ·æ­¥"></a>ä¸€ã€èµ·æ­¥</h1><h2 id="1-1-é¡¹ç›®åˆ›å»º"><a href="#1-1-é¡¹ç›®åˆ›å»º" class="headerlink" title="1.1 é¡¹ç›®åˆ›å»º"></a>1.1 é¡¹ç›®åˆ›å»º</h2><p>å®‰è£…è„šæ‰‹æ¶</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ npm i -g @nestjs/cli<br></code></pre></td></tr></table></figure><p>åˆ›å»ºæ–°é¡¹ç›®</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ nest new project-name<br></code></pre></td></tr></table></figure><h2 id="1-2-é¡¹ç›®æ–‡ä»¶"><a href="#1-2-é¡¹ç›®æ–‡ä»¶" class="headerlink" title="1.2 é¡¹ç›®æ–‡ä»¶"></a>1.2 é¡¹ç›®æ–‡ä»¶</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs bash">src<br> â”œâ”€â”€ app.controller.spec.ts<br> â”œâ”€â”€ app.controller.ts<br> â”œâ”€â”€ app.module.ts<br> â”œâ”€â”€ app.service.ts<br> â””â”€â”€ main.ts<br></code></pre></td></tr></table></figure><p>å«ä¹‰</p><table><thead><tr><th>æ–‡ä»¶å</th><th>å«ä¹‰</th></tr></thead><tbody><tr><td>app.controller.ts</td><td>å¸¦æœ‰å•ä¸ªè·¯ç”±çš„åŸºæœ¬æ§åˆ¶å™¨ç¤ºä¾‹ã€‚</td></tr><tr><td>app.controller.spec.ts</td><td>å¯¹äºåŸºæœ¬æ§åˆ¶å™¨çš„å•å…ƒæµ‹è¯•æ ·ä¾‹</td></tr><tr><td>app.module.ts</td><td>åº”ç”¨ç¨‹åºçš„æ ¹æ¨¡å—ã€‚</td></tr><tr><td>app.service.ts</td><td>å¸¦æœ‰å•ä¸ªæ–¹æ³•çš„åŸºæœ¬æœåŠ¡</td></tr><tr><td>main.ts</td><td>åº”ç”¨ç¨‹åºå…¥å£æ–‡ä»¶ã€‚å®ƒä½¿ç”¨ <code>NestFactory</code> ç”¨æ¥åˆ›å»º Nest åº”ç”¨å®ä¾‹ã€‚</td></tr></tbody></table><h2 id="1-3-å¯åŠ¨é¡¹ç›®"><a href="#1-3-å¯åŠ¨é¡¹ç›®" class="headerlink" title="1.3 å¯åŠ¨é¡¹ç›®"></a>1.3 å¯åŠ¨é¡¹ç›®</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">cd</span> demo1<br>yarn run start<br></code></pre></td></tr></table></figure><p><img src="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/image-20230113144220518.png" alt="image-20230113144220518"></p><p>çƒ­å¯åŠ¨é¡¹ç›®ï¼ˆå®æ—¶æ›´æ–°ï¼‰ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">yarn start:dev<br></code></pre></td></tr></table></figure><h2 id="1-4-ä¸»æ–‡ä»¶"><a href="#1-4-ä¸»æ–‡ä»¶" class="headerlink" title="1.4 ä¸»æ–‡ä»¶"></a>1.4 ä¸»æ–‡ä»¶</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// main.ts</span><br><span class="hljs-keyword">import</span> &#123; <span class="hljs-title class_">NestFactory</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;@nestjs/core&quot;</span>;<br><span class="hljs-keyword">import</span> &#123; <span class="hljs-title class_">AppModule</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./app.module&quot;</span>;<br><br><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">bootstrap</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">const</span> app = <span class="hljs-keyword">await</span> <span class="hljs-title class_">NestFactory</span>.<span class="hljs-title function_">create</span>(<span class="hljs-title class_">AppModule</span>);<br>  <span class="hljs-keyword">await</span> app.<span class="hljs-title function_">listen</span>(<span class="hljs-number">3000</span>);<br>&#125;<br><span class="hljs-title function_">bootstrap</span>();<br></code></pre></td></tr></table></figure><p>è¦åˆ›å»ºä¸€ä¸ª Nest åº”ç”¨å®ä¾‹ï¼Œæˆ‘ä»¬ä½¿ç”¨äº† <code>NestFactory</code> æ ¸å¿ƒç±»ã€‚<code>NestFactory</code> æš´éœ²äº†ä¸€äº›é™æ€æ–¹æ³•ç”¨äºåˆ›å»ºåº”ç”¨å®ä¾‹ã€‚</p><p><code>create()</code> æ–¹æ³•è¿”å›ä¸€ä¸ªå®ç° <code>INestApplication</code> æ¥å£çš„å¯¹è±¡ã€‚è¯¥å¯¹è±¡æä¾›äº†ä¸€ç»„å¯ç”¨çš„æ–¹æ³•ï¼Œæˆ‘ä»¬ä¼šåœ¨åé¢çš„ç« èŠ‚ä¸­å¯¹è¿™äº›æ–¹æ³•è¿›è¡Œè¯¦ç»†æè¿°ã€‚ åœ¨ä¸Šé¢çš„ <code>main.ts</code> ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬åªæ˜¯å¯åŠ¨ HTTP æœåŠ¡ï¼Œè®©åº”ç”¨ç¨‹åºç­‰å¾… HTTP è¯·æ±‚ã€‚</p><h2 id="1-5-åˆ›å»º-Moudle"><a href="#1-5-åˆ›å»º-Moudle" class="headerlink" title="1.5 åˆ›å»º Moudle"></a>1.5 åˆ›å»º Moudle</h2><h3 id="1-5-1-æ‰‹åŠ¨åˆ›å»º"><a href="#1-5-1-æ‰‹åŠ¨åˆ›å»º" class="headerlink" title="1.5.1 æ‰‹åŠ¨åˆ›å»º"></a>1.5.1 æ‰‹åŠ¨åˆ›å»º</h3><p>src&#x2F;auth&#x2F;auth.moudle.ts</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">import</span> &#123; <span class="hljs-title class_">Module</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;@nestjs/common&quot;</span>;<br><br><span class="hljs-meta">@Module</span>(&#123;&#125;)<br><span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AuthModule</span> &#123;&#125;<br></code></pre></td></tr></table></figure><p>å¯¼å…¥åˆ° app ä¸­</p><p>src&#x2F;app.module.ts</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">import</span> &#123; <span class="hljs-title class_">Module</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;@nestjs/common&quot;</span>;<br><span class="hljs-keyword">import</span> &#123; <span class="hljs-title class_">AuthModule</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./auth/auth.module&quot;</span>;<br><br><span class="hljs-meta">@Module</span>(&#123;<br>  <span class="hljs-attr">imports</span>: [<span class="hljs-title class_">AuthModule</span>],<br>&#125;)<br><span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AppModule</span> &#123;&#125;<br></code></pre></td></tr></table></figure><h3 id="1-5-2-å‘½ä»¤è¡Œåˆ›å»º"><a href="#1-5-2-å‘½ä»¤è¡Œåˆ›å»º" class="headerlink" title="1.5.2 å‘½ä»¤è¡Œåˆ›å»º"></a>1.5.2 å‘½ä»¤è¡Œåˆ›å»º</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs base">nest g module user<br></code></pre></td></tr></table></figure><p><img src="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/image-20230113165522565.png" alt="image-20230113165522565"></p><h2 id="1-6-åˆ›å»ºå®Œæ•´æ¨¡å—"><a href="#1-6-åˆ›å»ºå®Œæ•´æ¨¡å—" class="headerlink" title="1.6 åˆ›å»ºå®Œæ•´æ¨¡å—"></a>1.6 åˆ›å»ºå®Œæ•´æ¨¡å—</h2><p><img src="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/image-20230113170716951.png" alt="image-20230113170716951"></p><p>controller å…³æ³¨äºè¯·æ±‚çš„é€»è¾‘</p><p>service å…³æ³¨å…·ä½“å®ç°</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// src/auth/auth.module.ts</span><br><br><span class="hljs-keyword">import</span> &#123; <span class="hljs-title class_">Module</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;@nestjs/common&quot;</span>;<br><span class="hljs-keyword">import</span> &#123; <span class="hljs-title class_">AuthContriller</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./auth.controller&quot;</span>;<br><span class="hljs-keyword">import</span> &#123; <span class="hljs-title class_">AuthService</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./auth.service&quot;</span>;<br><br><span class="hljs-meta">@Module</span>(&#123;<br>  <span class="hljs-attr">controllers</span>: [<span class="hljs-title class_">AuthContriller</span>],<br>  <span class="hljs-attr">providers</span>: [<span class="hljs-title class_">AuthService</span>],<br>&#125;)<br><span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AuthModule</span> &#123;&#125;<br></code></pre></td></tr></table></figure><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// src/auth/auth.controller.ts</span><br><br><span class="hljs-keyword">import</span> &#123; <span class="hljs-title class_">Controller</span>, <span class="hljs-title class_">Post</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;@nestjs/common&quot;</span>;<br><span class="hljs-keyword">import</span> &#123; <span class="hljs-title class_">AuthService</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./auth.service&quot;</span>;<br><br><span class="hljs-meta">@Controller</span>(<span class="hljs-string">&quot;auth&quot;</span>)<br><span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AuthContriller</span> &#123;<br>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"><span class="hljs-keyword">private</span> authService: AuthService</span>) &#123;&#125;<br><br>  <span class="hljs-comment">// Post auth/signup</span><br>  <span class="hljs-meta">@Post</span>(<span class="hljs-string">&quot;signup&quot;</span>)<br>  <span class="hljs-title function_">signup</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">authService</span>.<span class="hljs-title function_">signup</span>();<br>  &#125;<br><br>  <span class="hljs-comment">// Post auth/signin</span><br>  <span class="hljs-meta">@Post</span>(<span class="hljs-string">&quot;signin&quot;</span>)<br>  <span class="hljs-title function_">signin</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">authService</span>.<span class="hljs-title function_">signin</span>();<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// src/auth/auth.service.ts</span><br><br><span class="hljs-keyword">import</span> &#123; <span class="hljs-title class_">Injectable</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;@nestjs/common&quot;</span>;<br><br><span class="hljs-meta">@Injectable</span>()<br><span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AuthService</span> &#123;<br>  <span class="hljs-title function_">signup</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">return</span> &#123; <span class="hljs-attr">msg</span>: <span class="hljs-string">&quot;This is a signup page!&quot;</span> &#125;;<br>  &#125;<br><br>  <span class="hljs-title function_">signin</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">return</span> &#123; <span class="hljs-attr">msg</span>: <span class="hljs-string">&quot;This is a signin page!&quot;</span> &#125;;<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h1 id="äºŒã€åŸºæœ¬æ¦‚å¿µ"><a href="#äºŒã€åŸºæœ¬æ¦‚å¿µ" class="headerlink" title="äºŒã€åŸºæœ¬æ¦‚å¿µ"></a>äºŒã€åŸºæœ¬æ¦‚å¿µ</h1><h2 id="2-1-æ§åˆ¶å™¨"><a href="#2-1-æ§åˆ¶å™¨" class="headerlink" title="2.1 æ§åˆ¶å™¨"></a>2.1 æ§åˆ¶å™¨</h2><p><img src="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/image-20230113144733598.png" alt="image-20230113144733598"></p><p>ç›®çš„ï¼šæ¥å—åº”ç”¨çš„ç‰¹å®šè¯·æ±‚ï¼›</p><p>æ§åˆ¶å™¨ä¸è·¯ç”±ï¼šé€šå¸¸ä¸€ä¸ªæ§åˆ¶å™¨å«å¤šä¸ªè¯·æ±‚ï¼Œä¸åŒçš„è·¯ç”±æ‰§è¡Œä¸åŒçš„æ“çºµï¼›</p><p>åˆ›å»ºæ§åˆ¶å™¨ï¼šä½¿ç”¨ç±»å’Œ<code>è£…é¥°å™¨</code>ï¼›</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ nest g controller cats<br></code></pre></td></tr></table></figure><h3 id="2-1-1-è·¯ç”±"><a href="#2-1-1-è·¯ç”±" class="headerlink" title="2.1.1 è·¯ç”±"></a>2.1.1 è·¯ç”±</h3><p>åœ¨ä¸‹é¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ <code>@Controller()</code> è£…é¥°å™¨å®šä¹‰ä¸€ä¸ªåŸºæœ¬çš„æ§åˆ¶å™¨ã€‚</p><p>å¯é€‰ è·¯ç”±è·¯å¾„å‰ç¼€è®¾ç½®ä¸º <code>custom</code>ã€‚åœ¨ <code>@Controller()</code> è£…é¥°å™¨ä¸­ä½¿ç”¨è·¯å¾„å‰ç¼€å¯ä»¥ä½¿æˆ‘ä»¬è½»æ¾åœ°å¯¹ä¸€ç»„ç›¸å…³çš„è·¯ç”±è¿›è¡Œåˆ†ç»„ï¼Œå¹¶æœ€å¤§ç¨‹åº¦åœ°å‡å°‘é‡å¤ä»£ç ã€‚</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// app.controller.ts</span><br><span class="hljs-keyword">import</span> &#123; <span class="hljs-title class_">Controller</span>, <span class="hljs-title class_">Get</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;@nestjs/common&quot;</span>;<br><span class="hljs-keyword">import</span> &#123; <span class="hljs-title class_">AppService</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./app.service&quot;</span>;<br><br><span class="hljs-meta">@Controller</span>(<span class="hljs-string">&quot;/custom&quot;</span>)<br><span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AppController</span> &#123;<br>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"><span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> appService: AppService</span>) &#123;&#125;<br><br>  <span class="hljs-meta">@Get</span>(<span class="hljs-string">&quot;/eye&quot;</span>)<br>  <span class="hljs-title function_">getEye</span>(): <span class="hljs-built_in">string</span> &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;æˆ‘æ˜¯çœ¼ç›&quot;</span>;<br>  &#125;<br><br>  <span class="hljs-meta">@Get</span>(<span class="hljs-string">&quot;/mouse&quot;</span>)<br>  <span class="hljs-title function_">getMouse</span>(): <span class="hljs-built_in">string</span> &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;æˆ‘æ˜¯å˜´å·´&quot;</span>;<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>è¯·æ±‚</p><p><img src="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/image-20230113145438467.png" alt="image-20230113145438467"></p><p><img src="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/image-20230113145600949.png" alt="image-20230113145600949"></p><blockquote><p>è¿™é‡Œæ¡ˆä¾‹æ¥è¯´åº”è¯¥è¿”å›çŠ¶æ€ç åŠ æ•°æ®ï¼Œè€Œç½‘é¡µä¸­ç›´æ¥æ˜¾ç¤ºäº†æ•°æ®ï¼ŒåŸå› æ˜¯ nest æœ‰ä¸¤ç§æ“ä½œå“åº”ã€‚</p><p>æ ‡å‡†ï¼šä½¿ç”¨è¿™ä¸ªå†…ç½®æ–¹æ³•ï¼Œå½“è¯·æ±‚å¤„ç†ç¨‹åºè¿”å›ä¸€ä¸ª <code>JavaScript</code> å¯¹è±¡æˆ–æ•°ç»„æ—¶ï¼Œå®ƒå°†è‡ªåŠ¨åºåˆ—åŒ–ä¸º <code>JSON</code>ã€‚ä½†æ˜¯ï¼Œå½“å®ƒè¿”å›ä¸€ä¸ª <code>JavaScript</code> åŸºæœ¬ç±»å‹ï¼ˆä¾‹å¦‚<code>stringã€numberã€boolean</code>ï¼‰æ—¶ï¼Œ Nest å°†åªå‘é€å€¼ï¼Œè€Œä¸å°è¯•åºåˆ—åŒ–å®ƒã€‚è¿™ä½¿å“åº”å¤„ç†å˜å¾—ç®€å•ï¼šåªéœ€è¦è¿”å›å€¼ï¼Œå…¶ä½™çš„ç”± Nest è´Ÿè´£ã€‚</p><p>ç±»åº“ç‰¹æœ‰ï¼šæˆ‘ä»¬å¯ä»¥åœ¨å‡½æ•°ç­¾åå¤„é€šè¿‡ <code>@Res()</code> æ³¨å…¥ç±»åº“ç‰¹å®šçš„å“åº”å¯¹è±¡ï¼ˆä¾‹å¦‚ï¼Œ <code>Express</code>ï¼‰ã€‚ä½¿ç”¨æ­¤æ–¹æ³•ï¼Œä½ å°±èƒ½ä½¿ç”¨ç”±è¯¥å“åº”å¯¹è±¡æš´éœ²çš„åŸç”Ÿå“åº”å¤„ç†å‡½æ•°ã€‚ä¾‹å¦‚ï¼Œä½¿ç”¨ <code>Express</code>ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ <code>response.status(200).send()</code> æ„å»ºå“åº”</p></blockquote><p>ç±»åº“ç‰¹æœ‰</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-meta">@Get</span>(<span class="hljs-string">&#x27;head&#x27;</span>)<br><span class="hljs-title function_">getHead</span>(<span class="hljs-params"><span class="hljs-meta">@Res</span>() res</span>) &#123;<br>    res.<span class="hljs-title function_">status</span>(<span class="hljs-title class_">HttpStatus</span>.<span class="hljs-property">OK</span>).<span class="hljs-title function_">send</span>();<br>&#125;<br></code></pre></td></tr></table></figure><p>è€Œä¸”ï¼Œåœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­ï¼Œä½ å¤±å»ä¸ä¾èµ–äº Nest æ ‡å‡†å“åº”å¤„ç†çš„ Nest åŠŸèƒ½ï¼ˆä¾‹å¦‚ï¼Œæ‹¦æˆªå™¨ï¼ˆInterceptorsï¼‰ å’Œ <code>@HttpCode()</code>&#x2F;<code>@Header()</code> è£…é¥°å™¨ï¼‰çš„å…¼å®¹æ€§ã€‚è¦è§£å†³æ­¤é—®é¢˜ï¼Œå¯ä»¥å°† <code>passthrough</code> é€‰é¡¹è®¾ç½®ä¸º <code>true</code>ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-meta">@Get</span>(<span class="hljs-string">&#x27;head&#x27;</span>)<br><span class="hljs-title function_">getHead</span>(<span class="hljs-params"><span class="hljs-meta">@Res</span>(&#123;passthrough:<span class="hljs-literal">true</span>&#125;) res</span>) &#123;<br>    res.<span class="hljs-title function_">status</span>(<span class="hljs-title class_">HttpStatus</span>.<span class="hljs-property">OK</span>)<br>    <span class="hljs-keyword">return</span> []<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="2-1-2-Request"><a href="#2-1-2-Request" class="headerlink" title="2.1.2 Request"></a>2.1.2 <a href="https://docs.nestjs.cn/9/controllers?id=request">Request</a></h3><p>è®¿é—®è¯·æ±‚ç»†èŠ‚ã€‚</p><p>éœ€è¦å¼•å…¥<code>Req</code>å’Œ<code>import &#123;Request&#125; from &#39;express&#39;;</code></p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">import</span> &#123; <span class="hljs-title class_">Controller</span>, <span class="hljs-title class_">Get</span>, <span class="hljs-title class_">Req</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;@nestjs/common&quot;</span>;<br><span class="hljs-keyword">import</span> &#123; <span class="hljs-title class_">AppService</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./app.service&quot;</span>;<br><span class="hljs-keyword">import</span> &#123; <span class="hljs-title class_">Request</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;express&quot;</span>;<br><br><span class="hljs-meta">@Controller</span>(<span class="hljs-string">&quot;/custom&quot;</span>)<br><span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AppController</span> &#123;<br>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"><span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> appService: AppService</span>) &#123;&#125;<br><br>  <span class="hljs-meta">@Get</span>(<span class="hljs-string">&quot;/eye&quot;</span>)<br>  <span class="hljs-title function_">getEye</span>(<span class="hljs-meta">@Req</span>() <span class="hljs-attr">request</span>: <span class="hljs-title class_">Request</span>): <span class="hljs-built_in">string</span> &#123;<br>    <span class="hljs-comment">// è¿™é‡Œçš„Requestè¡¨ç¤ºç±»å‹</span><br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(request);<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;æˆ‘æ˜¯çœ¼ç›&quot;</span>;<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><blockquote><p><code>Request</code> å¯¹è±¡ä»£è¡¨ <code>HTTP</code> è¯·æ±‚ï¼Œå¹¶å…·æœ‰æŸ¥è¯¢å­—ç¬¦ä¸²ï¼Œè¯·æ±‚å‚æ•°å‚æ•°ï¼ŒHTTP æ ‡å¤´ï¼ˆHTTP headerï¼‰ å’Œ æ­£æ–‡ï¼ˆHTTP bodyï¼‰çš„å±æ€§ï¼ˆåœ¨<a href="https://expressjs.com/en/api.html#req">è¿™é‡Œ</a>é˜…è¯»æ›´å¤šï¼‰ã€‚åœ¨å¤šæ•°æƒ…å†µä¸‹ï¼Œä¸å¿…æ‰‹åŠ¨è·å–å®ƒä»¬ã€‚ æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸“ç”¨çš„è£…é¥°å™¨ï¼Œæ¯”å¦‚å¼€ç®±å³ç”¨çš„ <code>@Body()</code> æˆ– <code>@Query()</code> ã€‚ ä¸‹é¢æ˜¯ Nest æä¾›çš„è£…é¥°å™¨åŠå…¶ä»£è¡¨çš„åº•å±‚å¹³å°ç‰¹å®šå¯¹è±¡çš„å¯¹ç…§åˆ—è¡¨ã€‚</p></blockquote><p>å¤šä¸ªè£…é¥°å™¨</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-meta">@Get</span>(<span class="hljs-string">&#x27;/eye&#x27;</span>)<br><span class="hljs-title function_">getEye</span>(<span class="hljs-meta">@Req</span>() <span class="hljs-attr">request</span>:<span class="hljs-title class_">Request</span>,<span class="hljs-meta">@Ip</span>() ip,<span class="hljs-meta">@HostParam</span>() host): <span class="hljs-built_in">string</span> &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(request.<span class="hljs-property">ip</span>);<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(ip);<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(host);<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;æˆ‘æ˜¯çœ¼ç›&#x27;</span><br>&#125;<br></code></pre></td></tr></table></figure><h3 id="2-1-3-Post"><a href="#2-1-3-Post" class="headerlink" title="2.1.3 Post"></a>2.1.3 Post</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-meta">@Post</span>(<span class="hljs-string">&#x27;/foot&#x27;</span>)<br><span class="hljs-title function_">getFoot</span>():<span class="hljs-built_in">string</span>&#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;æˆ‘æ˜¯è„š&#x27;</span><br>&#125;<br></code></pre></td></tr></table></figure><p><img src="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/image-20230113153133595.png" alt="image-20230113153133595"></p><blockquote><p>Nest ä¸ºæ‰€æœ‰æ ‡å‡†çš„ HTTP æ–¹æ³•æä¾›äº†ç›¸åº”çš„è£…é¥°å™¨ï¼š<code>@Put()</code>ã€<code>@Delete()</code>ã€<code>@Patch()</code>ã€<code>@Options()</code>ã€ä»¥åŠ <code>@Head()</code>ã€‚æ­¤å¤–ï¼Œ<code>@All()</code> åˆ™ç”¨äºå®šä¹‰ä¸€ä¸ªç”¨äºå¤„ç†æ‰€æœ‰ HTTP è¯·æ±‚æ–¹æ³•çš„å¤„ç†ç¨‹åºã€‚</p></blockquote><h3 id="2-1-4-è·¯ç”±é€šé…ç¬¦"><a href="#2-1-4-è·¯ç”±é€šé…ç¬¦" class="headerlink" title="2.1.4 è·¯ç”±é€šé…ç¬¦"></a>2.1.4 è·¯ç”±é€šé…ç¬¦</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-meta">@Get</span>(<span class="hljs-string">&#x27;hand*s&#x27;</span>)<br><span class="hljs-title function_">getHead</span>():<span class="hljs-built_in">string</span>&#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;æˆ‘æ˜¯æ‰‹&#x27;</span><br>&#125;<br></code></pre></td></tr></table></figure><p><img src="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/image-20230113154504739.png" alt="image-20230113154504739"></p><blockquote><p>è·¯ç”±è·¯å¾„ <code>&#39;ab*cd&#39;</code> å°†åŒ¹é… <code>abcd</code> ã€<code>ab_cd</code> ã€<code>abecd</code> ç­‰ã€‚å­—ç¬¦ <code>?</code> ã€<code>+</code> ã€ <code>*</code> ä»¥åŠ <code>()</code> æ˜¯å®ƒä»¬çš„æ­£åˆ™è¡¨è¾¾å¼å¯¹åº”é¡¹çš„å­é›†ã€‚è¿å­—ç¬¦ï¼ˆ<code>-</code>ï¼‰ å’Œç‚¹ï¼ˆ<code>.</code>ï¼‰æŒ‰å­—ç¬¦ä¸²è·¯å¾„é€å­—è§£æã€‚</p></blockquote><h3 id="2-1-5-çŠ¶æ€ç "><a href="#2-1-5-çŠ¶æ€ç " class="headerlink" title="2.1.5 çŠ¶æ€ç "></a>2.1.5 çŠ¶æ€ç </h3><p>çŠ¶æ€ç é»˜è®¤æ˜¯ 200ï¼ˆpost ä¸º 201ï¼‰ï¼Œå¯é€šè¿‡<code>@HttpCode()</code>æ›´æ”¹çŠ¶æ€ç </p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-meta">@Post</span>(<span class="hljs-string">&#x27;foot&#x27;</span>)<br><span class="hljs-meta">@HttpCode</span>(<span class="hljs-number">204</span>)<br><span class="hljs-title function_">getFoot</span>():<span class="hljs-built_in">string</span>&#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;æˆ‘æ˜¯è„š&#x27;</span><br>&#125;<br></code></pre></td></tr></table></figure><h3 id="2-1-6-Headers"><a href="#2-1-6-Headers" class="headerlink" title="2.1.6 Headers"></a>2.1.6 <a href="https://docs.nestjs.cn/9/controllers?id=headers">Headers</a></h3><p>æŒ‡å®šè‡ªå®šä¹‰å“åº”å¤´ï¼Œå¯ä»¥ä½¿ç”¨ <code>@header()</code> è£…é¥°å™¨æˆ–ç±»åº“ç‰¹æœ‰çš„å“åº”å¯¹è±¡</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-meta">@Post</span>()<br><span class="hljs-meta">@Header</span>(<span class="hljs-string">&#x27;Cache-Control&#x27;</span>, <span class="hljs-string">&#x27;none&#x27;</span>)<br><span class="hljs-title function_">create</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;This action adds a new cat&#x27;</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="2-1-7-é‡å®šå‘"><a href="#2-1-7-é‡å®šå‘" class="headerlink" title="2.1.7 é‡å®šå‘"></a>2.1.7 é‡å®šå‘</h3><p>è¦å°†å“åº”é‡å®šå‘åˆ°ç‰¹å®šçš„ <code>URL</code>ï¼Œå¯ä»¥ä½¿ç”¨ <code>@Redirect()</code> è£…é¥°å™¨æˆ–ç‰¹å®šäºåº“çš„å“åº”å¯¹è±¡</p><p><code>@Redirect() </code>è£…é¥°å™¨æœ‰ä¸¤ä¸ªå¯é€‰å‚æ•°ï¼Œ<code>url </code>å’Œ <code>statusCode</code>ã€‚ å¦‚æœçœç•¥ï¼Œåˆ™ <code>statusCode</code> é»˜è®¤ä¸º <code>302</code></p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-meta">@Get</span>()<br><span class="hljs-meta">@Redirect</span>(<span class="hljs-string">&#x27;https://nestjs.com&#x27;</span>, <span class="hljs-number">301</span>)<br></code></pre></td></tr></table></figure><h3 id="2-1-8-è·¯ç”±å‚æ•°"><a href="#2-1-8-è·¯ç”±å‚æ•°" class="headerlink" title="2.1.8 è·¯ç”±å‚æ•°"></a>2.1.8 è·¯ç”±å‚æ•°</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-meta">@Get</span>(<span class="hljs-string">&#x27;mouse/:id&#x27;</span>)<br><span class="hljs-title function_">getMouseId</span>(<span class="hljs-meta">@Param</span>() params): <span class="hljs-built_in">string</span> &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">`æˆ‘æ˜¯å˜´å·´<span class="hljs-subst">$&#123;params.id&#125;</span>`</span><br>&#125;<br></code></pre></td></tr></table></figure><p><img src="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/image-20230113155638965.png" alt="image-20230113155638965"></p><p>æˆ–è€…å†™æˆ</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-meta">@Get</span>(<span class="hljs-string">&#x27;mouse/:id&#x27;</span>)<br><span class="hljs-title function_">getMouseId</span>(<span class="hljs-meta">@Param</span>(<span class="hljs-string">&#x27;id&#x27;</span>) id): <span class="hljs-built_in">string</span> &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">`æˆ‘æ˜¯å˜´å·´<span class="hljs-subst">$&#123;id&#125;</span>`</span><br>&#125;<br></code></pre></td></tr></table></figure><h3 id="2-1-9-å­åŸŸè·¯ç”±"><a href="#2-1-9-å­åŸŸè·¯ç”±" class="headerlink" title="2.1.9 å­åŸŸè·¯ç”±"></a>2.1.9 <a href="https://docs.nestjs.cn/9/controllers?id=%E5%AD%90%E5%9F%9F%E8%B7%AF%E7%94%B1">å­åŸŸè·¯ç”±</a></h3><p><code>@Controller</code> è£…é¥°å™¨å¯ä»¥æ¥å—ä¸€ä¸ª <code>host</code> é€‰é¡¹ï¼Œä»¥è¦æ±‚ä¼ å…¥è¯·æ±‚çš„ <code>HTTP</code> ä¸»æœºåŒ¹é…æŸä¸ªç‰¹å®šå€¼</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-meta">@Controller</span>(&#123; <span class="hljs-attr">host</span>: <span class="hljs-string">&quot;admin.example.com&quot;</span> &#125;)<br><span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AdminController</span> &#123;<br>  <span class="hljs-meta">@Get</span>()<br>  <span class="hljs-title function_">index</span>(): <span class="hljs-built_in">string</span> &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;Admin page&quot;</span>;<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="2-1-10-å¼‚æ­¥æ€§"><a href="#2-1-10-å¼‚æ­¥æ€§" class="headerlink" title="2.1.10 å¼‚æ­¥æ€§"></a>2.1.10 å¼‚æ­¥æ€§</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">/* cats.controller.ts */</span><br><br><span class="hljs-meta">@Get</span>()<br><span class="hljs-keyword">async</span> <span class="hljs-title function_">findAll</span>(): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">any</span>[]&gt; &#123;<br>  <span class="hljs-keyword">return</span> [];<br>&#125;<br><br></code></pre></td></tr></table></figure><h3 id="2-1-11-è¯·æ±‚è´Ÿè½½"><a href="#2-1-11-è¯·æ±‚è´Ÿè½½" class="headerlink" title="2.1.11 è¯·æ±‚è´Ÿè½½"></a>2.1.11 è¯·æ±‚è´Ÿè½½</h3><p>é¦–å…ˆï¼ˆå¦‚æœæ‚¨ä½¿ç”¨ TypeScriptï¼‰ï¼Œæˆ‘ä»¬éœ€è¦ç¡®å®š <code>DTO</code>ï¼ˆæ•°æ®ä¼ è¾“å¯¹è±¡ï¼‰æ¨¡å¼ã€‚<code>DTO</code>æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå®ƒå®šä¹‰äº†å¦‚ä½•é€šè¿‡ç½‘ç»œå‘é€æ•°æ®ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡ä½¿ç”¨ <strong>TypeScript</strong> æ¥å£ï¼ˆInterfaceï¼‰æˆ–ç®€å•çš„ç±»ï¼ˆClassï¼‰æ¥å®šä¹‰ DTO æ¨¡å¼ã€‚æœ‰è¶£çš„æ˜¯ï¼Œæˆ‘ä»¬åœ¨è¿™é‡Œæ¨èä½¿ç”¨<strong>ç±»</strong>ã€‚</p><p><img src="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/image-20230113193701850.png" alt="image-20230113193701850"></p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">/*</span><br><span class="hljs-comment">  create-auto.dto.ts</span><br><span class="hljs-comment">*/</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CreateAuthDto</span> &#123;<br>  <span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span>;<br>  <span class="hljs-attr">age</span>: <span class="hljs-built_in">number</span>;<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">/* auto.controller.ts */</span><br><br><span class="hljs-meta">@Get</span>(<span class="hljs-string">&#x27;getUser/:id&#x27;</span>)<br><span class="hljs-title function_">getUser</span>(<span class="hljs-params"></span><br><span class="hljs-params">    <span class="hljs-meta">@Body</span>() body:CreateAuthDto,</span><br><span class="hljs-params">    <span class="hljs-meta">@Param</span>() params:&#123;id:<span class="hljs-built_in">number</span>&#125;</span><br><span class="hljs-params"></span>)&#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">authService</span>.<span class="hljs-title function_">getUser</span>(body,params);<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">/* auto.service.ts */</span><br><br><span class="hljs-title function_">getUser</span>(<span class="hljs-params"></span><br><span class="hljs-params">    body:CreateAuthDto,</span><br><span class="hljs-params">    params:&#123;id:<span class="hljs-built_in">number</span>&#125;</span><br><span class="hljs-params"></span>)&#123;<br>    <span class="hljs-keyword">return</span> &#123;<span class="hljs-attr">msg</span>:body,params&#125;<br>&#125;<br></code></pre></td></tr></table></figure><h1 id="å…­ã€ç®¡é“"><a href="#å…­ã€ç®¡é“" class="headerlink" title="å…­ã€ç®¡é“"></a>å…­ã€ç®¡é“</h1><h2 id="6-1-åº”ç”¨åœºæ™¯"><a href="#6-1-åº”ç”¨åœºæ™¯" class="headerlink" title="6.1 åº”ç”¨åœºæ™¯"></a>6.1 åº”ç”¨åœºæ™¯</h2><p>ç®¡é“æœ‰ä¸¤ä¸ªå…¸å‹çš„åº”ç”¨åœºæ™¯:</p><ul><li><strong>è½¬æ¢</strong>ï¼šç®¡é“å°†è¾“å…¥æ•°æ®è½¬æ¢ä¸ºæ‰€éœ€çš„æ•°æ®è¾“å‡º(ä¾‹å¦‚ï¼Œå°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºæ•´æ•°)</li><li><strong>éªŒè¯</strong>ï¼šå¯¹è¾“å…¥æ•°æ®è¿›è¡ŒéªŒè¯ï¼Œå¦‚æœéªŒè¯æˆåŠŸç»§ç»­ä¼ é€’; éªŒè¯å¤±è´¥åˆ™æŠ›å‡ºå¼‚å¸¸</li></ul><h2 id="6-2-å†…ç½®ç®¡é“"><a href="#6-2-å†…ç½®ç®¡é“" class="headerlink" title="6.2 å†…ç½®ç®¡é“"></a>6.2 å†…ç½®ç®¡é“</h2><p><code>Nest</code> è‡ªå¸¦ä¹ä¸ªå¼€ç®±å³ç”¨çš„ç®¡é“ï¼Œå³</p><ul><li><code>ValidationPipe</code></li><li><code>ParseIntPipe</code></li><li><code>ParseFloatPipe</code></li><li><code>ParseBoolPipe</code></li><li><code>ParseArrayPipe</code></li><li><code>ParseUUIDPipe</code></li><li><code>ParseEnumPipe</code></li><li><code>DefaultValuePipe</code></li><li><code>ParseFilePipe</code></li></ul><p>ä»–ä»¬ä» <code>@nestjs/common</code> åŒ…ä¸­å¯¼å‡ºã€‚</p><h2 id="6-3-ç»‘å®šç®¡é“"><a href="#6-3-ç»‘å®šç®¡é“" class="headerlink" title="6.3 ç»‘å®šç®¡é“"></a>6.3 ç»‘å®šç®¡é“</h2><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">/* auth.controller.ts */</span><br><br><span class="hljs-meta">@Get</span>(<span class="hljs-string">&#x27;searchUser/:useId&#x27;</span>)<br><span class="hljs-title function_">searchUser</span>(<span class="hljs-params"><span class="hljs-meta">@Param</span>(<span class="hljs-string">&#x27;useId&#x27;</span>,ParseIntPipe) id:<span class="hljs-built_in">number</span></span>)&#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">authService</span>.<span class="hljs-title function_">searchUser</span>(id);<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">/* auth.service.ts */</span><br><br><span class="hljs-title function_">searchUser</span>(<span class="hljs-params">id:<span class="hljs-built_in">number</span></span>)&#123;<br>    <span class="hljs-keyword">return</span> &#123;<span class="hljs-attr">msg</span>:id&#125;<br>&#125;<br></code></pre></td></tr></table></figure><blockquote><p>è¿™é‡Œç»‘å®šçš„ç®¡é“æ˜¯ä¸€ä¸ªç±»è€Œä¸æ˜¯ä¸€ä¸ªå®ä¾‹å¯¹è±¡ï¼Œå¦‚æœè¦æ”¹å˜å†…ç½®ç®¡é“çš„è¡Œä¸ºï¼Œåœ¨ç»‘å®šæ—¶é€šè¿‡ new æ–°å»ºä¸€ä¸ªå®ä¾‹å¯¹è±¡å¹¶ç»‘å®š</p></blockquote><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-meta">@Get</span>(<span class="hljs-string">&#x27;searchUser/:useId&#x27;</span>)<br><span class="hljs-title function_">searchUser</span>(<span class="hljs-params"><span class="hljs-meta">@Param</span>(<span class="hljs-string">&#x27;useId&#x27;</span>,<span class="hljs-keyword">new</span> ParseIntPipe(&#123; errorHttpStatusCode: HttpStatus.NOT_ACCEPTABLE &#125;)) id:<span class="hljs-built_in">number</span></span>)&#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">authService</span>.<span class="hljs-title function_">searchUser</span>(id);<br>&#125;<br></code></pre></td></tr></table></figure><blockquote><p>ä¸”ä¼šå°† string è½¬æ¢ä¸º int</p></blockquote><p>æˆåŠŸ</p><p><img src="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/image-20230113195136018.png" alt="image-20230113195136018"></p><p>å¤±è´¥</p><p><img src="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/image-20230113195219407.png" alt="image-20230113195219407"></p><h1 id="ä¸ƒã€æŠ€æœ¯"><a href="#ä¸ƒã€æŠ€æœ¯" class="headerlink" title="ä¸ƒã€æŠ€æœ¯"></a>ä¸ƒã€æŠ€æœ¯</h1><h2 id="7-1éªŒè¯"><a href="#7-1éªŒè¯" class="headerlink" title="7.1éªŒè¯"></a>7.1<a href="https://docs.nestjs.cn/9/techniques?id=%E9%AA%8C%E8%AF%81">éªŒè¯</a></h2><h3 id="7-1-1-å…¨å±€ä½¿ç”¨"><a href="#7-1-1-å…¨å±€ä½¿ç”¨" class="headerlink" title="7.1.1 å…¨å±€ä½¿ç”¨"></a>7.1.1 å…¨å±€ä½¿ç”¨</h3><p>å®‰è£…ä¾èµ–</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ npm i --save class-validator class-transformer<br></code></pre></td></tr></table></figure><p>æ³¨å…¥å…¨å±€éªŒè¯ç®¡é“</p><p><code>app.useGlobalPipes(new ValidationPipe())</code></p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">/* main.ts */</span><br><br><span class="hljs-keyword">import</span> &#123; <span class="hljs-title class_">ValidationPipe</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;@nestjs/common&quot;</span>;<br><span class="hljs-keyword">import</span> &#123; <span class="hljs-title class_">NestApplication</span>, <span class="hljs-title class_">NestFactory</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;@nestjs/core&quot;</span>;<br><span class="hljs-keyword">import</span> &#123; <span class="hljs-title class_">AppModule</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./app.module&quot;</span>;<br><br><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">bootstrap</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">const</span> app = <span class="hljs-keyword">await</span> <span class="hljs-title class_">NestFactory</span>.<span class="hljs-title function_">create</span>(<span class="hljs-title class_">AppModule</span>);<br>  app.<span class="hljs-title function_">useGlobalPipes</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">ValidationPipe</span>());<br>  <span class="hljs-keyword">await</span> app.<span class="hljs-title function_">listen</span>(<span class="hljs-number">3000</span>);<br>&#125;<br><span class="hljs-title function_">bootstrap</span>();<br></code></pre></td></tr></table></figure><p>Dto</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">import</span> &#123; <span class="hljs-title class_">IsEmail</span>, <span class="hljs-title class_">IsNotEmpty</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;class-validator&quot;</span>;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UpdateAuthDto</span> &#123;<br>  <span class="hljs-meta">@IsEmail</span>()<br>  <span class="hljs-attr">email</span>: <span class="hljs-built_in">string</span>; <span class="hljs-comment">// emailéªŒè¯</span><br><br>  <span class="hljs-meta">@IsNotEmpty</span>()<br>  <span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span>; <span class="hljs-comment">// ä¸ä¸ºç©ºéªŒè¯</span><br>&#125;<br></code></pre></td></tr></table></figure><p>ä½¿ç”¨éªŒè¯</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">/* auth.controller.ts */</span><br><br><span class="hljs-meta">@Get</span>(<span class="hljs-string">&#x27;updateUser&#x27;</span>)<br><span class="hljs-title function_">updateUser</span>(<span class="hljs-params"><span class="hljs-meta">@Body</span>() body:UpdateAuthDto</span>)&#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">authService</span>.<span class="hljs-title function_">updateUser</span>(body);<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">/* auth.service.ts */</span><br><br><span class="hljs-title function_">updateUser</span>(<span class="hljs-params">body:UpdateAuthDto</span>)&#123;<br>    <span class="hljs-keyword">return</span> &#123;<span class="hljs-attr">msg</span>:body&#125;;<br>&#125;<br></code></pre></td></tr></table></figure><p>å¤±è´¥</p><p><img src="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/image-20230113211331532.png" alt="image-20230113211331532"></p><p>æˆåŠŸ</p><p><img src="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/image-20230113211258694.png" alt="image-20230113211258694"></p><h3 id="7-1-2-å‰¥ç¦»å±æ€§"><a href="#7-1-2-å‰¥ç¦»å±æ€§" class="headerlink" title="7.1.2 å‰¥ç¦»å±æ€§"></a>7.1.2 å‰¥ç¦»å±æ€§</h3><blockquote><p>æœ‰æ—¶æˆ‘ä»¬ä¸å¤„ç† token è¿™ä¸ªå­—æ®µï¼Œè€Œå‰ç«¯åœ¨è¯·æ±‚æ—¶å‘é€äº†è¿™ä¸ªå­—æ®µï¼Œè¿™æ˜¯å¯ä»¥ä½¿ç”¨å‰¥ç¦»å±æ€§ï¼Œå°†ä¸æ¥å—ç”¨ä¸åˆ°çš„å±æ€§</p></blockquote><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs typescript">app.<span class="hljs-title function_">useGlobalPipes</span>(<br>  <span class="hljs-keyword">new</span> <span class="hljs-title class_">ValidationPipe</span>(&#123;<br>    <span class="hljs-attr">whitelist</span>: <span class="hljs-literal">true</span>,<br>  &#125;)<br>);<br></code></pre></td></tr></table></figure><p>ä½¿ç”¨å</p><p><img src="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/image-20230113212050272.png" alt="image-20230113212050272"></p><h3 id="7-1-3-ä½¿ç”¨ç®¡é“è½¬æ¢"><a href="#7-1-3-ä½¿ç”¨ç®¡é“è½¬æ¢" class="headerlink" title="7.1.3 ä½¿ç”¨ç®¡é“è½¬æ¢"></a>7.1.3 ä½¿ç”¨ç®¡é“è½¬æ¢</h3><p>å¦‚æˆ‘ä»¬åœ¨å‘é€ get è¯·æ±‚æ—¶ï¼Œæºå¸¦ body ä¸­æœ‰ ageï¼Œä½†æ˜¯å‘é€åˆ°åç«¯ age å˜æˆ stringï¼Œæˆ‘ä»¬éœ€è¦å°† string å˜æˆ intï¼Œåªéœ€è¦ä½¿ç”¨ 6.3 å³å¯ã€‚</p><h2 id="7-2-ä½¿ç”¨-Mongo-æ•°æ®åº“"><a href="#7-2-ä½¿ç”¨-Mongo-æ•°æ®åº“" class="headerlink" title="7.2 ä½¿ç”¨ Mongo æ•°æ®åº“"></a>7.2 ä½¿ç”¨ Mongo æ•°æ®åº“</h2><h3 id="7-2-1-åŸºæœ¬æ­¥éª¤"><a href="#7-2-1-åŸºæœ¬æ­¥éª¤" class="headerlink" title="7.2.1 åŸºæœ¬æ­¥éª¤"></a>7.2.1 åŸºæœ¬æ­¥éª¤</h3><p>å®‰è£…ç›¸å…³ä¾èµ–</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">yarn add --save @nestjs/mongoose mongoose<br></code></pre></td></tr></table></figure><p>è¿æ¥æ•°æ®åº“</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">/* app.module.ts */</span><br><br><span class="hljs-keyword">import</span> &#123; <span class="hljs-title class_">Module</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;@nestjs/common&quot;</span>;<br><span class="hljs-keyword">import</span> &#123; <span class="hljs-title class_">MongooseModule</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;@nestjs/mongoose&quot;</span>;<br><span class="hljs-keyword">import</span> &#123; <span class="hljs-title class_">AuthModule</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./auth/auth.module&quot;</span>;<br><br><span class="hljs-meta">@Module</span>(&#123;<br>  <span class="hljs-attr">imports</span>: [<br>    <span class="hljs-title class_">AuthModule</span>,<br>    <span class="hljs-title class_">MongooseModule</span>.<span class="hljs-title function_">forRoot</span>(<span class="hljs-string">&quot;mongodb://127.0.0.1:27017/musicians&quot;</span>),<br>  ],<br>&#125;)<br><span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AppModule</span> &#123;&#125;<br></code></pre></td></tr></table></figure><blockquote><p>è¡¨ç¤ºè¿æ¥ musicians æ•°æ®åº“</p></blockquote><p>åˆ›å»ºä¸€ä¸ªæ¨¡å‹</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">/* src/auth/schema/users.schema.ts */</span><br><br><span class="hljs-keyword">import</span> * <span class="hljs-keyword">as</span> mongoose <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;mongoose&quot;</span>;<br><span class="hljs-keyword">const</span> <span class="hljs-title class_">Schema</span> = mongoose.<span class="hljs-property">Schema</span>;<br><span class="hljs-keyword">const</span> d = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>();<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title class_">UserSchema</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Schema</span>(&#123;<br>  <span class="hljs-attr">username</span>: &#123; <span class="hljs-attr">type</span>: <span class="hljs-title class_">String</span> &#125;,<br>  <span class="hljs-attr">password</span>: &#123; <span class="hljs-attr">type</span>: <span class="hljs-title class_">String</span> &#125;,<br>  <span class="hljs-attr">mobile</span>: &#123; <span class="hljs-attr">type</span>: <span class="hljs-title class_">String</span> &#125;,<br>  <span class="hljs-attr">email</span>: &#123; <span class="hljs-attr">type</span>: <span class="hljs-title class_">String</span> &#125;,<br>  <span class="hljs-attr">status</span>: &#123; <span class="hljs-attr">type</span>: <span class="hljs-title class_">String</span> &#125;,<br>  <span class="hljs-attr">role_id</span>: &#123; <span class="hljs-attr">type</span>: <span class="hljs-title class_">String</span> &#125;,<br>  <span class="hljs-attr">add_time</span>: &#123; <span class="hljs-attr">type</span>: <span class="hljs-title class_">Number</span>, <span class="hljs-attr">default</span>: d.<span class="hljs-title function_">getTime</span>() &#125;,<br>  <span class="hljs-attr">is_supper</span>: &#123; <span class="hljs-attr">type</span>: <span class="hljs-title class_">Number</span> &#125;,<br>&#125;);<br></code></pre></td></tr></table></figure><p>å¼•å…¥æ¨¡å‹</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">import</span> &#123; <span class="hljs-title class_">Module</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;@nestjs/common&quot;</span>;<br><span class="hljs-keyword">import</span> &#123; <span class="hljs-title class_">AuthContriller</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./auth.controller&quot;</span>;<br><span class="hljs-keyword">import</span> &#123; <span class="hljs-title class_">AuthService</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./auth.service&quot;</span>;<br><span class="hljs-keyword">import</span> &#123; <span class="hljs-title class_">MongooseModule</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;@nestjs/mongoose&quot;</span>;<br><span class="hljs-keyword">import</span> &#123; <span class="hljs-title class_">UserSchema</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./schema/users.schema&quot;</span>;<br><br><span class="hljs-meta">@Module</span>(&#123;<br>  <span class="hljs-attr">imports</span>: [<br>    <span class="hljs-title class_">MongooseModule</span>.<span class="hljs-title function_">forFeature</span>([<br>      &#123;<br>        <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;User&quot;</span>,<br>        <span class="hljs-attr">schema</span>: <span class="hljs-title class_">UserSchema</span>,<br>        <span class="hljs-attr">collection</span>: <span class="hljs-string">&quot;test&quot;</span>,<br>      &#125;,<br>    ]),<br>  ],<br>  <span class="hljs-attr">controllers</span>: [<span class="hljs-title class_">AuthContriller</span>],<br>  <span class="hljs-attr">providers</span>: [<span class="hljs-title class_">AuthService</span>],<br>&#125;)<br><span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AuthModule</span> &#123;&#125;<br></code></pre></td></tr></table></figure><p>æ¨¡å‹çš„åç§°ä¸º Userï¼Œé›†åˆ test</p><p>ä½¿ç”¨æ¨¡å‹</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">import</span> &#123; <span class="hljs-title class_">Injectable</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;@nestjs/common&quot;</span>;<br><span class="hljs-keyword">import</span> &#123; <span class="hljs-title class_">InjectModel</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;@nestjs/mongoose&quot;</span>;<br><br><span class="hljs-meta">@Injectable</span>()<br><span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AuthService</span> &#123;<br>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"><span class="hljs-meta">@InjectModel</span>(<span class="hljs-string">&quot;User&quot;</span>) <span class="hljs-keyword">private</span> userModel</span>) &#123;&#125;<br>  <span class="hljs-keyword">async</span> <span class="hljs-title function_">signup</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">let</span> result = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">userModel</span>.<span class="hljs-title function_">find</span>().<span class="hljs-title function_">exec</span>();<br>    <span class="hljs-keyword">return</span> &#123; <span class="hljs-attr">msg</span>: result &#125;;<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><blockquote><p>ä¾èµ–æ³¨å…¥åˆ›å»º userModel å±æ€§</p></blockquote><p>åˆ›å»ºæˆåŠŸ</p><p><img src="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/image-20230114213520674.png" alt="image-20230114213520674"></p><h3 id="7-2-2-CRUD"><a href="#7-2-2-CRUD" class="headerlink" title="7.2.2 CRUD"></a>7.2.2 CRUD</h3><p>åˆ›å»ºç”¨æˆ·</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">/* auth.controller.ts */</span><br><span class="hljs-meta">@Post</span>(<span class="hljs-string">&#x27;addUser&#x27;</span>)<br><span class="hljs-title function_">addUser</span>(<span class="hljs-params"><span class="hljs-meta">@Body</span>() body:<span class="hljs-built_in">any</span></span>)&#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">authService</span>.<span class="hljs-title function_">addUser</span>(body);<br>&#125;<br><br><br><span class="hljs-comment">/* auth.service.ts */</span><br><span class="hljs-keyword">async</span> <span class="hljs-title function_">addUser</span>(<span class="hljs-params">body:<span class="hljs-built_in">any</span></span>)&#123;<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">userModel</span>.<span class="hljs-title function_">create</span>(body);<br>    <span class="hljs-keyword">return</span> body;<br>&#125;<br></code></pre></td></tr></table></figure><p><img src="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/image-20230114214717752.png" alt="image-20230114214717752"></p><p>æŸ¥è¯¢æ‰€æœ‰ç”¨æˆ·</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">async</span> <span class="hljs-title function_">findAll</span>(<span class="hljs-params"></span>)&#123;<br>    <span class="hljs-keyword">let</span> result = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">userModel</span>.<span class="hljs-title function_">find</span>().<span class="hljs-title function_">exec</span>();<br>    <span class="hljs-keyword">return</span> &#123;<span class="hljs-attr">msg</span>:result&#125;;<br>&#125;<br></code></pre></td></tr></table></figure><p>æŸ¥æ‰¾å•ä¸ªç”¨æˆ·</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">async</span> <span class="hljs-title function_">findOne</span>(<span class="hljs-attr">_id</span>: <span class="hljs-built_in">string</span>): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-title class_">User</span>&gt; &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">userModel</span>.<span class="hljs-title function_">findById</span>(_id);<br>&#125;<br></code></pre></td></tr></table></figure><p>ç¼–è¾‘å•ä¸ªç”¨æˆ·</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">async</span> <span class="hljs-title function_">editOne</span>(<span class="hljs-attr">_id</span>: <span class="hljs-built_in">string</span>, <span class="hljs-attr">body</span>: <span class="hljs-title class_">EditUserDTO</span>): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">void</span>&gt; &#123;<br>    <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">userModel</span>.<span class="hljs-title function_">findByIdAndUpdate</span>(_id, body);<br>&#125;<br></code></pre></td></tr></table></figure><p>åˆ é™¤ç”¨æˆ·</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">async</span> <span class="hljs-title function_">deleteOne</span>(<span class="hljs-attr">_id</span>: <span class="hljs-built_in">string</span>): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">void</span>&gt; &#123;<br>    <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">userModel</span>.<span class="hljs-title function_">findByIdAndDelete</span>(_id);<br>&#125;<br></code></pre></td></tr></table></figure><h1 id="é™„ä»¶"><a href="#é™„ä»¶" class="headerlink" title="é™„ä»¶"></a>é™„ä»¶</h1><h2 id="è£…é¥°å™¨"><a href="#è£…é¥°å™¨" class="headerlink" title="è£…é¥°å™¨"></a>è£…é¥°å™¨</h2><table><thead><tr><th>è£…é¥°å™¨</th><th>å«ä¹‰</th></tr></thead><tbody><tr><td>@Controller()</td><td>å®šä¹‰ä¸€ä¸ªåŸºæœ¬æ§åˆ¶å™¨</td></tr><tr><td>@Get()</td><td>å®šä¹‰ä¸€ä¸ª get æ¥å£</td></tr><tr><td>@Post()</td><td>å®šä¹‰ä¸€ä¸ª post æ¥å£</td></tr><tr><td>@Put()</td><td>å®šä¹‰ä¸€ä¸ª put æ¥å£</td></tr><tr><td>@Delete()</td><td>å®šä¹‰ä¸€ä¸ª delete æ¥å£</td></tr><tr><td>@Patch()</td><td>å®šä¹‰ä¸€ä¸ª patch æ¥å£</td></tr><tr><td>@Options()</td><td>å®šä¹‰ä¸€ä¸ª option æ¥å£</td></tr><tr><td>@All()</td><td>å®šä¹‰ä¸€ä¸ªå¤„ç†æ‰€æœ‰ HTTP è¯·æ±‚çš„æ¥å£</td></tr><tr><td>@Request()ï¼Œ@Req()</td><td>å¯¹åº” reqï¼ŒNest å°†è¯·æ±‚å¯¹è±¡æ³¨å…¥å¤„ç†åˆ°</td></tr><tr><td>@Response()ï¼Œ@Res()*</td><td>å¯¹åº” res</td></tr><tr><td>@Next()</td><td>å¯¹åº” next</td></tr><tr><td>@Session()</td><td>å¯¹åº” req.session</td></tr><tr><td>@Param(key?: string)</td><td>å¯¹åº” req.params<code>/</code>req.params[key] get</td></tr><tr><td>@Body(key?: string)</td><td>å¯¹åº” req.body<code>/</code>req.body[key] post</td></tr><tr><td>@Query(key?: string)</td><td>å¯¹åº” req.query<code>/</code>req.query[key]</td></tr><tr><td>@Headers(name?: string)</td><td>å¯¹åº” req.headers<code>/</code>req.headers[name]</td></tr><tr><td>@Ip()</td><td>å¯¹åº” req.ip</td></tr><tr><td>@HostParam()</td><td>å¯¹åº” req.hosts</td></tr><tr><td>@HttpCode()</td><td>æ›´æ”¹çŠ¶æ€ç </td></tr><tr><td>@Header()</td><td>æ›´æ”¹è¯·æ±‚å¤´</td></tr><tr><td>@Module()</td><td>å®šä¹‰æ¨¡å—</td></tr></tbody></table>]]></content>
    
    
    <categories>
      
      <category>ç¼–ç¨‹</category>
      
      <category>åç«¯</category>
      
      <category>Nest</category>
      
    </categories>
    
    
    <tags>
      
      <tag>ç¼–ç¨‹</tag>
      
      <tag>åç«¯</tag>
      
      <tag>Nest</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ICEMå¸¸é‡é—®é¢˜</title>
    <link href="/2024/06/29/025%20ICEM%E5%B8%B8%E9%81%87%E5%88%B0%E9%97%AE%E9%A2%98/"/>
    <url>/2024/06/29/025%20ICEM%E5%B8%B8%E9%81%87%E5%88%B0%E9%97%AE%E9%A2%98/</url>
    
    <content type="html"><![CDATA[<h2 id="2D-ç½‘æ ¼ä¸é—­åˆ"><a href="#2D-ç½‘æ ¼ä¸é—­åˆ" class="headerlink" title="2D ç½‘æ ¼ä¸é—­åˆ"></a>2D ç½‘æ ¼ä¸é—­åˆ</h2><blockquote><p>Mesh has uncovered edges. ANSYS Fluent needs a complete boundary (lines in 2D) or it will give a variety of errors and not read in the mesh! If this was 2D Hexa, perhaps your edges are not associated with perimeter curves</p></blockquote><p>åŸå› æ˜¯çº¿å’Œçº¿ä¹‹é—´å¯èƒ½æ²¡æœ‰å…³è”</p><p><img src="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/202302161539612.png" alt="image.png"></p>]]></content>
    
    
    <categories>
      
      <category>æ¨¡æ‹Ÿ</category>
      
      <category>ICEM</category>
      
    </categories>
    
    
    <tags>
      
      <tag>æ¨¡æ‹Ÿ</tag>
      
      <tag>ICEM</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Pythonè°ƒç”¨REFPROP</title>
    <link href="/2024/06/29/023%20Python%E8%B0%83%E7%94%A8REFPROP/"/>
    <url>/2024/06/29/023%20Python%E8%B0%83%E7%94%A8REFPROP/</url>
    
    <content type="html"><![CDATA[<h1 id="python-è°ƒç”¨-REFPROP"><a href="#python-è°ƒç”¨-REFPROP" class="headerlink" title="python è°ƒç”¨ REFPROP"></a>python è°ƒç”¨ REFPROP</h1><h2 id="1ã€å®‰è£…è°ƒè¯•"><a href="#1ã€å®‰è£…è°ƒè¯•" class="headerlink" title="1ã€å®‰è£…è°ƒè¯•"></a>1ã€å®‰è£…è°ƒè¯•</h2><ol><li>å®‰è£… refprop10</li><li>å®‰è£… python åº“<code>pip install ctREFPROP</code></li></ol><p>æµ‹è¯•ä½¿ç”¨</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> os, numpy <span class="hljs-keyword">as</span> np<br><span class="hljs-keyword">from</span> ctREFPROP.ctREFPROP <span class="hljs-keyword">import</span> REFPROPFunctionLibrary<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">NBP</span>():<br>    RP = REFPROPFunctionLibrary(os.environ[<span class="hljs-string">&#x27;RPPREFIX&#x27;</span>])<br>    RP.SETPATHdll(os.environ[<span class="hljs-string">&#x27;RPPREFIX&#x27;</span>])<br>    <span class="hljs-built_in">print</span>(RP.RPVersion())<br>    MOLAR_BASE_SI = RP.GETENUMdll(<span class="hljs-number">0</span>,<span class="hljs-string">&quot;MOLAR BASE SI&quot;</span>).iEnum<br><br>    r = RP.REFPROPdll(<span class="hljs-string">&quot;PROPANE&quot;</span>,<span class="hljs-string">&quot;PQ&quot;</span>,<span class="hljs-string">&quot;T&quot;</span>,MOLAR_BASE_SI, <span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">101325</span>, <span class="hljs-number">0</span>, [<span class="hljs-number">1.0</span>])<br>    <span class="hljs-built_in">print</span>(r.ierr, r.herr, r.Output[<span class="hljs-number">0</span>])<br><br><span class="hljs-keyword">if</span> __name__==<span class="hljs-string">&#x27;__main__&#x27;</span>:<br>    <span class="hljs-comment"># è·¯å¾„</span><br>    os.environ[<span class="hljs-string">&#x27;RPPREFIX&#x27;</span>] = <span class="hljs-string">r&#x27;D:/REFPROP10&#x27;</span><br><br>    NBP()<br><br>&gt;&gt;<br><span class="hljs-number">10.0</span><br><span class="hljs-number">0</span>  <span class="hljs-number">231.0362479100902</span><br></code></pre></td></tr></table></figure><h2 id="2ã€åŸºæœ¬è¯­æ³•"><a href="#2ã€åŸºæœ¬è¯­æ³•" class="headerlink" title="2ã€åŸºæœ¬è¯­æ³•"></a>2ã€åŸºæœ¬è¯­æ³•</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> os, numpy <span class="hljs-keyword">as</span> np<br><span class="hljs-keyword">from</span> ctREFPROP.ctREFPROP <span class="hljs-keyword">import</span> REFPROPFunctionLibrary<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">calculate_properties</span>():<br>    <span class="hljs-comment"># åˆå§‹åŒ–REFPROP</span><br>    RP = REFPROPFunctionLibrary(os.environ[<span class="hljs-string">&#x27;RPPREFIX&#x27;</span>])<br>    RP.SETPATHdll(os.environ[<span class="hljs-string">&#x27;RPPREFIX&#x27;</span>])<br><br>    <span class="hljs-comment"># å°†å•ä½è®¾ç½®ä¸ºå›½é™…å•ä½åˆ¶ï¼ˆæ‘©å°”åŸºå‡†ï¼‰</span><br>    MOLAR_BASE_SI = RP.GETENUMdll(<span class="hljs-number">0</span>, <span class="hljs-string">&quot;MASS BASE SI&quot;</span>).iEnum<br><br>    <span class="hljs-comment"># æŒ‡å®šç‰©è´¨ï¼ˆæ°¢ï¼‰ã€è®¡ç®—ç±»å‹ï¼ˆHä¸ºç„“å€¼ï¼ŒDä¸ºå¯†åº¦ï¼ŒSä¸ºç†µå€¼ï¼‰</span><br>    substance = <span class="hljs-string">&quot;HYDROGEN&quot;</span><br><br>    <span class="hljs-comment"># æŒ‡å®šè¾“å…¥æ¡ä»¶ï¼ˆæ¸©åº¦ã€å‹åŠ›ï¼‰</span><br>    temperature = <span class="hljs-number">298.15</span>  <span class="hljs-comment"># å•ä½ï¼šK</span><br>    pressure = <span class="hljs-number">101325</span>  <span class="hljs-comment"># å•ä½ï¼šPa</span><br><br>    <span class="hljs-comment"># è°ƒç”¨REFPROPdllè®¡ç®—æ€§è´¨</span><br>    H_result = RP.REFPROPdll(substance, <span class="hljs-string">&quot;PT&quot;</span>,<span class="hljs-string">&quot;H&quot;</span>,  MOLAR_BASE_SI, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, pressure, temperature, [<span class="hljs-number">1.0</span>]) <span class="hljs-comment"># J/kg</span><br>    D_result = RP.REFPROPdll(substance, <span class="hljs-string">&quot;PT&quot;</span>,<span class="hljs-string">&quot;D&quot;</span>,  MOLAR_BASE_SI, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, pressure, temperature, [<span class="hljs-number">1.0</span>]) <span class="hljs-comment"># kg/m3</span><br>    S_result = RP.REFPROPdll(substance, <span class="hljs-string">&quot;PT&quot;</span>,<span class="hljs-string">&quot;S&quot;</span>,  MOLAR_BASE_SI, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, pressure, temperature, [<span class="hljs-number">1.0</span>]) <span class="hljs-comment"># J/(kgÂ·K)</span><br>    <span class="hljs-comment"># æ£€æŸ¥æ˜¯å¦æœ‰é”™è¯¯</span><br>    <span class="hljs-keyword">if</span> H_result.ierr == <span class="hljs-number">0</span> <span class="hljs-keyword">and</span> D_result.ierr == <span class="hljs-number">0</span> <span class="hljs-keyword">and</span> S_result.ierr == <span class="hljs-number">0</span>:<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;è®¡ç®—å¾—åˆ°çš„H=:&quot;</span>,H_result.Output[<span class="hljs-number">0</span>])<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;è®¡ç®—å¾—åˆ°çš„D=:&quot;</span>,D_result.Output[<span class="hljs-number">0</span>])<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;è®¡ç®—å¾—åˆ°çš„S=:&quot;</span>,S_result.Output[<span class="hljs-number">0</span>])<br>    <span class="hljs-keyword">else</span>:<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;é”™è¯¯: <span class="hljs-subst">&#123;H_result.herr&#125;</span>&quot;</span>)<br><br><span class="hljs-keyword">if</span> __name__==<span class="hljs-string">&#x27;__main__&#x27;</span>:<br>    <span class="hljs-comment"># è·¯å¾„</span><br>    os.environ[<span class="hljs-string">&#x27;RPPREFIX&#x27;</span>] = <span class="hljs-string">r&#x27;D:/REFPROP10&#x27;</span><br><br>    calculate_properties()<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>ç¼–ç¨‹</category>
      
      <category>Python</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Python</tag>
      
      <tag>ç¼–ç¨‹</tag>
      
      <tag>REFPROP</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>React Nativeå¸¸é‡é—®é¢˜</title>
    <link href="/2024/06/29/022%20React%20Native%E5%B8%B8%E9%81%87%E9%97%AE%E9%A2%98/"/>
    <url>/2024/06/29/022%20React%20Native%E5%B8%B8%E9%81%87%E9%97%AE%E9%A2%98/</url>
    
    <content type="html"><![CDATA[<h2 id="1ã€TextInputèšç„¦å¼¹èµ·é”®ç›˜"><a href="#1ã€TextInputèšç„¦å¼¹èµ·é”®ç›˜" class="headerlink" title="1ã€TextInputèšç„¦å¼¹èµ·é”®ç›˜"></a>1ã€<code>TextInput</code>èšç„¦å¼¹èµ·é”®ç›˜</h2><p>ä½¿ç”¨ä»¥ä¸‹æ–¹å¼å¹¶ä¸èƒ½ç›´æ¥å¼¹èµ·é”®ç›˜ï¼ŒåŸå› å°šä¸æ¸…æ¥šï¼Œå¯èƒ½æ˜¯ç”±äº<code>setModalVisible</code>çš„å¼‚æ­¥æ€§å¯¼è‡´çš„</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs tsx"><span class="hljs-keyword">const</span> <span class="hljs-title function_">toggleModal</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"></span>) =&gt; &#123;<br>  <span class="hljs-keyword">await</span> <span class="hljs-title function_">setModalVisible</span>(!isModalVisible);<br>  <span class="hljs-keyword">if</span> (!isModalVisible) &#123;<br>    inputRef?.<span class="hljs-property">current</span>?.<span class="hljs-title function_">focus</span>();<br>  &#125;<br>&#125;;<br></code></pre></td></tr></table></figure><p>å¯ä»¥å˜åŒ–ä¸€ä¸‹æ€è·¯ï¼Œèšç„¦â€”â€”&gt;å¤±å»ç„¦ç‚¹â€”â€”&gt;èšç„¦ï¼Œèšç„¦ 10ms ä¹‹åå¤±å»ç„¦ç‚¹ï¼Œå¤±å»ç„¦ç‚¹è§¦å‘<code>onBlur</code>å‡½æ•°åå†èšç„¦</p><p>ä»£ç å¦‚ä¸‹</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs tsx"><span class="hljs-keyword">const</span> <span class="hljs-title function_">toggleModal</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"></span>) =&gt; &#123;<br>  <span class="hljs-keyword">await</span> <span class="hljs-title function_">setModalVisible</span>(!isModalVisible);<br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(inputRef);<br>  <span class="hljs-keyword">if</span> (!isModalVisible) &#123;<br>    inputRef?.<span class="hljs-property">current</span>?.<span class="hljs-title function_">focus</span>();<br>    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>      <span class="hljs-title class_">Keyboard</span>.<span class="hljs-title function_">dismiss</span>();<br>    &#125;, <span class="hljs-number">10</span>);<br>  &#125;<br>&#125;;<br><br><span class="hljs-comment">// è¾“å…¥æ¡†</span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">TextInputonBlur</span></span></span><br><span class="hljs-tag"><span class="language-xml">  <span class="hljs-attr">onBlur</span>=<span class="hljs-string">&#123;()</span> =&gt;</span> &#123;</span><br><span class="language-xml">    inputRef?.current?.focus();</span><br><span class="language-xml">  &#125;&#125;</span><br><span class="language-xml">/&gt;</span>;<br></code></pre></td></tr></table></figure><blockquote><p>è¿™é‡Œä¸€å®šè¦ä½¿ç”¨<code>async</code>å’Œ<code>await</code></p></blockquote><h2 id="2ã€useRefè·å–ç»„ä»¶å®ä¾‹"><a href="#2ã€useRefè·å–ç»„ä»¶å®ä¾‹" class="headerlink" title="2ã€useRefè·å–ç»„ä»¶å®ä¾‹"></a>2ã€<code>useRef</code>è·å–ç»„ä»¶å®ä¾‹</h2><p>ä½¿ç”¨é’©å­<code>useRef</code>è·å–ç»„ä»¶</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs tsx"><span class="hljs-comment">// åˆ›å»ºuseRefå®ä¾‹</span><br><span class="hljs-keyword">const</span> <span class="hljs-attr">textInput</span>: <span class="hljs-built_in">any</span> = <span class="hljs-title function_">useRef</span>(<span class="hljs-literal">null</span>);<br><br><span class="hljs-comment">// æŒ‚åœ¨</span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">TextInput</span></span></span><br><span class="hljs-tag"><span class="language-xml">  <span class="hljs-attr">ref</span>=<span class="hljs-string">&#123;textInput&#125;</span></span></span><br><span class="hljs-tag"><span class="language-xml">  <span class="hljs-attr">value</span>=<span class="hljs-string">&#123;searchText&#125;</span></span></span><br><span class="hljs-tag"><span class="language-xml">  <span class="hljs-attr">onChangeText</span>=<span class="hljs-string">&#123;(text)</span> =&gt;</span> setSearchText(text)&#125;</span><br><span class="language-xml">/&gt;</span>;<br><br><span class="hljs-comment">// è·å–ç»„ä»¶å®ä¾‹</span><br>textInput?.<span class="hljs-property">current</span>?.<span class="hljs-title function_">value</span>();<br></code></pre></td></tr></table></figure><h2 id="3ã€çˆ¶ç»„ä»¶è°ƒç”¨å­ç»„ä»¶æ–¹æ³•å¹¶ä¼ å€¼"><a href="#3ã€çˆ¶ç»„ä»¶è°ƒç”¨å­ç»„ä»¶æ–¹æ³•å¹¶ä¼ å€¼" class="headerlink" title="3ã€çˆ¶ç»„ä»¶è°ƒç”¨å­ç»„ä»¶æ–¹æ³•å¹¶ä¼ å€¼"></a>3ã€çˆ¶ç»„ä»¶è°ƒç”¨å­ç»„ä»¶æ–¹æ³•å¹¶ä¼ å€¼</h2><ol><li>çˆ¶å­é—´æŒ‚åœ¨å­ç»„ä»¶</li></ol><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs tsx"><span class="hljs-keyword">const</span> <span class="hljs-attr">notionModalRef</span>:<span class="hljs-built_in">any</span> = <span class="hljs-title function_">useRef</span>(<span class="hljs-literal">null</span>)<br><br>&lt;<span class="hljs-title class_">CreateNotionModal</span> props=&#123;&#123;toggleModal,isModalVisible,id&#125;&#125; ref=&#123;notionModalRef&#125;/&gt;<br></code></pre></td></tr></table></figure><p>å…¶ä¸­<code>props</code>ç”¨äºä¼ é€’å¯¹è±¡å€¼ï¼Œ<code>ref</code>ç”¨äºä¼ é€’ç»„ä»¶</p><ol start="2"><li>è·å–ç»„ä»¶ä»¥åŠæ•°æ®</li></ol><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><code class="hljs tsx"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">forwardRef</span>(<span class="hljs-function">(<span class="hljs-params">&#123; props &#125;: <span class="hljs-built_in">any</span>, ref: <span class="hljs-built_in">any</span></span>) =&gt;</span> &#123;<br>  <span class="hljs-keyword">const</span> &#123; notionModalRef &#125; = ref;<br>  <span class="hljs-keyword">const</span> &#123; toggleModal, isModalVisible, id &#125; = props;<br><br>  <span class="hljs-comment">// å­ç»„ä»¶å‘çˆ¶ç»„ä»¶æš´éœ²æ–¹æ³•</span><br>  <span class="hljs-title function_">useImperativeHandle</span>(notionModalRef, <span class="hljs-function">() =&gt;</span> (&#123;<br>    inputOnFocus,<br>  &#125;));<br><br>  <span class="hljs-comment">// åˆ‡æ¢æ¨¡æ€æ¡†</span><br>  <span class="hljs-keyword">const</span> <span class="hljs-title function_">inputOnFocus</span> = (<span class="hljs-params"></span>) =&gt; &#123;&#125;;<br><br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">View</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&#123;styles.centeredView&#125;</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">View</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&#123;styles.modalView&#125;</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">TextInput</span></span></span><br><span class="hljs-tag"><span class="language-xml">          <span class="hljs-attr">multiline</span>=<span class="hljs-string">&#123;true&#125;</span></span></span><br><span class="hljs-tag"><span class="language-xml">          <span class="hljs-attr">style</span>=<span class="hljs-string">&#123;styles.input&#125;</span></span></span><br><span class="hljs-tag"><span class="language-xml">          <span class="hljs-attr">maxLength</span>=<span class="hljs-string">&#123;1000&#125;</span></span></span><br><span class="hljs-tag"><span class="language-xml">          <span class="hljs-attr">autoFocus</span>=<span class="hljs-string">&#123;true&#125;</span></span></span><br><span class="hljs-tag"><span class="language-xml">          <span class="hljs-attr">value</span>=<span class="hljs-string">&#123;textInput&#125;</span></span></span><br><span class="hljs-tag"><span class="language-xml">          <span class="hljs-attr">ref</span>=<span class="hljs-string">&#123;inputRef&#125;</span></span></span><br><span class="hljs-tag"><span class="language-xml">          <span class="hljs-attr">onBlur</span>=<span class="hljs-string">&#123;()</span> =&gt;</span> &#123;</span><br><span class="language-xml">            inputRef?.current?.focus();</span><br><span class="language-xml">          &#125;&#125;</span><br><span class="language-xml">          onChangeText=&#123;(text) =&gt; setTextInput(text)&#125;</span><br><span class="language-xml">        /&gt;</span><br><span class="language-xml"></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">View</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&#123;styles.modalBtn&#125;</span>&gt;</span></span><br><span class="language-xml">          <span class="hljs-tag">&lt;<span class="hljs-name">Pressable</span></span></span><br><span class="hljs-tag"><span class="language-xml">            <span class="hljs-attr">onPress</span>=<span class="hljs-string">&#123;()</span> =&gt;</span> &#123;</span><br><span class="language-xml">              toggleModal();</span><br><span class="language-xml">            &#125;&#125;</span><br><span class="language-xml">          &gt;</span><br><span class="language-xml">            &#123;/* <span class="hljs-tag">&lt;<span class="hljs-name">Pressable</span> <span class="hljs-attr">onPress</span>=<span class="hljs-string">&#123;()</span>=&gt;</span>&#123;&#125; &#125;&gt; */&#125;</span><br><span class="language-xml">            &#123;(&#123; pressed &#125;) =&gt; <span class="hljs-tag">&lt;<span class="hljs-name">Text</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&#123;styles.cancel&#125;</span>&gt;</span>å–æ¶ˆ<span class="hljs-tag">&lt;/<span class="hljs-name">Text</span>&gt;</span>&#125;</span><br><span class="language-xml">          <span class="hljs-tag">&lt;/<span class="hljs-name">Pressable</span>&gt;</span></span><br><span class="language-xml">          <span class="hljs-tag">&lt;<span class="hljs-name">Pressable</span></span></span><br><span class="hljs-tag"><span class="language-xml">            <span class="hljs-attr">onPress</span>=<span class="hljs-string">&#123;async</span> () =&gt;</span> &#123;</span><br><span class="language-xml">              setTextInput(await pasteFromClipboard(textInput));</span><br><span class="language-xml">            &#125;&#125;</span><br><span class="language-xml">          &gt;</span><br><span class="language-xml">            &#123;(&#123; pressed &#125;) =&gt; (</span><br><span class="language-xml">              <span class="hljs-tag">&lt;<span class="hljs-name">Ionicons</span></span></span><br><span class="hljs-tag"><span class="language-xml">                <span class="hljs-attr">color</span>=<span class="hljs-string">&#123;Colors.light.tint&#125;</span></span></span><br><span class="hljs-tag"><span class="language-xml">                <span class="hljs-attr">name</span>=<span class="hljs-string">&#x27;clipboard-outline&#x27;</span></span></span><br><span class="hljs-tag"><span class="language-xml">                <span class="hljs-attr">size</span>=<span class="hljs-string">&#123;30&#125;</span></span></span><br><span class="hljs-tag"><span class="language-xml">                <span class="hljs-attr">style</span>=<span class="hljs-string">&#123;&#123;</span> <span class="hljs-attr">marginRight:</span> <span class="hljs-attr">15</span>, <span class="hljs-attr">opacity:</span> <span class="hljs-attr">pressed</span> ? <span class="hljs-attr">0.5</span> <span class="hljs-attr">:</span> <span class="hljs-attr">1</span> &#125;&#125;</span></span><br><span class="hljs-tag"><span class="language-xml">              /&gt;</span></span><br><span class="language-xml">            )&#125;</span><br><span class="language-xml">          <span class="hljs-tag">&lt;/<span class="hljs-name">Pressable</span>&gt;</span></span><br><span class="language-xml">          <span class="hljs-tag">&lt;<span class="hljs-name">Pressable</span> <span class="hljs-attr">onPress</span>=<span class="hljs-string">&#123;create&#125;</span>&gt;</span></span><br><span class="language-xml">            &#123;(&#123; pressed &#125;) =&gt; (</span><br><span class="language-xml">              <span class="hljs-tag">&lt;<span class="hljs-name">Ionicons</span></span></span><br><span class="hljs-tag"><span class="language-xml">                <span class="hljs-attr">color</span>=<span class="hljs-string">&#123;Colors.light.tint&#125;</span></span></span><br><span class="hljs-tag"><span class="language-xml">                <span class="hljs-attr">name</span>=<span class="hljs-string">&#x27;send-outline&#x27;</span></span></span><br><span class="hljs-tag"><span class="language-xml">                <span class="hljs-attr">size</span>=<span class="hljs-string">&#123;30&#125;</span></span></span><br><span class="hljs-tag"><span class="language-xml">                <span class="hljs-attr">style</span>=<span class="hljs-string">&#123;&#123;</span> <span class="hljs-attr">marginRight:</span> <span class="hljs-attr">15</span>, <span class="hljs-attr">opacity:</span> <span class="hljs-attr">pressed</span> ? <span class="hljs-attr">0.5</span> <span class="hljs-attr">:</span> <span class="hljs-attr">1</span> &#125;&#125;</span></span><br><span class="hljs-tag"><span class="language-xml">              /&gt;</span></span><br><span class="language-xml">            )&#125;</span><br><span class="language-xml">          <span class="hljs-tag">&lt;/<span class="hljs-name">Pressable</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">View</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">View</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">View</span>&gt;</span></span><br><span class="language-xml">  );</span><br><span class="language-xml">&#125;);</span><br></code></pre></td></tr></table></figure><ol start="3"><li>ä½¿ç”¨</li></ol><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs tsx">notionModalRef?.<span class="hljs-property">current</span>?.<span class="hljs-title function_">inputOnFocus</span>();<br></code></pre></td></tr></table></figure><blockquote><p>æˆ‘è¿™é‡Œç”¨åˆ°äº†<code>useState</code>çš„æ•°æ®ï¼Œæ³¨æ„çŠ¶æ€å˜åŒ–ï¼Œå³ç»„ä»¶æ˜¯å¦æ˜¾ç¤ºä¸<code>notionModalRef?.current?.inputOnFocus()</code>çš„å…³ç³»</p></blockquote><h2 id="4ã€expo-æŠ½å±‰æ‰“å¼€ä¸å…³é—­"><a href="#4ã€expo-æŠ½å±‰æ‰“å¼€ä¸å…³é—­" class="headerlink" title="4ã€expo æŠ½å±‰æ‰“å¼€ä¸å…³é—­"></a>4ã€expo æŠ½å±‰æ‰“å¼€ä¸å…³é—­</h2><p>è¯•äº†å¾ˆå¤šç§æ–¹æ³•ï¼Œéƒ½æ˜¯æ˜¾ç¤º<code>closeDrawer</code>æœªå®šä¹‰</p><p>å¯ä»¥ä½¿ç”¨<code>@react-navigation/native</code>ä¸­çš„<code>DrawerActions</code>å’Œ<code>useNavigation</code>ç»„åˆå®ç°æŠ½å±‰æ‰“å¼€ä¸å…³é—­</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs tsx"><span class="hljs-keyword">import</span> &#123; <span class="hljs-title class_">DrawerActions</span>, useNavigation &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;@react-navigation/native&quot;</span>;<br><br><span class="hljs-keyword">const</span> <span class="hljs-title function_">CustomDrawer</span> = (<span class="hljs-params"></span>) =&gt; &#123;<br>  <span class="hljs-keyword">const</span> navigation = <span class="hljs-title function_">useNavigation</span>();<br>  <span class="hljs-keyword">const</span> <span class="hljs-title function_">tagRename</span> = (<span class="hljs-params"></span>) =&gt; &#123;<br>    navigation.<span class="hljs-title function_">dispatch</span>(<span class="hljs-title class_">DrawerActions</span>.<span class="hljs-title function_">closeDrawer</span>());<br>  &#125;;<br>&#125;;<br></code></pre></td></tr></table></figure><h2 id="5ã€å…¨å±€æ•°æ®å‚¨å­˜"><a href="#5ã€å…¨å±€æ•°æ®å‚¨å­˜" class="headerlink" title="5ã€å…¨å±€æ•°æ®å‚¨å­˜"></a>5ã€å…¨å±€æ•°æ®å‚¨å­˜</h2><p>ä½¿ç”¨<code>useContext</code>å­˜å‚¨å…¨å±€å˜é‡ã€‚</p><ol><li>é¦–å…ˆåˆ›å»º<code>context</code>å®ä¾‹ï¼Œå¯¹å¤–æš´éœ²ä¸€ä¸ªæ•°æ®å¯¹è±¡ï¼Œé‡Œé¢å¯åŒ…å«æ•°å€¼ã€å‡½æ•°ç­‰</li></ol><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs tsx"><span class="hljs-keyword">type</span> <span class="hljs-title class_">SqliteType</span> = &#123;<br>  <span class="hljs-attr">db</span>: <span class="hljs-title class_">SQLite</span>.<span class="hljs-property">SQLiteDatabase</span> | <span class="hljs-literal">null</span> | <span class="hljs-built_in">any</span>;<br>  <span class="hljs-attr">openDb</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">void</span>;<br>  <span class="hljs-attr">getDbFile</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">void</span>;<br>  <span class="hljs-attr">exeSql</span>: <span class="hljs-function">(<span class="hljs-params"><span class="hljs-keyword">type</span>: <span class="hljs-built_in">string</span>, data: <span class="hljs-built_in">any</span>[]</span>) =&gt;</span> <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">any</span>&gt;;<br>&#125;;<br><br><span class="hljs-keyword">const</span> <span class="hljs-title class_">SqliteContext</span> = createContext&lt;<span class="hljs-title class_">SqliteType</span>&gt;(&#123;<br>  <span class="hljs-attr">db</span>: <span class="hljs-literal">null</span>,<br>  <span class="hljs-attr">openDb</span>: <span class="hljs-function">() =&gt;</span> &#123;&#125;,<br>  <span class="hljs-attr">getDbFile</span>: <span class="hljs-function">() =&gt;</span> &#123;&#125;,<br>  <span class="hljs-attr">exeSql</span>: <span class="hljs-keyword">async</span> () =&gt; &#123;&#125;,<br>&#125;);<br></code></pre></td></tr></table></figure><ol start="2"><li>åˆ›å»ºæä¾›è€…</li></ol><blockquote><p>è¿™é‡Œä½¿ç”¨<code>useRef</code>åˆ›å»ºæ•°æ®ï¼Œä½¿ç”¨<code>useState</code>åœ¨å¼‚æ­¥å‡½æ•°ä¸­ä¼šå‡ºç°é—®é¢˜</p></blockquote><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs tsx"><span class="hljs-keyword">const</span> <span class="hljs-title function_">SqliteProvider</span> = (<span class="hljs-params">&#123;children&#125;:PropsWithChildren</span>) =&gt; &#123;<br>    <span class="hljs-keyword">const</span> db = useRef&lt;<span class="hljs-literal">null</span>|<span class="hljs-title class_">SQLite</span>.<span class="hljs-property">SQLiteDatabase</span>&gt;(<span class="hljs-literal">null</span>)<br><br>    <span class="hljs-comment">// æ‰“å¼€æ•°æ®åº“</span><br>    <span class="hljs-keyword">const</span> <span class="hljs-title function_">openDb</span> = (<span class="hljs-params"></span>) =&gt; &#123;<br><br>    &#125;<br><br>    <span class="hljs-comment">// è·å–è¿œç¨‹dbæ•°æ®</span><br>    <span class="hljs-keyword">const</span> <span class="hljs-title function_">getDbFile</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"></span>) =&gt; &#123;<br><br>    &#125;<br><br>    <span class="hljs-comment">// æ‰§è¡Œè¯­å¥</span><br>    <span class="hljs-keyword">const</span> <span class="hljs-title function_">exeSql</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"><span class="hljs-keyword">type</span>:<span class="hljs-built_in">string</span>,data:<span class="hljs-built_in">any</span>[]</span>) =&gt; &#123;<br><br>      &#125;<br><br>    ...<br>&#125;<br></code></pre></td></tr></table></figure><ol start="3"><li>å¯¹å¤–æš´éœ²çš„æ•°æ®</li></ol><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs tsx"><span class="hljs-keyword">const</span> <span class="hljs-title function_">SqliteProvider</span> = (<span class="hljs-params">&#123;children&#125;:PropsWithChildren</span>) =&gt; &#123;<br>    ...<br><br>    <span class="hljs-keyword">return</span> (<br>        <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">SqliteContext.Provider</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&#123;&#123;db,openDb,getDbFile,exeSql&#125;&#125;</span>&gt;</span></span><br><span class="language-xml">            &#123;children&#125;</span><br><span class="language-xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">SqliteContext.Provider</span>&gt;</span></span><br>    )<br>&#125;<br></code></pre></td></tr></table></figure><ol start="4"><li>å¯¼å‡ºæä¾›è€…åŠ<code>useContext(SqliteContext)</code>å®ä¾‹</li></ol><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs tsx"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">SqliteProvider</span>;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">useSqlite</span> = (<span class="hljs-params"></span>) =&gt; <span class="hljs-title function_">useContext</span>(<span class="hljs-title class_">SqliteContext</span>);<br></code></pre></td></tr></table></figure><ol start="5"><li>ç›‘å¬ç»„ä»¶</li></ol><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs tsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">RootLayoutNav</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">SqliteProvider</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">Stack</span> <span class="hljs-attr">screenOptions</span>=<span class="hljs-string">&#123;&#123;</span> <span class="hljs-attr">headerShown:</span> <span class="hljs-attr">false</span> &#125;&#125;&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">Stack.Screen</span></span></span><br><span class="hljs-tag"><span class="language-xml">          <span class="hljs-attr">name</span>=<span class="hljs-string">&#x27;(drawer)&#x27;</span></span></span><br><span class="hljs-tag"><span class="language-xml">          <span class="hljs-attr">options</span>=<span class="hljs-string">&#123;&#123;</span> <span class="hljs-attr">headerShown:</span> <span class="hljs-attr">false</span> &#125;&#125;</span></span><br><span class="hljs-tag"><span class="language-xml">        /&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">Stack</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">SqliteProvider</span>&gt;</span></span><br>  );<br>&#125;<br></code></pre></td></tr></table></figure><ol start="6"><li>ä½¿ç”¨</li></ol><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs tsx"><span class="hljs-keyword">const</span> &#123; exeSql, getDbFile &#125; = <span class="hljs-title function_">useSqlite</span>();<br></code></pre></td></tr></table></figure><h2 id="6ã€sqliteå®ç°å¢åˆ æ”¹æŸ¥"><a href="#6ã€sqliteå®ç°å¢åˆ æ”¹æŸ¥" class="headerlink" title="6ã€sqliteå®ç°å¢åˆ æ”¹æŸ¥"></a>6ã€<code>sqlite</code>å®ç°å¢åˆ æ”¹æŸ¥</h2><p>è¿™é‡Œä½¿ç”¨<code>execAsync</code>å¼‚æ­¥å‡½æ•°è·å–æ•°æ®</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs tsx"><span class="hljs-comment">// æ‰§è¡Œè¯­å¥</span><br><span class="hljs-keyword">const</span> <span class="hljs-title function_">exeSql</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"><span class="hljs-keyword">type</span>: <span class="hljs-built_in">string</span>, data: <span class="hljs-built_in">any</span>[]</span>) =&gt; &#123;<br>  <span class="hljs-keyword">try</span> &#123;<br>    <span class="hljs-keyword">if</span> (db.<span class="hljs-property">current</span> == <span class="hljs-literal">null</span>) &#123;<br>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;æ•°æ®åº“ä¸å­˜åœ¨&quot;</span>);<br>      <span class="hljs-title function_">openDb</span>();<br>    &#125;<br>    <span class="hljs-keyword">const</span> readOnly = <span class="hljs-literal">false</span>;<br>    <span class="hljs-keyword">return</span> db?.<span class="hljs-property">current</span><br>      ?.<span class="hljs-title function_">execAsync</span>([&#123; <span class="hljs-attr">sql</span>: sqls[<span class="hljs-keyword">type</span>], <span class="hljs-attr">args</span>: data &#125;], readOnly)<br>      .<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">result: <span class="hljs-built_in">any</span></span>) =&gt;</span> &#123;<br>        <span class="hljs-keyword">const</span> data = result[<span class="hljs-number">0</span>]?.<span class="hljs-property">rows</span>;<br>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;æ‰§è¡Œç»“æœ&quot;</span>, result[<span class="hljs-number">0</span>]?.<span class="hljs-property">rows</span>);<br>        <span class="hljs-keyword">return</span> data;<br>      &#125;);<br>  &#125; <span class="hljs-keyword">catch</span> (error) &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">&quot;An error occurred:&quot;</span>, error);<br>    <span class="hljs-keyword">throw</span> error;<br>  &#125;<br>&#125;;<br></code></pre></td></tr></table></figure><p>ä½¿ç”¨</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs tsx"><span class="hljs-title function_">exeSql</span>(<span class="hljs-string">&quot;searchAllTags&quot;</span>, []).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">res</span>) =&gt;</span> &#123;<br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(res);<br>&#125;);<br></code></pre></td></tr></table></figure><blockquote><p>è¿™é‡Œå°è£…ä¸€äº›<code>sql</code>è¯­å¥</p></blockquote><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs tsx"><span class="hljs-keyword">const</span> <span class="hljs-attr">sqls</span>: <span class="hljs-built_in">any</span> = &#123;<br>  <span class="hljs-attr">searchAllNotions</span>: <span class="hljs-string">&quot;SELECT * FROM NOTIONS&quot;</span>,<br>  <span class="hljs-attr">insertNotion</span>:<br>    <span class="hljs-string">&quot;INSERT INTO NOTIONS (id,content,tag,create_time,update_time) VALUES (?, ?, ?, ?,?)&quot;</span>,<br>  <span class="hljs-attr">updateNotionById</span>:<br>    <span class="hljs-string">&quot;UPDATE notions SET content = ?,update_time = ? WHERE id = ?&quot;</span>,<br>  <span class="hljs-attr">searchNotionById</span>: <span class="hljs-string">&quot;SELECT content FROM notions WHERE id = ?&quot;</span>,<br>  <span class="hljs-attr">searchTagNameById</span>: <span class="hljs-string">&quot;SELECT name FROM tags WHERE id = ?&quot;</span>,<br>  <span class="hljs-attr">searchTagIdByName</span>: <span class="hljs-string">&quot;SELECT id FROM tags WHERE name = ?&quot;</span>,<br>  <span class="hljs-attr">searchChildrenTagsById</span>: <span class="hljs-string">&quot;SELECT name FROM tags WHERE father = ?&quot;</span>,<br>  <span class="hljs-attr">searchAllTags</span>: <span class="hljs-string">&quot;SELECT * FROM TAGS&quot;</span>,<br>&#125;;<br></code></pre></td></tr></table></figure><h2 id="7ã€dayjsç®€å•ä½¿ç”¨"><a href="#7ã€dayjsç®€å•ä½¿ç”¨" class="headerlink" title="7ã€dayjsç®€å•ä½¿ç”¨"></a>7ã€<code>dayjs</code>ç®€å•ä½¿ç”¨</h2><p>å¯¼å…¥åº“</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs tsx"><span class="hljs-keyword">import</span> dayjs <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;dayjs&quot;</span>;<br></code></pre></td></tr></table></figure><p>ç”Ÿæˆæ—¶é—´ï¼ˆæ¯«ç§’ï¼‰</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs tsx"><span class="hljs-title function_">dayjs</span>().<span class="hljs-title function_">valueOf</span>();<br></code></pre></td></tr></table></figure><p>ç”Ÿæˆæ—¶é—´</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs tsx"><span class="hljs-title function_">dayjs</span>().<span class="hljs-title function_">subtract</span>(<span class="hljs-number">1</span>, <span class="hljs-string">&quot;hour&quot;</span>).<span class="hljs-title function_">toISOString</span>();<br></code></pre></td></tr></table></figure><p>è®¡ç®—å¼€å§‹åˆ°ç°åœ¨çš„å¤©æ•°</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs tsx"><span class="hljs-keyword">import</span> dayjs <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;dayjs&quot;</span>;<br><span class="hljs-keyword">import</span> relativeTime <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;dayjs/plugin/relativeTime&quot;</span>;<br><br>dayjs.<span class="hljs-title function_">extend</span>(relativeTime);<br><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">dayjs</span>(created_at).<span class="hljs-title function_">fromNow</span>());<br></code></pre></td></tr></table></figure><h2 id="8ã€è·å–é¡µé¢ç®¡çº¿åˆ—è¡¨"><a href="#8ã€è·å–é¡µé¢ç®¡çº¿åˆ—è¡¨" class="headerlink" title="8ã€è·å–é¡µé¢ç®¡çº¿åˆ—è¡¨"></a>8ã€è·å–é¡µé¢ç®¡çº¿åˆ—è¡¨</h2><p>å½“å‰é¡µé¢å¤„äºçš„ç®¡çº¿ä½ç½®</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs tsx"><span class="hljs-keyword">const</span> segments = <span class="hljs-title function_">useSegments</span>() &gt; [<span class="hljs-string">&quot;(user)&quot;</span>, <span class="hljs-string">&quot;film&quot;</span>];<br></code></pre></td></tr></table></figure><h2 id="9ã€vscode-é…ç½®-prettier"><a href="#9ã€vscode-é…ç½®-prettier" class="headerlink" title="9ã€vscode é…ç½® prettier"></a>9ã€vscode é…ç½® prettier</h2><p><a href="https://marketplace.visualstudio.com/items?itemName=esbenp.prettier-vscode">prettier</a></p><p>å®‰è£…ä¾èµ–</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">npm i -D prettier eslint-config-prettier eslint-plugin-prettier<br></code></pre></td></tr></table></figure><p>ä¿®æ”¹ vscode è®¾ç½®</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-attr">&quot;editor.defaultFormatter&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;esbenp.prettier-vscode&quot;</span><span class="hljs-punctuation">,</span><br><span class="hljs-attr">&quot;files.autoSave&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;onFocusChange&quot;</span><span class="hljs-punctuation">,</span><br><span class="hljs-attr">&quot;editor.formatOnSave&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span> <span class="hljs-comment">// ä¿å­˜æ—¶è‡ªåŠ¨æ ¼å¼åŒ–</span><br><span class="hljs-attr">&quot;editor.formatOnType&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span><br><span class="hljs-attr">&quot;[typescript]&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br><span class="hljs-attr">&quot;editor.defaultFormatter&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;esbenp.prettier-vscode&quot;</span><br><span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br><span class="hljs-attr">&quot;prettier.useEditorConfig&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span> <span class="hljs-comment">// ä¸€å®šè¦å–æ¶ˆï¼Œå¦åˆ™ä¼šä½¿ç”¨vscodeå·¥ä½œåŒºè®¾ç½®ï¼Œè€Œä¸ä¼šä½¿ç”¨.prettierrc.js</span><br></code></pre></td></tr></table></figure><p>åœ¨é¡µé¢ä¸‹æ–°å¢æ–‡ä»¶<code>.prettierrc.js</code>ï¼Œä»¥ä¸‹æ˜¯æˆ‘çš„é»˜è®¤é…ç½®</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@see</span> https://prettier.io/docs/en/options.html#print-width</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@author</span> <span class="hljs-variable">lcm</span></span><br><span class="hljs-comment"> */</span><br><span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = &#123;<br>  <span class="hljs-comment">/**</span><br><span class="hljs-comment">   * æ¢è¡Œå®½åº¦ï¼Œå½“ä»£ç å®½åº¦è¾¾åˆ°å¤šå°‘æ—¶æ¢è¡Œ</span><br><span class="hljs-comment">   */</span><br>  <span class="hljs-attr">printWidth</span>: <span class="hljs-number">80</span>,<br>  <span class="hljs-comment">/**</span><br><span class="hljs-comment">   * ç¼©è¿›çš„ç©ºæ ¼æ•°é‡</span><br><span class="hljs-comment">   * <span class="hljs-doctag">@default</span> 2</span><br><span class="hljs-comment">   * <span class="hljs-doctag">@type</span> &#123;<span class="hljs-type">number</span>&#125;</span><br><span class="hljs-comment">   */</span><br>  <span class="hljs-attr">tabWidth</span>: <span class="hljs-number">2</span>,<br>  <span class="hljs-comment">/**</span><br><span class="hljs-comment">   * æ˜¯å¦ä½¿ç”¨åˆ¶è¡¨ç¬¦ä»£æ›¿ç©ºæ ¼</span><br><span class="hljs-comment">   * <span class="hljs-doctag">@default</span> <span class="hljs-variable">false</span></span><br><span class="hljs-comment">   * <span class="hljs-doctag">@type</span> &#123;<span class="hljs-type">boolean</span>&#125;</span><br><span class="hljs-comment">   */</span><br>  <span class="hljs-attr">useTabs</span>: <span class="hljs-literal">false</span>,<br>  <span class="hljs-comment">/**</span><br><span class="hljs-comment">   * æ˜¯å¦åœ¨ä»£ç å—ç»“å°¾åŠ ä¸Šåˆ†å·</span><br><span class="hljs-comment">   * <span class="hljs-doctag">@default</span> <span class="hljs-variable">true</span></span><br><span class="hljs-comment">   * <span class="hljs-doctag">@type</span> &#123;<span class="hljs-type">boolean</span>&#125;</span><br><span class="hljs-comment">   */</span><br>  <span class="hljs-attr">semi</span>: <span class="hljs-literal">true</span>,<br>  <span class="hljs-comment">/**</span><br><span class="hljs-comment">   * æ˜¯å¦ä½¿ç”¨å•å¼•å·æ›¿ä»£åŒå¼•å·</span><br><span class="hljs-comment">   * <span class="hljs-doctag">@default</span> <span class="hljs-variable">false</span></span><br><span class="hljs-comment">   * <span class="hljs-doctag">@type</span> &#123;<span class="hljs-type">boolean</span>&#125;</span><br><span class="hljs-comment">   */</span><br>  <span class="hljs-attr">singleQuote</span>: <span class="hljs-literal">false</span>,<br>  <span class="hljs-comment">/**</span><br><span class="hljs-comment">   * å¯¹è±¡å±æ€§çš„å¼•å·å¤„ç†</span><br><span class="hljs-comment">   * <span class="hljs-doctag">@default</span> &quot;as-needed&quot;</span><br><span class="hljs-comment">   * <span class="hljs-doctag">@type</span> &#123;<span class="hljs-type">&quot;as-needed&quot;|&quot;consistent&quot;|&quot;preserve&quot;</span>&#125;</span><br><span class="hljs-comment">   */</span><br>  <span class="hljs-attr">quoteProps</span>: <span class="hljs-string">&quot;as-needed&quot;</span>,<br>  <span class="hljs-comment">/**</span><br><span class="hljs-comment">   * jsxä¸­æ˜¯å¦ä½¿ç”¨å•å¼•å·æ›¿ä»£åŒå¼•å·</span><br><span class="hljs-comment">   * <span class="hljs-doctag">@default</span> <span class="hljs-variable">false</span></span><br><span class="hljs-comment">   * <span class="hljs-doctag">@type</span> &#123;<span class="hljs-type">boolean</span>&#125;</span><br><span class="hljs-comment">   */</span><br>  <span class="hljs-attr">jsxSingleQuote</span>: <span class="hljs-literal">false</span>,<br>  <span class="hljs-comment">/**</span><br><span class="hljs-comment">   * æœ«å°¾æ˜¯å¦åŠ ä¸Šé€—å·</span><br><span class="hljs-comment">   * <span class="hljs-doctag">@default</span> &quot;es5&quot;</span><br><span class="hljs-comment">   * <span class="hljs-doctag">@type</span> &#123;<span class="hljs-type">&quot;es5&quot;|&quot;none&quot;|&quot;all&quot;</span>&#125;</span><br><span class="hljs-comment">   */</span><br>  <span class="hljs-attr">trailingComma</span>: <span class="hljs-string">&quot;all&quot;</span>,<br>  <span class="hljs-comment">/**</span><br><span class="hljs-comment">   * åœ¨å¯¹è±¡ï¼Œæ•°ç»„æ‹¬å·ä¸æ–‡å­—ä¹‹é—´åŠ ç©ºæ ¼ &quot;&#123; foo: bar &#125;&quot;</span><br><span class="hljs-comment">   * <span class="hljs-doctag">@default</span> <span class="hljs-variable">true</span></span><br><span class="hljs-comment">   * <span class="hljs-doctag">@type</span> &#123;<span class="hljs-type">boolean</span>&#125;</span><br><span class="hljs-comment">   */</span><br>  <span class="hljs-attr">bracketSpacing</span>: <span class="hljs-literal">true</span>,<br>  <span class="hljs-comment">/**</span><br><span class="hljs-comment">   * æŠŠå¤šè¡ŒHTML (HTML, JSX, Vue, Angular)å…ƒç´ çš„&gt;æ”¾åœ¨æœ€åä¸€è¡Œçš„æœ«å°¾ï¼Œè€Œä¸æ˜¯å•ç‹¬æ”¾åœ¨ä¸‹ä¸€è¡Œ(ä¸é€‚ç”¨äºè‡ªå…³é—­å…ƒç´ )ã€‚</span><br><span class="hljs-comment">   * <span class="hljs-doctag">@default</span> <span class="hljs-variable">false</span></span><br><span class="hljs-comment">   * <span class="hljs-doctag">@type</span> &#123;<span class="hljs-type">boolean</span>&#125;</span><br><span class="hljs-comment">   */</span><br>  <span class="hljs-attr">bracketSameLine</span>: <span class="hljs-literal">false</span>,<br>  <span class="hljs-comment">/**</span><br><span class="hljs-comment">   * å½“ç®­å¤´å‡½æ•°åªæœ‰ä¸€ä¸ªå‚æ•°æ˜¯å¦åŠ æ‹¬å·</span><br><span class="hljs-comment">   * <span class="hljs-doctag">@default</span> &quot;always&quot;</span><br><span class="hljs-comment">   * <span class="hljs-doctag">@type</span> &#123;<span class="hljs-type">&quot;always&quot;|&quot;avoid&quot;</span>&#125;</span><br><span class="hljs-comment">   */</span><br>  <span class="hljs-attr">arrowParens</span>: <span class="hljs-string">&quot;avoid&quot;</span>,<br>  <span class="hljs-comment">/**</span><br><span class="hljs-comment">   * ä¸ºHTMLã€Vueã€Angularå’ŒHandlebarsæŒ‡å®šå…¨å±€ç©ºæ ¼æ•æ„Ÿæ€§</span><br><span class="hljs-comment">   * <span class="hljs-doctag">@default</span> &quot;css&quot;</span><br><span class="hljs-comment">   * <span class="hljs-doctag">@type</span> &#123;<span class="hljs-type">&quot;css&quot;|&quot;strict&quot;|&quot;ignore&quot;</span>&#125;</span><br><span class="hljs-comment">   */</span><br>  <span class="hljs-attr">htmlWhitespaceSensitivity</span>: <span class="hljs-string">&quot;ignore&quot;</span>,<br>  <span class="hljs-comment">/**</span><br><span class="hljs-comment">   * æ˜¯å¦ç¼©è¿›Vueæ–‡ä»¶ä¸­çš„&lt;script&gt;å’Œ&lt;style&gt;æ ‡è®°å†…çš„ä»£ç ã€‚æœ‰äº›äºº(æ¯”å¦‚Vueçš„åˆ›å»ºè€…)ä¸ä½¿ç”¨ç¼©è¿›æ¥ä¿å­˜ç¼©è¿›çº§åˆ«ï¼Œä½†è¿™å¯èƒ½ä¼šç ´åç¼–è¾‘å™¨ä¸­çš„ä»£ç æŠ˜å ã€‚</span><br><span class="hljs-comment">   * <span class="hljs-doctag">@default</span> &quot;always&quot;</span><br><span class="hljs-comment">   * <span class="hljs-doctag">@type</span> &#123;<span class="hljs-type">&quot;always&quot;|&quot;avoid&quot;</span>&#125;</span><br><span class="hljs-comment">   */</span><br>  <span class="hljs-attr">vueIndentScriptAndStyle</span>: <span class="hljs-literal">false</span>,<br>  <span class="hljs-comment">/**</span><br><span class="hljs-comment">   * æ–‡ä»¶ç»“æŸç¬¦</span><br><span class="hljs-comment">   * <span class="hljs-doctag">@default</span> &quot;lf&quot;</span><br><span class="hljs-comment">   * <span class="hljs-doctag">@type</span> &#123;<span class="hljs-type">&quot;lf&quot;|&quot;crlf&quot;|&quot;cr&quot;|&quot;auto&quot;</span>&#125;</span><br><span class="hljs-comment">   */</span><br>  <span class="hljs-attr">endOfLine</span>: <span class="hljs-string">&quot;crlf&quot;</span>,<br>  <span class="hljs-comment">/**</span><br><span class="hljs-comment">   * å› ä¸ºä½¿ç”¨äº†ä¸€äº›æŠ˜è¡Œæ•æ„Ÿå‹çš„æ¸²æŸ“å™¨ï¼ˆå¦‚GitHub commentï¼‰è€ŒæŒ‰ç…§markdownæ–‡æœ¬æ ·å¼è¿›è¡ŒæŠ˜è¡Œ</span><br><span class="hljs-comment">   */</span><br>  <span class="hljs-attr">proseWrap</span>: <span class="hljs-string">&quot;never&quot;</span>,<br>  <span class="hljs-comment">// æ˜¯å¦ä½¿ç”¨æ ¹ç›®å½•ä¸‹çš„EditorConfigé…ç½®æ–‡ä»¶</span><br>  <span class="hljs-attr">useEditorConfig</span>: <span class="hljs-literal">false</span>,<br>  <span class="hljs-comment">/**</span><br><span class="hljs-comment">   * HTML\VUE\JSXæ¯è¡Œåªæœ‰å•ä¸ªå±æ€§</span><br><span class="hljs-comment">   * <span class="hljs-doctag">@default</span> <span class="hljs-variable">true</span></span><br><span class="hljs-comment">   * <span class="hljs-doctag">@type</span> &#123;<span class="hljs-type">boolean</span>&#125;</span><br><span class="hljs-comment">   */</span><br>  <span class="hljs-attr">singleAttributePerLine</span>: <span class="hljs-literal">true</span>,<br>  <span class="hljs-attr">disableLanguages</span>: [<span class="hljs-string">&quot;html&quot;</span>],<br>&#125;;<br></code></pre></td></tr></table></figure><blockquote><p>æ¯æ¬¡ä¿®æ”¹<code>.prettierrc.js</code>é‡å¯æ‰èƒ½ç”Ÿæ•ˆ</p></blockquote><h2 id="10ã€è§£å†³å¼‚æ­¥è·å–æ•°æ®ç»„ä»¶ä¸åˆ·æ–°"><a href="#10ã€è§£å†³å¼‚æ­¥è·å–æ•°æ®ç»„ä»¶ä¸åˆ·æ–°" class="headerlink" title="10ã€è§£å†³å¼‚æ­¥è·å–æ•°æ®ç»„ä»¶ä¸åˆ·æ–°"></a>10ã€è§£å†³å¼‚æ­¥è·å–æ•°æ®ç»„ä»¶ä¸åˆ·æ–°</h2><p>å¯ä»¥æ–°å¢ä¸€ä¸ªçŠ¶æ€ï¼Œæ•°æ®åŠ è½½æ—¶ä¸º<code>false</code>ï¼ŒåŠ è½½æˆåŠŸåå˜ä¸º<code>true</code></p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><code class="hljs ts"><span class="hljs-keyword">const</span> <span class="hljs-title function_">getData</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"></span>) =&gt; &#123;<br>  <span class="hljs-title function_">setIsLodingData</span>(<span class="hljs-literal">true</span>); <span class="hljs-comment">// è®¾ç½®åŠ è½½çŠ¶æ€ä¸º true</span><br>  <span class="hljs-keyword">const</span> notionsPromise = <span class="hljs-title function_">exeSql</span>(<span class="hljs-string">&quot;searchAllNotions&quot;</span>, []).<span class="hljs-title function_">then</span>(<span class="hljs-keyword">async</span> (res) =&gt; &#123;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; res.<span class="hljs-property">length</span>; i++) &#123;<br>      <span class="hljs-keyword">await</span> <span class="hljs-title function_">exeSql</span>(<span class="hljs-string">&quot;searchTagNameById&quot;</span>, [res[i].<span class="hljs-property">tag</span>]).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">res2</span>) =&gt;</span> &#123;<br>        res[i].<span class="hljs-property">tag</span> = res2[<span class="hljs-number">0</span>].<span class="hljs-property">name</span>;<br>      &#125;);<br>    &#125;<br>    <span class="hljs-keyword">return</span> res;<br>  &#125;);<br><br>  <span class="hljs-keyword">const</span> tagsPromise = <span class="hljs-title function_">exeSql</span>(<span class="hljs-string">&quot;searchAllTags&quot;</span>, []);<br><br>  <span class="hljs-keyword">const</span> [notions, tags] = <span class="hljs-keyword">await</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">all</span>([notionsPromise, tagsPromise]);<br><br>  <span class="hljs-title function_">setAllNotions</span>(notions);<br>  <span class="hljs-title function_">setTags</span>(tags);<br>  <span class="hljs-title function_">setIsLodingData</span>(<span class="hljs-literal">false</span>);<br>&#125;;<br><br>&#123;<br>  <span class="hljs-comment">/* æ•°æ®å±•ç¤ºå¡ç‰‡ */</span><br>&#125;<br>&#123;<br>  isLodingData ? (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">ActivityIndicator</span></span></span><br><span class="hljs-tag"><span class="language-xml">      <span class="hljs-attr">animating</span>=<span class="hljs-string">&#123;isLodingData&#125;</span></span></span><br><span class="hljs-tag"><span class="language-xml">      <span class="hljs-attr">color</span>=<span class="hljs-string">&#123;Colors.light.tint&#125;</span></span></span><br><span class="hljs-tag"><span class="language-xml">    /&gt;</span></span><br>  ) : (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">FlatList</span></span></span><br><span class="hljs-tag"><span class="language-xml">      <span class="hljs-attr">data</span>=<span class="hljs-string">&#123;notions.current&#125;</span></span></span><br><span class="hljs-tag"><span class="language-xml">      <span class="hljs-attr">renderItem</span>=<span class="hljs-string">&#123;(&#123;</span> <span class="hljs-attr">item</span> &#125;) =&gt;</span> (</span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">CartItem</span></span></span><br><span class="hljs-tag"><span class="language-xml">          <span class="hljs-attr">cartType</span>=<span class="hljs-string">&#x27;show&#x27;</span></span></span><br><span class="hljs-tag"><span class="language-xml">          <span class="hljs-attr">notion</span>=<span class="hljs-string">&#123;item&#125;</span></span></span><br><span class="hljs-tag"><span class="language-xml">          <span class="hljs-attr">func</span>=<span class="hljs-string">&#123;getData&#125;</span></span></span><br><span class="hljs-tag"><span class="language-xml">        /&gt;</span></span><br><span class="language-xml">      )&#125;</span><br><span class="language-xml">      contentContainerStyle=&#123;&#123;</span><br><span class="language-xml">        gap: defalutSize,</span><br><span class="language-xml">        padding: defalutSize * 0.5,</span><br><span class="language-xml">      &#125;&#125;</span><br><span class="language-xml">    /&gt;</span><br>  );<br>&#125;<br></code></pre></td></tr></table></figure><blockquote><p><code>getData</code>å‡½æ•°ä¸­æœ‰ä¸¤ä¸ªå¼‚æ­¥åŠ è½½å‡½æ•°ï¼Œä¸ºäº†æé«˜è·å–æ•°æ®çš„æ•ˆç‡ï¼Œå¯ä»¥åŒæ—¶å¼‚æ­¥åŠ è½½æ•°æ®ï¼ŒåŠ è½½å®Œæˆåå†èµ‹å€¼</p></blockquote><p>ä¹‹å‰çš„ä»£ç ä¸º</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs ts"><span class="hljs-keyword">const</span> <span class="hljs-title function_">getData</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"></span>) =&gt; &#123;<br>  <span class="hljs-keyword">await</span> <span class="hljs-title function_">exeSql</span>(<span class="hljs-string">&quot;searchAllNotions&quot;</span>, []).<span class="hljs-title function_">then</span>(<span class="hljs-keyword">async</span> res =&gt; &#123;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; res.<span class="hljs-property">length</span>; i++) &#123;<br>      <span class="hljs-keyword">await</span> <span class="hljs-title function_">exeSql</span>(<span class="hljs-string">&quot;searchTagNameById&quot;</span>,[res[i].<span class="hljs-property">tag</span>]).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">res2</span>)=&gt;</span>&#123;<br>        res[i].<span class="hljs-property">tag</span> = res2[<span class="hljs-number">0</span>].<span class="hljs-property">name</span><br>      &#125;)<br>    &#125;<br>    <span class="hljs-title function_">setAllNotions</span>(res);<br>  &#125;)<br><br>  &#125;);<br>  <span class="hljs-keyword">await</span> <span class="hljs-title function_">exeSql</span>(<span class="hljs-string">&quot;searchAllTags&quot;</span>, []).<span class="hljs-title function_">then</span>(<span class="hljs-keyword">async</span> res =&gt; &#123;<br>    <span class="hljs-title function_">setTags</span>(res);<br>  &#125;);<br>&#125;;<br></code></pre></td></tr></table></figure><h2 id="11ã€useEffect-å’Œ-useRef-åŒºåˆ«"><a href="#11ã€useEffect-å’Œ-useRef-åŒºåˆ«" class="headerlink" title="11ã€useEffect å’Œ useRef åŒºåˆ«"></a>11ã€useEffect å’Œ useRef åŒºåˆ«</h2><h3 id="11-1-å®šä¹‰"><a href="#11-1-å®šä¹‰" class="headerlink" title="11.1 å®šä¹‰"></a>11.1 å®šä¹‰</h3><ol><li><code>useEffect</code>ï¼šç®¡ç†çŠ¶æ€ã€‚ç®¡ç†å‡½æ•°ç»„ä»¶çš„çŠ¶æ€å’Œæ›´æ–°çŠ¶æ€ï¼Œå˜åŒ–åé‡æ–°æ¸²æŸ“å¾å»ºã€‚</li><li><code>useRef</code>ï¼šæ“ä½œ DOM å…ƒç´ ã€‚ç”¨äºå‡½æ•°å¼ç»„ä»¶ä¸­è®¿é—®çš„å…¨å±€å˜é‡ï¼Œè€Œä¸å¿…æ¸²æŸ“ç»„ä»¶ã€‚</li></ol><h2 id="12ã€è¿”å›é¡µé¢åˆ·æ–°"><a href="#12ã€è¿”å›é¡µé¢åˆ·æ–°" class="headerlink" title="12ã€è¿”å›é¡µé¢åˆ·æ–°"></a>12ã€è¿”å›é¡µé¢åˆ·æ–°</h2><p>ä½¿ç”¨é¡µé¢ç›‘å¬äº‹ä»¶ï¼Œç›‘å¬<code>navigate</code>çš„å€¼ï¼Œä¸€æ—¦è¿”å›é¡µé¢ï¼Œ<code>navigate</code>çš„å€¼å°±ä¼šå‘ç”Ÿæ”¹å˜ï¼Œä»è€Œè§¦å‘åˆ·æ–°å‡½æ•°ã€‚</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs tsx"><span class="hljs-keyword">import</span> &#123; useNavigation &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;expo-router&quot;</span>;<br><br><span class="hljs-keyword">const</span> navigation = <span class="hljs-title function_">useNavigation</span>();<br><br><span class="hljs-comment">// è¿”å›é¡µé¢åˆ·æ–°</span><br><span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>  <span class="hljs-keyword">const</span> unsubscribe = navigation.<span class="hljs-title function_">addListener</span>(<span class="hljs-string">&quot;focus&quot;</span>, <span class="hljs-function">() =&gt;</span> &#123;<br>    <span class="hljs-title function_">onRefresh</span>();<br>  &#125;);<br>  <span class="hljs-keyword">return</span> unsubscribe;<br>&#125;, [navigation]);<br></code></pre></td></tr></table></figure><h2 id="13ã€Provider-é¡ºåºé—®é¢˜"><a href="#13ã€Provider-é¡ºåºé—®é¢˜" class="headerlink" title="13ã€Provider é¡ºåºé—®é¢˜"></a>13ã€Provider é¡ºåºé—®é¢˜</h2><p>åœ¨å†™ç®€è®°è½¯ä»¶æ—¶ï¼Œå°†æ•°æ®åº“æ“ä½œå’Œçµæ„Ÿéƒ½å°è£…æˆäº†å…¨å±€<code>provider</code>ï¼Œåœ¨çµæ„Ÿé‡Œä½¿ç”¨åˆ°æ•°æ®åº“çš„ç›¸å…³æ“ä½œã€‚</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs tsx"><span class="hljs-comment">// DataProvider</span><br><br><span class="hljs-keyword">const</span> <span class="hljs-title function_">updateNotion</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params">textInput: <span class="hljs-built_in">string</span>, id: <span class="hljs-built_in">string</span></span>) =&gt; &#123;<br>  <span class="hljs-keyword">await</span> <span class="hljs-title function_">exeSql</span>(<span class="hljs-string">&quot;searchNotionById&quot;</span>, [id]).<span class="hljs-title function_">then</span>(<br>    <span class="hljs-keyword">async</span> (<span class="hljs-attr">searchNotionByIdRes</span>: <span class="hljs-built_in">any</span>) =&gt; &#123;<br>      <span class="hljs-keyword">if</span> (searchNotionByIdRes[<span class="hljs-number">0</span>]?.<span class="hljs-property">rows</span>[<span class="hljs-number">0</span>]?.<span class="hljs-property">content</span> === textInput) &#123;<br>        <span class="hljs-keyword">return</span>;<br>      &#125;<br>      <span class="hljs-keyword">const</span> updata_time = <span class="hljs-title function_">dayjs</span>().<span class="hljs-title function_">valueOf</span>();<br>      <span class="hljs-keyword">await</span> <span class="hljs-title function_">exeSql</span>(<span class="hljs-string">&quot;updateNotionById&quot;</span>, [textInput, updata_time, id]).<span class="hljs-title function_">then</span>(<br>        <span class="hljs-function">() =&gt;</span> &#123;&#125;<br>      );<br>    &#125;<br>  );<br>&#125;;<br></code></pre></td></tr></table></figure><p>åœ¨å°è£…æ—¶éœ€è¦å°†<code>DataProvider</code>æ”¾åœ¨<code>SqliteProvider</code>é‡Œé¢ï¼Œä¸ç„¶åœ¨ä½¿ç”¨<code>DataProvider</code>æ—¶ä¼šæ‰¾ä¸åˆ°æ•°æ®åº“ï¼Œå› ä¸ºå…ˆåŠ è½½çš„<code>DataProvider</code>æ—¶<code>SqliteProvider</code>è¿˜æœªåŠ è½½ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>ç¼–ç¨‹</category>
      
      <category>å‰ç«¯</category>
      
      <category>ReactNative</category>
      
    </categories>
    
    
    <tags>
      
      <tag>ç¼–ç¨‹</tag>
      
      <tag>React Native</tag>
      
      <tag>é—®é¢˜</tag>
      
      <tag>è½¯ä»¶å¼€å‘</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Reactå­¦ä¹ ç¬”è®°</title>
    <link href="/2024/06/29/021%20React%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    <url>/2024/06/29/021%20React%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/</url>
    
    <content type="html"><![CDATA[<h2 id="1ã€å®‰è£…ä¸ä½¿ç”¨"><a href="#1ã€å®‰è£…ä¸ä½¿ç”¨" class="headerlink" title="1ã€å®‰è£…ä¸ä½¿ç”¨"></a>1ã€å®‰è£…ä¸ä½¿ç”¨</h2><ol><li>å®‰è£…</li></ol><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cmake">npm <span class="hljs-keyword">install</span> -g create-react-app<br></code></pre></td></tr></table></figure><ol start="2"><li>åˆ›å»ºé¡¹ç›®</li></ol><figure class="highlight dsconfig"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs dsconfig"><span class="hljs-built_in">create-react-app</span> <span class="hljs-string">myapp</span><br></code></pre></td></tr></table></figure><ol start="3"><li>å¼€å§‹è¿è¡Œ<br>è¿›å…¥åˆ°æ ¹ç›®å½•é‡Œï¼Œè¾“å…¥</li></ol><figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs coffeescript"><span class="hljs-built_in">npm</span> start<br></code></pre></td></tr></table></figure><h2 id="2ã€åˆå§‹-React"><a href="#2ã€åˆå§‹-React" class="headerlink" title="2ã€åˆå§‹ React"></a>2ã€åˆå§‹ React</h2><h3 id="2-1-åŸºæœ¬æµç¨‹"><a href="#2-1-åŸºæœ¬æµç¨‹" class="headerlink" title="2.1 åŸºæœ¬æµç¨‹"></a>2.1 åŸºæœ¬æµç¨‹</h3><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-comment">// å¼•å…¥æ¨¡å—</span><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;react&quot;</span>;<br><span class="hljs-keyword">import</span> <span class="hljs-title class_">ReactDOM</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;react-dom&quot;</span>;<br><br><span class="hljs-comment">// æ¸²æŸ“dom</span><br><span class="hljs-title class_">ReactDOM</span>.<span class="hljs-title function_">render</span>(<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Hello World<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span></span>, <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&quot;root&quot;</span>));<br></code></pre></td></tr></table></figure><h3 id="2-2-åŸºæœ¬-JSX-è¯­æ³•"><a href="#2-2-åŸºæœ¬-JSX-è¯­æ³•" class="headerlink" title="2.2 åŸºæœ¬ JSX è¯­æ³•"></a>2.2 åŸºæœ¬ JSX è¯­æ³•</h3><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">class</span> <span class="hljs-title class_">App</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">React.Component</span> &#123;<br>  <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">return</span> (<br>      <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span></span></span><br><span class="hljs-tag"><span class="language-xml">        <span class="hljs-attr">className</span>=<span class="hljs-string">&#x27;app&#x27;</span></span></span><br><span class="hljs-tag"><span class="language-xml">        <span class="hljs-attr">id</span>=<span class="hljs-string">&#x27;appRoot&#x27;</span></span></span><br><span class="hljs-tag"><span class="language-xml">      &gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">h1</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&#x27;title&#x27;</span>&gt;</span>æ¬¢è¿è¿›å…¥Reactçš„ä¸–ç•Œ<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>React.js æ˜¯ä¸€ä¸ªæ„å»ºé¡µé¢ UI çš„åº“<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>    );<br>  &#125;<br>&#125;<br><span class="hljs-title class_">ReactDOM</span>.<span class="hljs-title function_">render</span>(<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">App</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">App</span>&gt;</span></span>, <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&quot;root&quot;</span>));<br></code></pre></td></tr></table></figure><blockquote><p>åŒéŸ³èŠ‚è¦ä½¿ç”¨é©¼å³°å‘½åï¼Œå¦‚ className fontSize</p></blockquote><h3 id="2-3-class-ç»„ä»¶"><a href="#2-3-class-ç»„ä»¶" class="headerlink" title="2.3 class ç»„ä»¶"></a>2.3 class ç»„ä»¶</h3><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">class</span> <span class="hljs-title class_">App</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">React.Component</span> &#123;<br>  a = &#123;<br>    <span class="hljs-attr">id</span>: <span class="hljs-number">1</span>,<br>    <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;å°æ˜&quot;</span>,<br>  &#125;;<br>  <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">return</span> (<br>      <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;()</span> =&gt;</span> this.ceshi(this.a)&#125;&gt;Click<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>    );<br>  &#125;<br>  ceshi = <span class="hljs-function">(<span class="hljs-params">props</span>) =&gt;</span> &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(props);<br>  &#125;;<br>&#125;<br></code></pre></td></tr></table></figure><blockquote><p>å‡½æ•°çš„å†™æ³•æ¨èç®­å¤´å‡½æ•°</p></blockquote><h3 id="2-4-å‡½æ•°ç»„ä»¶"><a href="#2-4-å‡½æ•°ç»„ä»¶" class="headerlink" title="2.4 å‡½æ•°ç»„ä»¶"></a>2.4 å‡½æ•°ç»„ä»¶</h3><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">const</span> <span class="hljs-title function_">App</span> = (<span class="hljs-params">props</span>) =&gt; &#123;<br>  <span class="hljs-keyword">return</span> <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>æˆ‘æ¥äº†<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span></span>;<br>&#125;;<br></code></pre></td></tr></table></figure><p>ç®€å†™</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">const</span> <span class="hljs-title function_">App</span> = (<span class="hljs-params">props</span>) =&gt; <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>æˆ‘æ¥äº†<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span></span>;<br></code></pre></td></tr></table></figure><blockquote><p>ç»„ä»¶åç§°ä¸€å®šè¦å¤§å†™</p></blockquote><h3 id="2-5-ç»„ä»¶æ ·å¼"><a href="#2-5-ç»„ä»¶æ ·å¼" class="headerlink" title="2.5 ç»„ä»¶æ ·å¼"></a>2.5 ç»„ä»¶æ ·å¼</h3><ol><li>è¡Œå†…æ ·å¼</li></ol><ul><li>ç¬¬ä¸€ä¸ªæ‹¬å·è¡¨ç¤ºé‡Œé¢å†™ js è¡¨è¾¾å¼ï¼Œç¬¬äºŒä¸ªä»£è¡¨ä¸€ä¸ªå¯¹è±¡</li></ul><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs jsx">&lt;p style=&#123;&#123; <span class="hljs-attr">color</span>: <span class="hljs-string">&quot;red&quot;</span>, <span class="hljs-attr">fontSize</span>: <span class="hljs-string">&quot;14px&quot;</span> &#125;&#125;&gt;<span class="hljs-title class_">Hello</span> world&lt;/p&gt;<br></code></pre></td></tr></table></figure><ol start="2"><li>class æ ·å¼</li></ol><ul><li>è¦å†™æˆ className</li></ul><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs jsx">&lt;p className=<span class="hljs-string">&#x27;hello&#x27;</span>&gt;<span class="hljs-title class_">Hello</span> world&lt;/p&gt;<br></code></pre></td></tr></table></figure><h3 id="2-6-äº‹ä»¶å¤„ç†"><a href="#2-6-äº‹ä»¶å¤„ç†" class="headerlink" title="2.6 äº‹ä»¶å¤„ç†"></a>2.6 äº‹ä»¶å¤„ç†</h3><ol><li>ç»‘å®šäº‹ä»¶ onclick</li><li>æ¨èè¿™ç§å‡½æ•°å†™æ³•</li><li>event äº‹ä»¶</li></ol><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">class</span> <span class="hljs-title class_">App</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">React.Component</span> &#123;<br>  a = &#123;<br>    <span class="hljs-attr">id</span>: <span class="hljs-number">1</span>,<br>    <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;å°æ˜&quot;</span>,<br>  &#125;;<br>  <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">return</span> (<br>      <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;()</span> =&gt;</span> this.ceshi(this.a)&#125;&gt;Click<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>    );<br>  &#125;<br>  ceshi = <span class="hljs-function">(<span class="hljs-params">props</span>) =&gt;</span> &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(props);<br>  &#125;;<br>&#125;<br></code></pre></td></tr></table></figure><p><span style="background-color:yellow"><strong>event äº‹ä»¶</strong></span></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">class</span> <span class="hljs-title class_">App</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">React.Component</span>&#123;<br>    a = &#123;<br>        <span class="hljs-attr">id</span>:<span class="hljs-number">1</span>,<br>        <span class="hljs-attr">name</span>:<span class="hljs-string">&#x27;å°æ˜&#x27;</span><br>    &#125;;<br>    <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>)&#123;<br>        <span class="hljs-keyword">return</span> (<br>            <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">            &#123;//è¿™é‡Œç®­å¤´å‡½æ•°è¦ä¼ é€’å‚æ•°ï¼Œæ‰èƒ½æ•è·åˆ°&#125;</span><br><span class="language-xml">                <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;(e)</span>=&gt;</span>&#123;this.ceshi(e)&#125;&#125;&gt;Click<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>        )<br>    &#125;<br>    ceshi = <span class="hljs-function">(<span class="hljs-params">event</span>)=&gt;</span>&#123;<br>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(event);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p><img src="http://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/image-20220515142102870.png" alt="image-20220515142102870"></p><h3 id="2-7-Ref-ä½¿ç”¨"><a href="#2-7-Ref-ä½¿ç”¨" class="headerlink" title="2.7 Ref ä½¿ç”¨"></a>2.7 Ref ä½¿ç”¨</h3><ol><li>åˆ›å»º<code>myref = React.createRef()</code></li><li>ç»‘å®šæ ‡ç­¾<code>ref=&#123;this.myref&#125;</code></li><li>ä½¿ç”¨</li></ol><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">class</span> <span class="hljs-title class_">App</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">React.Component</span> &#123;<br>  a = &#123;<br>    <span class="hljs-attr">id</span>: <span class="hljs-number">1</span>,<br>    <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;å°æ˜&quot;</span>,<br>  &#125;;<br>  myref = <span class="hljs-title class_">React</span>.<span class="hljs-title function_">createRef</span>();<br>  <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">return</span> (<br>      <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&#123;this.myref&#125;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">input</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">button</span></span></span><br><span class="hljs-tag"><span class="language-xml">          <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;()</span> =&gt;</span> &#123;</span><br><span class="language-xml">            this.ceshi(this.myref.current.value);</span><br><span class="language-xml">          &#125;&#125;</span><br><span class="language-xml">        &gt;</span><br><span class="language-xml">          click</span><br><span class="language-xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>    );<br>  &#125;<br>  ceshi = <span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(event);<br>  &#125;;<br>&#125;<br></code></pre></td></tr></table></figure><blockquote><p>è·å–å½“å‰æ ‡ç­¾ä½¿ç”¨<code>this.myref.current</code></p></blockquote><h2 id="3ã€ç»„ä»¶çš„æ•°æ®æŒ‚è½½"><a href="#3ã€ç»„ä»¶çš„æ•°æ®æŒ‚è½½" class="headerlink" title="3ã€ç»„ä»¶çš„æ•°æ®æŒ‚è½½"></a>3ã€ç»„ä»¶çš„æ•°æ®æŒ‚è½½</h2><h3 id="3-1-çŠ¶æ€"><a href="#3-1-çŠ¶æ€" class="headerlink" title="3.1 çŠ¶æ€"></a>3.1 çŠ¶æ€</h3><p>çŠ¶æ€å°±æ˜¯ç»„ä»¶æè¿°æŸç§æ˜¾ç¤ºæƒ…å†µçš„æ•°æ®ï¼Œç”±ç»„ä»¶è‡ªå·±è®¾ç½®å’Œæ›´æ”¹ï¼Œä¹Ÿå°±æ˜¯è¯´ç”±ç»„ä»¶è‡ªå·±ç»´æŠ¤ï¼Œä½¿ç”¨çŠ¶æ€çš„ç›®çš„å°±æ˜¯ä¸ºäº†åœ¨ä¸åŒçš„çŠ¶æ€ä¸‹ä½¿ç»„ä»¶çš„æ˜¾ç¤ºä¸åŒ(è‡ªå·±ç®¡ç†)</p><ol><li>å®šä¹‰ state</li></ol><blockquote><p>ç›´æ¥å®šä¹‰ï¼Œä¸ render()åŒä¸€çº§</p></blockquote><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-comment">// ç±»ç»„ä»¶</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">App</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">React.Component</span> &#123;<br>  state = &#123;<br>    <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;React&quot;</span>,<br>    <span class="hljs-attr">isLiked</span>: <span class="hljs-literal">false</span>,<br>  &#125;;<br>  <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">return</span> (<br>      <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>æ¬¢è¿æ¥åˆ°&#123;this.state.name&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">button</span>&gt;</span>&#123;this.state.isLiked ? &quot;å–æ¶ˆ&quot; : &quot;æ”¶è—&quot;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>    );<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>æˆ–è€…</p><blockquote><p>é€šè¿‡ constructor åˆå§‹åŒ–</p></blockquote><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-comment">// ç±»ç»„ä»¶</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">App</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">React.Component</span> &#123;<br>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-variable language_">super</span>();<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span> = &#123;<br>      <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;React&quot;</span>,<br>      <span class="hljs-attr">isLiked</span>: <span class="hljs-literal">true</span>,<br>    &#125;;<br>  &#125;<br>  <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">return</span> (<br>      <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>æ¬¢è¿æ¥åˆ°&#123;this.state.name&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">button</span>&gt;</span>&#123;this.state.isLiked ? &quot;å–æ¶ˆ&quot; : &quot;æ”¶è—&quot;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>    );<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="3-2-ä¿®æ”¹çŠ¶æ€"><a href="#3-2-ä¿®æ”¹çŠ¶æ€" class="headerlink" title="3.2 ä¿®æ”¹çŠ¶æ€"></a>3.2 ä¿®æ”¹çŠ¶æ€</h3><ol><li>åªèƒ½ä½¿ç”¨ setState é‡æ–°èµ‹å€¼</li></ol><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">class</span> <span class="hljs-title class_">App</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">React.Component</span> &#123;<br>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-variable language_">super</span>();<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span> = &#123;<br>      <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;React&quot;</span>,<br>      <span class="hljs-attr">isLiked</span>: <span class="hljs-literal">true</span>,<br>    &#125;;<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">ceshi</span> = <span class="hljs-function">() =&gt;</span> &#123;<br>      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setState</span>(&#123;<br>        <span class="hljs-attr">isLiked</span>: !<span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span>.<span class="hljs-property">isLiked</span>,<br>      &#125;);<br>    &#125;;<br>  &#125;<br>  <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">return</span> (<br>      <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>æ¬¢è¿æ¥åˆ°&#123;this.state.name&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">button</span></span></span><br><span class="hljs-tag"><span class="language-xml">          <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;()</span> =&gt;</span> &#123;</span><br><span class="language-xml">            this.ceshi();</span><br><span class="language-xml">          &#125;&#125;</span><br><span class="language-xml">        &gt;</span><br><span class="language-xml">          &#123;this.state.isLiked ? &quot;å–æ¶ˆ&quot; : &quot;æ”¶è—&quot;&#125;</span><br><span class="language-xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>    );<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>setState æ˜¯å¼‚æ­¥çš„ï¼Œæ‰€ä»¥æƒ³è¦è·å–åˆ°æœ€æ–°çš„ stateï¼Œæ²¡æœ‰åŠæ³•è·å–ï¼Œå°±æœ‰äº†ç¬¬äºŒä¸ªå‚æ•°ï¼Œè¿™æ˜¯ä¸€ä¸ªå¯é€‰çš„å›è°ƒå‡½æ•°</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setState</span>(<span class="hljs-function">(<span class="hljs-params">prevState, props</span>) =&gt;</span> &#123;<br>    <span class="hljs-keyword">return</span> &#123;<br>    <span class="hljs-attr">isLiked</span>: !prevState.<span class="hljs-property">isLiked</span><br>    &#125;, <span class="hljs-function">() =&gt;</span> &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;å›è°ƒé‡Œçš„&#x27;</span>,<span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span>.<span class="hljs-property">isLiked</span>)<br>    &#125;)<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;setStateå¤–éƒ¨çš„&#x27;</span>,<span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span>.<span class="hljs-property">isLiked</span>)<br></code></pre></td></tr></table></figure><h3 id="3-3-åˆ—è¡¨æ¸²æŸ“"><a href="#3-3-åˆ—è¡¨æ¸²æŸ“" class="headerlink" title="3.3 åˆ—è¡¨æ¸²æŸ“"></a>3.3 åˆ—è¡¨æ¸²æŸ“</h3><ol><li>ä½¿ç”¨ map å¾ªç¯</li></ol><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">class</span> <span class="hljs-title class_">App</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">React.Component</span> &#123;<br>  state = &#123;<br>    <span class="hljs-attr">lists</span>: [<span class="hljs-string">&quot;111&quot;</span>, <span class="hljs-string">&quot;222&quot;</span>, <span class="hljs-string">&quot;333&quot;</span>],<br>  &#125;;<br>  <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">return</span> (<br>      <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span></span><br><span class="language-xml">          &#123;this.state.lists.map((item) =&gt; (</span><br><span class="language-xml">            <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>&#123;item&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span></span><br><span class="language-xml">          ))&#125;</span><br><span class="language-xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>    );<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>ä»¥å¾€çš„</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs jsx">list.<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">item</span>) =&gt;</span> <span class="hljs-string">`&lt;li&gt;&#123;$item&#125;&lt;/li&gt;`</span>);<br></code></pre></td></tr></table></figure><blockquote><p>è¿™é‡Œæ˜¯ react çš„ jsx è¯­æ³•ï¼Œæ‰€ä»¥ä¸ç”¨åŠ å¼•å·</p></blockquote><h3 id="3-4-TodoList"><a href="#3-4-TodoList" class="headerlink" title="3.4 TodoList"></a>3.4 TodoList</h3><p>æ·»åŠ </p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs jsx">add = <span class="hljs-function">(<span class="hljs-params">value</span>) =&gt;</span> &#123;<br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(value);<br>  <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span>.<span class="hljs-property">lists</span>.<span class="hljs-title function_">push</span>(value);<br>  <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setState</span>(&#123;<br>    <span class="hljs-attr">lists</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span>.<span class="hljs-property">lists</span>,<br>  &#125;);<br>&#125;;<br></code></pre></td></tr></table></figure><p>ä¸èƒ½å†™æˆ</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs jsx">add = <span class="hljs-function">(<span class="hljs-params">value</span>) =&gt;</span> &#123;<br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(value);<br>  <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setState</span>(&#123;<br>    <span class="hljs-attr">lists</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span>.<span class="hljs-property">lists</span>.<span class="hljs-title function_">push</span>(value),<br>  &#125;);<br>&#125;;<br></code></pre></td></tr></table></figure><p>å› ä¸º push æ–¹æ³•æ”¹å˜çš„æ˜¯åŸæ•°ç»„ï¼Œè€Œæ²¡æœ‰è¿”å›å€¼</p><p>ä»£ç </p><ol><li>ä½¿ç”¨ push æ–¹æ³•è¿½åŠ ï¼Œæ”¹å˜åŸæ•°ç»„</li><li>ä½¿ç”¨ splice åˆ é™¤ï¼Œæ”¹å˜åŸæ•°ç»„</li></ol><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">class</span> <span class="hljs-title class_">App</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">React.Component</span> &#123;<br>  myref = <span class="hljs-title class_">React</span>.<span class="hljs-title function_">createRef</span>();<br>  state = &#123;<br>    <span class="hljs-attr">lists</span>: [<span class="hljs-string">&quot;111&quot;</span>, <span class="hljs-string">&quot;222&quot;</span>, <span class="hljs-string">&quot;333&quot;</span>],<br>  &#125;;<br>  add = <span class="hljs-function">(<span class="hljs-params">value</span>) =&gt;</span> &#123;<br>    <span class="hljs-keyword">let</span> newList = <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span>.<span class="hljs-property">lists</span>;<br>    newList.<span class="hljs-title function_">push</span>(value);<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setState</span>(<br>      &#123;<br>        <span class="hljs-attr">lists</span>: newList,<br>      &#125;,<br>      <span class="hljs-function">() =&gt;</span> &#123;<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">myref</span>.<span class="hljs-property">current</span>.<span class="hljs-property">value</span> = <span class="hljs-string">&quot;&quot;</span>; <span class="hljs-comment">// ç½®ç©º</span><br>      &#125;<br>    );<br>  &#125;;<br>  <span class="hljs-keyword">delete</span> = <span class="hljs-function">(<span class="hljs-params">index</span>) =&gt;</span> &#123;<br>    <span class="hljs-keyword">let</span> newList = <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span>.<span class="hljs-property">lists</span>;<br>    newList.<span class="hljs-title function_">splice</span>(index, <span class="hljs-number">1</span>);<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setState</span>(<br>      &#123;<br>        <span class="hljs-attr">lists</span>: newList,<br>      &#125;,<br>      <span class="hljs-function">() =&gt;</span> &#123;<br>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;åˆ é™¤æˆåŠŸ&quot;</span>);<br>      &#125;<br>    );<br>  &#125;;<br>  <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">return</span> (<br>      <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&#123;this.myref&#125;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">input</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">button</span></span></span><br><span class="hljs-tag"><span class="language-xml">          <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;()</span> =&gt;</span> &#123;</span><br><span class="language-xml">            this.add(this.myref.current.value);</span><br><span class="language-xml">          &#125;&#125;</span><br><span class="language-xml">        &gt;</span><br><span class="language-xml">          Add</span><br><span class="language-xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span></span><br><span class="language-xml">          &#123;this.state.lists.map((item, index) =&gt; (</span><br><span class="language-xml">            <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">key</span>=<span class="hljs-string">&#123;item&#125;</span>&gt;</span></span><br><span class="language-xml">              &#123;item&#125;&#123;&quot; &quot;&#125;</span><br><span class="language-xml">              <span class="hljs-tag">&lt;<span class="hljs-name">button</span></span></span><br><span class="hljs-tag"><span class="language-xml">                <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;()</span> =&gt;</span> &#123;</span><br><span class="language-xml">                  this.delete(index);</span><br><span class="language-xml">                &#125;&#125;</span><br><span class="language-xml">              &gt;</span><br><span class="language-xml">                delete</span><br><span class="language-xml">              <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">            <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span></span><br><span class="language-xml">          ))&#125;</span><br><span class="language-xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>    );<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="3-5-æ¡ä»¶æ¸²æŸ“"><a href="#3-5-æ¡ä»¶æ¸²æŸ“" class="headerlink" title="3.5 æ¡ä»¶æ¸²æŸ“"></a>3.5 æ¡ä»¶æ¸²æŸ“</h3><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs jsx">&#123;<br>  <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span>.<span class="hljs-property">lists</span>.<span class="hljs-property">length</span> == <span class="hljs-number">0</span> ? <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>æš‚æ— å¾…åŠäº‹é¡¹<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span> : <span class="hljs-literal">null</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>æˆ–è€…</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs jsx">&#123;<br>  <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span>.<span class="hljs-property">lists</span>.<span class="hljs-property">length</span> == <span class="hljs-number">0</span> &amp;&amp; <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>æš‚æ— å¾…åŠäº‹é¡¹<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>æˆ–è€…</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs jsx">.<span class="hljs-property">active</span>&#123;<br>    <span class="hljs-attr">display</span>: none;<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs jsx">&lt;div className=&#123;<span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span>.<span class="hljs-property">lists</span>.<span class="hljs-property">length</span> != <span class="hljs-number">0</span> &amp;&amp; <span class="hljs-string">&quot;active&quot;</span>&#125;&gt;æš‚æ— å¸¦å§&lt;/div&gt;<br></code></pre></td></tr></table></figure><h3 id="3-6-çŠ¶æ€å†ä½“éªŒ"><a href="#3-6-çŠ¶æ€å†ä½“éªŒ" class="headerlink" title="3.6 çŠ¶æ€å†ä½“éªŒ"></a>3.6 çŠ¶æ€å†ä½“éªŒ</h3><ol><li>setState å‡½æ•°å¼‚æ­¥</li></ol><p>åœ¨å¼‚æ­¥é€»è¾‘ä¸­ï¼Œæ˜¯åŒæ­¥æ›´æ–°çŠ¶æ€ï¼Œæ›´æ–°çœŸå® dom</p><p>åœ¨åŒæ­¥é€»è¾‘ä¸­ï¼Œæ˜¯å¼‚æ­¥æ›´æ–°çŠ¶æ€ï¼Œæ›´æ–°çœŸå® dom</p><ol start="2"><li>setState å›è°ƒå‡½æ•°</li></ol><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setState</span>(<br>  &#123;<br>    <span class="hljs-attr">lists</span>: newList,<br>  &#125;,<br>  <span class="hljs-function">() =&gt;</span> &#123;<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">myref</span>.<span class="hljs-property">current</span>.<span class="hljs-property">value</span> = <span class="hljs-string">&quot;&quot;</span>;<br>  &#125;<br>);<br></code></pre></td></tr></table></figure><h3 id="3-7-å±æ€§åˆè¯•"><a href="#3-7-å±æ€§åˆè¯•" class="headerlink" title="3.7 å±æ€§åˆè¯•"></a>3.7 å±æ€§åˆè¯•</h3><ol><li>åœ¨ç»„ä»¶ä¸Šå†™<code>key=â€˜valueâ€™</code>å½¢å¼ï¼Œåœ¨ç»„ä»¶å†…éƒ¨ç”¨<code>this.props</code>æ¥æ”¶;</li><li>å±æ€§æ˜¯æè¿°æ€§è´¨ã€ç‰¹ç‚¹çš„ï¼Œç»„ä»¶è‡ªå·±ä¸èƒ½éšæ„æ›´æ”¹ï¼›</li></ol><p><span style="background-color:yellow"><strong>1</strong></span></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">class</span> <span class="hljs-title class_">App</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">React.Component</span>&#123;<br>    <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>)&#123;<br>        <span class="hljs-keyword">return</span> (<br>            <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">            &#123;// ä¼ å…¥&#125;</span><br><span class="language-xml">                <span class="hljs-tag">&lt;<span class="hljs-name">NavaBar</span> <span class="hljs-attr">title</span>=<span class="hljs-string">&#x27;å¯¼èˆªæ &#x27;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">NavaBar</span>&gt;</span></span><br><span class="language-xml">            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>        )<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">class</span> <span class="hljs-title class_">NavaBar</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">React.Component</span> &#123;<br>  <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-comment">// æ¥å—</span><br>    <span class="hljs-keyword">let</span> &#123; title &#125; = <span class="hljs-variable language_">this</span>.<span class="hljs-property">props</span>;<br>    <span class="hljs-keyword">return</span> <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>NavaBar - &#123;title&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="3-8-å±æ€§éªŒè¯"><a href="#3-8-å±æ€§éªŒè¯" class="headerlink" title="3.8 å±æ€§éªŒè¯"></a>3.8 å±æ€§éªŒè¯</h3><p>åœ¨ç»„ä»¶å†…éƒ¨</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">class</span> <span class="hljs-title class_">NavaBar</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">React.Component</span> &#123;<br>  <span class="hljs-keyword">static</span> propTypes = &#123;<br>    <span class="hljs-attr">title</span>: kerwinPropTypes.<span class="hljs-property">string</span>,<br>  &#125;;<br>  <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">let</span> &#123; title &#125; = <span class="hljs-variable language_">this</span>.<span class="hljs-property">props</span>;<br>    <span class="hljs-keyword">return</span> <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>NavaBar - &#123;title&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="3-9-é»˜è®¤å±æ€§"><a href="#3-9-é»˜è®¤å±æ€§" class="headerlink" title="3.9 é»˜è®¤å±æ€§"></a>3.9 é»˜è®¤å±æ€§</h3><p>åœ¨ç»„ä»¶å†…éƒ¨</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">class</span> <span class="hljs-title class_">NavaBar</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">React.Component</span> &#123;<br>  <span class="hljs-keyword">static</span> defaultProps = &#123;<br>    <span class="hljs-attr">title</span>: <span class="hljs-string">&quot;æˆ‘æ˜¯&quot;</span>,<br>  &#125;;<br>  <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">let</span> &#123; title &#125; = <span class="hljs-variable language_">this</span>.<span class="hljs-property">props</span>;<br>    <span class="hljs-keyword">return</span> <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>NavaBar - &#123;title&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="4ã€è¡¨å•ä¸­çš„å—æ§ç»„ä»¶ä¸éå—æ§ç»„ä»¶"><a href="#4ã€è¡¨å•ä¸­çš„å—æ§ç»„ä»¶ä¸éå—æ§ç»„ä»¶" class="headerlink" title="4ã€è¡¨å•ä¸­çš„å—æ§ç»„ä»¶ä¸éå—æ§ç»„ä»¶"></a>4ã€è¡¨å•ä¸­çš„å—æ§ç»„ä»¶ä¸éå—æ§ç»„ä»¶</h2><h3 id="4-1-éå—æ§ç»„ä»¶"><a href="#4-1-éå—æ§ç»„ä»¶" class="headerlink" title="4.1 éå—æ§ç»„ä»¶"></a>4.1 éå—æ§ç»„ä»¶</h3><ol><li>React è¦ç¼–å†™ä¸€ä¸ªéå—æ§ç»„ä»¶ï¼Œå¯ä»¥ ä½¿ç”¨ ref æ¥ä» DOM èŠ‚ç‚¹ä¸­è·å–è¡¨å•æ•°æ®ï¼Œå°±æ˜¯éå—æ§ç»„ä»¶ã€‚</li><li>æ¯”å¦‚åœ¨ä½¿ç”¨ input è¾“å…¥æ¡†è·å–è¾“å…¥æ¡†å†…å®¹æ—¶ï¼Œæ˜¯é€šè¿‡æ“ä½œåŸç”Ÿ DOM èŠ‚ç‚¹æ¥è·å–çš„ï¼Œä¸å—æ§åˆ¶ï¼›</li></ol><p><img src="http://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/image-20220515182305778.png" alt="image-20220515182305778"></p><p>åªèƒ½ä½¿ç”¨<code>defaultValue</code></p><h3 id="4-2-å—æ§"><a href="#4-2-å—æ§" class="headerlink" title="4.2 å—æ§"></a>4.2 å—æ§</h3><ol><li>é€šè¿‡ value åŠ¨æ€ç»‘å®šçŠ¶æ€ï¼Œè¿™é‡Œå¯ä»¥æŠŠ input æ ‡ç­¾çœ‹æˆä¸€ä¸ªç»„ä»¶ï¼›</li></ol><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;react&quot;</span>;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">App</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">React.Component</span> &#123;<br>  state = &#123;<br>    <span class="hljs-attr">usename</span>: <span class="hljs-string">&quot;æˆ‘æ˜¯å¤§å‚»é€¼&quot;</span>,<br>  &#125;;<br>  <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">return</span> (<br>      <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">input</span></span></span><br><span class="hljs-tag"><span class="language-xml">          <span class="hljs-attr">value</span>=<span class="hljs-string">&#123;this.state.usename&#125;</span></span></span><br><span class="hljs-tag"><span class="language-xml">          <span class="hljs-attr">onChange</span>=<span class="hljs-string">&#123;(e)</span> =&gt;</span> &#123;</span><br><span class="language-xml">            this.setState(&#123;</span><br><span class="language-xml">              usename: e.target.value,</span><br><span class="language-xml">            &#125;);</span><br><span class="language-xml">          &#125;&#125;</span><br><span class="language-xml">        &gt;<span class="hljs-tag">&lt;/<span class="hljs-name">input</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">button</span></span></span><br><span class="hljs-tag"><span class="language-xml">          <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;()</span> =&gt;</span> &#123;</span><br><span class="language-xml">            console.log(this.state.usename);</span><br><span class="language-xml">          &#125;&#125;</span><br><span class="language-xml">        &gt;</span><br><span class="language-xml">          ç™»å½•</span><br><span class="language-xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">button</span></span></span><br><span class="hljs-tag"><span class="language-xml">          <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;()</span> =&gt;</span> &#123;</span><br><span class="language-xml">            this.setState(&#123;</span><br><span class="language-xml">              usename: &quot;&quot;,</span><br><span class="language-xml">            &#125;);</span><br><span class="language-xml">          &#125;&#125;</span><br><span class="language-xml">        &gt;</span><br><span class="language-xml">          é‡ç½®</span><br><span class="language-xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>    );<br>  &#125;<br>&#125;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">App</span>;<br></code></pre></td></tr></table></figure><h3 id="4-3-å—æ§åº”ç”¨-1"><a href="#4-3-å—æ§åº”ç”¨-1" class="headerlink" title="4.3 å—æ§åº”ç”¨ 1"></a>4.3 å—æ§åº”ç”¨ 1</h3><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;react&quot;</span>;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">App</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">React.Component</span> &#123;<br>  state = &#123;<br>    <span class="hljs-attr">inputValue</span>: <span class="hljs-string">&quot;&quot;</span>,<br>    <span class="hljs-attr">cinma</span>: [<br>      &#123;<br>        <span class="hljs-attr">id</span>: <span class="hljs-number">0</span>,<br>        <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;a&quot;</span>,<br>      &#125;,<br>      &#123;<br>        <span class="hljs-attr">id</span>: <span class="hljs-number">1</span>,<br>        <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;b&quot;</span>,<br>      &#125;,<br>      &#123;<br>        <span class="hljs-attr">id</span>: <span class="hljs-number">2</span>,<br>        <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;c&quot;</span>,<br>      &#125;,<br>      &#123;<br>        <span class="hljs-attr">id</span>: <span class="hljs-number">3</span>,<br>        <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;d&quot;</span>,<br>      &#125;,<br>    ],<br>  &#125;;<br>  <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">return</span> (<br>      <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">input</span></span></span><br><span class="hljs-tag"><span class="language-xml">          <span class="hljs-attr">value</span>=<span class="hljs-string">&#123;this.state.inputValue&#125;</span></span></span><br><span class="hljs-tag"><span class="language-xml">          <span class="hljs-attr">onChange</span>=<span class="hljs-string">&#123;(e)</span> =&gt;</span> &#123;</span><br><span class="language-xml">            this.setState(&#123;</span><br><span class="language-xml">              inputValue: e.target.value,</span><br><span class="language-xml">            &#125;);</span><br><span class="language-xml">          &#125;&#125;</span><br><span class="language-xml">        &gt;<span class="hljs-tag">&lt;/<span class="hljs-name">input</span>&gt;</span></span><br><span class="language-xml">        &#123;this.getList().map((item) =&gt; (</span><br><span class="language-xml">          <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">key</span>=<span class="hljs-string">&#123;item.id&#125;</span>&gt;</span>&#123;item.name&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span></span><br><span class="language-xml">        ))&#125;</span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>    );<br>  &#125;<br>  <span class="hljs-title function_">getList</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span>.<span class="hljs-property">cinma</span>.<span class="hljs-title function_">filter</span>(<span class="hljs-function">(<span class="hljs-params">item</span>) =&gt;</span><br>      item.<span class="hljs-property">name</span><br>        .<span class="hljs-title function_">toUpperCase</span>()<br>        .<span class="hljs-title function_">includes</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span>.<span class="hljs-property">inputValue</span>.<span class="hljs-title function_">toLocaleUpperCase</span>())<br>    );<br>  &#125;<br>&#125;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">App</span>;<br></code></pre></td></tr></table></figure><h3 id="4-4-todoList-å—æ§"><a href="#4-4-todoList-å—æ§" class="headerlink" title="4.4 todoList å—æ§"></a>4.4 todoList å—æ§</h3><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;react&quot;</span>;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">App</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">React.Component</span> &#123;<br>  state = &#123;<br>    <span class="hljs-attr">inputValue</span>: <span class="hljs-string">&quot;&quot;</span>,<br>    <span class="hljs-attr">lists</span>: [<br>      &#123;<br>        <span class="hljs-attr">id</span>: <span class="hljs-number">0</span>,<br>        <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;a&quot;</span>,<br>        <span class="hljs-attr">isChecked</span>: <span class="hljs-literal">false</span>,<br>      &#125;,<br>      &#123;<br>        <span class="hljs-attr">id</span>: <span class="hljs-number">1</span>,<br>        <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;b&quot;</span>,<br>        <span class="hljs-attr">isChecked</span>: <span class="hljs-literal">false</span>,<br>      &#125;,<br>      &#123;<br>        <span class="hljs-attr">id</span>: <span class="hljs-number">2</span>,<br>        <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;c&quot;</span>,<br>        <span class="hljs-attr">isChecked</span>: <span class="hljs-literal">false</span>,<br>      &#125;,<br>    ],<br>  &#125;;<br>  <span class="hljs-title function_">add</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">let</span> newList = <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span>.<span class="hljs-property">lists</span>;<br>    newList.<span class="hljs-title function_">push</span>(&#123;<br>      <span class="hljs-attr">id</span>: <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>() * <span class="hljs-number">100000</span>,<br>      <span class="hljs-attr">name</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span>.<span class="hljs-property">inputValue</span>,<br>      <span class="hljs-attr">isChecked</span>: <span class="hljs-literal">false</span>,<br>    &#125;);<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setState</span>(&#123;<br>      <span class="hljs-attr">lists</span>: newList,<br>      <span class="hljs-attr">inputValue</span>: <span class="hljs-string">&quot;&quot;</span>,<br>    &#125;);<br>  &#125;<br>  <span class="hljs-keyword">delete</span> = <span class="hljs-function">(<span class="hljs-params">index</span>) =&gt;</span> &#123;<br>    <span class="hljs-keyword">let</span> newList = <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span>.<span class="hljs-property">lists</span>;<br>    newList.<span class="hljs-title function_">splice</span>(index, <span class="hljs-number">1</span>);<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setState</span>(&#123;<br>      <span class="hljs-attr">lists</span>: newList,<br>    &#125;);<br>  &#125;;<br>  handchange = <span class="hljs-function">(<span class="hljs-params">index</span>) =&gt;</span> &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(index);<br>    <span class="hljs-keyword">let</span> newList = [...<span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span>.<span class="hljs-property">lists</span>];<br>    newList[index].<span class="hljs-property">isChecked</span> = !newList[index].<span class="hljs-property">isChecked</span>;<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setState</span>(&#123;<br>      <span class="hljs-attr">lists</span>: newList,<br>    &#125;);<br>  &#125;;<br>  <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">return</span> (<br>      <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">input</span></span></span><br><span class="hljs-tag"><span class="language-xml">          <span class="hljs-attr">value</span>=<span class="hljs-string">&#123;this.state.inputValue&#125;</span></span></span><br><span class="hljs-tag"><span class="language-xml">          <span class="hljs-attr">onChange</span>=<span class="hljs-string">&#123;(e)</span> =&gt;</span> &#123;</span><br><span class="language-xml">            this.setState(&#123;</span><br><span class="language-xml">              inputValue: e.target.value,</span><br><span class="language-xml">            &#125;);</span><br><span class="language-xml">          &#125;&#125;</span><br><span class="language-xml">        &gt;<span class="hljs-tag">&lt;/<span class="hljs-name">input</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">button</span></span></span><br><span class="hljs-tag"><span class="language-xml">          <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;()</span> =&gt;</span> &#123;</span><br><span class="language-xml">            this.add();</span><br><span class="language-xml">          &#125;&#125;</span><br><span class="language-xml">        &gt;</span><br><span class="language-xml">          Add</span><br><span class="language-xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span></span><br><span class="language-xml">          &#123;this.state.lists.map((item, index) =&gt; (</span><br><span class="language-xml">            <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">key</span>=<span class="hljs-string">&#123;item.id&#125;</span>&gt;</span></span><br><span class="language-xml">              <span class="hljs-tag">&lt;<span class="hljs-name">input</span></span></span><br><span class="hljs-tag"><span class="language-xml">                <span class="hljs-attr">type</span>=<span class="hljs-string">&#x27;checkbox&#x27;</span></span></span><br><span class="hljs-tag"><span class="language-xml">                <span class="hljs-attr">checked</span>=<span class="hljs-string">&#123;item.isChecked&#125;</span></span></span><br><span class="hljs-tag"><span class="language-xml">                <span class="hljs-attr">onChange</span>=<span class="hljs-string">&#123;()</span> =&gt;</span> &#123;</span><br><span class="language-xml">                  this.handchange(index);</span><br><span class="language-xml">                &#125;&#125;</span><br><span class="language-xml">              &gt;<span class="hljs-tag">&lt;/<span class="hljs-name">input</span>&gt;</span></span><br><span class="language-xml">              <span class="hljs-tag">&lt;<span class="hljs-name">span</span></span></span><br><span class="hljs-tag"><span class="language-xml">                <span class="hljs-attr">style</span>=<span class="hljs-string">&#123;&#123;</span> <span class="hljs-attr">textDecoration:</span> <span class="hljs-attr">item.isChecked</span> ? &quot;<span class="hljs-attr">line-through</span>&quot; <span class="hljs-attr">:</span> &quot;&quot; &#125;&#125;</span></span><br><span class="hljs-tag"><span class="language-xml">              &gt;</span></span><br><span class="language-xml">                &#123;item.name&#125;</span><br><span class="language-xml">              <span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><br><span class="language-xml">              <span class="hljs-tag">&lt;<span class="hljs-name">button</span></span></span><br><span class="hljs-tag"><span class="language-xml">                <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;()</span> =&gt;</span> &#123;</span><br><span class="language-xml">                  this.delete(index);</span><br><span class="language-xml">                &#125;&#125;</span><br><span class="language-xml">              &gt;</span><br><span class="language-xml">                delete</span><br><span class="language-xml">              <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">            <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span></span><br><span class="language-xml">          ))&#125;</span><br><span class="language-xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span></span><br><span class="language-xml">        &#123;this.state.lists.length == 0 &amp;&amp; <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>æš‚æ— å¾…åŠäº‹é¡¹<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>&#125;</span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>    );<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="5ã€ç»„ä»¶é€šä¿¡æ–¹å¼"><a href="#5ã€ç»„ä»¶é€šä¿¡æ–¹å¼" class="headerlink" title="5ã€ç»„ä»¶é€šä¿¡æ–¹å¼"></a>5ã€ç»„ä»¶é€šä¿¡æ–¹å¼</h2><h3 id="5-1-å­ä¼ çˆ¶"><a href="#5-1-å­ä¼ çˆ¶" class="headerlink" title="5.1 å­ä¼ çˆ¶"></a>5.1 å­ä¼ çˆ¶</h3><ol><li>å­ç»„ä»¶ä¸èƒ½ç›´æ¥è®¿é—®çˆ¶ç»„ä»¶çš„çŠ¶æ€ï¼Œä½†æ˜¯å¯ä»¥é€šè¿‡å›è°ƒå‡½æ•°é€šçŸ¥çˆ¶ç»„ä»¶æ”¹å˜çŠ¶æ€ï¼›</li><li>å­©å­ä¸èƒ½åŠ¨çˆ¶äº²æ‰‹é‡Œçš„é’±ï¼Œä½†æ˜¯å­©å­å¯ä»¥æ‰“ç”µè¯ç»™çˆ¶äº²ï¼Œè®©çˆ¶äº²å‘é’±ï¼›</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><code class="hljs react">import React, &#123; Component &#125; from &#x27;react&#x27;<br><br>class NavBar extends Component&#123;<br>    render()&#123;<br>        return(<br>            &lt;div&gt;æˆ‘æ˜¯å¯¼èˆªæ <br>                &lt;button onClick=&#123;()=&gt;&#123;<br>                    this.props.isShowList();<br>                &#125;&#125;&gt;ç‚¹æˆ‘&lt;/button&gt;<br><br>            &lt;/div&gt;<br>        )<br>    &#125;<br>&#125;<br><br>class ListBar extends Component&#123;<br>    render()&#123;<br>        return(<br>            &lt;div&gt;<br>                &lt;ul style=&#123;&#123;backgroundColor:&#x27;yellow&#x27;,width:&#x27;200px&#x27;&#125;&#125;&gt;<br>                    &lt;li&gt;1&lt;/li&gt;<br>                    &lt;li&gt;1&lt;/li&gt;<br>                    &lt;li&gt;1&lt;/li&gt;<br>                    &lt;li&gt;1&lt;/li&gt;<br>                    &lt;li&gt;1&lt;/li&gt;<br>                    &lt;li&gt;1&lt;/li&gt;<br>                    &lt;li&gt;1&lt;/li&gt;<br>                    &lt;li&gt;1&lt;/li&gt;<br>                    &lt;li&gt;1&lt;/li&gt;<br>                    &lt;li&gt;1&lt;/li&gt;<br>                    &lt;li&gt;1&lt;/li&gt;<br>                &lt;/ul&gt;<br>            &lt;/div&gt;<br>        )<br>    &#125;<br>&#125;<br><br><br><br>export default class App extends Component &#123;<br>  state = &#123;<br>    isShow:true<br>  &#125;<br>  render() &#123;<br>    return (<br>      &lt;div&gt;<br>          &lt;NavBar isShowList=&#123;()=&gt;&#123;<br>              this.setState(&#123;<br>                  isShow:!this.state.isShow<br>              &#125;)<br>          &#125;&#125;&gt;&lt;/NavBar&gt;<br>          &#123;this.state.isShow &amp;&amp; &lt;ListBar&gt;&lt;/ListBar&gt;&#125;<br>      &lt;/div&gt;<br>    )<br>  &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><h3 id="5-2-ä¸­é—´äºº"><a href="#5-2-ä¸­é—´äºº" class="headerlink" title="5.2 ä¸­é—´äºº"></a>5.2 ä¸­é—´äºº</h3><p><img src="http://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/image-20220517230844506.png" alt="image-20220517230844506"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><code class="hljs react">import React, &#123; Component &#125; from &#x27;react&#x27;<br>import axios from &#x27;axios&#x27;<br>import &#x27;./06-index.css&#x27;<br><br>export default class App extends Component &#123;<br>    constructor()&#123;<br>        super()<br>        this.state=&#123;<br>            filmList:[],<br>            detail:&quot;&quot;<br>        &#125;<br>        axios.get(`../text.json`).then(res=&gt;&#123;<br>            console.log(res.data.data)<br>            this.setState(&#123;<br>                filmList:res.data.data<br>            &#125;)<br>        &#125;)<br>    &#125;<br><br>  render() &#123;<br>    return (<br>      &lt;div&gt;<br>          &#123;<br>              this.state.filmList.map(item=&gt;&lt;Film key=&#123;item.id&#125; &#123;...item&#125; onEvent=&#123;(value)=&gt;&#123;<br>                this.setState(&#123;<br>                    detail:value<br>                &#125;)<br>              &#125;&#125;&gt;&lt;/Film&gt;)<br>          &#125;<br>          &lt;FilmDetial detail=&#123;this.state.detail&#125;&gt;&lt;/FilmDetial&gt;<br>      &lt;/div&gt;<br>    )<br>  &#125;<br>&#125;<br><br><br>class Film extends Component&#123;<br>    render()&#123;<br><br>        let &#123;name,src,detail&#125; = this.props<br>        return &lt;div className=&#x27;filmitem&#x27; onClick=&#123;()=&gt;&#123;<br>            this.props.onEvent(detail)<br>        &#125;&#125;&gt;<br>            &lt;img src=&#123;src&#125; alt=&#123;name&#125;&gt;&lt;/img&gt;<br>            &#123;this.props.name&#125;<br>        &lt;/div&gt;<br>    &#125;<br>&#125;<br><br><br>class FilmDetial extends Component&#123;<br>    render()&#123;<br>        return &lt;div className=&#x27;filmdetail&#x27;&gt;<br>            &#123;this.props.detail&#125;<br>        &lt;/div&gt;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="5-3-å­ä¼ çˆ¶è¡¨å•"><a href="#5-3-å­ä¼ çˆ¶è¡¨å•" class="headerlink" title="5.3 å­ä¼ çˆ¶è¡¨å•"></a>5.3 å­ä¼ çˆ¶è¡¨å•</h3><ol><li>å­ç»„ä»¶è¾“å…¥æ¡†åŠ¨æ€ç»‘å®šçˆ¶ç»„ä»¶ä¸Šçš„çŠ¶æ€å€¼</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><code class="hljs react">import React, &#123; Component &#125; from &#x27;react&#x27;<br><br>export default class App extends Component &#123;<br>    state = &#123;<br>        name:&#x27;å°æ˜&#x27;,<br>        password:&#x27;123456&#x27;<br>    &#125;<br>  render() &#123;<br>    return (<br>      &lt;div&gt;<br>        &lt;h2&gt;ç™»å½•é¡µé¢&lt;/h2&gt;<br>        &lt;Filed lable = &quot;ç”¨æˆ·å&quot; type = &quot;text&quot; value = &#123;this.state.name&#125; onEvent=&#123;(value)=&gt;&#123;<br>            this.setState(&#123;<br>                name:value<br>            &#125;)<br>        &#125;&#125;/&gt;<br>        &lt;Filed lable = &quot;å¯†ç &quot; type = &quot;password&quot; value = &#123;this.state.password&#125; onEvent=&#123;(value)=&gt;&#123;<br>            this.setState(&#123;<br>                password:value<br>            &#125;)<br>        &#125;&#125;/&gt;<br>        &lt;button onClick=&#123;()=&gt;&#123;<br>            console.log(this.state.name,this.state.password);<br>        &#125;&#125;&gt;ç™»å½•&lt;/button&gt;<br>        &lt;button onClick=&#123;()=&gt;&#123;<br>            this.setState(&#123;<br>                name:&#x27;&#x27;,<br>                password:&#x27;&#x27;<br>            &#125;)<br>        &#125;&#125;&gt;å–æ¶ˆ&lt;/button&gt;<br>      &lt;/div&gt;<br>    )<br>  &#125;<br>&#125;<br><br>class Filed extends Component&#123;<br>    render()&#123;<br>        let &#123;lable,type,onEvent,value&#125; = this.props<br>        return(<br>        &lt;div&gt;<br>            &lt;span&gt;&#123;lable&#125;&lt;/span&gt;<br>            &lt;input type=&#123;type&#125; value=&#123;value&#125; onChange=&#123;(e)=&gt;&#123;<br>                onEvent(e.target.value)<br>            &#125;&#125;&gt;&lt;/input&gt;<br>        &lt;/div&gt;<br>    )&#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><h3 id="5-4-ref-è¡¨å•"><a href="#5-4-ref-è¡¨å•" class="headerlink" title="5.4 ref è¡¨å•"></a>5.4 ref è¡¨å•</h3><ol><li>åœ¨ç»„ä»¶ä¸ŠæŒ‚è½½ ref å¯ä»¥è·å¾—ç»„ä»¶ï¼›</li><li>çˆ¶ç»„ä»¶ç»™å­ç»„ä»¶æŒ‚è½½ ref å¯ä»¥æ‹¿åˆ°å­ç»„ä»¶çš„<code>dom</code>ï¼›</li><li>å­ç»„ä»¶å†…éƒ¨è‡ªå·±è®¾ç½®çŠ¶æ€å’Œç»‘å®š value å€¼ï¼›</li><li>é€šè¿‡ç‚¹å‡»æŒ‰é’®<code>this.username.current</code>è·å–ç»„ä»¶æ ‡ç­¾ï¼›</li><li>å°±å¯ä»¥æ‹¿åˆ°å­ç»„ä»¶å†…çš„çŠ¶æ€å’Œå‡½æ•°ï¼ˆæ¸…ç©ºå‡½æ•°åœ¨å­ç»„ä»¶è‡ªå·±å†…éƒ¨ï¼‰ï¼›</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><code class="hljs react">import React, &#123; Component &#125; from &#x27;react&#x27;<br><br>export default class App extends Component &#123;<br>    username = React.createRef();<br>    password = React.createRef();<br><br>  render() &#123;<br>    return (<br>      &lt;div&gt;<br>        &lt;h2&gt;ç™»å½•é¡µé¢&lt;/h2&gt;<br>        &#123;/* è¿™é‡Œä½¿ç”¨refèƒ½æ‹¿åˆ°ç»„ä»¶æ ‡ç­¾ */&#125;<br>        &lt;Filed lable = &quot;ç”¨æˆ·så&quot; type = &quot;text&quot; ref=&#123;this.username&#125;/&gt;<br>        &lt;Filed lable = &quot;å¯†ç &quot; type = &quot;password&quot; ref=&#123;this.password&#125;/&gt;<br>        &lt;button onClick=&#123;()=&gt;&#123;<br>            console.log(this.username.current.state.value);<br>            console.log(this.password.current.state.value);<br>        &#125;&#125;&gt;ç™»å½•&lt;/button&gt;<br>        &lt;button onClick=&#123;()=&gt;&#123;<br>            this.username.current.clear()<br>            this.password.current.clear()<br>        &#125;&#125;&gt;å–æ¶ˆ&lt;/button&gt;<br>      &lt;/div&gt;<br>    )<br>  &#125;<br>&#125;<br><br>class Filed extends Component&#123;<br>    state = &#123;<br>        value:&quot;&quot;<br>    &#125;<br>    clear()&#123;<br>        // è™½ç„¶è¿™ä¸ªå‡½æ•°èƒ½æ‰§è¡Œï¼Œä½†æ˜¯å¹¶æ²¡æœ‰ä½¿renderé‡æ–°æ‰§è¡Œ<br>        // éœ€è¦åŠ å°†inputè¾“å…¥æ¡†ç»‘å®švalue<br>        this.setState(&#123;<br>            value:&quot;&quot;<br>        &#125;)<br>    &#125;<br>    render()&#123;<br>        let &#123;lable,type&#125; = this.props<br>        return(<br>        &lt;div&gt;<br>            &lt;span&gt;&#123;lable&#125;&lt;/span&gt;<br>            &lt;input type=&#123;type&#125; value=&#123;this.state.value&#125; onChange=&#123;(e)=&gt;&#123;<br>                console.log(e.target.value);<br>                this.setState(&#123;<br>                    value:e.target.value<br>                &#125;)<br>            &#125;&#125;&gt;&lt;/input&gt;<br>        &lt;/div&gt;<br>    )&#125;<br>&#125;<br></code></pre></td></tr></table></figure><blockquote><p>å­ç»„ä»¶å†…çš„è¾“å…¥æ¡†è¦ä¸è‡ªå·±çš„çŠ¶æ€ value ç»‘å®šï¼Œå¦åˆ™æ‰§è¡Œ clear å‡½æ•°ä¸ä¼šè§¦å‘ render()</p></blockquote><h2 id="6ã€Hooks"><a href="#6ã€Hooks" class="headerlink" title="6ã€Hooks"></a>6ã€Hooks</h2><ol><li>é«˜é˜¶ç»„ä»¶ä¸ºäº†å¤ç”¨ï¼Œå¯¼è‡´ä»£ç å±‚çº§å¤æ‚</li><li>ç”Ÿå‘½å‘¨æœŸçš„å¤æ‚</li><li>å†™æˆ functional ç»„ä»¶,æ— çŠ¶æ€ç»„ä»¶ ï¼Œå› ä¸ºéœ€è¦çŠ¶æ€ï¼Œåˆæ”¹æˆäº† class,æˆæœ¬é«˜</li></ol><h3 id="6-1-useState"><a href="#6-1-useState" class="headerlink" title="6.1 useState"></a>6.1 <code>useState</code></h3><ol><li><code>[a,b] = arr;</code>æ­¤æ—¶ arr æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œè§£æ„èµ‹å€¼ï¼›</li><li>ä½¿ç”¨<code>useState</code>ä¼šè¿”å›ä¸€ä¸ªæ•°ç»„ï¼Œé‡Œé¢æœ‰ä¸€ä¸ªå€¼å’Œå‡½æ•°ï¼›</li></ol><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, &#123; useState &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;react&quot;</span>;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">const</span> [username, setusername] = <span class="hljs-title function_">useState</span>(<span class="hljs-string">&quot;mtl&quot;</span>);<br><br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">button</span></span></span><br><span class="hljs-tag"><span class="language-xml">        <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;()</span> =&gt;</span> &#123;</span><br><span class="language-xml">          setusername(&quot;å¤§ç™½&quot;);</span><br><span class="language-xml">        &#125;&#125;</span><br><span class="language-xml">      &gt;</span><br><span class="language-xml">        click</span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">      &#123;username&#125;</span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>  );<br>&#125;<br></code></pre></td></tr></table></figure><p>é‡å†™ todolist</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, &#123; useState &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;react&quot;</span>;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">APP</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">const</span> [text, setText] = <span class="hljs-title function_">useState</span>(<span class="hljs-string">&quot;&quot;</span>);<br>  <span class="hljs-keyword">const</span> [list, setList] = <span class="hljs-title function_">useState</span>([<span class="hljs-string">&quot;aaa&quot;</span>, <span class="hljs-string">&quot;bbb&quot;</span>, <span class="hljs-string">&quot;ccc&quot;</span>]); <span class="hljs-comment">//åˆå§‹åˆ—è¡¨å€¼</span><br><br>  <span class="hljs-keyword">const</span> <span class="hljs-title function_">add</span> = (<span class="hljs-params"></span>) =&gt; &#123;<br>    <span class="hljs-comment">// ç»“æ„åˆ—è¡¨å¹¶æ·»åŠ æ–°å€¼</span><br>    <span class="hljs-title function_">setList</span>([...list, text]);<br>  &#125;;<br><br>  <span class="hljs-keyword">const</span> <span class="hljs-title function_">del</span> = (<span class="hljs-params">index</span>) =&gt; &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(index);<br>    <span class="hljs-comment">// ä¸è¦ç›´æ¥æ›´æ”¹åŸæ•°ç»„ï¼Œåˆ›å»ºä¸€ä¸ªæ–°æ•°ç»„</span><br>    <span class="hljs-keyword">const</span> newlist = [...list];<br>    <span class="hljs-comment">// åˆ é™¤ç´¢å¼•ä½ç½®1ä¸ªå…ƒç´ </span><br>    newlist.<span class="hljs-title function_">splice</span>(index, <span class="hljs-number">1</span>);<br>    <span class="hljs-title function_">setList</span>(newlist);<br>  &#125;;<br><br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">input</span></span></span><br><span class="hljs-tag"><span class="language-xml">        <span class="hljs-attr">onChange</span>=<span class="hljs-string">&#123;(e)</span> =&gt;</span> &#123;</span><br><span class="language-xml">          setText(e.target.value);</span><br><span class="language-xml">        &#125;&#125;</span><br><span class="language-xml">      &gt;<span class="hljs-tag">&lt;/<span class="hljs-name">input</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">button</span></span></span><br><span class="hljs-tag"><span class="language-xml">        <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;()</span> =&gt;</span> &#123;</span><br><span class="language-xml">          add();</span><br><span class="language-xml">        &#125;&#125;</span><br><span class="language-xml">      &gt;</span><br><span class="language-xml">        add</span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span></span><br><span class="language-xml">        &#123;list.map((item, index) =&gt; (</span><br><span class="language-xml">          <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">key</span>=<span class="hljs-string">&#123;index&#125;</span>&gt;</span></span><br><span class="language-xml">            &#123;item&#125;</span><br><span class="language-xml">            <span class="hljs-tag">&lt;<span class="hljs-name">button</span></span></span><br><span class="hljs-tag"><span class="language-xml">              <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;()</span> =&gt;</span> &#123;</span><br><span class="language-xml">                del(index);</span><br><span class="language-xml">              &#125;&#125;</span><br><span class="language-xml">            &gt;</span><br><span class="language-xml">              del</span><br><span class="language-xml">            <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">          <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span></span><br><span class="language-xml">        ))&#125;</span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>  );<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>ç¼–ç¨‹</category>
      
      <category>å‰ç«¯</category>
      
      <category>React</category>
      
    </categories>
    
    
    <tags>
      
      <tag>ç¼–ç¨‹</tag>
      
      <tag>React</tag>
      
      <tag>å­¦ä¹ ç¬”è®°</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Googleæœç´¢æŠ€å·§</title>
    <link href="/2024/06/28/026%20Google%E6%90%9C%E7%B4%A2%E6%8A%80%E5%B7%A7/"/>
    <url>/2024/06/28/026%20Google%E6%90%9C%E7%B4%A2%E6%8A%80%E5%B7%A7/</url>
    
    <content type="html"><![CDATA[<h2 id="1ã€è°·æ­Œæœç´¢å…³é”®è¯"><a href="#1ã€è°·æ­Œæœç´¢å…³é”®è¯" class="headerlink" title="1ã€è°·æ­Œæœç´¢å…³é”®è¯"></a>1ã€è°·æ­Œæœç´¢å…³é”®è¯</h2><ol><li>é™å®šå…³é”®è¯ â€œâ€</li><li>é™å®šæ ‡é¢˜ inltitle:</li><li>é™å®šå†…å®¹ intext</li><li>é™å®šç½‘å€ inurl</li><li>é™å®šç½‘ç«™ site</li><li>é™å®šå›¾ç‰‡å¤§å° imagesize</li><li>é™å®šæ–‡ä»¶ç±»å‹ filetype</li></ol><h2 id="2ã€ä¸‹è½½æ²¹ç®¡è§†é¢‘"><a href="#2ã€ä¸‹è½½æ²¹ç®¡è§†é¢‘" class="headerlink" title="2ã€ä¸‹è½½æ²¹ç®¡è§†é¢‘"></a>2ã€ä¸‹è½½æ²¹ç®¡è§†é¢‘</h2><p>åœ¨è§†é¢‘ç½‘å€å‰åŠ ä¸Š 9x</p>]]></content>
    
    
    <categories>
      
      <category>æŠ€æœ¯</category>
      
    </categories>
    
    
    <tags>
      
      <tag>æœç´¢æŠ€å·§</tag>
      
      <tag>google</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Fluentä¸­çš„æµ®åŠ›æ¨¡å‹</title>
    <link href="/2024/06/25/019%20Fluent%E4%B8%AD%E7%9A%84%E6%B5%AE%E5%8A%9B%E6%A8%A1%E5%9E%8B/"/>
    <url>/2024/06/25/019%20Fluent%E4%B8%AD%E7%9A%84%E6%B5%AE%E5%8A%9B%E6%A8%A1%E5%9E%8B/</url>
    
    <content type="html"><![CDATA[<h1 id="Fluent-ä¸­çš„æµ®åŠ›æ¨¡å‹"><a href="#Fluent-ä¸­çš„æµ®åŠ›æ¨¡å‹" class="headerlink" title="Fluent ä¸­çš„æµ®åŠ›æ¨¡å‹"></a>Fluent ä¸­çš„æµ®åŠ›æ¨¡å‹</h1><h2 id="1ã€åŸºæœ¬æ¦‚å¿µ"><a href="#1ã€åŸºæœ¬æ¦‚å¿µ" class="headerlink" title="1ã€åŸºæœ¬æ¦‚å¿µ"></a>1ã€åŸºæœ¬æ¦‚å¿µ</h2><p>å½“è®¡ç®—åŸŸå¼€å¯é‡åŠ›åœºå’Œèƒ½é‡åœºæ—¶ï¼Œå¯åœ¨<code>ke</code>æ¨¡å‹ä¸­è€ƒè™‘æµ®åŠ›çš„äº§ç”Ÿã€‚</p><p>ç”±äºæµ®åŠ›è€Œäº§ç”Ÿçš„æ¹æµå…¬å¼ï¼š</p><p>$$G_b&#x3D;\beta g_i\frac{\mu_t}{\mathrm{Pr}_t}\frac{\partial T}{\partial x_i}$$</p><p>å…¶ä¸­$Pr_{t}$æ˜¯èƒ½é‡çš„æ¹æµæ™®æœ—ç‰¹æ•°ï¼Œ$g_{i}$æ˜¯é‡åŠ›çŸ¢é‡åœ¨$i$æ–¹å‘ä¸Šçš„åˆ†é‡ã€‚å¯¹äºæ ‡å‡†å’Œå¯å®ç°<code>ke</code>æ¨¡å‹ï¼Œ$Pr_{t}&#x3D;0.85$ã€‚åœ¨<code>RNG ke</code>æ¨¡å‹ï¼Œ$Pr_{t}&#x3D;\frac{1 }{\alpha} $ã€‚å…¶ä¸­$\alpha$ç”±ä»¥ä¸‹å…¬å¼è®¡ç®—ï¼š</p><p>$$\left|\frac{\alpha-1.3929}{\alpha_0-1.3929}\right|^{0.6321}\left|\frac{\alpha+2.3929}{\alpha_0+2.3929}\right|^{0.3679}&#x3D;\frac{\mu_{\mathrm{mol}}}{\mu_{\mathrm{eff}}}$$</p><p>å…¶ä¸­$\alpha_{0}&#x3D;1.0$ï¼Œåœ¨é«˜é›·è¯ºæ•°é™åˆ¶ä¸‹ï¼Œ$\mu_{\mathrm{mol}}&#x2F;\mu_{\mathrm{eff}}\ll1$ï¼Œ$\alpha_{k}&#x3D;\alpha_{\epsilon}\approx1.393$</p><p>ç³»æ•°$\beta $å®šä¹‰ä¸º</p><p>$$\beta&#x3D;-\frac1\rho\left(\frac{\partial\rho}{\partial T}\right)_p$$</p><p>å¯¹äºç†æƒ³æ°”ä½“çŠ¶æ€æ–¹ç¨‹ï¼š</p><p>$$G_b&#x3D;-g_i\frac{\mu_t}{\rho\mathrm{Pr}_t}\frac{\partial\rho}{\partial x_i}$$</p><blockquote><p>åœ¨ä¸ç¨³å®šåˆ†å±‚ä¸­ï¼Œæ¹åŠ¨èƒ½è¶‹äºå¢å¤§ã€‚å¯¹äºä¸ç¨³å®šçš„åˆ†å±‚ï¼Œæµ®åŠ›ä¼šæŠ‘åˆ¶æ¹æµã€‚</p></blockquote><p>å—æµ®åŠ›å½±å“ç¨‹åº¦ç”±å¸¸æ•°$C_{3\epsilon }$å†³å®šï¼Œåœ¨ Fluent ä¸­å¯é€šè¿‡ä»¥ä¸‹å…¬å¼è®¡ç®—</p><p>$$C_{3\epsilon}&#x3D;\tanh\left|\frac{v}{u}\right|$$</p><p>$v$æ˜¯å¹³è¡Œäºé‡åŠ›çŸ¢é‡çš„æµé€Ÿåˆ†é‡ï¼Œ$u$æ˜¯å‚ç›´äºé‡åŠ›çŸ¢é‡çš„æµé€Ÿåˆ†é‡ã€‚å¯¹äºä¸»æµæ–¹å‘ä¸é‡åŠ›æ–¹å‘ä¸€è‡´çš„æµ®åŠ›å‰ªåˆ‡å±‚ï¼Œè¯¥å¸¸æ•°ä¸º 1ã€‚å¯¹äºå‚ç›´äºé‡åŠ›çŸ¢é‡çš„æµ®åŠ›å‰ªåˆ‡å±‚ï¼Œè¯¥å€¼ä¸º 0ã€‚</p><h2 id="2ã€å¦‚ä½•æ“ä½œ"><a href="#2ã€å¦‚ä½•æ“ä½œ" class="headerlink" title="2ã€å¦‚ä½•æ“ä½œ"></a>2ã€å¦‚ä½•æ“ä½œ</h2><p>å¼€å¯é‡åŠ›åŠ é€Ÿåº¦å’Œèƒ½é‡æ–¹ç¨‹ï¼Œå³å¯åœ¨<code>ke</code>æ¨¡å‹ä¸­è®¾ç½®å…¨æµ®åŠ›æ¨¡å‹ã€‚</p><p><img src="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/20240625092823.png"></p>]]></content>
    
    
    <categories>
      
      <category>æ¨¡æ‹Ÿ</category>
      
      <category>Fluent</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Fluent</tag>
      
      <tag>æ¨¡æ‹Ÿ</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Pythonè£…é¥°å™¨</title>
    <link href="/2024/04/25/018%20Python%E8%A3%85%E9%A5%B0%E5%99%A8%E4%BD%BF%E7%94%A8/"/>
    <url>/2024/04/25/018%20Python%E8%A3%85%E9%A5%B0%E5%99%A8%E4%BD%BF%E7%94%A8/</url>
    
    <content type="html"><![CDATA[<h1 id="1ã€è£…é¥°å™¨å®šä¹‰"><a href="#1ã€è£…é¥°å™¨å®šä¹‰" class="headerlink" title="1ã€è£…é¥°å™¨å®šä¹‰"></a>1ã€è£…é¥°å™¨å®šä¹‰</h1><p>å‡½æ•°æœ¬èº«ä¹Ÿæ˜¯å¯¹è±¡ï¼Œèƒ½èµ‹å€¼ç»™å˜é‡ï¼Œé€šè¿‡å˜é‡åç§°å¯ä»¥è°ƒç”¨å‡½æ•°çš„åŠŸèƒ½ã€‚æ­¤å¤–èƒ½é€šè¿‡<code>__name__</code>å±æ€§æ‹¿åˆ°å‡½æ•°çš„åç§°ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">fun1</span>():<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;fun1&quot;</span>)<br><br>f1 = fun1<br>f1.__name__<br><span class="hljs-comment"># &#x27;fun1&#x27;</span><br></code></pre></td></tr></table></figure><p>è£…é¥°å™¨æ˜¯åœ¨ä¸æ”¹å˜åŸå‡½æ•°æ¡ä»¶ä¸‹ï¼Œä¸ºåŸå‡½æ•°è°ƒç”¨å‰å¢åŠ æ–°çš„åŠŸèƒ½ã€‚è£…é¥°å™¨å…¶å®æ˜¯ä¸€ä¸ªé«˜é˜¶å‡½æ•°ï¼Œé«˜é˜¶å‡½æ•°<code>hightfunc</code>æ¥å—ä¸€ä¸ªå‡½æ•°å¯¹è±¡<code>func</code>ï¼Œåœ¨é«˜é˜¶å‡½æ•°å†…éƒ¨å®šä¹‰ä¸€ä¸ªæ–°çš„å‡½æ•°<code>wrapper</code>ï¼Œæ–°çš„å‡½æ•°<code>wrapper</code>åœ¨è°ƒç”¨<code>func</code>å‡½æ•°å¯¹è±¡å‰åæ‰§è¡Œä¸€å®šçš„æ“ä½œï¼Œä¹‹åè¿”å›<code>func</code>ï¼Œæ•´ä¸ªå‘Šè¯«é«˜é˜¶å‡½æ•°å†è¿”å›<code>wrapper</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">log</span>(<span class="hljs-params">func</span>):<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">wrapper</span>():<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;call <span class="hljs-subst">&#123;func.__name__&#125;</span>&quot;</span>)<br>        <span class="hljs-keyword">return</span> func<br>    <span class="hljs-keyword">return</span> wrapper<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">fun1</span>():<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;fun1&quot;</span>)<br><br>log(fun1)()<br></code></pre></td></tr></table></figure><p>å†™æˆè¯­æ³•ç³–çš„å½¢å¼</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">log</span>(<span class="hljs-params">func</span>):<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">wrapper</span>():<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;call <span class="hljs-subst">&#123;func.__name__&#125;</span>&quot;</span>)<br>        <span class="hljs-keyword">return</span> func<br>    <span class="hljs-keyword">return</span> wrapper<br><br><span class="hljs-meta">@log</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">fun1</span>():<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;fun1&quot;</span>)<br><br>fun1()<br></code></pre></td></tr></table></figure><h1 id="2ã€è£…é¥°å™¨æœ‰å‚å‡½æ•°æ— å‚"><a href="#2ã€è£…é¥°å™¨æœ‰å‚å‡½æ•°æ— å‚" class="headerlink" title="2ã€è£…é¥°å™¨æœ‰å‚å‡½æ•°æ— å‚"></a>2ã€è£…é¥°å™¨æœ‰å‚å‡½æ•°æ— å‚</h1><p>ä½¿ç”¨è£…é¥°å™¨æ—¶ï¼Œä¼ å…¥å˜é‡</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> logging<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">log</span>(<span class="hljs-params">level=<span class="hljs-string">&#x27;debug&#x27;</span></span>):<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">decorator</span>(<span class="hljs-params">func</span>):<br>        <span class="hljs-keyword">def</span> <span class="hljs-title function_">wrapper</span>():<br>            func()<br>            <span class="hljs-keyword">if</span> level == <span class="hljs-string">&#x27;warning&#x27;</span>:<br>                logging.warning(<span class="hljs-string">&quot;&#123;&#125; is called&quot;</span>.<span class="hljs-built_in">format</span>(func.__name__))<br>            <span class="hljs-keyword">else</span>:<br>                logging.debug(<span class="hljs-string">&quot;&#123;&#125; is called&quot;</span>.<span class="hljs-built_in">format</span>(func.__name__))<br>            <span class="hljs-keyword">return</span> func<br>        <span class="hljs-keyword">return</span> wrapper<br>    <span class="hljs-keyword">return</span> decorator<br><br><span class="hljs-meta">@log(<span class="hljs-params">level=<span class="hljs-string">&quot;warning&quot;</span></span>) </span><span class="hljs-comment"># æ·»åŠ å¸¦å‚æ•°çš„è£…é¥°å™¨ log()</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">func</span>():<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;func()è°ƒç”¨äº†&quot;</span>)<br><br>func()<br><br><span class="hljs-comment"># WARNING:root:func is called</span><br><span class="hljs-comment"># func()è°ƒç”¨äº†</span><br></code></pre></td></tr></table></figure><h1 id="3ã€è£…é¥°å™¨å’Œå‡½æ•°å‡æœ‰å‚"><a href="#3ã€è£…é¥°å™¨å’Œå‡½æ•°å‡æœ‰å‚" class="headerlink" title="3ã€è£…é¥°å™¨å’Œå‡½æ•°å‡æœ‰å‚"></a>3ã€è£…é¥°å™¨å’Œå‡½æ•°å‡æœ‰å‚</h1><p>éœ€è¦ä½¿ç”¨<code>*args, **kwargs</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> logging<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">log</span>(<span class="hljs-params">level=<span class="hljs-string">&#x27;debug&#x27;</span></span>):<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">decorator</span>(<span class="hljs-params">func</span>):<br>        <span class="hljs-keyword">def</span> <span class="hljs-title function_">wrapper</span>(<span class="hljs-params">*args, **kwargs</span>):<br>            ret = func(*args, **kwargs)<br>            <span class="hljs-keyword">if</span> level == <span class="hljs-string">&#x27;warning&#x27;</span>:<br>                logging.warning(<span class="hljs-string">&quot;&#123;&#125; is called&quot;</span>.<span class="hljs-built_in">format</span>(func.__name__))<br>            <span class="hljs-keyword">else</span>:<br>                logging.debug(<span class="hljs-string">&quot;&#123;&#125; is called&quot;</span>.<span class="hljs-built_in">format</span>(func.__name__))<br>            <span class="hljs-keyword">return</span> ret<br>        <span class="hljs-keyword">return</span> wrapper<br>    <span class="hljs-keyword">return</span> decorator<br><br><span class="hljs-meta">@log(<span class="hljs-params">level=<span class="hljs-string">&quot;warning&quot;</span></span>) </span><span class="hljs-comment"># æ·»åŠ å¸¦å‚æ•°çš„è£…é¥°å™¨ log()</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">func</span>(<span class="hljs-params">n,m</span>):<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;from func(), n=<span class="hljs-subst">&#123;n&#125;</span>,m=<span class="hljs-subst">&#123;m&#125;</span>&quot;</span>)<br><br>func(<span class="hljs-number">0</span>,<span class="hljs-number">2</span>)<br></code></pre></td></tr></table></figure><p>å¯¹äº<code>*args, **kwargs</code>æˆ‘äº†è§£çš„è¿˜ä¸å¤šï¼Œè¿™é‡Œä¸åšè¿‡å¤šä»‹ç»ã€‚</p><ul><li><code>*args (Non-Keyword Arguments)</code>ç›¸å½“äºåˆ—è¡¨<code>[&#39;Hello&#39;``, ``&#39;Welcome&#39;``, ``&#39;to&#39;``, ``&#39;GeeksforGeeks&#39;]</code></li><li><code>**kwargs (Keyword Arguments)</code>ç›¸å½“äºå­—å…¸<code>&#123;first=&#39;Geeks&#39;, mid=&#39;for&#39;, last=&#39;Geeks&#39;&#125;</code></li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># *args</span><br><span class="hljs-built_in">list</span> = [<span class="hljs-string">&quot;apple&quot;</span>,<span class="hljs-string">&quot;banana&quot;</span>,<span class="hljs-string">&quot;Pomelo&quot;</span>]<br><span class="hljs-keyword">def</span> <span class="hljs-title function_">func</span>(<span class="hljs-params">*argv</span>):<br>    <span class="hljs-keyword">for</span> arg <span class="hljs-keyword">in</span> argv:<br>        <span class="hljs-built_in">print</span>(arg+<span class="hljs-string">&quot; &quot;</span>)<br>func(*<span class="hljs-built_in">list</span>)<br><span class="hljs-comment"># apple</span><br><span class="hljs-comment"># banana</span><br><span class="hljs-comment"># Pomelo</span><br><br><span class="hljs-comment"># **kwargs</span><br>dic = &#123;<span class="hljs-string">&quot;1&quot;</span>:<span class="hljs-string">&quot;apple&quot;</span>,<span class="hljs-string">&quot;2&quot;</span>:<span class="hljs-string">&quot;banana&quot;</span>,<span class="hljs-string">&quot;3&quot;</span>:<span class="hljs-string">&quot;Pomelo&quot;</span>&#125;<br><span class="hljs-keyword">def</span> <span class="hljs-title function_">func</span>(<span class="hljs-params">**kwargs</span>):<br>    <span class="hljs-keyword">for</span> key,value <span class="hljs-keyword">in</span> kwargs.items():<br>        <span class="hljs-built_in">print</span>(key+<span class="hljs-string">&quot;=&quot;</span>+value)<br>func(**dic)<br><span class="hljs-comment"># 1=apple</span><br><span class="hljs-comment"># 2=banana</span><br><span class="hljs-comment"># 3=Pomelo</span><br><br><br><span class="hljs-comment"># *args,**kwargs</span><br><span class="hljs-built_in">list</span> = [<span class="hljs-string">&quot;apple&quot;</span>,<span class="hljs-string">&quot;banana&quot;</span>,<span class="hljs-string">&quot;Pomelo&quot;</span>]<br>dic = &#123;<span class="hljs-string">&quot;1&quot;</span>:<span class="hljs-string">&quot;apple&quot;</span>,<span class="hljs-string">&quot;2&quot;</span>:<span class="hljs-string">&quot;banana&quot;</span>,<span class="hljs-string">&quot;3&quot;</span>:<span class="hljs-string">&quot;Pomelo&quot;</span>&#125;<br><span class="hljs-keyword">def</span> <span class="hljs-title function_">func</span>(<span class="hljs-params">*argv,**kwargs</span>):<br>    <span class="hljs-keyword">for</span> arg <span class="hljs-keyword">in</span> argv:<br>        <span class="hljs-built_in">print</span>(arg+<span class="hljs-string">&quot; &quot;</span>)<br>    <span class="hljs-keyword">for</span> key,value <span class="hljs-keyword">in</span> kwargs.items():<br>        <span class="hljs-built_in">print</span>(key+<span class="hljs-string">&quot;=&quot;</span>+value)<br>func(*<span class="hljs-built_in">list</span>,**dic)<br><span class="hljs-comment"># apple</span><br><span class="hljs-comment"># banana</span><br><span class="hljs-comment"># Pomelo</span><br><span class="hljs-comment"># 1=apple</span><br><span class="hljs-comment"># 2=banana</span><br><span class="hljs-comment"># 3=Pomelo</span><br></code></pre></td></tr></table></figure><h1 id="4ã€ç±»æ–¹æ³•è£…é¥°å™¨"><a href="#4ã€ç±»æ–¹æ³•è£…é¥°å™¨" class="headerlink" title="4ã€ç±»æ–¹æ³•è£…é¥°å™¨"></a>4ã€ç±»æ–¹æ³•è£…é¥°å™¨</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> time<br><span class="hljs-keyword">def</span> <span class="hljs-title function_">decorator</span>(<span class="hljs-params">func</span>):<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">wrapper</span>(<span class="hljs-params">self, *args, **kwargs</span>):<br>        start_time = time.time()<br>        ret = func(self, *args, **kwargs)<br>        end_time = time.time()<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;%s.%s() cost %f second!&quot;</span> % (self.__class__,<br>              func.__name__, end_time - start_time))<br>        <span class="hljs-keyword">return</span> ret<br>    <span class="hljs-keyword">return</span> wrapper<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">TestDecorator</span>():<br><span class="hljs-meta">    @decorator</span><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">mysleep</span>(<span class="hljs-params">self, n</span>):<br>        time.sleep(n)<br><br>obj = TestDecorator()<br>obj.mysleep(<span class="hljs-number">1</span>)<br></code></pre></td></tr></table></figure><h1 id="5ã€è£…é¥°å™¨ç±»"><a href="#5ã€è£…é¥°å™¨ç±»" class="headerlink" title="5ã€è£…é¥°å™¨ç±»"></a>5ã€è£…é¥°å™¨ç±»</h1><p>ä¼šè°ƒç”¨<code>__init__</code>å’Œ<code>__call__</code>å‡½æ•°</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Tracer</span>():<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, func</span>):<br>        self.func = func<br>        self.calls = <span class="hljs-number">0</span><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__call__</span>(<span class="hljs-params">self, *args, **kwargs</span>):<br>        self.calls += <span class="hljs-number">1</span><br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;call %s() %d times&quot;</span> % (self.func.__name__, self.calls))<br>        <span class="hljs-keyword">return</span> self.func(*args, **kwargs)<br><br><span class="hljs-meta">@Tracer</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">test_tracer</span>(<span class="hljs-params">val, name=<span class="hljs-string">&quot;default&quot;</span></span>):<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;func() name:%s, val: %d&quot;</span> % (name, val))<br><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">2</span>):<br>    test_tracer(i, name=(<span class="hljs-string">&quot;name&quot;</span> + <span class="hljs-built_in">str</span>(i)))<br><br>&gt;&gt;&gt;<br>call test_tracer() <span class="hljs-number">1</span> times<br>func() name:name0, val: <span class="hljs-number">0</span><br>call test_tracer() <span class="hljs-number">2</span> times<br>func() name:name1, val: <span class="hljs-number">1</span><br></code></pre></td></tr></table></figure><h1 id="6ã€-å¸¦å‚æ•°è£…é¥°å™¨ç±»"><a href="#6ã€-å¸¦å‚æ•°è£…é¥°å™¨ç±»" class="headerlink" title="6ã€ å¸¦å‚æ•°è£…é¥°å™¨ç±»"></a>6ã€ å¸¦å‚æ•°è£…é¥°å™¨ç±»</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Tracer</span>():<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, arg0</span>): <span class="hljs-comment"># å¯æ”¯æŒä»»æ„å‚æ•°</span><br>        self.arg0 = arg0<br>        self.calls = <span class="hljs-number">0</span><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__call__</span>(<span class="hljs-params">self, func</span>):<br>        <span class="hljs-keyword">def</span> <span class="hljs-title function_">wrapper</span>(<span class="hljs-params">*args, **kwargs</span>):<br>            self.calls += <span class="hljs-number">1</span><br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;arg0:%d call %s() %d times&quot;</span> % (self.arg0, func.__name__, self.calls))<br>            <span class="hljs-keyword">return</span> func(*args, **kwargs)<br>        <span class="hljs-keyword">return</span> wrapper<br><br><span class="hljs-meta">@Tracer(<span class="hljs-params">arg0=<span class="hljs-number">0</span></span>)</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">test_tracer</span>(<span class="hljs-params">val, name=<span class="hljs-string">&quot;default&quot;</span></span>):<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;func() name:%s, val: %d&quot;</span> % (name, val))<br><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">2</span>):<br>    test_tracer(i, name=(<span class="hljs-string">&quot;name&quot;</span> + <span class="hljs-built_in">str</span>(i)))<br><br>&gt;&gt;&gt;<br>arg0:<span class="hljs-number">0</span> call test_tracer() <span class="hljs-number">1</span> times<br>func() name:name0, val: <span class="hljs-number">0</span><br>arg0:<span class="hljs-number">0</span> call test_tracer() <span class="hljs-number">2</span> times<br>func() name:name1, val: <span class="hljs-number">1</span><br></code></pre></td></tr></table></figure><h1 id="7ã€å†…ç½®è£…é¥°å™¨"><a href="#7ã€å†…ç½®è£…é¥°å™¨" class="headerlink" title="7ã€å†…ç½®è£…é¥°å™¨"></a>7ã€å†…ç½®è£…é¥°å™¨</h1><h2 id="7-1-staticmethod"><a href="#7-1-staticmethod" class="headerlink" title="7.1 staticmethod"></a>7.1 staticmethod</h2><p>ç±»çš„é™æ€å‡½æ•°è£…é¥°å™¨ï¼Œå¯é€šè¿‡ç±»åç›´æ¥è°ƒç”¨</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">C</span>():<br><span class="hljs-meta">    @staticmethod</span><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">static_method</span>():<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;This is a static method!&quot;</span>)<br><br>C.static_method()     <span class="hljs-comment"># ç±»åç›´æ¥è°ƒç”¨</span><br><br>c = C()<br>c.static_method()     <span class="hljs-comment"># ç±»å¯¹è±¡è°ƒç”¨</span><br><br>&gt;&gt;&gt;<br>This <span class="hljs-keyword">is</span> a static method!<br>This <span class="hljs-keyword">is</span> a static method!<br></code></pre></td></tr></table></figure><h2 id="7-2-classmethod"><a href="#7-2-classmethod" class="headerlink" title="7.2 classmethod"></a>7.2 classmethod</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">C</span>():<br><span class="hljs-meta">    @classmethod</span><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">class_method</span>(<span class="hljs-params">cls</span>):<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;This is &quot;</span>, cls)<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">B</span>(<span class="hljs-title class_ inherited__">C</span>):<br>  <span class="hljs-keyword">pass</span><br><br>C.class_method()  <span class="hljs-comment"># ç±»åç›´æ¥è°ƒç”¨</span><br>c = C()<br>c.class_method()  <span class="hljs-comment"># ç±»å¯¹è±¡è°ƒç”¨</span><br><br>B.class_method()  <span class="hljs-comment"># ç»§æ‰¿ç±»è°ƒç”¨</span><br><br>&gt;&gt;&gt;<br>This <span class="hljs-keyword">is</span>  &lt;<span class="hljs-keyword">class</span> <span class="hljs-string">&#x27;__main__.C&#x27;</span>&gt;<br>This <span class="hljs-keyword">is</span>  &lt;<span class="hljs-keyword">class</span> <span class="hljs-string">&#x27;__main__.C&#x27;</span>&gt;<br>This <span class="hljs-keyword">is</span>  &lt;<span class="hljs-keyword">class</span> <span class="hljs-string">&#x27;__main__.B&#x27;</span>&gt;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>ç¼–ç¨‹</category>
      
      <category>Python</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Python</tag>
      
      <tag>è£…é¥°å™¨</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Pythonå¸¸ç”¨æŠ€å·§</title>
    <link href="/2024/04/24/017%20Python%E5%B8%B8%E7%94%A8%E6%8A%80%E5%B7%A7%E5%88%86%E4%BA%AB/"/>
    <url>/2024/04/24/017%20Python%E5%B8%B8%E7%94%A8%E6%8A%80%E5%B7%A7%E5%88%86%E4%BA%AB/</url>
    
    <content type="html"><![CDATA[<h1 id="1ã€æ¨å¯¼å¼"><a href="#1ã€æ¨å¯¼å¼" class="headerlink" title="1ã€æ¨å¯¼å¼"></a>1ã€æ¨å¯¼å¼</h1><p>æ¨å¯¼å¼åˆå«åšè§£æå¼ï¼Œæ˜¯ç®€åŒ–å†—ä½™ä»£ç å®è´¨æœ‰æ•ˆçš„æ–¹æ³•ï¼Œ<code>Python</code>ä¸­å®ç”¨çš„è¯­æ³•ç³–ï¼Œå¯ä»¥åˆ†ä¸ºä»¥ä¸‹å‡ ç±»ï¼š</p><ol><li>åˆ—è¡¨æ¨å¯¼å¼ï¼ˆâ­ï¼‰</li><li>å­—å…¸æ¨å¯¼å¼ï¼ˆâ­ï¼‰</li><li>é›†åˆæ¨å¯¼å¼</li><li>å…ƒç¥–æ¨å¯¼å¼</li></ol><p>ä¸‹é¢åªä»‹ç»å¸¸ç”¨çš„åˆ—è¡¨æ¨å¯¼å¼å’Œå­—å…¸æ¨å¯¼å¼ã€‚</p><h2 id="1-1-åˆ—è¡¨æ¨å¯¼å¼"><a href="#1-1-åˆ—è¡¨æ¨å¯¼å¼" class="headerlink" title="1.1 åˆ—è¡¨æ¨å¯¼å¼"></a>1.1 åˆ—è¡¨æ¨å¯¼å¼</h2><p>å¯¹åˆ—è¡¨ä¸­æ¯ä¸ªå…ƒç´ è¿›è¡Œä¸€å®šæ“ä½œã€‚</p><p>åŸºæœ¬ä½¿ç”¨</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-built_in">list</span> = [<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>,<span class="hljs-number">5</span>,<span class="hljs-number">6</span>,<span class="hljs-number">7</span>,<span class="hljs-number">8</span>,<span class="hljs-number">9</span>,<span class="hljs-number">10</span>]<br>list1 = [x+<span class="hljs-number">2</span> <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> <span class="hljs-built_in">list</span>]<br><span class="hljs-built_in">print</span>(list1)<br><span class="hljs-comment"># [3, 4, 5, 6, 7, 8, 9, 10, 11, 12]</span><br></code></pre></td></tr></table></figure><p>æ¡ä»¶è¡¨è¾¾å¼</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-built_in">list</span> = [<span class="hljs-string">&quot;Bob&quot;</span>,<span class="hljs-string">&quot;Jason&quot;</span>,<span class="hljs-string">&quot;Peter&quot;</span>,<span class="hljs-string">&quot;Jani&quot;</span>,<span class="hljs-string">&quot;Tom&quot;</span>]<br>list1 = [name+<span class="hljs-string">&quot;666&quot;</span> <span class="hljs-keyword">for</span> name <span class="hljs-keyword">in</span> <span class="hljs-built_in">list</span> <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(name) &gt; <span class="hljs-number">3</span>]<br><span class="hljs-built_in">print</span>(list1)<br><span class="hljs-comment"># [&#x27;Jason666&#x27;, &#x27;Peter666&#x27;, &#x27;Jani666&#x27;]</span><br></code></pre></td></tr></table></figure><p>å¤šä¸ª for å¾ªç¯</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python">time = [<span class="hljs-string">&#x27;%.2d:%.2d&#x27;</span>%(h,m )<span class="hljs-keyword">for</span> h <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">24</span>) <span class="hljs-keyword">for</span> m <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">0</span>,<span class="hljs-number">60</span>,<span class="hljs-number">5</span>) ]<br><span class="hljs-built_in">print</span>(time)<br><span class="hljs-comment"># [&#x27;00:00&#x27;, &#x27;00:05&#x27;, &#x27;00:10&#x27;, &#x27;00:15&#x27;, &#x27;00:20&#x27;, &#x27;00:25&#x27;, &#x27;00:30&#x27;, &#x27;00:35&#x27;, &#x27;00:40&#x27;, &#x27;00:45&#x27;, &#x27;00:50&#x27;, &#x27;00:55&#x27;, &#x27;01:00&#x27;, &#x27;01:05&#x27;, &#x27;01:10&#x27;, &#x27;01:15&#x27;, &#x27;01:20&#x27;, &#x27;01:25&#x27;, &#x27;01:30&#x27;, &#x27;01:35&#x27;, &#x27;01:40&#x27;, &#x27;01:45&#x27;, &#x27;01:50&#x27;, &#x27;01:55&#x27;, &#x27;02:00&#x27;, &#x27;02:05&#x27;, &#x27;02:10&#x27;, &#x27;02:15&#x27;, &#x27;02:20&#x27;, &#x27;02:25&#x27;, &#x27;02:30&#x27;, &#x27;02:35&#x27;, &#x27;02:40&#x27;, &#x27;02:45&#x27;, &#x27;02:50&#x27;, &#x27;02:55&#x27;, &#x27;03:00&#x27;, &#x27;03:05&#x27;, &#x27;03:10&#x27;, &#x27;03:15&#x27;, &#x27;03:20&#x27;, &#x27;03:25&#x27;, &#x27;03:30&#x27;, &#x27;03:35&#x27;, &#x27;03:40&#x27;, &#x27;03:45&#x27;, &#x27;03:50&#x27;, &#x27;03:55&#x27;, &#x27;04:00&#x27;, &#x27;04:05&#x27;, &#x27;04:10&#x27;, &#x27;04:15&#x27;, &#x27;04:20&#x27;, &#x27;04:25&#x27;, &#x27;04:30&#x27;, &#x27;04:35&#x27;, &#x27;04:40&#x27;, &#x27;04:45&#x27;, &#x27;04:50&#x27;, &#x27;04:55&#x27;, &#x27;05:00&#x27;, &#x27;05:05&#x27;, &#x27;05:10&#x27;, &#x27;05:15&#x27;, &#x27;05:20&#x27;, &#x27;05:25&#x27;, &#x27;05:30&#x27;, &#x27;05:35&#x27;, &#x27;05:40&#x27;, &#x27;05:45&#x27;, &#x27;05:50&#x27;, &#x27;05:55&#x27;, &#x27;06:00&#x27;, &#x27;06:05&#x27;, &#x27;06:10&#x27;, &#x27;06:15&#x27;, &#x27;06:20&#x27;, &#x27;06:25&#x27;, &#x27;06:30&#x27;, &#x27;06:35&#x27;, &#x27;06:40&#x27;, &#x27;06:45&#x27;, &#x27;06:50&#x27;, &#x27;06:55&#x27;, &#x27;07:00&#x27;, &#x27;07:05&#x27;, &#x27;07:10&#x27;, &#x27;07:15&#x27;, &#x27;07:20&#x27;, &#x27;07:25&#x27;, &#x27;07:30&#x27;, &#x27;07:35&#x27;, &#x27;07:40&#x27;, &#x27;07:45&#x27;, &#x27;07:50&#x27;, &#x27;07:55&#x27;, &#x27;08:00&#x27;, &#x27;08:05&#x27;, &#x27;08:10&#x27;, &#x27;08:15&#x27;, &#x27;08:20&#x27;, &#x27;08:25&#x27;, &#x27;08:30&#x27;, &#x27;08:35&#x27;, &#x27;08:40&#x27;, &#x27;08:45&#x27;, &#x27;08:50&#x27;, &#x27;08:55&#x27;, &#x27;09:00&#x27;, &#x27;09:05&#x27;, &#x27;09:10&#x27;, &#x27;09:15&#x27;, &#x27;09:20&#x27;, &#x27;09:25&#x27;, &#x27;09:30&#x27;, &#x27;09:35&#x27;, &#x27;09:40&#x27;, &#x27;09:45&#x27;, &#x27;09:50&#x27;, &#x27;09:55&#x27;, &#x27;10:00&#x27;, &#x27;10:05&#x27;, &#x27;10:10&#x27;, &#x27;10:15&#x27;, &#x27;10:20&#x27;, &#x27;10:25&#x27;, &#x27;10:30&#x27;, &#x27;10:35&#x27;, &#x27;10:40&#x27;, &#x27;10:45&#x27;, &#x27;10:50&#x27;, &#x27;10:55&#x27;, &#x27;11:00&#x27;, &#x27;11:05&#x27;, &#x27;11:10&#x27;, &#x27;11:15&#x27;, &#x27;11:20&#x27;, &#x27;11:25&#x27;, &#x27;11:30&#x27;, &#x27;11:35&#x27;, &#x27;11:40&#x27;, &#x27;11:45&#x27;, &#x27;11:50&#x27;, &#x27;11:55&#x27;, &#x27;12:00&#x27;, &#x27;12:05&#x27;, &#x27;12:10&#x27;, &#x27;12:15&#x27;, &#x27;12:20&#x27;, &#x27;12:25&#x27;, &#x27;12:30&#x27;, &#x27;12:35&#x27;, &#x27;12:40&#x27;, &#x27;12:45&#x27;, &#x27;12:50&#x27;, &#x27;12:55&#x27;, &#x27;13:00&#x27;, &#x27;13:05&#x27;, &#x27;13:10&#x27;, &#x27;13:15&#x27;, &#x27;13:20&#x27;, &#x27;13:25&#x27;, &#x27;13:30&#x27;, &#x27;13:35&#x27;, &#x27;13:40&#x27;, &#x27;13:45&#x27;, &#x27;13:50&#x27;, &#x27;13:55&#x27;, &#x27;14:00&#x27;, &#x27;14:05&#x27;, &#x27;14:10&#x27;, &#x27;14:15&#x27;, &#x27;14:20&#x27;, &#x27;14:25&#x27;, &#x27;14:30&#x27;, &#x27;14:35&#x27;, &#x27;14:40&#x27;, &#x27;14:45&#x27;, &#x27;14:50&#x27;, &#x27;14:55&#x27;, &#x27;15:00&#x27;, &#x27;15:05&#x27;, &#x27;15:10&#x27;, &#x27;15:15&#x27;, &#x27;15:20&#x27;, &#x27;15:25&#x27;, &#x27;15:30&#x27;, &#x27;15:35&#x27;, &#x27;15:40&#x27;, &#x27;15:45&#x27;, &#x27;15:50&#x27;, &#x27;15:55&#x27;, &#x27;16:00&#x27;, &#x27;16:05&#x27;, &#x27;16:10&#x27;, &#x27;16:15&#x27;, &#x27;16:20&#x27;, &#x27;16:25&#x27;, &#x27;16:30&#x27;, &#x27;16:35&#x27;, &#x27;16:40&#x27;, &#x27;16:45&#x27;, &#x27;16:50&#x27;, &#x27;16:55&#x27;, &#x27;17:00&#x27;, &#x27;17:05&#x27;, &#x27;17:10&#x27;, &#x27;17:15&#x27;, &#x27;17:20&#x27;, &#x27;17:25&#x27;, &#x27;17:30&#x27;, &#x27;17:35&#x27;, &#x27;17:40&#x27;, &#x27;17:45&#x27;, &#x27;17:50&#x27;, &#x27;17:55&#x27;, &#x27;18:00&#x27;, &#x27;18:05&#x27;, &#x27;18:10&#x27;, &#x27;18:15&#x27;, &#x27;18:20&#x27;, &#x27;18:25&#x27;, &#x27;18:30&#x27;, &#x27;18:35&#x27;, &#x27;18:40&#x27;, &#x27;18:45&#x27;, &#x27;18:50&#x27;, &#x27;18:55&#x27;, &#x27;19:00&#x27;, &#x27;19:05&#x27;, &#x27;19:10&#x27;, &#x27;19:15&#x27;, &#x27;19:20&#x27;, &#x27;19:25&#x27;, &#x27;19:30&#x27;, &#x27;19:35&#x27;, &#x27;19:40&#x27;, &#x27;19:45&#x27;, &#x27;19:50&#x27;, &#x27;19:55&#x27;, &#x27;20:00&#x27;, &#x27;20:05&#x27;, &#x27;20:10&#x27;, &#x27;20:15&#x27;, &#x27;20:20&#x27;, &#x27;20:25&#x27;, &#x27;20:30&#x27;, &#x27;20:35&#x27;, &#x27;20:40&#x27;, &#x27;20:45&#x27;, &#x27;20:50&#x27;, &#x27;20:55&#x27;, &#x27;21:00&#x27;, &#x27;21:05&#x27;, &#x27;21:10&#x27;, &#x27;21:15&#x27;, &#x27;21:20&#x27;, &#x27;21:25&#x27;, &#x27;21:30&#x27;, &#x27;21:35&#x27;, &#x27;21:40&#x27;, &#x27;21:45&#x27;, &#x27;21:50&#x27;, &#x27;21:55&#x27;, &#x27;22:00&#x27;, &#x27;22:05&#x27;, &#x27;22:10&#x27;, &#x27;22:15&#x27;, &#x27;22:20&#x27;, &#x27;22:25&#x27;, &#x27;22:30&#x27;, &#x27;22:35&#x27;, &#x27;22:40&#x27;, &#x27;22:45&#x27;, &#x27;22:50&#x27;, &#x27;22:55&#x27;, &#x27;23:00&#x27;, &#x27;23:05&#x27;, &#x27;23:10&#x27;, &#x27;23:15&#x27;, &#x27;23:20&#x27;, &#x27;23:25&#x27;, &#x27;23:30&#x27;, &#x27;23:35&#x27;, &#x27;23:40&#x27;, &#x27;23:45&#x27;, &#x27;23:50&#x27;, &#x27;23:55&#x27;]</span><br></code></pre></td></tr></table></figure><p>å¤šä¸ª for å¾ªç¯+æ¡ä»¶è¡¨è¾¾å¼</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-built_in">list</span> = [(x, y) <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> [<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>] <span class="hljs-keyword">for</span> y <span class="hljs-keyword">in</span> [<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">4</span>] <span class="hljs-keyword">if</span> x != y]<br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">list</span>)<br><span class="hljs-comment"># [(1, 3), (1, 4), (2, 3), (2, 1), (2, 4), (3, 1), (3, 4)]</span><br></code></pre></td></tr></table></figure><h2 id="1-2-å­—å…¸æ¨å¯¼å¼"><a href="#1-2-å­—å…¸æ¨å¯¼å¼" class="headerlink" title="1.2 å­—å…¸æ¨å¯¼å¼"></a>1.2 å­—å…¸æ¨å¯¼å¼</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python">listdemo = [<span class="hljs-string">&quot;Bob&quot;</span>,<span class="hljs-string">&quot;Jason&quot;</span>,<span class="hljs-string">&quot;Peter&quot;</span>,<span class="hljs-string">&quot;Jani&quot;</span>,<span class="hljs-string">&quot;Tom&quot;</span>]<br>newdict = &#123;key:<span class="hljs-built_in">len</span>(key) <span class="hljs-keyword">for</span> key <span class="hljs-keyword">in</span> listdemo&#125;<br><span class="hljs-built_in">print</span>(newdict)<br><span class="hljs-comment"># &#123;&#x27;Bob&#x27;: 3, &#x27;Jason&#x27;: 5, &#x27;Peter&#x27;: 5, &#x27;Jani&#x27;: 4, &#x27;Tom&#x27;: 3&#125;</span><br></code></pre></td></tr></table></figure><p>äº’æ¢ key å’Œ value çš„å€¼</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python">person = &#123;<span class="hljs-string">&#x27;è§’è‰²å&#x27;</span>:<span class="hljs-string">&#x27;å®«æœ¬æ­¦è—&#x27;</span>,<span class="hljs-string">&#x27;å®šä½&#x27;</span>:<span class="hljs-string">&#x27;åˆºå®¢&#x27;</span>&#125;<br>person_reverse = &#123;k:v <span class="hljs-keyword">for</span> v,k <span class="hljs-keyword">in</span> person.items()&#125;<br><span class="hljs-built_in">print</span>(person_reverse)<br><span class="hljs-comment"># &#123;&#x27;å®«æœ¬æ­¦è—&#x27;: &#x27;è§’è‰²å&#x27;, &#x27;åˆºå®¢&#x27;: &#x27;å®šä½&#x27;&#125;</span><br></code></pre></td></tr></table></figure><h1 id="2ã€å­—å…¸éå†"><a href="#2ã€å­—å…¸éå†" class="headerlink" title="2ã€å­—å…¸éå†"></a>2ã€å­—å…¸éå†</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python">person = &#123;<span class="hljs-string">&#x27;è§’è‰²å&#x27;</span>:<span class="hljs-string">&#x27;å®«æœ¬æ­¦è—&#x27;</span>,<span class="hljs-string">&#x27;å®šä½&#x27;</span>:<span class="hljs-string">&#x27;åˆºå®¢&#x27;</span>&#125;<br><span class="hljs-keyword">for</span> key,value <span class="hljs-keyword">in</span> person.items():<br>    <span class="hljs-built_in">print</span>(key,value)<br></code></pre></td></tr></table></figure><h1 id="3ã€åˆ¤æ–­å…ƒç´ æ˜¯å¦åœ¨åˆ—è¡¨ä¸­"><a href="#3ã€åˆ¤æ–­å…ƒç´ æ˜¯å¦åœ¨åˆ—è¡¨ä¸­" class="headerlink" title="3ã€åˆ¤æ–­å…ƒç´ æ˜¯å¦åœ¨åˆ—è¡¨ä¸­"></a>3ã€åˆ¤æ–­å…ƒç´ æ˜¯å¦åœ¨åˆ—è¡¨ä¸­</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python">listdemo = [<span class="hljs-string">&quot;Bob&quot;</span>,<span class="hljs-string">&quot;Jason&quot;</span>,<span class="hljs-string">&quot;Peter&quot;</span>,<span class="hljs-string">&quot;Jani&quot;</span>,<span class="hljs-string">&quot;Tom&quot;</span>]<br><span class="hljs-keyword">if</span> <span class="hljs-string">&quot;Peter&quot;</span> <span class="hljs-keyword">in</span> listdemo:<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Yes&quot;</span>)<br><span class="hljs-comment"># Yes</span><br></code></pre></td></tr></table></figure><h1 id="4ã€åè½¬å­—ç¬¦ä¸²"><a href="#4ã€åè½¬å­—ç¬¦ä¸²" class="headerlink" title="4ã€åè½¬å­—ç¬¦ä¸²"></a>4ã€åè½¬å­—ç¬¦ä¸²</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python">name = <span class="hljs-string">&quot;Tom&quot;</span><br>reverse_name = name[::-<span class="hljs-number">1</span>]<br><span class="hljs-built_in">print</span>(reverse_name)<br><span class="hljs-comment"># moT</span><br></code></pre></td></tr></table></figure><h1 id="5ã€åè½¬åˆ—è¡¨"><a href="#5ã€åè½¬åˆ—è¡¨" class="headerlink" title="5ã€åè½¬åˆ—è¡¨"></a>5ã€åè½¬åˆ—è¡¨</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python">name_list = [<span class="hljs-string">&quot;Bob&quot;</span>,<span class="hljs-string">&quot;Jason&quot;</span>,<span class="hljs-string">&quot;Peter&quot;</span>,<span class="hljs-string">&quot;Jani&quot;</span>,<span class="hljs-string">&quot;Tom&quot;</span>]<br>reverse_name_list = name_list[::-<span class="hljs-number">1</span>]<br><span class="hljs-built_in">print</span>(reverse_name_list)<br><span class="hljs-comment"># [&#x27;Tom&#x27;, &#x27;Jani&#x27;, &#x27;Peter&#x27;, &#x27;Jason&#x27;, &#x27;Bob&#x27;]</span><br></code></pre></td></tr></table></figure><h1 id="6ã€è·å–æ—¶é—´"><a href="#6ã€è·å–æ—¶é—´" class="headerlink" title="6ã€è·å–æ—¶é—´"></a>6ã€è·å–æ—¶é—´</h1><p>è·å–å½“å‰æ—¶é—´</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> datetime<br>current_time = datetime.datetime.now()<br><span class="hljs-built_in">print</span>(current_time)<br><span class="hljs-comment"># 2024-04-24 23:59:57.567560</span><br></code></pre></td></tr></table></figure><p>è·å–å½“å‰æ—¥æœŸ</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> datetime<br>current_date = datetime.date.today()<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;å½“å‰æ—¥æœŸ:&quot;</span>, current_date)<br><span class="hljs-comment"># å½“å‰æ—¥æœŸ: 2024-04-25</span><br></code></pre></td></tr></table></figure><p>è·å–æ¯«ç§’çº§æ—¶é—´ï¼ˆç¨‹åºæ‰§è¡Œæ—¶é—´ï¼‰</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> time<br>start_time = time.time()<br>numbers = [i <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1000000</span>)]<br>end_time = time.time()<br>time_ = end_time - start_time<br><span class="hljs-built_in">print</span>(time_)<br><span class="hljs-comment"># 0.03652048110961914</span><br></code></pre></td></tr></table></figure><h1 id="7ã€ä¸‰å…ƒè¿ç®—ç¬¦"><a href="#7ã€ä¸‰å…ƒè¿ç®—ç¬¦" class="headerlink" title="7ã€ä¸‰å…ƒè¿ç®—ç¬¦"></a>7ã€ä¸‰å…ƒè¿ç®—ç¬¦</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python">a = <span class="hljs-number">1</span><br>b = <span class="hljs-number">2</span><br><span class="hljs-built_in">max</span> = a <span class="hljs-keyword">if</span> a&gt;b <span class="hljs-keyword">else</span> b<br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">max</span>)<br><span class="hljs-comment"># 2</span><br></code></pre></td></tr></table></figure><h1 id="8ã€æšä¸¾å¾ªç¯"><a href="#8ã€æšä¸¾å¾ªç¯" class="headerlink" title="8ã€æšä¸¾å¾ªç¯"></a>8ã€æšä¸¾å¾ªç¯</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python">fruits = [<span class="hljs-string">&#x27;apple&#x27;</span>,<span class="hljs-string">&#x27;banana&#x27;</span>]<br><span class="hljs-keyword">for</span> index,fruit <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(fruits):<br>    <span class="hljs-built_in">print</span>(index,fruit)<br><span class="hljs-comment"># 0 apple</span><br><span class="hljs-comment"># 1 banana</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>ç¼–ç¨‹</category>
      
      <category>Python</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Python</tag>
      
      <tag>æŠ€å·§</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>è§£å†³matplotlibç»˜å›¾ä¸­è‹±æ–‡æ··ç”¨é—®é¢˜</title>
    <link href="/2024/04/17/016%20matplotlib%E7%BB%98%E5%9B%BE%E4%B8%AD%E8%8B%B1%E6%96%87%E6%B7%B7%E7%94%A8%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3/"/>
    <url>/2024/04/17/016%20matplotlib%E7%BB%98%E5%9B%BE%E4%B8%AD%E8%8B%B1%E6%96%87%E6%B7%B7%E7%94%A8%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3/</url>
    
    <content type="html"><![CDATA[<p>æœ€è¿‘åœ¨å¤„ç†å®éªŒæ•°æ®ï¼Œå› ä¸ºæœ‰ c++åŸºç¡€ï¼Œå°è¯•ä½¿ç”¨ python è¿›è¡Œç»˜å›¾ã€‚</p><blockquote><p>ç›®å‰é‡åˆ°ä¸€ä¸ªé—®é¢˜ï¼šæƒ³è¦åœ¨ä¸€å¼ å›¾ä¸­ä¸­æ–‡ä½¿ç”¨å®‹ä½“ï¼Œè‹±æ–‡ä½¿ç”¨æ–°ç½—é©¬å­—ä½“è¯¥å¦‚ä½•è§£å†³ï¼Ÿ</p></blockquote><p>åœ¨ç½‘ä¸ŠæŸ¥é˜…äº†å¤§é‡çš„èµ„æ–™ï¼Œæ‰¾åˆ°äº†å‡ ç§è§£å†³åŠæ³•ï¼Œæ€»ç»“èµ·æ¥å°± 3 ç§ï¼š</p><ol><li>å…¨å±€ä½¿ç”¨ä¸­æ–‡ï¼Œåœ¨éœ€è¦ä½¿ç”¨è‹±æ–‡çš„åœ°æ–¹ä½¿ç”¨ latex å…¬å¼ä¹¦å†™ï¼›</li><li>ä½¿ç”¨å¤–éƒ¨</li><li>åˆå¹¶å®‹ä½“å’Œæ–°ç½—é©¬å­—ä½“ä¸ºæ–°å­—ä½“<code>timessimsun</code>ï¼Œé‡æ–°å¯¼å…¥ matplotlib</li></ol><h2 id="ç¬¬ä¸€ç§æ–¹æ¡ˆï¼šå…¨å±€å®‹ä½“-latex-æ–°ç½—é©¬"><a href="#ç¬¬ä¸€ç§æ–¹æ¡ˆï¼šå…¨å±€å®‹ä½“-latex-æ–°ç½—é©¬" class="headerlink" title="ç¬¬ä¸€ç§æ–¹æ¡ˆï¼šå…¨å±€å®‹ä½“+latex æ–°ç½—é©¬"></a>ç¬¬ä¸€ç§æ–¹æ¡ˆï¼šå…¨å±€å®‹ä½“+latex æ–°ç½—é©¬</h2><p>æ¯”å¦‚åœ¨ç»˜åˆ¶ text æ—¶ï¼Œè‹±æ–‡ä½¿ç”¨ latex å…¬å¼è¿›è¡Œä¹¦å†™ï¼Œå¯å°†è‹±æ–‡æ˜¾ç¤ºä¸ºæ–°ç½—é©¬å­—ä½“ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> matplotlib.pyplot <span class="hljs-keyword">as</span> plt<br>rc = &#123;<span class="hljs-string">&quot;font.family&quot;</span> : <span class="hljs-string">&quot;Times New Roman&quot;</span>,<br>      <span class="hljs-string">&quot;mathtext.fontset&quot;</span> : <span class="hljs-string">&quot;stix&quot;</span>,<br>      &#125;<br>plt.rcParams.update(rc)<br>fig,ax = plt.subplots(dpi = <span class="hljs-number">300</span>)<br>ax.set_xlabel(<span class="hljs-string">r&#x27;å¯†åº¦$\mathrm&#123;kg/m&#125;^3$&#x27;</span>,fontname = <span class="hljs-string">&#x27;SimSun&#x27;</span>,fontsize = <span class="hljs-number">20</span>)<br>ax.text(<span class="hljs-number">0.2</span>,<span class="hljs-number">0.8</span>,<span class="hljs-string">r&#x27;å®‹ä½“ $\mathrm&#123;Times New Roman&#125;$(æ­£ä½“)&#x27;</span>,fontname = <span class="hljs-string">&#x27;SimSun&#x27;</span>,fontsize = <span class="hljs-number">20</span>)<br>ax.text(<span class="hljs-number">0.2</span>,<span class="hljs-number">0.6</span>,<span class="hljs-string">r&#x27;å®‹ä½“ $Times New Roman$(æ–œä½“)&#x27;</span>,fontname = <span class="hljs-string">&#x27;SimSun&#x27;</span>,fontsize = <span class="hljs-number">20</span>)<br>ax.text(<span class="hljs-number">0.2</span>,<span class="hljs-number">0.4</span>,<span class="hljs-string">r&#x27;$\mathrm&#123;m^3&#125;\ m^3$&#x27;</span>,fontsize = <span class="hljs-number">30</span>)<br>fig.tight_layout()<br>plt.show()<br></code></pre></td></tr></table></figure><p><img src="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/image-20240417004233122.png" alt="image-20240417004233122"></p><p>è¿™æ—¶å¯èƒ½è¿˜æ˜¯ä¸è¡Œï¼ŒåŸå› æ˜¯<code>matplotlib</code>æ²¡æœ‰æ‰¾åˆ°å®‹ä½“</p><p><strong>ä¿®æ”¹é…ç½®æ–‡ä»¶</strong></p><p><code>C:\Users\23984\.conda\envs\py-data-deal\Lib\site-packages\matplotlib\mpl-data\matplotlibrc</code>ï¼Œä¹Ÿå°±æ˜¯<code>Python</code>ç›®å½•ä¸‹çš„<code>Lib\site-packages\matplotlib\mpl-data\matplotlibrc</code></p><p>ä¿®æ”¹å­—ä½“ç±»å‹ä¸º<code>serif</code>ï¼Œå¹¶æ·»åŠ å®‹ä½“</p><p><img src="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/image-20240417010437557.png" alt="image-20240417010437557"></p><p><strong>æ›´æ”¹ç¼“å­˜æ–‡ä»¶</strong></p><p><code>C:\Users\23984\.matplotlib\fontlist-v330.json</code></p><p>åœ¨ ttflist ä¸­é‡æ–°æ–°å¢ä¸€ä»½<code>simsun</code>å­—ä½“ï¼Œå®šä½åˆ°å­—ä½“å­˜æ”¾çš„ä½ç½®</p><blockquote><p>è¿™ä¸ªå­—ä½“å¯åœ¨ç”µè„‘é»˜è®¤å­—ä½“åº“ä¸­æ‰¾åˆ°ï¼Œåœ¨<code>C:\Windows\Fonts</code>ç›®å½•ä¸‹</p></blockquote><p><img src="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/image-20240417010608917.png" alt="image-20240417010608917"></p><p>å®Œæˆ</p><blockquote><p>ä½†æ˜¯è¿™ä¸ªæ–¹æ³•æœ‰ä¸ªå¾ˆæ˜æ˜¾çš„å±€é™æ€§ï¼Œå°±æ˜¯éœ€è¦æ‰‹åŠ¨åœ¨è‹±æ–‡çš„åœ°æ–¹è¾“å…¥ latex å…¬å¼ï¼Œå…¶ä¸€å¯¹ä¸ç†Ÿæ‚‰ latex çš„ä¼™ä¼´ä¸å‹å¥½ï¼Œå…¶äºŒè‹¥æ•°å­—æ˜¯å­˜å‚¨åœ¨ä¸€ä¸ªå˜é‡ä¸­å¦‚ä½•åœ¨ latex è·å–å˜é‡çš„å€¼ã€‚æ¯”å¦‚åœ¨ç»˜åˆ¶ lengend æ—¶ï¼Œ1000g&#x2F;m3 ä¸­çš„ 1000 æ˜¯å­˜å‚¨åœ¨åŠ¨æ€å˜é‡ä¸­çš„ï¼Œè¿™æ—¶å°±ä¸èƒ½é€šè¿‡ç¬¬ä¸€ç§æ–¹æ³•æ˜¾ç¤ºæ›´æ”¹ä¸ºæ–°ç½—é©¬å­—ä½“ã€‚</p></blockquote><h2 id="ç¬¬äºŒç§æ–¹æ¡ˆï¼šlatex-åŒ…"><a href="#ç¬¬äºŒç§æ–¹æ¡ˆï¼šlatex-åŒ…" class="headerlink" title="ç¬¬äºŒç§æ–¹æ¡ˆï¼šlatex åŒ…"></a>ç¬¬äºŒç§æ–¹æ¡ˆï¼šlatex åŒ…</h2><p>è¿™ç§æ–¹æ¡ˆéœ€è¦ä½¿ç”¨ç¬¬ä¸‰æ–¹ LaTex åŒ… ï¼ŒxeCJK æ˜¯ä¸€ä¸ªæä¾›ä¸­æ–‡ã€æ—¥æ–‡å’ŒéŸ©æ–‡æ”¯æŒçš„è½¯ä»¶åŒ…ã€‚è¾“å…¥ä»¥ä¸‹ä»£ç è€æ˜¯æŠ¥é”™ï¼Œç›®å‰æˆ‘æ²¡æœ‰æˆåŠŸï¼Œæ‰€ä»¥æ­¤æ–¹æ¡ˆä¸åšè¯¦ç»†ä»‹ç»ï¼Œå¦‚æœæœ‰å°ä¼™ä¼´é€šè¿‡è¿™ç§æ–¹æ³•æˆåŠŸäº†ï¼Œè¿˜è¯·ä¸€èµ·äº¤æµå­¦ä¹ ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> matplotlib<br>mpl.use(<span class="hljs-string">&#x27;pgf&#x27;</span>) <span class="hljs-comment"># stwich backend to pgf</span><br><span class="hljs-keyword">import</span> matplotlib.pyplot <span class="hljs-keyword">as</span> plt<br>    plt.rcParams.update(&#123;<br>    <span class="hljs-string">&quot;text.usetex&quot;</span>: <span class="hljs-literal">True</span>,<span class="hljs-comment"># use default xelatex</span><br>    <span class="hljs-string">&quot;pgf.rcfonts&quot;</span>: <span class="hljs-literal">False</span>,<span class="hljs-comment"># turn off default matplotlib fonts properties</span><br>    <span class="hljs-string">&quot;pgf.preamble&quot;</span>: [<br>         <span class="hljs-string">r&#x27;\usepackage&#123;fontspec&#125;&#x27;</span>,<br>         <span class="hljs-string">r&#x27;\setmainfont&#123;Times New Roman&#125;&#x27;</span>,<span class="hljs-comment"># EN fonts Romans</span><br>         <span class="hljs-string">r&#x27;\usepackage&#123;xeCJK&#125;&#x27;</span>,<span class="hljs-comment"># import xeCJK</span><br>         <span class="hljs-string">r&#x27;\setCJKmainfont&#123;SimSun&#125;&#x27;</span>,<span class="hljs-comment"># set CJK fonts as SimSun</span><br>         <span class="hljs-string">r&#x27;\xeCJKsetup&#123;CJKecglue=&#125;&#x27;</span>,<span class="hljs-comment"># turn off one space between CJK and EN fonts</span><br>         ]<br>&#125;)<br>plt.rcParams[<span class="hljs-string">&#x27;savefig.dpi&#x27;</span>]=<span class="hljs-number">300</span><br>plt.figure(figsize=(<span class="hljs-number">4.5</span>, <span class="hljs-number">2.5</span>))<br>plt.plot(<span class="hljs-built_in">range</span>(<span class="hljs-number">5</span>))<br>plt.text(<span class="hljs-number">2.5</span>, <span class="hljs-number">2.</span>, <span class="hljs-string">&quot;\CJKfontspec&#123;SimHei&#125;&#123;é»‘ä½“æ ‡æ³¨&#125;&quot;</span>)<span class="hljs-comment"># Annotation by SimHei</span><br>plt.xlabel(<span class="hljs-string">&quot;å®‹ä½“åæ ‡æ ‡ç­¾(units)&quot;</span>)<span class="hljs-comment"># CJK&amp;EN fonts mixed</span><br>plt.tight_layout(<span class="hljs-number">.5</span>)<br>plt.savefig(<span class="hljs-string">&#x27;examples.png&#x27;</span>)<br></code></pre></td></tr></table></figure><h2 id="ç¬¬ä¸‰ç§æ–¹æ³•ï¼šåˆå¹¶æ–°å­—ä½“"><a href="#ç¬¬ä¸‰ç§æ–¹æ³•ï¼šåˆå¹¶æ–°å­—ä½“" class="headerlink" title="ç¬¬ä¸‰ç§æ–¹æ³•ï¼šåˆå¹¶æ–°å­—ä½“"></a>ç¬¬ä¸‰ç§æ–¹æ³•ï¼šåˆå¹¶æ–°å­—ä½“</h2><p>è¿™æ˜¯æ¯”è¾ƒæ¨èçš„ä¸€ç§æ–¹æ³•ï¼Œå°±æ˜¯å°†æ–°ç½—é©¬å’Œå®‹ä½“ä¸¤ç§å­—ä½“åˆå¹¶ä¸ºä¸€ç§å­—ä½“ä½¿ç”¨ï¼Œéœ€è¦ä½¿ç”¨å­—ä½“åˆå¹¶å·¥å…·ï¼Œè¿™é‡Œæˆ‘ç›´æ¥åœ¨ç½‘ä¸Šæ‰¾åˆ°äº†åˆ«äººåˆå¹¶å¥½çš„ï¼Œ<a href="https://pan.baidu.com/s/1Dis12wv7cbDE-l61oGcnWQ?pwd=t036">ç‚¹å‡»ä¸‹è½½</a>ã€‚</p><p>å°†åˆå¹¶å¥½çš„å­—ä½“æ”¾åœ¨<code>matplotlib</code>åŒ…ç›®å½•ä¸‹ï¼Œæˆ‘è¿™é‡Œä½¿ç”¨çš„æ˜¯<code>anaconda</code>å­—ä½“æ–‡ä»¶å¤¹æ˜¯<code>C:\Users\23984\.conda\envs\py-data-deal\Lib\site-packages\matplotlib\mpl-data\fonts\ttf</code>ï¼Œåœ¨<code>Python</code>ç¯å¢ƒä¸‹çš„<code>Lib\site-packages\matplotlib\mpl-data\fonts\ttf</code></p><p><img src="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/image-20240417005515518.png" alt="image-20240417005515518"></p><p><strong>ä¿®æ”¹é…ç½®æ–‡ä»¶</strong></p><p><code>C:\Users\23984\.conda\envs\py-data-deal\Lib\site-packages\matplotlib\mpl-data\matplotlibrc</code>ï¼Œä¹Ÿå°±æ˜¯<code>Python</code>ç›®å½•ä¸‹çš„<code>Lib\site-packages\matplotlib\mpl-data\matplotlibrc</code></p><p>ä¿®æ”¹å­—ä½“ç±»å‹ä¸º<code>serif</code>ï¼Œå¹¶æ·»åŠ æ–°å’Œæˆçš„å­—ä½“</p><p><img src="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/image-20240417005737211.png" alt="image-20240417005737211"></p><p><strong>æ›´æ”¹ç¼“å­˜æ–‡ä»¶</strong></p><p><code>C:\Users\23984\.matplotlib\fontlist-v330.json</code></p><p>åœ¨ ttflist ä¸­é‡æ–°æ–°å¢ä¸€ä»½<code>timessimsun</code>å­—ä½“ï¼Œå®šä½åˆ°å­—ä½“å­˜æ”¾çš„ä½ç½®</p><p><img src="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/image-20240417005920759.png" alt="image-20240417005920759"></p><p><strong>æµ‹è¯•ä»£ç </strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> matplotlib.pyplot <span class="hljs-keyword">as</span> plt<br><span class="hljs-keyword">from</span> matplotlib <span class="hljs-keyword">import</span> rcParams<br><br><br>config = &#123;<br>      <span class="hljs-string">&quot;font.family&quot;</span>:<span class="hljs-string">&#x27;serif&#x27;</span>,<br>      <span class="hljs-string">&quot;mathtext.fontset&quot;</span>:<span class="hljs-string">&#x27;stix&#x27;</span>,<br>      <span class="hljs-string">&quot;font.serif&quot;</span>: <span class="hljs-string">&#x27;timessimsun&#x27;</span>,<br>&#125;<br>rcParams.update(config)<br>plt.rcParams[<span class="hljs-string">&#x27;axes.unicode_minus&#x27;</span>] = <span class="hljs-literal">False</span>    <span class="hljs-comment"># è§£å†³è´Ÿå·æ˜¾ç¤ºä¸ºæ–¹å—çš„é—®é¢˜</span><br><br>fig,ax = plt.subplots(dpi = <span class="hljs-number">300</span>)<br>ax.set_xlabel(<span class="hljs-string">r&#x27;å¯†åº¦$\mathrm&#123;kg/m&#125;^3$&#x27;</span>,fontsize = <span class="hljs-number">20</span>)<br>ax.text(<span class="hljs-number">0.05</span>,<span class="hljs-number">0.6</span>,<span class="hljs-string">r&#x27;matplotlibä¸­æ–‡ä½¿ç”¨å®‹ä½“è‹±æ–‡ä½¿ç”¨æ–°ç½—é©¬&#x27;</span>,fontsize = <span class="hljs-number">20</span>)<br>fig.tight_layout()<br>plt.show()<br></code></pre></td></tr></table></figure><p><img src="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/image-20240417011423583.png" alt="image-20240417011423583"></p><p>å®Œæˆ</p><blockquote><p>å‚è€ƒé“¾æ¥:<a href="https://stackoverflow.com/questions/44008032/how-to-mix-chinese-and-english-with-matplotlib">https://stackoverflow.com/questions/44008032/how-to-mix-chinese-and-english-with-matplotlib</a></p></blockquote>]]></content>
    
    
    <categories>
      
      <category>ç¼–ç¨‹</category>
      
      <category>Python</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Python</tag>
      
      <tag>matplotlib</tag>
      
      <tag>ç§‘ç ”</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>20240414ã€å†å¿™ä¹Ÿè¦ç…§é¡¾å¥½è‡ªå·±ã€‘</title>
    <link href="/2024/04/14/015%2020240414%E9%9A%8F%E6%83%B3/"/>
    <url>/2024/04/14/015%2020240414%E9%9A%8F%E6%83%B3/</url>
    
    <content type="html"><![CDATA[<p>è¿™äº›å¤©ä¸€ç›´å¿™ç€åšå®éªŒï¼ŒæŠŠè‡ªå·±é™·å…¥å¿™ç¢Œä¸­ï¼Œå‘ç°è‡ªå·±èº«ä¸Šçš„ç¼ºé™·è¿˜æ˜¯å¾ˆæ˜æ˜¾çš„ã€‚</p><ol><li>ä¸è™šå¿ƒæ¥å—åˆ«äººçš„å»ºè®®ï¼›</li><li>åšäº‹å®¹æ˜“æ…Œå¼ ï¼Œæ²¡æœ‰è§„åˆ’ï¼›</li></ol><p>ç¬¬ä¸€ç‚¹æˆ‘ç›¸ä¿¡å¾ˆå¤šäººéƒ½ä¼šè¿™æ ·ï¼Œå°±æ˜¯ä½ è¯´çš„å¯ä»¥å¯¹ï¼Œä½†æˆ‘ä¸€å®šä¸æ˜¯é”™çš„ã€‚æˆ‘ä¹Ÿè®¤ä¸ºæ‰¿è®¤è‡ªå·±é”™äº†æ˜¯ä¸€ä»¶éå¸¸ä¸¢äººçš„äº‹ï¼Œé‚£äº›â€œå¿ƒçµé¸¡æ±¤â€æ€»æ˜¯ä¼šè¯´è®©å‹‡äºæ‰¿è®¤è‡ªå·±çš„é”™è¯¯ï¼Œä½†å‡¡äº‹éƒ½è¦æœ‰ä¸ªå‰æã€‚æœ‰æ—¶å€™ä½ ç«™åœ¨æŸä¸ªä½ç½®ä¸èƒ½æ‰¿è®¤è‡ªå·±æ˜¯é”™è¯¯çš„ï¼Œæ”¹é”™å¾€å¾€æ¯”æ‰¿è®¤é”™è¯¯æ›´æœ‰ä»·å€¼ã€‚æ›¹æ“ä½œä¸ºç»Ÿé¢†ä¸€æ–¹çš„è¯¸ä¾¯ï¼Œæœ‰æ—¶ä¹Ÿä¼šå†³ç­–å¤±è¯¯ï¼Œæ¯”å¦‚èµ¤å£ä¹‹æˆ˜ï¼Œä½†æ˜¯ä»–å†³ä¸èƒ½æ‰¿è®¤è‡ªå·±é”™äº†ï¼Œå› ä¸ºä¸€æ—¦æ‰¿è®¤è‡ªå·±é”™äº†ï¼Œå¾ˆå¤šå°†é¢†å°±ä¼šè®¤ä¸ºä»–æ²¡æœ‰èƒ½åŠ›ç»Ÿé¢†å†›é˜Ÿã€‚è€Œæ­¤æ—¶ä»å¤±è´¥ä¸­æ€»ç»“æ•™è®­æ˜¯æœ€å¥½çš„é€‰æ‹©ï¼Œä¸ä»…èƒ½é¼“èˆå£«æ°”ï¼Œè¿˜èƒ½ä½“ç°è‡ªå·±çš„ç‹¬ç‰¹æ€§æ ¼ã€‚</p><p>æœ‰æ—¶æˆ‘ä¸æ˜¯ä¸æƒ³æ‰¿è®¤è‡ªå·±çš„é”™è¯¯ï¼Œè€Œæ˜¯æœ¬èº«å°±æ²¡æœ‰ä»€ä¹ˆé”™è¯¯å¯è¨€ã€‚åœ¨åšå®éªŒä¸­ï¼Œä¸€ä»¶å°äº‹æœ¬èº«å°±æœ‰å¾ˆå¤šç§åšæ³•ï¼Œè€Œè¿™äº›åšæ³•ä¸­éƒ½æ²¡æœ‰å¯¹é”™ä¹‹åˆ†ï¼Œåªä¸è¿‡æ˜¯æ€è€ƒé—®é¢˜è§’åº¦ä¸åŒå¯¼è‡´çš„ã€‚æ€»æœ‰æŸäº›äººè‡ªä»¥ä¸ºæ˜¯ï¼Œè®¤ä¸ºè‡ªå·±æƒ³çš„å°±æ˜¯æ­£ç¡®çš„ï¼Œå¥½ä¸ºäººå¸ˆï¼ŒæŠŠè‡ªå·±çš„æƒ³æ³•å¼ºåŠ åœ¨åˆ«äººèº«ä¸Šï¼Œè¯´ä¸€äº›è®©äººåæ„Ÿçš„è¯ï¼Œâ€œä½ é‚£äº›åšä¸æ˜¯æ›´å¥½å—ï¼Ÿâ€â€œä½ ä¸ºä»€ä¹ˆè¿™æ ·åšï¼Œä½ ä¸ºä»€ä¹ˆä¸é‚£æ ·åšâ€ã€‚æˆ‘å¿ƒé‡ŒçœŸæ˜¯æƒ³éª‚äººï¼Œå¯æ˜¯ä¸ºäº†ä¸€èµ·å®Œæˆä»»åŠ¡è¿˜æ˜¯è¦å¿ä¸‹æ¥ã€‚æˆ‘ä¸æƒ³äº‰å¯¹ä¸é”™ï¼Œå› ä¸ºæ²¡æœ‰å¯¹é”™ä¹‹åˆ†ï¼Œå³ä½¿æœ‰å¯¹é”™ä¹‹åˆ†ï¼Œéƒ½æ˜¯ä¸€äº›æ— å…³ç´§è¦çš„å°äº‹ï¼Œä½•å¿…è¦äº‰è®ºã€‚ç°åœ¨æˆ‘ä¹Ÿæ‡’å¾—å»äº‰è®ºï¼Œä½ è¯´ä»€ä¹ˆå°±æ˜¯ä»€ä¹ˆï¼Œæˆ‘ä¸æ•™è®­ä½ ï¼Œä»¥åè‡ªæœ‰äººæ•™è®­ä½ ï¼Œä½ è¯´ä½ çš„ï¼Œæˆ‘åšæˆ‘çš„å°±å¥½äº†ã€‚</p><p>ä»Šå¤©æ˜¯ 14 å·äº†ï¼ŒæŠ‘çˆ†éƒ¨åˆ†åšçš„ç¨€ç¢ã€‚å®éªŒè¿‡ç¨‹ä¸­æ€»ä¼šé‡è§å„ç§å„æ ·çš„é—®é¢˜ï¼Œæœ‰æ—¶ä¸€ä¸ªå°é—®é¢˜èƒ½å¡äººå¾ˆé•¿æ—¶é—´ã€‚ä»Šå¤©å› ä¸ºç‚¹ç«ç”µæçš„äº‹è®©äººå¾ˆå´©æºƒï¼Œä¸€ä¼šèƒ½æ‰“å¾—ç€ç«ä¸€ä¼šæ‰“ä¸ç€ï¼Œå³ä½¿è¿™æ¬¡èƒ½æ‰“ç€ï¼Œå—åˆ°ä¸€ç‚¹æ‰°åŠ¨å°±æ‰“ä¸ç€ã€‚120L çƒå›ºä½“é‡å¤æ€§æå·®ï¼Œå‹åŠ›æ›²çº¿ä¸‹é™æ®µæœ‰ä¸€å°èŠ‚å¹³æ»‘æ®µï¼Œä¸€å¼€å§‹è®¤ä¸ºæ˜¯ç‚¹ç«æ—¶é—´çš„é—®é¢˜ï¼Œä¹‹ååˆè®¤ä¸ºæ˜¯ä¼ æ„Ÿå™¨çš„é—®é¢˜ï¼Œä½†åæ¥æ¢äº†æ°¢æ°”è¿˜æ˜¯ä¼šå‡ºç°è¿™ç§çŠ¶å†µï¼Œåˆ°ç°åœ¨éƒ½æ²¡æœ‰æ‰¾åˆ°åŸå› ã€‚ä¸ç®¡äº†ï¼Œæ˜å¤©ç›´æ¥åšæ°”ä½“çš„æŠ‘çˆ†å®éªŒï¼Œæ²¡æœ‰è¿™ä¹ˆå¤šæ—¶é—´è®©æˆ‘æƒ³åŸå› ï¼Œç›®å‰æœ€é‡è¦çš„å°±æ˜¯å®Œæˆé¡¹ç›®çš„ç›¸å…³å®éªŒï¼Œå°¤å…¶æ˜¯æ°”ä½“çš„ã€‚æ˜å¤©å¼€å§‹åšæ°”ä½“çš„ç©ºç™½å®éªŒä»¥åŠæŠ‘çˆ†å®éªŒï¼Œè€æ¿çš„ç›®çš„æ˜¯èƒ½æŠ‘åˆ¶ä½ï¼Œæˆ‘çš„ç›®çš„æ˜¯æœ‰æ•°æ®ï¼Œåªæœ‰æœ‰æ•ˆæœå°±å¥½ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>éšæƒ³</category>
      
    </categories>
    
    
    <tags>
      
      <tag>éšæƒ³</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>20240401ã€é’æ„ŸåŠ›ã€‘</title>
    <link href="/2024/04/01/014%2020240401%E9%9A%8F%E6%83%B3/"/>
    <url>/2024/04/01/014%2020240401%E9%9A%8F%E6%83%B3/</url>
    
    <content type="html"><![CDATA[<p>ç½‘ä¸Šæ€»æ˜¯èƒ½çœ‹åˆ°è¿™æ ·çš„æ¯’é¸¡æ±¤ï¼šâ€œå¤ªç”¨åŠ›çš„äººèµ°ä¸è¿œã€‚â€</p><p>æ€§æ ¼ä½¿ç„¶ï¼Œæˆ‘æœ¬æƒ³ç€è‡ªå·±èƒ½å¤Ÿå¿ƒé™å¦‚æ°´ï¼Œå¦ç„¶é¢å¯¹ç”Ÿæ´»ä¸­çš„çäº‹ã€‚ä½†åœ¨é¢å¯¹æ–°é²œäº‹ç‰©æ—¶ï¼Œè„‘è¢‹æ€»æ˜¯ä¸€å›¢æµ†ç³Šï¼Œå°¤å…¶æ˜¯å½“æŸä»¶äº‹ç”±æˆ‘æ¥ä¸»å¯¼ï¼Œè¿™ç§ç°è±¡æ„ˆåŠ æ˜æ˜¾ã€‚</p><p>ç©¶å…¶åŸå› ï¼Œæ˜¯è‡ªå·±åŠäº‹è¿˜æ˜¯ä¸ç¨³é‡ï¼Œå®¹æ˜“æ…Œä¹±ã€‚åœ¨é¢å¯¹ä¸€ä»¶äº‹æ—¶ï¼Œç¬¬ä¸€æƒ³çš„ä¸æ˜¯å¦‚ä½•å»è§£å†³è¿™ä»¶äº‹ï¼Œè€Œæ˜¯å¤ªåœ¨æ„è‡ªèº«çš„æ ‡ç­¾ï¼Œç”Ÿæ€•æŠŠäº‹æƒ…æç ¸äº†ã€‚ç»“æœå¯æƒ³è€ŒçŸ¥ï¼Œè„‘å­é‡Œå…¨éƒ¨éƒ½æ˜¯åŠä¸å¥½åˆ«äººä¼šè¯´ä»€ä¹ˆé—²è¯ä¹‹ç±»çš„åœºæ™¯ï¼Œè€Œæ²¡æœ‰å¿ƒæ€å»è§£å†³å½“å‰çš„é—®é¢˜ã€‚</p><p>ä¸çŸ¥é“è¿™ç§å¥½ä¸å¥½æ”¹å˜ï¼</p><p>ä½†æ˜¯æˆ‘æƒ³æ”¹å˜ï¼Œæˆ‘æƒ³å˜å¾—â€œé’æ„ŸåŠ›â€ä¸€äº›ã€‚</p><p>ä¸å»è¿‡åˆ†å…³æ³¨åˆ«äººçš„è¯„ä»·ï¼Œåœ¨åšäº‹æ—¶ä¸“å¿ƒåšã€‚å¦‚æœæœ‰æ¡ä»¶å¯æå‰è§„åˆ’ï¼Œæœ‰æ—¶çœ‹åˆ°åˆ«äººåŠäº‹èƒ½åŠ›å¼ºï¼Œéƒ¨åˆ†åŸå› å°±æ˜¯ä»–ä»¬æœ‰ä¸€å®šçš„ç»éªŒäº¦æˆ–æ˜¯åœ¨åŠäº‹ä¹‹å‰å·²ç»åœ¨è„‘æµ·ä¸­å°†åšäº‹æµç¨‹è¿‡äº†ä¸€éã€‚ç­‰åˆ°çœŸåŠèµ·è¿™ä»¶äº‹æ—¶ï¼Œä¸€æ˜¯å¿ƒé‡Œæœ‰ä¸€å®šçš„å‡†å¤‡ä¸ä¼šæ…Œä¹±ï¼ˆè¿™æ˜¯å¿ƒç†ä¸Šçš„ä½œç”¨ï¼‰ï¼ŒäºŒæ˜¯å·²ç»â€œåšè¿‡ä¸€éâ€ã€‚</p><ul><li>åšäººï¼šä¸è¦è¿‡åˆ†åœ¨æ„ä»–äººçœ¼å…‰ï¼Œé›†ä¸­ç²¾åŠ›æè‡ªå·±çš„äº‹ã€‚</li><li>åšäº‹ï¼šæå‰åœ¨è„‘ä¸­é¢„æ¼”ä¸€éï¼ŒæŠŠæµç¨‹ææ¸…æ¥šï¼Œå°±çŸ¥é“éš¾ç‚¹åœ¨å“ªï¼Œè¿˜ç¼ºå°‘ä»€ä¹ˆä¸œè¥¿ï¼Œä»€ä¹ˆåº”è¯¥æ³¨æ„â€¦â€¦</li></ul>]]></content>
    
    
    <categories>
      
      <category>éšæƒ³</category>
      
    </categories>
    
    
    <tags>
      
      <tag>éšæƒ³</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>è¾¹ç•Œå±‚ç†è®º</title>
    <link href="/2024/03/20/013%20%E8%BE%B9%E7%95%8C%E5%B1%82%E7%90%86%E8%AE%BA/"/>
    <url>/2024/03/20/013%20%E8%BE%B9%E7%95%8C%E5%B1%82%E7%90%86%E8%AE%BA/</url>
    
    <content type="html"><![CDATA[<h1 id="è¾¹ç•Œå±‚ç†è®º"><a href="#è¾¹ç•Œå±‚ç†è®º" class="headerlink" title="è¾¹ç•Œå±‚ç†è®º"></a>è¾¹ç•Œå±‚ç†è®º</h1><p>å…³é”®è¯ï¼š<span class="label label-primary">è¾¹ç•Œå±‚</span> <span class="label label-info">å¢é•¿æ¯”ç‡</span> <span class="label label-success">y+</span></p><p>ç–‘é—®ï¼š</p><ol><li>è¾¹ç•Œå±‚åº”è¯¥ç”»å¤šå°‘ä¸ªï¼ˆNï¼‰ï¼Ÿ</li><li>ç¬¬ä¸€å±‚ç½‘æ ¼çš„å¤§å°ï¼ˆyHï¼‰ï¼Ÿ</li><li>å¢é•¿æ¯”ç‡æ˜¯å¤šå°‘ï¼ˆGï¼‰ï¼Ÿ</li></ol><h2 id="1ã€è¾¹ç•Œå±‚ç†è®º"><a href="#1ã€è¾¹ç•Œå±‚ç†è®º" class="headerlink" title="1ã€è¾¹ç•Œå±‚ç†è®º"></a>1ã€è¾¹ç•Œå±‚ç†è®º</h2><p>æµä½“åœ¨å¤§é›·è¯ºæ•°ä¸‹ä½œç»•æµæµåŠ¨æ—¶ï¼Œåœ¨ç¦»å›ºä½“å£é¢è¾ƒè¿œå¤„ï¼Œç²˜æ€§åŠ›æ¯”æƒ¯æ€§åŠ›å°å¾—å¤šï¼Œå¯ä»¥å¿½ç•¥ï¼›ä½†åœ¨å›ºä½“å£é¢é™„è¿‘çš„è–„å±‚ä¸­ï¼Œç²˜æ€§åŠ›çš„å½±å“åˆ™ä¸èƒ½å¿½ç•¥ï¼Œæ²¿å£é¢æ³•çº¿æ–¹å‘å­˜åœ¨ç›¸å½“å¤§çš„é€Ÿåº¦æ¢¯åº¦ï¼Œè¿™ä¸€è–„å±‚å«åšè¾¹ç•Œå±‚ã€‚æµä½“çš„é›·è¯ºæ•°è¶Šå¤§ï¼Œè¾¹ç•Œå±‚è¶Šè–„ã€‚</p><p><img src="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/image-20240320150149505.png" alt="image-20240320150149505"></p><p>éœ€è¦å°çš„å•å…ƒæ¥æ•è·ç»™å®šæ–¹å‘ä¸Šçš„æ¢¯åº¦ã€‚</p><p>${\delta_{99}}$è¡¨ç¤ºé€Ÿåº¦åˆ°è¾¾è‡ªç”±æµé€Ÿåº¦ 99%æ—¶åšåº¦ã€‚</p><ol><li>åœ¨è¾¹ç•Œå±‚å†…ï¼Œç²˜æ€§åŠ›ä¸æƒ¯æ€§åŠ›åŒä¸€æ•°é‡çº§</li><li>ç”±äºè¾¹ç•Œå±‚å¾ˆè–„ï¼Œå¯ä»¥è¿‘ä¼¼è®¤ä¸ºè¾¹ç•Œå±‚ä¸­å„æˆªé¢ä¸Šçš„å‹å¼ºç­‰äºåŒä¸€æˆªé¢ä¸Šè¾¹ç•Œå±‚å¤–è¾¹ç•Œä¸Šçš„å‹å¼ºå€¼ã€‚</li></ol><h3 id="æ— ç²˜æµåŠ¨ä¸çœŸå®æµåŠ¨çš„åŒºåˆ«"><a href="#æ— ç²˜æµåŠ¨ä¸çœŸå®æµåŠ¨çš„åŒºåˆ«" class="headerlink" title="æ— ç²˜æµåŠ¨ä¸çœŸå®æµåŠ¨çš„åŒºåˆ«"></a>æ— ç²˜æµåŠ¨ä¸çœŸå®æµåŠ¨çš„åŒºåˆ«</h3><p>è€ƒè™‘è¾¹ç•Œå±‚çš„å­˜åœ¨ï¼Œåœ¨åæ–¹ä¼šå‡ºç°åˆ†ç¦»åŒº</p><p><img src="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/image-20240320154409785.png" alt="image-20240320154409785"></p><h2 id="2ã€ç¬¬ä¸€å±‚ç½‘æ ¼å¤§å°"><a href="#2ã€ç¬¬ä¸€å±‚ç½‘æ ¼å¤§å°" class="headerlink" title="2ã€ç¬¬ä¸€å±‚ç½‘æ ¼å¤§å°"></a>2ã€ç¬¬ä¸€å±‚ç½‘æ ¼å¤§å°</h2><p>yH ä¾èµ–äº y+çš„å€¼</p><p><img src="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/image-20240320151316147.png" alt="image-20240320151316147"></p><p>$$y^+&#x3D;\frac{\rho u_\tau y_p}\mu $$</p><ul><li>åŠ¨åŠ›ç²˜åº¦ï¼šå•ä½ä¸º Pa.s(N&#x2F;m2.s),å˜æ³Šï¼ˆCPï¼‰ï¼Œ1Pa.s&#x3D;10Pï¼ˆæ³Šï¼‰&#x3D;1000CPï¼ˆå˜æ³Šï¼‰</li><li>è¿åŠ¨ç²˜åº¦ Vï¼šå³åŠ¨åŠ›ç²˜åº¦ u ä¸å¯†åº¦ p çš„æ¯”å€¼ï¼šv&#x3D;u&#x2F;pï¼Œè¿åŠ¨ç²˜åº¦çš„å•ä½ä¸º m2&#x2F;sï¼Œä¹ æƒ¯å•ä½ä¸ºï¼šå˜æ–¯(mm2&#x2F;s)</li><li>è¿™é‡ŒæŒ‡çš„æ˜¯åŠ¨åŠ›ç²˜åº¦</li></ul><h2 id="3ã€æ€»é«˜åº¦"><a href="#3ã€æ€»é«˜åº¦" class="headerlink" title="3ã€æ€»é«˜åº¦"></a>3ã€æ€»é«˜åº¦</h2><p>ç½‘æ ¼è¾¹ç•Œå±‚çš„æ€»é«˜åº¦è¦åŒ…å«${\delta_{99}}$</p><p><img src="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/image-20240320151535403.png" alt="image-20240320151535403"></p><p>2 ä¸ªè¾¹ç•Œå±‚</p><p>$$y_T&#x3D;y_H+y_H*G$$</p><p><img src="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/image-20240320151740787.png" alt="image-20240320151740787"></p><p>3 ä¸ªè¾¹ç•Œå±‚</p><p>$$y_T&#x3D;y_H+y_HG+y_HG^2$$</p><p><img src="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/image-20240320151857224.png" alt="image-20240320151857224"></p><p>æˆ‘ä»¬å¯ä»¥å¾—å‡ºè¾¹ç•Œå±‚å…¬å¼</p><p>$$y_T&#x3D;y_H+y_HG+y_HG^2+y_HG^3+â€¦+y_HG^{N-1}$$</p><p>å³</p><p>$$\sum_{k&#x3D;0}^{N-1}y_HG^k&#x3D;y_H\frac{1-G^N}{1-G}$$</p><p>$$\delta_{99}&#x3D;y_H\frac{1-G^N}{1-G}$$</p><p>è€Œè¾¹ç•Œå±‚åšåº¦çš„è®¡ç®—å…¬å¼ä¸º</p><p>$$\begin{aligned}\delta_{99}&amp;&#x3D;\frac{4.91L}{\sqrt{Re_L}}\quad&amp;Re&lt;5\times10^5\\delta_{99}&amp;&#x3D;\frac{0.38L}{Re_L^{1&#x2F;5}}\quad&amp;Re&gt;5\times10^5\end{aligned}$$</p><h2 id="4ã€G-å’Œ-N-å¦‚ä½•ç¡®å®š"><a href="#4ã€G-å’Œ-N-å¦‚ä½•ç¡®å®š" class="headerlink" title="4ã€G å’Œ N å¦‚ä½•ç¡®å®š"></a>4ã€G å’Œ N å¦‚ä½•ç¡®å®š</h2><p>é¦–å…ˆå¯ä»¥å¤§è‡´çŒœæµ‹ä¸€ä¸‹</p><p><img src="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/image-20240320152635843.png" alt="image-20240320152635843"></p><p>å¦‚æœ N&gt;10ï¼Œåˆ™ç¬¬ä¸€ä¸ªç½‘æ ¼é«˜åº¦çº¦ä¸º 30</p><p>å¦‚æœ N&gt;25ï¼Œåˆ™ç¬¬ä¸€ä¸ªç½‘æ ¼é«˜åº¦çº¦ä¸º 1</p><p>é€šå¸¸</p><ul><li>1.05&lt;G&lt;1.3</li><li>10&lt;N&lt;30</li></ul><h2 id="5ã€å¦‚ä½•ç¡®å®šç½‘æ ¼æ˜¯å¥½å"><a href="#5ã€å¦‚ä½•ç¡®å®šç½‘æ ¼æ˜¯å¥½å" class="headerlink" title="5ã€å¦‚ä½•ç¡®å®šç½‘æ ¼æ˜¯å¥½å"></a>5ã€å¦‚ä½•ç¡®å®šç½‘æ ¼æ˜¯å¥½å</h2><h3 id="å°çš„ç½‘æ ¼è½¬å˜"><a href="#å°çš„ç½‘æ ¼è½¬å˜" class="headerlink" title="å°çš„ç½‘æ ¼è½¬å˜"></a>å°çš„ç½‘æ ¼è½¬å˜</h3><p><img src="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/image-20240320153250656.png" alt="image-20240320153250656"></p><h3 id="åœ¨å¤§æ¶¡æ¨¡æ‹Ÿä¸­"><a href="#åœ¨å¤§æ¶¡æ¨¡æ‹Ÿä¸­" class="headerlink" title="åœ¨å¤§æ¶¡æ¨¡æ‹Ÿä¸­"></a>åœ¨å¤§æ¶¡æ¨¡æ‹Ÿä¸­</h3><p>$$v_{sgs}&#x3D;\left(C_{s}\Delta\right)^{2}\sqrt{2S_{ij}S_{ij}}$$</p><p>ç½‘æ ¼å¤§å°çªç„¶æ”¹å˜ï¼Œä¼šå¯¼è‡´$v_{sgs}$çªç„¶æ”¹å˜</p><h3 id="åœ¨-RANS-ä¸­"><a href="#åœ¨-RANS-ä¸­" class="headerlink" title="åœ¨ RANS ä¸­"></a>åœ¨ RANS ä¸­</h3><p>ä½¿ç”¨è‡³å°‘ 3 ç§ä¸åŒçš„ç½‘æ ¼è¿›è¡Œç½‘æ ¼ç»†åŒ–ç ”ç©¶æ˜¯éå¸¸å¿…è¦çš„ã€‚</p><p><img src="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/image-20240320153804905.png" alt="image-20240320153804905"></p><p><a href="https://www.youtube.com/watch?v=1gSHN99I7L4&list=PLnJ8lIgfDbkqaOdo-twtuco-qYahdAeG8">è¾¹ç•Œå±‚ç†è®º</a></p><h2 id="é™„å½•"><a href="#é™„å½•" class="headerlink" title="é™„å½•"></a>é™„å½•</h2><h3 id="y-å®šä¹‰"><a href="#y-å®šä¹‰" class="headerlink" title="y+å®šä¹‰"></a><a href="https://www.simscale.com/forum/t/what-is-y-yplus/82394">y+å®šä¹‰</a></h3><p>æ ¹æ® y+çš„å¤§å°ï¼Œå¯ä»¥å°†æ¹æµè¾¹ç•Œå±‚åˆ†ä¸ºå¥½å¤šå±‚ã€‚</p><ol><li>ç²˜æ€§å­å±‚($y^{+} &lt; 5$)ï¼šç²˜æ€§å½±å“å æ®ä¸»è¦åœ°ä½ï¼Œé›·è¯ºåº”åŠ›å¯å¿½ç•¥ï¼Œåˆ™$u^{+} &#x3D; y^{+}$</li><li>å¯¹æ•°åŒºåŸŸ($y^{+} &gt; 30$)ï¼šæ¹æµåº”åŠ›å ä¸»å¯¼åœ°ä½ï¼Œ$u^+&#x3D;\frac1\kappa ln(y^+)+B$ï¼Œå…¶ä¸­ k&#x3D;0.41,B&#x3D;5.2</li><li>ç¼“å†²å±‚($5 &lt; y^{+} &lt; 30$)ï¼šç²˜æ€§åº”åŠ›å’Œæ¹æµåº”åŠ›çš„å¤§å°ç›¸è¿‘ï¼Œç”±äºè¯¥åŒºåŸŸæ¯”è¾ƒå¤æ‚ï¼Œé€Ÿåº¦å‰–é¢çš„å®šä¹‰ä¸æ˜ç¡®ï¼ŒåŸå§‹å£é¢å‡½æ•°ä¼šé¿å¼€ä½äºè¯¥åŒºåŸŸçš„ç¬¬ä¸€ä¸ªå•å…ƒä¸­å¿ƒã€‚</li></ol><p><img src="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/20240320162112.png" alt="The Law of the Wall"></p><p>å£é¢å‡½æ•°è¦æ±‚ç¬¬ä¸€å±‚ç½‘æ ¼å°ºå¯¸$30&lt;y^{+}&lt;300$</p><p><img src="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/20240320164028.png" alt="y+åº”ç”¨"></p>]]></content>
    
    
    <categories>
      
      <category>æ¨¡æ‹Ÿ</category>
      
      <category>åŸºç¡€çŸ¥è¯†</category>
      
    </categories>
    
    
    <tags>
      
      <tag>æ¨¡æ‹Ÿ</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Openfoamè‡ªå®šä¹‰æ±‚è§£å™¨</title>
    <link href="/2024/03/20/012%20Openfoam%E8%87%AA%E5%AE%9A%E4%B9%89%E6%B1%82%E8%A7%A3%E5%99%A8/"/>
    <url>/2024/03/20/012%20Openfoam%E8%87%AA%E5%AE%9A%E4%B9%89%E6%B1%82%E8%A7%A3%E5%99%A8/</url>
    
    <content type="html"><![CDATA[<h1 id="1ã€æ±‚è§£å™¨"><a href="#1ã€æ±‚è§£å™¨" class="headerlink" title="1ã€æ±‚è§£å™¨"></a>1ã€æ±‚è§£å™¨</h1><h2 id="1-1-å¤åˆ¶æºç "><a href="#1-1-å¤åˆ¶æºç " class="headerlink" title="1.1 å¤åˆ¶æºç "></a>1.1 å¤åˆ¶æºç </h2><p>æœ¬æ¡ˆä¾‹ä»¥ icoFoam ä¸ºä¾‹ï¼Œå¤åˆ¶ã€openFOAM&#x2F;OpenFOAM-9&#x2F;applications&#x2F;solvers&#x2F;incompressible&#x2F;icoFoamã€‘æ–‡ä»¶å¤¹è‡³ run æ–‡ä»¶å¤¹ä¸‹ï¼ˆæˆ‘çš„æ˜¯ã€openFOAM&#x2F;mtl-9&#x2F;run&#x2F;solvers&#x2F;incompressibleã€‘ï¼‰</p><p><img src="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/202306131700207.png" alt="image.png"></p><h2 id="1-2-ä¿®æ”¹åç§°"><a href="#1-2-ä¿®æ”¹åç§°" class="headerlink" title="1.2 ä¿®æ”¹åç§°"></a>1.2 ä¿®æ”¹åç§°</h2><p>å°†æ–‡ä»¶å¤¹é‡æ–°å‘½åä¸ºã€myIconFoamã€‘<br><img src="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/202306131703290.png" alt="image.png"></p><p>ä¿®æ”¹è¯¥ç›®å½•ä¸‹çš„æ–‡ä»¶åç§°ï¼Œä¸ºäº†ä¾¿äºåˆ†è¾¨æ˜¯è‡ªå·±çš„æ±‚è§£å™¨ï¼Œåœ¨æºä»£ç é‡Œè¾“å‡ºä¸€äº›å†…å®¹</p><p><img src="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/image-20230614001149142.png" alt="image-20230614001149142"></p><p><img src="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/202306131703091.png" alt="image.png"></p><h2 id="1-3-ä¿®æ”¹-files"><a href="#1-3-ä¿®æ”¹-files" class="headerlink" title="1.3 ä¿®æ”¹ files"></a>1.3 ä¿®æ”¹ files</h2><p>ä¿®æ”¹ã€Make&#x2F;filesã€‘</p><p><img src="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/202306131704567.png" alt="image.png"></p><p>æ³¨æ„ï¼šè¿™é‡Œè·¯å¾„è¦æ”¹ä¸ºã€$(FOAM_USER_APPBIN)ã€‘ï¼Œä¸ä¹‹å‰ã€FOAM_USER_APPBINã€‘åŒºåˆ«</p><p><img src="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/202306131705640.png" alt="image.png"></p><h2 id="1-4-ç¼–è¯‘"><a href="#1-4-ç¼–è¯‘" class="headerlink" title="1.4 ç¼–è¯‘"></a>1.4 ç¼–è¯‘</h2><p>è¾“å…¥ã€wmakeã€‘</p><p><img src="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/image-20230614001032908.png" alt="image-20230614001032908"></p><p>ç¼–è¯‘æˆåŠŸä¹‹åå¼€å§‹ä½¿ç”¨</p><h1 id="2ã€ä½¿ç”¨"><a href="#2ã€ä½¿ç”¨" class="headerlink" title="2ã€ä½¿ç”¨"></a>2ã€ä½¿ç”¨</h1><p>å¤åˆ¶ä¸€ä»½ cavity æ¡ˆä¾‹</p><p>blockMesh åˆ’åˆ†ç½‘æ ¼</p><p>myIcoFoam æ±‚è§£</p><p><img src="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/image-20230614001314507.png" alt="image-20230614001314507"></p><h1 id="3ã€è¿›é˜¶"><a href="#3ã€è¿›é˜¶" class="headerlink" title="3ã€è¿›é˜¶"></a>3ã€è¿›é˜¶</h1><p>æœ¬æ¡ˆä¾‹ä¿®æ”¹ icoFoam æ±‚è§£å™¨ï¼Œæ·»åŠ æ¸©åº¦é¡¹ã€‚<br>$$\frac{\partial T}{\partial t} + \bigtriangledown \cdot (UT)-{\bigtriangledown }^2(D_{T}T)&#x3D;0$$</p><h2 id="3-1-ä¿®æ”¹æºæ–‡ä»¶"><a href="#3-1-ä¿®æ”¹æºæ–‡ä»¶" class="headerlink" title="3.1 ä¿®æ”¹æºæ–‡ä»¶"></a>3.1 ä¿®æ”¹æºæ–‡ä»¶</h2><p>æ·»åŠ ä»¥ä¸‹ä»£ç ï¼ŒåŠä¸Šè¿°æ–¹ç¨‹</p><p><img src="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/image-20230614005652819.png" alt="image-20230614005652819"></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-function">fvScalarMatrix <span class="hljs-title">TEqn</span></span><br><span class="hljs-function"><span class="hljs-params">(</span></span><br><span class="hljs-params"><span class="hljs-function">    fvm::ddt(T) + fvm::div(phi, T) - fvm::laplacian(DT, T)</span></span><br><span class="hljs-params"><span class="hljs-function">)</span></span>;<br>TEqn.<span class="hljs-built_in">solve</span>();<br></code></pre></td></tr></table></figure><h2 id="3-2-ä¿®æ”¹åœºæ–‡ä»¶"><a href="#3-2-ä¿®æ”¹åœºæ–‡ä»¶" class="headerlink" title="3.2 ä¿®æ”¹åœºæ–‡ä»¶"></a>3.2 ä¿®æ”¹åœºæ–‡ä»¶</h2><p>æ–°å¢ä»¥ä¸‹æœ‰å…³æ¸©åº¦é¡¹çš„ä»£ç </p><p><img src="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/image-20230614005903552.png" alt="image-20230614005903552"></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs c++">IOdictionary myProperties <span class="hljs-comment">// æ–°å¢ä¸€ä¸ªmyPropertiesé¡¹</span><br>(<br>    <span class="hljs-built_in">IOobject</span><br>    (<br>        <span class="hljs-string">&quot;myProperties&quot;</span>,<br>        runTime.<span class="hljs-built_in">system</span>(), <span class="hljs-comment">// å­˜å‚¨åœ¨systemæ–‡ä»¶å¤¹ä¸‹</span><br>        mesh,<br>        IOobject::MUST_READ_IF_MODIFIED,<br>        IOobject::NO_WRITE<br>    )<br>);<br><br>dimensionedScalar DT <span class="hljs-comment">// å®šä¹‰ä¸€ä¸ªå˜é‡DTï¼Œä»myPropertiesä¸­è·å–</span><br>(<br>    <span class="hljs-string">&quot;DT&quot;</span>,<br>    myProperties.<span class="hljs-built_in">lookup</span>(<span class="hljs-string">&quot;DT&quot;</span>)<br>);<br><br>Info&lt;&lt; <span class="hljs-string">&quot;Reading field T\n&quot;</span> &lt;&lt; endl;<br>volScalarField T <span class="hljs-comment">// å®šä¹‰ä¸€ä¸ªå˜é‡T</span><br>(<br>    <span class="hljs-built_in">IOobject</span><br>    (<br>        <span class="hljs-string">&quot;T&quot;</span>,<br>        runTime.<span class="hljs-built_in">timeName</span>(),<br>        mesh,<br>        IOobject::MUST_READ,<br>        IOobject::AUTO_WRITE<br>    ),<br>    mesh<br>);<br></code></pre></td></tr></table></figure><h2 id="3-3-ç¼–è¯‘"><a href="#3-3-ç¼–è¯‘" class="headerlink" title="3.3 ç¼–è¯‘"></a>3.3 ç¼–è¯‘</h2><p>ä¿®æ”¹å®Œæˆä¹‹åï¼Œã€wmakeã€‘ç¼–è¯‘</p><p><img src="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/image-20230614010106515.png" alt="image-20230614010106515"></p><h2 id="3-4-ä½¿ç”¨"><a href="#3-4-ä½¿ç”¨" class="headerlink" title="3.4 ä½¿ç”¨"></a>3.4 ä½¿ç”¨</h2><h3 id="3-4-1-åˆå§‹æ¡ä»¶"><a href="#3-4-1-åˆå§‹æ¡ä»¶" class="headerlink" title="3.4.1 åˆå§‹æ¡ä»¶"></a>3.4.1 åˆå§‹æ¡ä»¶</h3><p>å¤åˆ¶ p æ–‡ä»¶è‡³ Tï¼Œæ”¹å˜åç§°ã€å•ä½ã€åˆå§‹å€¼å’Œè¾¹ç•Œæ¡ä»¶</p><p><img src="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/image-20230614010203279.png" alt="image-20230614010203279"></p><h3 id="3-4-2-è‡ªå®šä¹‰å±æ€§"><a href="#3-4-2-è‡ªå®šä¹‰å±æ€§" class="headerlink" title="3.4.2 è‡ªå®šä¹‰å±æ€§"></a>3.4.2 è‡ªå®šä¹‰å±æ€§</h3><p>å¤åˆ¶ constant é‡Œçš„æ–‡ä»¶ã€transportPropertiesã€‘æ–‡ä»¶è‡³ systemï¼Œä¿®æ”¹åç§° myProperties</p><p><img src="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/image-20230614010351434.png" alt="image-20230614010351434"></p><h3 id="3-4-3-æ–°å¢ç¦»æ•£æ ¼å¼"><a href="#3-4-3-æ–°å¢ç¦»æ•£æ ¼å¼" class="headerlink" title="3.4.3 æ–°å¢ç¦»æ•£æ ¼å¼"></a>3.4.3 æ–°å¢ç¦»æ•£æ ¼å¼</h3><p>æ–°å¢ div(phi,T)çš„ç¦»æ•£æ ¼å¼</p><p><img src="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/image-20230614010458808.png" alt="image-20230614010458808"></p><h3 id="3-4-4-æ–°å¢æ±‚è§£é¡¹"><a href="#3-4-4-æ–°å¢æ±‚è§£é¡¹" class="headerlink" title="3.4.4 æ–°å¢æ±‚è§£é¡¹"></a>3.4.4 æ–°å¢æ±‚è§£é¡¹</h3><p><img src="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/image-20230614010607465.png" alt="image-20230614010607465"></p><h3 id="3-4-5-æ±‚è§£"><a href="#3-4-5-æ±‚è§£" class="headerlink" title="3.4.5 æ±‚è§£"></a>3.4.5 æ±‚è§£</h3><p>åˆ’åˆ†ç½‘æ ¼ï¼šblockMesh</p><p>æ±‚è§£ï¼šmyIcoFoam</p><p><img src="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/image-20230614010711878.png" alt="image-20230614010711878"></p><p>å®Œæˆ</p>]]></content>
    
    
    <categories>
      
      <category>æ¨¡æ‹Ÿ</category>
      
      <category>Openfoam</category>
      
    </categories>
    
    
    <tags>
      
      <tag>æ¨¡æ‹Ÿ</tag>
      
      <tag>Openfoam</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>è…¾è®¯äº‘+å®å¡”+Hexoæ­å»ºä¸ªäººåšå®¢</title>
    <link href="/2024/03/19/011%20%E8%85%BE%E8%AE%AF%E4%BA%91+%E5%AE%9D%E5%A1%94+Hexo%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2/"/>
    <url>/2024/03/19/011%20%E8%85%BE%E8%AE%AF%E4%BA%91+%E5%AE%9D%E5%A1%94+Hexo%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2/</url>
    
    <content type="html"><![CDATA[<h1 id="1ã€æœåŠ¡å™¨è´­ä¹°"><a href="#1ã€æœåŠ¡å™¨è´­ä¹°" class="headerlink" title="1ã€æœåŠ¡å™¨è´­ä¹°"></a>1ã€æœåŠ¡å™¨è´­ä¹°</h1><p>æˆ‘è¿™é‡Œä¹°çš„æ˜¯è…¾è®¯äº‘çš„è½»é‡æœåŠ¡å™¨ï¼Œé€‰æ‹© centos ç‰ˆæœ¬ã€‚<a href="https://cloud.tencent.com/act/pro/2024spring?from=21932">ç½‘ç«™</a></p><p><img src="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/image-20240318092649737.png" alt="image-20240318092649737"></p><p>è´­ä¹°å®Œæˆå¯åœ¨æœåŠ¡å™¨åˆ—è¡¨ä¸­æŸ¥çœ‹</p><p><img src="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/image-20240318092813799.png" alt="image-20240318092813799"></p><p>ç‚¹å‡»æœåŠ¡å™¨å¡ç‰‡ä¸Šã€æ›´å¤šã€‘-ã€æŸ¥çœ‹è¯¦æƒ…ã€‘ï¼Œè¿›å…¥æœåŠ¡å™¨ã€‚å¯å…ˆé‡ç½®å¯†ç </p><p><img src="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/image-20240318092956444.png" alt="image-20240318092956444"></p><p><img src="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/image-20240318093018683.png" alt="image-20240318093018683"></p><p>é‡ç½®å¯†ç åç‚¹å‡»ã€ä¸€é”®ç™»å½•ã€‘</p><p><img src="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/image-20240318093052025.png" alt="image-20240318093052025"></p><h1 id="2ã€å®å¡”å®‰è£…"><a href="#2ã€å®å¡”å®‰è£…" class="headerlink" title="2ã€å®å¡”å®‰è£…"></a>2ã€å®å¡”å®‰è£…</h1><p>åœ¨ç»ˆç«¯è¾“å…¥å®å¡”çš„å®‰è£…å‘½ä»¤ï¼Œ<a href="https://www.bt.cn/new/download.html">å®å¡”å®‰è£…</a></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">yum install -y wget &amp;&amp; wget -O install.sh https://download.bt.cn/install/install_6.0.sh &amp;&amp; sh install.sh ed8484bec<br></code></pre></td></tr></table></figure><p><img src="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/image-20240318093320260.png" alt="image-20240318093320260"></p><p>å¦‚æœå‡ºç°ä»¥ä¸‹æç¤ºè¯´æ˜éœ€è¦ç®¡ç†å‘˜æƒé™ã€‚ç»ˆç«¯è¾“å…¥<code>su</code>è¿›å…¥ç®¡ç†å‘˜æƒé™ï¼Œç„¶åæ‰§è¡Œå®‰è£…ã€‚</p><p><img src="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/image-20240318093436581.png" alt="image-20240318093436581"></p><p>å®‰è£…å¥½ä¹‹åç»ˆç«¯ä¼šæ˜¾ç¤ºå®å¡”è®¿é—®ç«¯å£å·ã€è´¦å·å’Œå¯†ç ã€‚è¾“å…¥ã€ä¸»æœºåŸŸå:ç«¯å£å·ã€‘è¿›å…¥å®å¡”é¢æ¿ï¼Œä½¿ç”¨è´¦å·å’Œå¯†ç ç™»å½•ã€‚</p><h1 id="3ã€ç½‘ç«™æ­å»º"><a href="#3ã€ç½‘ç«™æ­å»º" class="headerlink" title="3ã€ç½‘ç«™æ­å»º"></a>3ã€ç½‘ç«™æ­å»º</h1><p>ç™»å½•æˆåŠŸåï¼Œå®‰è£… php æ¨èå¥—é¤</p><p>æ·»åŠ ç«™ç‚¹</p><p><img src="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/image-20240318110109451.png" alt="image-20240318110109451"></p><p>å¡«å†™åŸŸåå’Œç½‘ç«™çš„ç›®å½•</p><p><img src="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/image-20240318110156648.png" alt="image-20240318110156648"></p><p>åœ¨æ–‡ä»¶ä¸‹é¢ä¼šçœ‹åˆ°åˆšæ‰çš„æ–‡ä»¶å¤¹ã€<code>qlbai.fun</code>ã€‘ï¼ŒæŠŠé‡Œé¢çš„æ–‡ä»¶å…¨éƒ¨åˆ é™¤ã€‚ï¼ˆå¦‚æœæ²¡æœ‰è‡ªå·±åˆ›å»ºä¸€ä¸‹ï¼‰</p><p><img src="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/image-20240318110239010.png" alt="image-20240318110239010"></p><p>æŠŠè¯¥æ–‡ä»¶å¤¹ä¸‹çš„å…¨éƒ¨æ–‡ä»¶åˆ é™¤ï¼Œåœ¨æœ¬åœ°åšå®¢ç›®å½•ä¸‹è¿è¡Œï¼Œç”Ÿæˆ public ç›®å½•</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">hexo -g<br></code></pre></td></tr></table></figure><p>ç”Ÿæˆ public ç›®å½•åå‹ç¼©ä¸€ä¸‹ï¼Œç„¶åä¸Šä¼ è‡³å®å¡”è§£å‹ç¼©</p><p><img src="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/image-20240318110424392.png" alt="image-20240318110424392"></p><p>ç„¶åå¯åŠ¨é¡¹ç›®</p><p><img src="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/image-20240318110440540.png" alt="image-20240318110440540"></p><blockquote><p>ä½¿ç”¨åŸŸåè®¿é—®ï¼Œéœ€è¦å…ˆè´­ä¹°ä¸ªåŸŸåï¼Œé€šè¿‡ DNS è§£æåˆ°è¯¥ä¸»æœºåœ°å€ä¸Šï¼Œè¿˜éœ€è¦å¤‡æ¡ˆæ‰èƒ½è®¿é—®ï¼Œè¿‡ç¨‹å°±ä¸æ¼”ç¤ºäº†ã€‚</p></blockquote><h1 id="4ã€ä¿®æ”¹å®å¡”é»˜è®¤ç«¯å£"><a href="#4ã€ä¿®æ”¹å®å¡”é»˜è®¤ç«¯å£" class="headerlink" title="4ã€ä¿®æ”¹å®å¡”é»˜è®¤ç«¯å£"></a>4ã€ä¿®æ”¹å®å¡”é»˜è®¤ç«¯å£</h1><p>å®å¡”æœåŠ¡å™¨ä½¿ç”¨çš„é»˜è®¤ç«¯å£æ˜¯ 80ï¼Œåˆ™ç½‘ç«™åªèƒ½ä½¿ç”¨å…¶ä»–ç«¯å£ï¼Œåœ¨è®¿é—®ç½‘ç«™æ—¶å°±å¾—åœ¨åé¢åŠ ç«¯å£å·ï¼Œå¾ˆä¸æ–¹ä¾¿ã€‚æ‰€ä»¥è¦ä¿®æ”¹æœåŠ¡å™¨é»˜è®¤ç«¯å£ï¼Œè¿™é‡Œæ”¹ä¸º 1180ï¼Œå°†ç½‘ç«™çš„ç«¯å£æ”¹ä¸º 80ã€‚</p><p>è¿›å…¥<code>/www/server/panel/vhost/nginx/</code>æ–‡ä»¶å¤¹ä¸‹ï¼Œå¯çœ‹åˆ°ä»¥ä¸‹å‡ ä¸ªé…ç½®æ–‡ä»¶ï¼Œ</p><p><img src="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/image-20240428161735189.png" alt="image-20240428161735189"></p><p>ä¿®æ”¹é»˜è®¤æœåŠ¡å™¨é…ç½®æ–‡ä»¶<code>0.default.conf</code>ï¼Œé»˜è®¤ç«¯å£å·ä¸º<code>1180</code></p><p><img src="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/image-20240428161827572.png" alt="image-20240428161827572"></p><p>ä¿®æ”¹<code>php</code>é…ç½®æ–‡ä»¶<code>phpfpm_status.conf</code>ï¼Œé»˜è®¤ç«¯å£å·ä¸º<code>1180</code></p><p><img src="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/image-20240428161913605.png" alt="image-20240428161913605"></p><p>ä¿®æ”¹ç½‘ç«™é…ç½®æ–‡ä»¶<code>qlbai.fun.conf</code>ï¼Œé»˜è®¤ç«¯å£å·ä¸º<code>80</code></p><p><img src="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/image-20240428162009848.png" alt="image-20240428162009848"></p><p>ä¹‹åéœ€è¦åœ¨é˜²ç«å¢™å¤„æ‰“å¼€<code>1180</code>ç«¯å£å·</p><p><img src="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/image-20240428162220684.png" alt="image-20240428162220684"></p><p><img src="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/image-20240428162228031.png" alt="image-20240428162228031"></p>]]></content>
    
    
    <categories>
      
      <category>æŠ€æœ¯</category>
      
    </categories>
    
    
    <tags>
      
      <tag>æŠ€æœ¯åˆ†äº«</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>åˆ†äº«ä¸€äº›å¸¸ç”¨çš„UDF</title>
    <link href="/2024/03/17/010%20%E5%B8%B8%E7%94%A8%E7%9A%84udf/"/>
    <url>/2024/03/17/010%20%E5%B8%B8%E7%94%A8%E7%9A%84udf/</url>
    
    <content type="html"><![CDATA[<p>ä¸‹é¢åˆ†äº«ä¸€äº›ç®€å•çš„ udfï¼Œå¸¦é¢†å°ç™½å¿«é€Ÿå…¥é—¨ã€‚</p><h1 id="1ã€Lee"><a href="#1ã€Lee" class="headerlink" title="1ã€Lee"></a>1ã€Lee</h1><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&quot;udf.h&quot;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&quot;sg_mphase.h&quot;</span>  <span class="hljs-comment">//åŒ…å«ä½“ç§¯åˆ†æ•°çš„å®</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> T_SAT 30.27   <span class="hljs-comment">//é¥±å’Œæ¸©åº¦373.15 K</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> LAT_HT 1.e3 <span class="hljs-comment">//æ±½åŒ–æ½œçƒ­1000 J/kg</span></span><br><br><br><span class="hljs-comment">// æ¶²ç›¸è´¨é‡æºé¡¹</span><br>DEFINE_SOURCE(liq_src, cell, pri_th, dS, eqn)<br>&#123;<br> Thread *mix_th, *sec_th;<br> real m_dot_l;<span class="hljs-comment">// å®šä¹‰ç›¸å˜è´¨é‡kg/(m2 s)</span><br> <span class="hljs-comment">// mix_thå­˜å‚¨ä¸»ç›¸çš„ThreadæŒ‡é’ˆï¼›sec_thå­˜å‚¨æ¬¡ç›¸æŒ‡é’ˆï¼Œæ³¨æ„ID</span><br> mix_th = THREAD_SUPER_THREAD(pri_th); <span class="hljs-comment">//æŒ‡å‘æ··åˆåŒºåŸŸçš„ä¸»ç›¸</span><br> sec_th = THREAD_SUB_THREAD(mix_th, <span class="hljs-number">1</span>); <span class="hljs-comment">//æŒ‡å‘å•ç›¸åŒºçš„æ°”ç›¸æŒ‡é’ˆ</span><br> thi_th = THREAD_SUB_THREAD(mix_th, <span class="hljs-number">2</span>); <span class="hljs-comment">//æŒ‡å‘å•ç›¸åŒºçš„æ¶²ç›¸æŒ‡é’ˆ</span><br> <span class="hljs-comment">// æ¸©åº¦å¤§äºé¥±å’Œæ¸©åº¦ï¼Œè¡¨ç¤ºä¸ºè’¸å‘</span><br> <span class="hljs-keyword">if</span> (C_T(cell, sec_th) &gt;= T_SAT)<br> &#123;<br>   <span class="hljs-comment">//è®¡ç®—è’¸å‘é‡ï¼Œæ³¨æ„æ¶²ç›¸è´¨é‡æµé‡ä¸ºè´Ÿå€¼ï¼Œ0.1ä¸ºcoeffå€¼</span><br>   m_dot_l = <span class="hljs-number">-0.25</span> * C_VOF(cell, sec_th) * C_R(cell, sec_th) * <span class="hljs-built_in">fabs</span>(C_T(cell, sec_th) - T_SAT) / T_SAT;<br>   <span class="hljs-comment">//å¯¹ä½“ç§¯åˆ†æ•°æ±‚å¯¼</span><br>   dS[eqn] = <span class="hljs-number">-0.25</span> * C_R(cell, sec_th) * <span class="hljs-built_in">fabs</span>(C_T(cell, sec_th) - T_SAT) / T_SAT;<br> &#125;<br> <span class="hljs-keyword">else</span><br> &#123;<br>   <span class="hljs-comment">//è®¡ç®—å†·å‡é‡ï¼Œæ¶²ç›¸è´¨é‡åˆ†æ•°ä¸ºæ­£å€¼</span><br>   m_dot_l = <span class="hljs-number">0.1</span> * C_VOF(cell, sec_th) * C_R(cell, sec_th) * <span class="hljs-built_in">fabs</span>(T_SAT - C_T(cell, sec_th)) / T_SAT;<br>   <span class="hljs-comment">//è‹¥å¯¹ä½“ç§¯åˆ†æ•°æ±‚å¯¼å¾—åˆ°çš„å€¼ä¸ºæ­£ï¼Œå¹²è„†ç›´æ¥èµ‹é›¶å€¼</span><br>   dS[eqn] = <span class="hljs-number">0.</span>;<br> &#125;<br> <span class="hljs-keyword">return</span> m_dot_l;<br>&#125;<br><br><br><br><span class="hljs-comment">// æ°”ç›¸è´¨é‡æºé¡¹ï¼Œè§£é‡ŠåŒä¸Š</span><br>DEFINE_SOURCE(vap_src, cell, sec_th, dS, eqn)<br>&#123;<br> Thread *mix_th, *pri_th;<br> real m_dot_v;<br> mix_th = THREAD_SUPER_THREAD(pri_th); <span class="hljs-comment">//æŒ‡å‘æ··åˆåŒºåŸŸçš„ä¸»ç›¸</span><br> sec_th = THREAD_SUB_THREAD(mix_th, <span class="hljs-number">1</span>); <span class="hljs-comment">//æŒ‡å‘å•ç›¸åŒºçš„æ°”ç›¸æŒ‡é’ˆ</span><br> thi_th = THREAD_SUB_THREAD(mix_th, <span class="hljs-number">2</span>); <span class="hljs-comment">//æŒ‡å‘å•ç›¸åŒºçš„æ¶²ç›¸æŒ‡é’ˆ</span><br> <span class="hljs-keyword">if</span> (C_T(cell, thi_th) &lt;= T_SAT)<br> &#123;<br>   m_dot_v = <span class="hljs-number">0.1</span> * C_VOF(cell,thi_th) * C_R(cell, thi_th) * <span class="hljs-built_in">fabs</span>(C_T(cell, thi_th) - T_SAT) / T_SAT;<br>   dS[eqn] = <span class="hljs-number">0.</span>;<br> &#125;<br> <span class="hljs-keyword">else</span><br> &#123;<br>   m_dot_v = <span class="hljs-number">-0.1</span> * C_VOF(cell, thi_th) * C_R(cell, thi_th) * <span class="hljs-built_in">fabs</span>(T_SAT - C_T(cell, thi_th)) / T_SAT;<br>   dS[eqn] = <span class="hljs-number">-0.1</span> * C_R(cell, thi_th) * <span class="hljs-built_in">fabs</span>(C_T(cell, thi_th) - T_SAT) / T_SAT;<br> &#125;<br> <span class="hljs-keyword">return</span> m_dot_v;<br>&#125;<br><br><br><span class="hljs-comment">//æ··åˆç›¸çš„èƒ½é‡æºé¡¹</span><br>DEFINE_SOURCE(enrg_src, cell, mix_th, dS, eqn)<br>&#123;<br> Thread *pri_th, *sec_th, *thi_th;<br> real m_dot;<br> pri_th = THREAD_SUB_THREAD(mix_th, <span class="hljs-number">0</span>);<br> sec_th = THREAD_SUB_THREAD(mix_th, <span class="hljs-number">1</span>);<br> thi_th = THREAD_SUB_THREAD(mix_th, <span class="hljs-number">2</span>);<br> <span class="hljs-keyword">if</span> (C_T(cell, mix_th) &gt;= T_SAT)<br> &#123;<br>   <span class="hljs-comment">// å¾—åˆ°è’¸å‘é‡ï¼ŒLeeæ¨¡å‹</span><br>   m_dot = <span class="hljs-number">-0.25</span> * C_VOF(cell, sec_th) * C_R(cell, sec_th) *<br>           <span class="hljs-built_in">fabs</span>(C_T(cell, sec_th) - T_SAT) / T_SAT;<br>   <span class="hljs-comment">//å¯¹æ¸©åº¦æ±‚å¯¼ï¼Œè‹¥ä¸ºè´Ÿåˆ™ä¿ç•™ï¼Œå¦åˆ™èµ‹å€¼é›¶</span><br>   dS[eqn] = <span class="hljs-number">-0.1</span> * C_VOF(cell, sec_th) * C_R(cell, sec_th) / T_SAT;<br> &#125;<br> <span class="hljs-keyword">else</span><br> &#123;<br>   <span class="hljs-comment">//å¾—åˆ°å†·å‡é‡</span><br>   m_dot = <span class="hljs-number">0.1</span> * C_VOF(cell, thi_th) * C_R(cell, thi_th) *<br>           <span class="hljs-built_in">fabs</span>(T_SAT - C_T(cell, thi_th)) / T_SAT;<br>   dS[eqn] = <span class="hljs-number">-0.1</span> * C_VOF(cell, thi_th) * C_R(cell, thi_th) / T_SAT;<br> &#125;<br><br> <span class="hljs-comment">// è¿”å›çƒ­é‡å€¼ï¼Œåˆ©ç”¨æ½œçƒ­ä¸è´¨é‡æµé‡çš„ä¹˜ç§¯å¾—åˆ°</span><br> <span class="hljs-keyword">return</span> LAT_HT * m_dot;<br>&#125;<br></code></pre></td></tr></table></figure><h1 id="2ã€ke-æ¨¡å‹"><a href="#2ã€ke-æ¨¡å‹" class="headerlink" title="2ã€ke æ¨¡å‹"></a>2ã€ke æ¨¡å‹</h1><h2 id="2-1-ke1"><a href="#2-1-ke1" class="headerlink" title="2.1 ke1"></a>2.1 ke1</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&quot;udf.h&quot;</span></span><br><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> Cu 0.09</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> Us 2.2</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> zs 10</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> a 0.15</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> ZG 350</span><br><br>DEFINE_PROFILE(k_profile,t,i)<br>&#123;<br>real z,x[ND_ND],Uz,Iz;<br><span class="hljs-type">face_t</span> f;<br><br>begin_f_loop(f,t)<br>&#123;<br>F_CENTROID(x,f,t);<br>z = x[<span class="hljs-number">2</span>];<br>Uz = Us*<span class="hljs-built_in">pow</span>(z/zs,a);<br>Iz = <span class="hljs-number">0.1</span>*<span class="hljs-built_in">pow</span>(z/ZG,-a<span class="hljs-number">-0.05</span>);<br><br>F_PROFILE(f,t,i) = <span class="hljs-built_in">pow</span>(Iz*Uz,<span class="hljs-number">2</span>);<br>&#125;<br>end_f_loop(f,thread)<br>&#125;<br><br>DEFINE_PROFILE(e_profile,t,i)<br>&#123;<br>real z,x[ND_ND],Uz,Iz,kz;<br><span class="hljs-type">face_t</span> f;<br><br>begin_f_loop(f,t)<br>&#123;<br>F_CENTROID(x,f,t);<br>z = x[<span class="hljs-number">2</span>];<br>Uz = Us*<span class="hljs-built_in">pow</span>(z/zs,a);<br>Iz = <span class="hljs-number">0.1</span>*<span class="hljs-built_in">pow</span>(z/ZG,-a<span class="hljs-number">-0.05</span>);<br>kz = <span class="hljs-built_in">pow</span>(Iz*Uz,<span class="hljs-number">2</span>);<br><br>F_PROFILE(f,t,i) = <span class="hljs-built_in">pow</span>(Cu,<span class="hljs-number">0.5</span>)*kz*Us/zs*a*<span class="hljs-built_in">pow</span>(z/zs,a<span class="hljs-number">-1</span>);<br>&#125;<br>end_f_loop(f,thread)<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="2-2-ke2"><a href="#2-2-ke2" class="headerlink" title="2.2 ke2"></a>2.2 ke2</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&quot;udf.h&quot;</span></span><br><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> Cu 0.09</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> Us 2.2</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> zs 10</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> a 0.10</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> ZG 250</span><br><br>DEFINE_PROFILE(k_profile,t,i)<br>&#123;<br>real z,x[ND_ND],Uz,Iz;<br><span class="hljs-type">face_t</span> f;<br><br>begin_f_loop(f,t)<br>&#123;<br>F_CENTROID(x,f,t);<br>z = x[<span class="hljs-number">2</span>];<br>Uz = Us*<span class="hljs-built_in">pow</span>(z/zs,a);<br><span class="hljs-keyword">if</span>(z&lt;<span class="hljs-number">5</span>)<br>Iz = <span class="hljs-number">0.18</span>;<br><span class="hljs-keyword">else</span><br>Iz = <span class="hljs-number">0.1</span>*<span class="hljs-built_in">pow</span>(z/ZG,-a<span class="hljs-number">-0.05</span>);<br>F_PROFILE(f,t,i) = <span class="hljs-number">1.5</span>*<span class="hljs-built_in">pow</span>(Uz*Iz,<span class="hljs-number">2</span>);<br>&#125;<br>end_f_loop(f,thread)<br>&#125;<br><br>DEFINE_PROFILE(e_profile,t,i)<br>&#123;<br>real z,x[ND_ND],Uz,Iz,kz,lz;<br><span class="hljs-type">face_t</span> f;<br><br>begin_f_loop(f,t)<br>&#123;<br>F_CENTROID(x,f,t);<br>z = x[<span class="hljs-number">2</span>];<br>Uz = Us*<span class="hljs-built_in">pow</span>(z/zs,a);<br><span class="hljs-keyword">if</span>(z&lt;<span class="hljs-number">5</span>)<br>Iz = <span class="hljs-number">0.18</span>;<br><span class="hljs-keyword">else</span><br>Iz = <span class="hljs-number">0.1</span>*<span class="hljs-built_in">pow</span>(z/ZG,-a<span class="hljs-number">-0.05</span>);<br>kz = <span class="hljs-number">1.5</span>*<span class="hljs-built_in">pow</span>(Uz*Iz,<span class="hljs-number">2</span>);<br>F_PROFILE(f,t,i) = F_PROFILE(f,t,i) = <span class="hljs-built_in">pow</span>(Cu,<span class="hljs-number">0.5</span>)*kz*Us/zs*a*<span class="hljs-built_in">pow</span>(z/zs,a<span class="hljs-number">-1</span>);<br>&#125;<br>end_f_loop(f,thread)<br>&#125;<br></code></pre></td></tr></table></figure><h1 id="3ã€è´¨é‡å…¥å£"><a href="#3ã€è´¨é‡å…¥å£" class="headerlink" title="3ã€è´¨é‡å…¥å£"></a>3ã€è´¨é‡å…¥å£</h1><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&quot;udf.h&quot;</span></span><br>DEFINE_PROFILE(inlet_mlih2,thread,i)<br>&#123;<br><span class="hljs-type">face_t</span> f;<br>real flow_time = CURRENT_TIME;<br>begin_f_loop(f,thread)<br>&#123;<br><span class="hljs-keyword">if</span>(flow_time &lt;= <span class="hljs-number">38</span>)<br>F_PROFILE(f,thread,i) = <span class="hljs-number">4.76</span>*<span class="hljs-number">0.75</span>;<br><span class="hljs-keyword">else</span><br>F_PROFILE(f,thread,i) = <span class="hljs-number">0</span>;<br>&#125;<br>end_f_loop(f,thread)<br>&#125;<br>DEFINE_PROFILE(inlet_mh2,thread,i)<br>&#123;<br><span class="hljs-type">face_t</span> f;<br>real flow_time = CURRENT_TIME;<br>begin_f_loop(f,thread)<br>&#123;<br><span class="hljs-keyword">if</span>(flow_time &lt;= <span class="hljs-number">38</span>)<br>F_PROFILE(f,thread,i) = <span class="hljs-number">4.76</span>*<span class="hljs-number">0.25</span>;<br><span class="hljs-keyword">else</span><br>F_PROFILE(f,thread,i) = <span class="hljs-number">0</span>;<br>&#125;<br>end_f_loop(f,thread)<br>&#125;<br></code></pre></td></tr></table></figure><h1 id="4ã€é€Ÿåº¦å…¥å£"><a href="#4ã€é€Ÿåº¦å…¥å£" class="headerlink" title="4ã€é€Ÿåº¦å…¥å£"></a>4ã€é€Ÿåº¦å…¥å£</h1><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&quot;udf.h&quot;</span></span><br>DEFINE_PROFILE(inlet_x,thread,index)<br>&#123;<br>real y,v0,h0;<br>real x[ND_ND];<br><span class="hljs-type">face_t</span> f;<br>v0=<span class="hljs-number">2.2</span>;<br>h0=<span class="hljs-number">10</span>;<br>begin_f_loop(f,thread)<br>&#123;<br>F_CENTROID(x,f,thread);<br>y=x[<span class="hljs-number">2</span>];<br>F_PROFILE(f,thread,index) = v0*<span class="hljs-built_in">pow</span>(y/h0,<span class="hljs-number">0.10</span>);<br>&#125;<br>end_f_loop(f,thread)<br><br>&#125;<br></code></pre></td></tr></table></figure><h1 id="5ã€æ—¶é—´æ­¥é•¿"><a href="#5ã€æ—¶é—´æ­¥é•¿" class="headerlink" title="5ã€æ—¶é—´æ­¥é•¿"></a>5ã€æ—¶é—´æ­¥é•¿</h1><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&quot;udf.h&quot;</span></span><br><br>DEFINE_DELTAT(mydeltat,domain)<br>&#123;<br>    real time_step;<br>    real flow_time = CURRENT_TIME;<br>    <span class="hljs-keyword">if</span>(flow_time&lt;<span class="hljs-number">120</span>)<br>        time_step = <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">else</span><br>        time_step = <span class="hljs-number">0.0005</span>;<br>    <span class="hljs-keyword">return</span> time_step;<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>æ¨¡æ‹Ÿ</category>
      
      <category>Fluent</category>
      
    </categories>
    
    
    <tags>
      
      <tag>UDF</tag>
      
      <tag>Fluent</tag>
      
      <tag>æ¨¡æ‹Ÿ</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>UDFå­¦ä¹ ç¬”è®°</title>
    <link href="/2024/03/17/009%20UDF%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    <url>/2024/03/17/009%20UDF%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/</url>
    
    <content type="html"><![CDATA[<p>æœ‰æ—¶ fluent è‡ªå¸¦çš„è¾¹ç•Œæ¡ä»¶ç­‰ä¸æ»¡è¶³æˆ‘ä»¬çš„éœ€æ±‚ï¼Œéœ€è¦ä½¿ç”¨ udf è¿›è¡Œæ›´æ”¹ï¼Œæ¯”å¦‚ä¸€ä¸ªæ³„æ¼å£æµé‡éšæ—¶é—´å˜åŒ–ã€‚å¯¹äºå¤§å¤šæ•°æ²¡æœ‰ç¼–ç¨‹åŸºç¡€çš„å°ä¼™ä¼´æ¥è¯´ï¼Œç›´æ¥çœ‹ fluent udf çš„å®˜æ–¹æ–‡æ¡£æ¯”è¾ƒåƒåŠ›ï¼ŒèŠ±è´¹å¤§é‡çš„æ—¶é—´è¿˜æ‰¾ä¸åˆ°ç›¸å…³çš„å‡½æ•°ã€‚</p><p><img src="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/202204081531095.png" alt="image-20220408153144869"></p><h2 id="1ã€UDF-å¸¸è§çš„å¾ªç¯å®"><a href="#1ã€UDF-å¸¸è§çš„å¾ªç¯å®" class="headerlink" title="1ã€UDF å¸¸è§çš„å¾ªç¯å®"></a>1ã€UDF å¸¸è§çš„å¾ªç¯å®</h2><p><strong>ç®€å†™</strong></p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs c">d:ï¼šdominï¼ˆæŒ‡é’ˆï¼‰<br><br>ct,tï¼šcell threadï¼ˆæŒ‡é’ˆï¼‰<br><br>ft,f_threadï¼šface threadï¼ˆæŒ‡é’ˆï¼‰<br><br>cï¼šcell threadï¼ˆå˜é‡ï¼‰<br><br>fï¼šface threadï¼ˆå˜é‡ï¼‰<br></code></pre></td></tr></table></figure><h3 id="1-1-å¯¹åŸŸ-d-ä¸­çš„æ‰€æœ‰å•å…ƒå¾ªç¯"><a href="#1-1-å¯¹åŸŸ-d-ä¸­çš„æ‰€æœ‰å•å…ƒå¾ªç¯" class="headerlink" title="1.1 å¯¹åŸŸ d ä¸­çš„æ‰€æœ‰å•å…ƒå¾ªç¯"></a>1.1 å¯¹åŸŸ d ä¸­çš„æ‰€æœ‰å•å…ƒå¾ªç¯</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs c">thread_loop_f(ft,d) &#123;  &#125;;<br></code></pre></td></tr></table></figure><h3 id="1-2-å¯¹åŸŸ-d-ä¸­çš„æ‰€æœ‰é¢-thread-å¾ªç¯"><a href="#1-2-å¯¹åŸŸ-d-ä¸­çš„æ‰€æœ‰é¢-thread-å¾ªç¯" class="headerlink" title="1.2 å¯¹åŸŸ d ä¸­çš„æ‰€æœ‰é¢ thread å¾ªç¯"></a>1.2 å¯¹åŸŸ d ä¸­çš„æ‰€æœ‰é¢ thread å¾ªç¯</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs c">thread_loop_f(ft,d) &#123;  &#125;;<br></code></pre></td></tr></table></figure><h3 id="1-3-å¯¹-thread-t-ä¸­çš„æ‰€æœ‰å•å…ƒå¾ªç¯"><a href="#1-3-å¯¹-thread-t-ä¸­çš„æ‰€æœ‰å•å…ƒå¾ªç¯" class="headerlink" title="1.3 å¯¹ thread t ä¸­çš„æ‰€æœ‰å•å…ƒå¾ªç¯"></a>1.3 å¯¹ thread t ä¸­çš„æ‰€æœ‰å•å…ƒå¾ªç¯</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs c">begin_c_loop(c,t)<br>&#123;  &#125;<br>end_c_loop(c,t);<br></code></pre></td></tr></table></figure><h3 id="1-4-å¯¹é¢-thread-ä¸­æ‰€æœ‰é¢å¾ªç¯"><a href="#1-4-å¯¹é¢-thread-ä¸­æ‰€æœ‰é¢å¾ªç¯" class="headerlink" title="1.4 å¯¹é¢ thread ä¸­æ‰€æœ‰é¢å¾ªç¯"></a>1.4 å¯¹é¢ thread ä¸­æ‰€æœ‰é¢å¾ªç¯</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs c">begin_f_loop(f,f_thread)<br>&#123;  &#125;<br>end_f_loop(f,f_thread)<br></code></pre></td></tr></table></figure><h2 id="2ã€ç›¸å…³æ¡ˆä¾‹"><a href="#2ã€ç›¸å…³æ¡ˆä¾‹" class="headerlink" title="2ã€ç›¸å…³æ¡ˆä¾‹"></a>2ã€ç›¸å…³æ¡ˆä¾‹</h2><h3 id="2-1-é£é€Ÿéšé«˜åº¦å˜åŒ–"><a href="#2-1-é£é€Ÿéšé«˜åº¦å˜åŒ–" class="headerlink" title="2.1 é£é€Ÿéšé«˜åº¦å˜åŒ–"></a>2.1 é£é€Ÿéšé«˜åº¦å˜åŒ–</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&quot;udf.h&quot;</span></span><br>DEFINE_PROFILE(inlet_x,thread,index)<br>&#123;<br>real y,v0,h0;<br>real x[ND_ND];<span class="hljs-comment">//ç”¨æ¥å­˜å‚¨è´¨å¿ƒåæ ‡</span><br><span class="hljs-type">face_t</span> f;<br>v0=<span class="hljs-number">1</span>;<br>h0=<span class="hljs-number">2</span>;<br>begin_f_loop(f,thread)<br>&#123;<br>        <span class="hljs-comment">//è¿™é‡Œä¼ å…¥çš„xæ˜¯è´¨å¿ƒ</span><br>F_CENTROID(x,f,thread);<span class="hljs-comment">//F_CENTROID è·å¾—é¢ä¸­å¿ƒçš„åæ ‡</span><br>y=x[<span class="hljs-number">2</span>];<br>F_PROFILE(f,thread,index) = v0*<span class="hljs-built_in">pow</span>(y/h0,<span class="hljs-number">0.2</span>);<br>end_f_loop(f,thread)<br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="2-2-é€Ÿåº¦éšæ—¶é—´å˜åŒ–"><a href="#2-2-é€Ÿåº¦éšæ—¶é—´å˜åŒ–" class="headerlink" title="2.2 é€Ÿåº¦éšæ—¶é—´å˜åŒ–"></a>2.2 é€Ÿåº¦éšæ—¶é—´å˜åŒ–</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&quot;udf.h&quot;</span></span><br>DEFINE_PROFILE(inlet_V,thread,i)<br>&#123;<br><span class="hljs-type">face_t</span> f;<span class="hljs-comment">// å®šä¹‰ä¸€ä¸ªé¢f</span><br>real flow_time = CURRENT_TIME;<span class="hljs-comment">//å®šä¹‰ä¸€ä¸ªå®æ•°flow_timeè·å–å½“å‰æ—¶é—´</span><br>begin_f_loop(f,thread)<br>&#123;<br><span class="hljs-keyword">if</span>(flow_time &gt;=<span class="hljs-number">0</span> )<br>F_PROFILE(f,thread,i) = <span class="hljs-number">1.5</span>+<span class="hljs-number">0.5</span>*<span class="hljs-built_in">sin</span>(<span class="hljs-number">2</span>*<span class="hljs-number">3.14159</span>*<span class="hljs-number">0.1</span>*flow_time);<br><span class="hljs-keyword">else</span><br>F_PROFILE(f,thread,i) = <span class="hljs-number">1.5</span>;<br>&#125;<br>end_f_loop(f,thread)<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="2-3-å‹åŠ›éšç€é«˜åº¦å˜åŒ–"><a href="#2-3-å‹åŠ›éšç€é«˜åº¦å˜åŒ–" class="headerlink" title="2.3 å‹åŠ›éšç€é«˜åº¦å˜åŒ–"></a>2.3 å‹åŠ›éšç€é«˜åº¦å˜åŒ–</h3><p><img src="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/202204021506327.png" alt="image-20220402150600314"></p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&quot;udf.h&quot;</span></span><br><br>DEFINE_PROFILE(pressure_profile,t,i)<br>&#123;<br>   real x[ND_ND];<br>   real y;<br>   <span class="hljs-type">face_t</span> f;<br>   begin_f_loop(f,t)<br>   &#123;<br>       F_CENTROID(X,f,t);<span class="hljs-comment">//F_CENTROID è·å¾—é¢ä¸­å¿ƒçš„åæ ‡ï¼Œç”¨æ¥è®¡ç®—æ¯ä¸ªé¢çš„å‹åŠ›</span><br>       y = x[<span class="hljs-number">1</span>];<span class="hljs-comment">// è·å–yæ•°å€¼ï¼Œ0è¡¨ç¤ºxï¼Œ1è¡¨ç¤ºyï¼Œ2è¡¨ç¤ºz</span><br>       F_FPOFILE(f,t,i) = <span class="hljs-number">1.1e5</span> - y*y/(<span class="hljs-number">.0745</span>*<span class="hljs-number">.0745</span>)*<span class="hljs-number">0.1e5</span>;<br>   &#125;<br>   end_f_loop(f,t)<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="2-4-ææ–™å±æ€§éšæ¸©åº¦å˜åŒ–"><a href="#2-4-ææ–™å±æ€§éšæ¸©åº¦å˜åŒ–" class="headerlink" title="2.4 ææ–™å±æ€§éšæ¸©åº¦å˜åŒ–"></a>2.4 ææ–™å±æ€§éšæ¸©åº¦å˜åŒ–</h3><p><img src="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/202204021508615.png" alt="image-20220402150830581"></p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&quot;udf.h&quot;</span></span><br>DEFILE_PROPERTY(steel_heat,c,t)<br>&#123;<br>real <span class="hljs-type">s_t</span>;<br>real = Tk = C_T(c,t);<span class="hljs-comment">//è¯»å–å½“å‰çš„æ¸©åº¦</span><br><span class="hljs-keyword">if</span>(Tk&lt;=<span class="hljs-number">273.15</span>)<br><span class="hljs-type">s_t</span> = <span class="hljs-number">14</span>;<br><span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(Tk&lt;=<span class="hljs-number">1273.15</span>)<br><span class="hljs-type">s_t</span> = <span class="hljs-number">14</span>-(Tk<span class="hljs-number">-273.15</span>)*<span class="hljs-number">0.004</span>;<br><span class="hljs-keyword">else</span><br><span class="hljs-type">s_t</span> = <span class="hljs-number">10</span>;<br><span class="hljs-keyword">return</span> <span class="hljs-type">s_t</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p><img src="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/202204021524675.png" alt="image-20220402152435617"></p><h3 id="2-5-è´¨é‡æµé‡éšæ—¶é—´å˜åŒ–"><a href="#2-5-è´¨é‡æµé‡éšæ—¶é—´å˜åŒ–" class="headerlink" title="2.5 è´¨é‡æµé‡éšæ—¶é—´å˜åŒ–"></a>2.5 è´¨é‡æµé‡éšæ—¶é—´å˜åŒ–</h3><p>ä»¥ä¸‹åä¸º INTERT_MF çš„ UDF æœ€åˆæŒ‡å®šå‰ 10 æ¯«ç§’çš„è´¨é‡æµé‡ä¸º 3.0 åƒå…‹&#x2F;ç§’ï¼Œç„¶ååœ¨æ¥ä¸‹æ¥çš„ 10 æ¯«ç§’å†…å°†å…¶å¢åŠ åˆ° 4.0 åƒå…‹&#x2F;ç§’ï¼Œä¹‹åæŒ‡å®š 5.0 åƒå…‹&#x2F;ç§’ã€‚</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&quot;udf.h&quot;</span></span><br>DEFINE_PROFILE(inlet_mf,th,i)<br>&#123;<br><span class="hljs-type">face_t</span> f;<br>real flow_time = CURRENT_TIME;<span class="hljs-comment">/*æŸ¥æ‰¾å½“å‰æµåŠ¨çš„æ—¶é—´*/</span><br>begin_f_loop(f,th)<br>&#123;<br><span class="hljs-keyword">if</span>(flow_time &lt;= <span class="hljs-number">0.01</span>)<br>F_PROFILE(f,th,i) = <span class="hljs-number">3.0</span>;<br><span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(flow_time &lt;= <span class="hljs-number">0.02</span>)<br>F_PROFILE(f,th,i) = <span class="hljs-number">4.0</span>;<br><span class="hljs-keyword">else</span><br>F_PROFILE(f,th,i) = <span class="hljs-number">5.0</span>;<br>&#125;<br>end_f_loop(f,th);<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="2-6-æ—¶é—´æ­¥é•¿çš„æ”¹å˜"><a href="#2-6-æ—¶é—´æ­¥é•¿çš„æ”¹å˜" class="headerlink" title="2.6 æ—¶é—´æ­¥é•¿çš„æ”¹å˜"></a>2.6 æ—¶é—´æ­¥é•¿çš„æ”¹å˜</h3><p>DEFINE_DELTAT</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs c">DEFINE <span class="hljs-title function_">DELTAT</span> <span class="hljs-params">(mydeltat,d)</span><br>&#123;<br>    real time_step;<br>    real flow_time = CURRENT_TIME;<br>    <span class="hljs-keyword">if</span> (flow_time <span class="hljs-number">0.5</span>)<br>        time_step = <span class="hljs-number">0.1</span>;<br>    <span class="hljs-keyword">else</span><br>        time_step = <span class="hljs-number">0.2</span>;<br>    <span class="hljs-keyword">return</span> time_step;<br>&#125;<br><br></code></pre></td></tr></table></figure><h3 id="2-7-è’¸å‘å†·å‡æ¨¡å‹æºç›¸"><a href="#2-7-è’¸å‘å†·å‡æ¨¡å‹æºç›¸" class="headerlink" title="2.7 è’¸å‘å†·å‡æ¨¡å‹æºç›¸"></a>2.7 è’¸å‘å†·å‡æ¨¡å‹æºç›¸</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&quot;udf.h&quot;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&quot;sg_mphase.h&quot;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> T_SAT 373.15   <span class="hljs-comment">//é¥±å’Œæ¸©åº¦373.15 K</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> LAT_HT 1.e3 <span class="hljs-comment">//æ±½åŒ–æ½œçƒ­1000 J/kg</span></span><br><span class="hljs-comment">// æ¶²ç›¸è´¨é‡æºé¡¹</span><br>DEFINE_SOURCE(liq_src, cell, pri_th, dS, eqn)<br>&#123;<br> Thread *mix_th, *sec_th;<br> real m_dot_l;<br> <span class="hljs-comment">// mix_thå­˜å‚¨ä¸»ç›¸çš„ThreadæŒ‡é’ˆï¼›sec_thå­˜å‚¨æ¬¡ç›¸æŒ‡é’ˆï¼Œæ³¨æ„ID</span><br> mix_th = THREAD_SUPER_THREAD(pri_th);<br> sec_th = THREAD_SUB_THREAD(mix_th, <span class="hljs-number">1</span>);<br> <span class="hljs-comment">// æ¸©åº¦å¤§äºé¥±å’Œæ¸©åº¦ï¼Œè¡¨ç¤ºä¸ºè’¸å‘</span><br> <span class="hljs-keyword">if</span> (C_T(cell, mix_th) &gt;= T_SAT)<br> &#123;<br>   <span class="hljs-comment">//è®¡ç®—è’¸å‘é‡ï¼Œæ³¨æ„æ¶²ç›¸è´¨é‡æµé‡ä¸ºè´Ÿå€¼ï¼Œ0.1ä¸ºcoeffå€¼</span><br>   m_dot_l = <span class="hljs-number">-0.1</span> * C_VOF(cell, pri_th) * C_R(cell, pri_th) *<br>             <span class="hljs-built_in">fabs</span>(C_T(cell, pri_th) - T_SAT) / T_SAT;<br>   <span class="hljs-comment">//å¯¹ä½“ç§¯åˆ†æ•°æ±‚å¯¼</span><br>   dS[eqn] = <span class="hljs-number">-0.1</span> * C_R(cell, pri_th) *<br>             <span class="hljs-built_in">fabs</span>(C_T(cell, pri_th) - T_SAT) / T_SAT;<br> &#125;<br> <span class="hljs-keyword">else</span><br> &#123;<br>   <span class="hljs-comment">//è®¡ç®—å†·å‡é‡ï¼Œæ¶²ç›¸è´¨é‡åˆ†æ•°ä¸ºæ­£å€¼</span><br>   m_dot_l = <span class="hljs-number">0.1</span> * C_VOF(cell, sec_th) * C_R(cell, sec_th) *<br>             <span class="hljs-built_in">fabs</span>(T_SAT - C_T(cell, mix_th)) / T_SAT;<br>   <span class="hljs-comment">//è‹¥å¯¹ä½“ç§¯åˆ†æ•°æ±‚å¯¼å¾—åˆ°çš„å€¼ä¸ºæ­£ï¼Œå¹²è„†ç›´æ¥èµ‹é›¶å€¼</span><br>   dS[eqn] = <span class="hljs-number">0.</span>;<br> &#125;<br> <span class="hljs-keyword">return</span> m_dot_l;<br>&#125;<br><span class="hljs-comment">// æ°”ç›¸è´¨é‡æºé¡¹ï¼Œè§£é‡ŠåŒä¸Š</span><br>DEFINE_SOURCE(vap_src, cell, sec_th, dS, eqn)<br>&#123;<br> Thread *mix_th, *pri_th;<br> real m_dot_v;<br> mix_th = THREAD_SUPER_THREAD(sec_th);<br> pri_th = THREAD_SUB_THREAD(mix_th, <span class="hljs-number">0</span>);<br> <span class="hljs-keyword">if</span> (C_T(cell, mix_th) &gt;= T_SAT)<br> &#123;<br>   m_dot_v = <span class="hljs-number">0.1</span> * C_VOF(cell, pri_th) * C_R(cell, pri_th) *<br>             <span class="hljs-built_in">fabs</span>(C_T(cell, mix_th) - T_SAT) / T_SAT;<br>   dS[eqn] = <span class="hljs-number">0.</span>;<br> &#125;<br> <span class="hljs-keyword">else</span><br> &#123;<br>   m_dot_v = <span class="hljs-number">-0.1</span> * C_VOF(cell, sec_th) * C_R(cell, sec_th) *<br>             <span class="hljs-built_in">fabs</span>(T_SAT - C_T(cell, mix_th)) / T_SAT;<br>   dS[eqn] = <span class="hljs-number">-0.1</span> * C_R(cell, sec_th) *<br>             <span class="hljs-built_in">fabs</span>(C_T(cell, sec_th) - T_SAT) / T_SAT;<br> &#125;<br> <span class="hljs-keyword">return</span> m_dot_v;<br>&#125;<br><span class="hljs-comment">//æ··åˆç›¸çš„èƒ½é‡æºé¡¹</span><br>DEFINE_SOURCE(enrg_src, cell, mix_th, dS, eqn)<br>&#123;<br> Thread *pri_th, *sec_th;<br> real m_dot;<br> pri_th = THREAD_SUB_THREAD(mix_th, <span class="hljs-number">0</span>);<br> sec_th = THREAD_SUB_THREAD(mix_th, <span class="hljs-number">1</span>);<br> <span class="hljs-keyword">if</span> (C_T(cell, mix_th) &gt;= T_SAT)<br> &#123;<br>   <span class="hljs-comment">// å¾—åˆ°è’¸å‘é‡ï¼ŒLeeæ¨¡å‹</span><br>   m_dot = <span class="hljs-number">-0.1</span> * C_VOF(cell, pri_th) * C_R(cell, pri_th) *<br>           <span class="hljs-built_in">fabs</span>(C_T(cell, pri_th) - T_SAT) / T_SAT;<br>   <span class="hljs-comment">//å¯¹æ¸©åº¦æ±‚å¯¼ï¼Œè‹¥ä¸ºè´Ÿåˆ™ä¿ç•™ï¼Œå¦åˆ™èµ‹å€¼é›¶</span><br>   dS[eqn] = <span class="hljs-number">-0.1</span> * C_VOF(cell, pri_th) * C_R(cell, pri_th) / T_SAT;<br> &#125;<br> <span class="hljs-keyword">else</span><br> &#123;<br>   <span class="hljs-comment">//å¾—åˆ°å†·å‡é‡</span><br>   m_dot = <span class="hljs-number">0.1</span> * C_VOF(cell, sec_th) * C_R(cell, sec_th) *<br>           <span class="hljs-built_in">fabs</span>(T_SAT - C_T(cell, mix_th)) / T_SAT;<br>   dS[eqn] = <span class="hljs-number">-0.1</span> * C_VOF(cell, sec_th) * C_R(cell, sec_th) / T_SAT;<br> &#125;<br><br> <span class="hljs-comment">// è¿”å›çƒ­é‡å€¼ï¼Œåˆ©ç”¨æ½œçƒ­ä¸è´¨é‡æµé‡çš„ä¹˜ç§¯å¾—åˆ°</span><br> <span class="hljs-keyword">return</span> LAT_HT * m_dot;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="3ã€å‡½æ•°"><a href="#3ã€å‡½æ•°" class="headerlink" title="3ã€å‡½æ•°"></a>3ã€å‡½æ•°</h2><h3 id="3-1-DEFINE-PROFILE"><a href="#3-1-DEFINE-PROFILE" class="headerlink" title="3.1 DEFINE_PROFILE"></a>3.1 DEFINE_PROFILE</h3><ol><li><p>ä½¿ç”¨ DEFINE_PROFILE å®šä¹‰ä¸€ä¸ª<strong>è‡ªå®šä¹‰è¾¹ç•Œé…ç½®æ–‡ä»¶</strong>ï¼Œè¯¥è¾¹ç•Œé…ç½®æ–‡ä»¶éšç©ºé—´åæ ‡æˆ–æ—¶é—´çš„å‡½æ•°è€Œå˜åŒ–ã€‚</p></li><li><p>è¾¹ç•Œçš„å˜é‡å¯ä»¥æ˜¯é€Ÿåº¦ã€å‹åŠ›ã€æ¸©åº¦ã€æ¹æµåŠ¨èƒ½ã€æ¹æµè€—æ•£ç‡ã€è´¨é‡æµç‡ç­‰ï¼ˆè§æ‰‹å†Œ 2.3.17ï¼‰</p></li></ol><p>ç”¨æ³•<code>DEFINE_PROFILE (name,t,i)</code></p><p>thread *tï¼šæŒ‡å‘è¦åº”ç”¨è¾¹ç•Œæ¡ä»¶çš„çº¿ç¨‹çš„æŒ‡é’ˆã€‚</p><p>int iï¼šæ ‡è¯†è¦å®šä¹‰çš„å˜é‡çš„ç´¢å¼•ã€‚</p><h3 id="3-2-DEFILE-PROPERTY"><a href="#3-2-DEFILE-PROPERTY" class="headerlink" title="3.2 DEFILE_PROPERTY"></a>3.2 DEFILE_PROPERTY</h3><ol><li><p>å®šä¹‰ææ–™çš„å±æ€§</p></li><li><p>å¯ä»¥æ˜¯å¯†åº¦ã€ç²˜åº¦ã€çƒ­å¯¼ç‡ã€å¸æ”¶å’Œæ‰©æ•£ç³»æ•°ã€å±‚æµç«ç„°é€Ÿåº¦ã€åº”å˜ç‡ç­‰</p></li></ol><p><strong>å¯¹äºå¤šç›¸æµ</strong></p><p>ä¼ çƒ­ç³»æ•°ï¼ˆMixtureï¼‰ã€é¢—ç²’æˆ–æ¶²æ»´ç›´å¾„ï¼ˆMixtureï¼‰</p><p><img src="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/202204021517069.png" alt="image-20220402151729022"></p><p><strong>ç”¨æ³•</strong></p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs c">DEFILE_PROPERTY(name,c,t)<br></code></pre></td></tr></table></figure><p><img src="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/202204021518094.png" alt="image-20220402151838068"></p><h2 id="4ã€å¸¸ç”¨å®"><a href="#4ã€å¸¸ç”¨å®" class="headerlink" title="4ã€å¸¸ç”¨å®"></a>4ã€å¸¸ç”¨å®</h2><h3 id="4-1-æµåœºå˜é‡å®"><a href="#4-1-æµåœºå˜é‡å®" class="headerlink" title="4.1 æµåœºå˜é‡å®"></a>4.1 æµåœºå˜é‡å®</h3><table><thead><tr><th align="center">C_R(c,t)</th><th align="center">å¯†åº¦ï¼ˆDensityï¼‰</th></tr></thead><tbody><tr><td align="center">C_P(c,t)</td><td align="center">å‹åŠ›ï¼ˆPressureï¼‰</td></tr><tr><td align="center">C_U(c,t)</td><td align="center">x æ–¹å‘é€Ÿåº¦ï¼ˆU-velocityï¼‰</td></tr><tr><td align="center">C_V(c,t)</td><td align="center">y æ–¹å‘é€Ÿåº¦ï¼ˆV-velocityï¼‰</td></tr><tr><td align="center">C_W(c,t)</td><td align="center">z æ–¹å‘é€Ÿåº¦ï¼ˆW-velocityï¼‰</td></tr><tr><td align="center">C_T(c,t)</td><td align="center">æ¸©åº¦ï¼ˆTemperatureï¼‰</td></tr><tr><td align="center">C_H(c,t)</td><td align="center">ç„“ï¼ˆEnthalpyï¼‰</td></tr></tbody></table><p>å…¶ä»–</p><p><img src="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/202204081421298.png" alt="image-20220408142156047"></p><h3 id="4-2-å‡ ä½•å’Œæ—¶é—´å®"><a href="#4-2-å‡ ä½•å’Œæ—¶é—´å®" class="headerlink" title="4.2 å‡ ä½•å’Œæ—¶é—´å®"></a>4.2 å‡ ä½•å’Œæ—¶é—´å®</h3><p><img src="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/202204081424561.png" alt="image-20220408142424531"></p><p>CURRENT_TIMEï¼›è·å–å½“å‰æ¨¡æ‹Ÿæ—¶é—´çš„å€¼ï¼›</p>]]></content>
    
    
    <categories>
      
      <category>æ¨¡æ‹Ÿ</category>
      
      <category>Fluent</category>
      
    </categories>
    
    
    <tags>
      
      <tag>UDF</tag>
      
      <tag>Fluent</tag>
      
      <tag>æ¨¡æ‹Ÿ</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>è®¾è®¡æ¨¡å¼ï¼ˆc++ç‰ˆæœ¬ï¼‰</title>
    <link href="/2024/03/17/002%20%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
    <url>/2024/03/17/002%20%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/</url>
    
    <content type="html"><![CDATA[<p><a href="https://github.com/baiqinglun/cpp_designPatten">github åœ°å€</a></p><h2 id="1ã€å·¥å‚æ¨¡å¼"><a href="#1ã€å·¥å‚æ¨¡å¼" class="headerlink" title="1ã€å·¥å‚æ¨¡å¼"></a>1ã€å·¥å‚æ¨¡å¼</h2><h3 id="1-1-ç®€å•å·¥å‚"><a href="#1-1-ç®€å•å·¥å‚" class="headerlink" title="1.1 ç®€å•å·¥å‚"></a>1.1 ç®€å•å·¥å‚</h3><ol><li>å®šä¹‰ä¸€ä¸ªå›¾å½¢æŠ½è±¡ç±»,ç±»ä¸­æ·»åŠ ç»˜åˆ¶å›¾å½¢çš„çº¯è™šå‡½æ•°,çƒå½¢ç±»å’Œé•¿æ–¹ä½“ç»§æ‰¿è¯¥å›¾å½¢æŠ½è±¡ç±»,å¹¶é‡å†™çº¯è™šå‡½æ•°.</li><li>å®šä¹‰ä¸€ä¸ªå·¥å‚ Factory ç”¨äºåˆ›å»ºå›¾å½¢.å·¥å‚ä¸­æœ‰ä¸ª create å‡½æ•°å¯ä»¥æ ¹æ®ä¼ å…¥çš„å‚æ•° new ä¸€ä¸ªç›¸åº”çš„å›¾å½¢å¹¶è¿”å›.</li></ol><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">/*</span><br><span class="hljs-comment"> * Created by 23984 on 2023/4/2.</span><br><span class="hljs-comment"> * ç®€å•å·¥å‚æ¨¡å¼</span><br><span class="hljs-comment"> * 1. å®šä¹‰ä¸€ä¸ªå›¾å½¢æŠ½è±¡ç±»,ç±»ä¸­æ·»åŠ ç»˜åˆ¶å›¾å½¢çš„çº¯è™šå‡½æ•°,çƒå½¢ç±»å’Œé•¿æ–¹ä½“ç»§æ‰¿è¯¥å›¾å½¢æŠ½è±¡ç±»,å¹¶é‡å†™çº¯è™šå‡½æ•°.</span><br><span class="hljs-comment"> * 2. å®šä¹‰ä¸€ä¸ªå·¥å‚Factoryç”¨äºåˆ›å»ºå›¾å½¢.å·¥å‚ä¸­æœ‰ä¸ªcreateå‡½æ•°å¯ä»¥æ ¹æ®ä¼ å…¥çš„å‚æ•°newä¸€ä¸ªç›¸åº”çš„å›¾å½¢å¹¶è¿”å›.</span><br><span class="hljs-comment"> * */</span><br><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&quot;iostream&quot;</span></span><br><br><span class="hljs-keyword">enum</span> <span class="hljs-title class_">GRAPHICS_TYPE</span>&#123;<br>    SPHERE,<br>    CUBE<br>&#125;;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Graphics</span>&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">painter</span><span class="hljs-params">()</span> </span>= <span class="hljs-number">0</span>;<br>&#125;;<br><br><span class="hljs-comment">// çƒå½¢</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Sphere</span> : <span class="hljs-keyword">public</span> Graphics&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">painter</span><span class="hljs-params">()</span> <span class="hljs-keyword">override</span></span>&#123;<br>        std::cout &lt;&lt; <span class="hljs-string">&quot;ç»˜åˆ¶çƒå½¢&quot;</span>&lt;&lt;std::endl;<br>    &#125;<br>&#125;;<br><br><span class="hljs-comment">// é•¿æ–¹ä½“</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Cube</span> : <span class="hljs-keyword">public</span> Graphics&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">painter</span><span class="hljs-params">()</span> <span class="hljs-keyword">override</span></span>&#123;<br>        std::cout &lt;&lt; <span class="hljs-string">&quot;ç»˜åˆ¶é•¿æ–¹ä½“&quot;</span>&lt;&lt;std::endl;<br>    &#125;<br>&#125;;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Factory</span>&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-type">static</span> Graphics* <span class="hljs-title">createGraphics</span><span class="hljs-params">(<span class="hljs-keyword">enum</span> GRAPHICS_TYPE type)</span></span>&#123;<br>        <span class="hljs-keyword">switch</span> (type) &#123;<br>            <span class="hljs-keyword">case</span> SPHERE:<br>                <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> Sphere;<br>                <span class="hljs-keyword">break</span>;<br>            <span class="hljs-keyword">case</span> CUBE:<br>                <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> Cube;<br>                <span class="hljs-keyword">break</span>;<br>            <span class="hljs-keyword">default</span>:<br>                <span class="hljs-keyword">return</span> <span class="hljs-literal">nullptr</span>;<br>        &#125;<br>    &#125;<br><br>&#125;;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span>&#123;<br>    Graphics* graphics = Factory::<span class="hljs-built_in">createGraphics</span>(GRAPHICS_TYPE::SPHERE);<br>    graphics-&gt;<span class="hljs-built_in">painter</span>();<br>    graphics = Factory::<span class="hljs-built_in">createGraphics</span>(GRAPHICS_TYPE::CUBE);<br>    graphics-&gt;<span class="hljs-built_in">painter</span>();<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><br><span class="hljs-comment">// è¾“å‡º</span><br><span class="hljs-comment">// ç»˜åˆ¶çƒå½¢</span><br><span class="hljs-comment">// ç»˜åˆ¶é•¿æ–¹ä½“</span><br><br></code></pre></td></tr></table></figure><h3 id="1-2-å·¥å‚æ–¹æ³•æ¨¡å¼"><a href="#1-2-å·¥å‚æ–¹æ³•æ¨¡å¼" class="headerlink" title="1.2 å·¥å‚æ–¹æ³•æ¨¡å¼"></a>1.2 å·¥å‚æ–¹æ³•æ¨¡å¼</h3><p>ç®€å•å·¥å‚æ¯æ¬¡æ–°å¢åˆ›å»ºå›¾å½¢ç±»ï¼Œå°±éœ€è¦ä¿®æ”¹ Factory å·¥å‚çš„åˆ›å»ºæ–¹æ³•,è¿åäº†å¼€æ”¾å¼€æ”¾å°é—­åŸåˆ™ã€‚</p><p>ä½¿ç”¨å·¥å‚æ¨¡å¼ä¸ºæ¯ä¸ªå›¾å½¢æ·»åŠ ä¸€ä¸ªå·¥å‚ã€‚</p><ol><li>å®šä¹‰ä¸€ä¸ªå›¾å½¢æŠ½è±¡ç±»,ç±»ä¸­æ·»åŠ ç»˜åˆ¶å›¾å½¢çš„çº¯è™šå‡½æ•°,çƒå½¢ç±»å’Œé•¿æ–¹ä½“ç»§æ‰¿è¯¥å›¾å½¢æŠ½è±¡ç±»,å¹¶é‡å†™çº¯è™šå‡½æ•°.</li><li>å®šä¹‰ä¸€ä¸ªæŠ½è±¡å·¥å‚ Factoryï¼Œçº¯è™šå‡½æ•°åˆ›å»ºå›¾å½¢.åˆ›å»ºçƒå½¢å·¥å‚å’Œåˆ›å»ºé•¿æ–¹ä½“å·¥å‚ç»§æ‰¿è‡ªè¯¥å·¥å‚ã€‚å¹¶é‡å†™çº¯è™šå‡½æ•°ã€‚</li></ol><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">/*</span><br><span class="hljs-comment"> * Created by 23984 on 2023/4/2.</span><br><span class="hljs-comment"> * å·¥å‚æ–¹æ³•æ¨¡å¼</span><br><span class="hljs-comment"> * ç®€å•å·¥å‚æ¯æ¬¡æ–°å¢åˆ›å»ºå›¾å½¢ç±»ï¼Œå°±éœ€è¦ä¿®æ”¹Factoryå·¥å‚çš„åˆ›å»ºæ–¹æ³•,è¿åäº†å¼€æ”¾å¼€æ”¾å°é—­åŸåˆ™ã€‚</span><br><span class="hljs-comment"> * 1. å®šä¹‰ä¸€ä¸ªå›¾å½¢æŠ½è±¡ç±»,ç±»ä¸­æ·»åŠ ç»˜åˆ¶å›¾å½¢çš„çº¯è™šå‡½æ•°,çƒå½¢ç±»å’Œé•¿æ–¹ä½“ç»§æ‰¿è¯¥å›¾å½¢æŠ½è±¡ç±»,å¹¶é‡å†™çº¯è™šå‡½æ•°.</span><br><span class="hljs-comment"> * 2. å®šä¹‰ä¸€ä¸ªæŠ½è±¡å·¥å‚Factoryï¼Œçº¯è™šå‡½æ•°åˆ›å»ºå›¾å½¢.åˆ›å»ºçƒå½¢å·¥å‚å’Œåˆ›å»ºé•¿æ–¹ä½“å·¥å‚ç»§æ‰¿è‡ªè¯¥å·¥å‚ã€‚å¹¶é‡å†™çº¯è™šå‡½æ•°ã€‚</span><br><span class="hljs-comment"> * */</span><br><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&quot;iostream&quot;</span></span><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Graphics</span>&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">painter</span><span class="hljs-params">()</span> </span>= <span class="hljs-number">0</span>;<br>&#125;;<br><br><span class="hljs-comment">// çƒå½¢</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Sphere</span> : <span class="hljs-keyword">public</span> Graphics&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">painter</span><span class="hljs-params">()</span> <span class="hljs-keyword">override</span></span>&#123;<br>        std::cout &lt;&lt; <span class="hljs-string">&quot;ç»˜åˆ¶çƒå½¢&quot;</span>&lt;&lt;std::endl;<br>    &#125;<br>&#125;;<br><br><span class="hljs-comment">// é•¿æ–¹ä½“</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Cube</span> : <span class="hljs-keyword">public</span> Graphics&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">painter</span><span class="hljs-params">()</span> <span class="hljs-keyword">override</span></span>&#123;<br>        std::cout &lt;&lt; <span class="hljs-string">&quot;ç»˜åˆ¶é•¿æ–¹ä½“&quot;</span>&lt;&lt;std::endl;<br>    &#125;<br>&#125;;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Factory</span>&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-keyword">virtual</span> Graphics* <span class="hljs-title">createGraphics</span><span class="hljs-params">()</span> </span>= <span class="hljs-number">0</span>;<br>&#125;;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">SphereFactory</span> : <span class="hljs-keyword">public</span> Factory&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function">Graphics * <span class="hljs-title">createGraphics</span><span class="hljs-params">()</span> <span class="hljs-keyword">override</span></span>&#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> Sphere;<br>    &#125;<br>&#125;;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">CubeFactory</span> : <span class="hljs-keyword">public</span> Factory&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function">Graphics * <span class="hljs-title">createGraphics</span><span class="hljs-params">()</span> <span class="hljs-keyword">override</span></span>&#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> Cube;<br>    &#125;<br>&#125;;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span>&#123;<br>    Graphics* graphics;<br>    SphereFactory sphereFactory;<br>    graphics = sphereFactory.<span class="hljs-built_in">createGraphics</span>();<br>    graphics-&gt;<span class="hljs-built_in">painter</span>();<br>    CubeFactory cubeFactory;<br>    graphics = cubeFactory.<span class="hljs-built_in">createGraphics</span>();<br>    graphics-&gt;<span class="hljs-built_in">painter</span>();<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><br><span class="hljs-comment">// è¾“å‡º</span><br><span class="hljs-comment">// ç»˜åˆ¶çƒå½¢</span><br><span class="hljs-comment">// ç»˜åˆ¶é•¿æ–¹ä½“</span><br><br></code></pre></td></tr></table></figure><h3 id="1-3-æŠ½è±¡å·¥å‚"><a href="#1-3-æŠ½è±¡å·¥å‚" class="headerlink" title="1.3 æŠ½è±¡å·¥å‚"></a>1.3 æŠ½è±¡å·¥å‚</h3><p>æ˜¯å·¥å‚æ–¹æ³•æ¨¡å¼çš„ä¸€ç§æ¼”å˜ã€‚æœ‰æ—¶å€™æˆ‘ä»¬éœ€è¦åˆ›å»ºé™æ€æˆ–è€…ä¼šåŠ¨çš„çƒå½¢æˆ–è€…é•¿æ–¹ä½“ï¼ŒæŠ½è±¡å·¥å‚åº”è¿è€Œç”Ÿã€‚</p><ol><li>å®šä¹‰ä¸€ä¸ªå›¾å½¢æŠ½è±¡ç±»,ç±»ä¸­æ·»åŠ ç»˜åˆ¶å›¾å½¢çš„çº¯è™šå‡½æ•°,çƒå½¢ç±»å’Œé•¿æ–¹ä½“ç»§æ‰¿è¯¥å›¾å½¢æŠ½è±¡ç±»,å¹¶é‡å†™çº¯è™šå‡½æ•°.</li><li>å®šä¹‰ä¸€ä¸ªæŠ½è±¡å·¥å‚ Factoryï¼Œçº¯è™šå‡½æ•°åˆ›å»ºå›¾å½¢.åˆ›å»ºçƒå½¢å·¥å‚å’Œåˆ›å»ºé•¿æ–¹ä½“å·¥å‚ç»§æ‰¿è‡ªè¯¥å·¥å‚ã€‚å¹¶é‡å†™çº¯è™šå‡½æ•°ã€‚</li></ol><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">/*</span><br><span class="hljs-comment"> * Created by 23984 on 2023/4/2.</span><br><span class="hljs-comment"> * æŠ½è±¡å·¥å‚æ–¹æ³•</span><br><span class="hljs-comment"> * æ˜¯å·¥å‚æ–¹æ³•æ¨¡å¼çš„ä¸€ç§æ¼”å˜ã€‚æœ‰æ—¶å€™æˆ‘ä»¬éœ€è¦åˆ›å»ºé™æ€æˆ–è€…ä¼šåŠ¨çš„çƒå½¢æˆ–è€…é•¿æ–¹ä½“ï¼ŒæŠ½è±¡å·¥å‚åº”è¿è€Œç”Ÿã€‚</span><br><span class="hljs-comment"> * 1. å®šä¹‰ä¸€ä¸ªå›¾å½¢æŠ½è±¡ç±»,ç±»ä¸­æ·»åŠ ç»˜åˆ¶å›¾å½¢çš„çº¯è™šå‡½æ•°,çƒå½¢ç±»å’Œé•¿æ–¹ä½“ç»§æ‰¿è¯¥å›¾å½¢æŠ½è±¡ç±»,å¹¶é‡å†™çº¯è™šå‡½æ•°.</span><br><span class="hljs-comment"> * 2. å®šä¹‰ä¸€ä¸ªæŠ½è±¡å·¥å‚Factoryï¼Œçº¯è™šå‡½æ•°åˆ›å»ºå›¾å½¢.åˆ›å»ºçƒå½¢å·¥å‚å’Œåˆ›å»ºé•¿æ–¹ä½“å·¥å‚ç»§æ‰¿è‡ªè¯¥å·¥å‚ã€‚å¹¶é‡å†™çº¯è™šå‡½æ•°ã€‚</span><br><span class="hljs-comment"> * */</span><br><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&quot;iostream&quot;</span></span><br><br><span class="hljs-comment">// é™æ€å›¾å½¢</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">StaticGraphics</span>&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">painter</span><span class="hljs-params">()</span> </span>= <span class="hljs-number">0</span>;<br>&#125;;<br><span class="hljs-comment">// çƒå½¢</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">StaticSphere</span> : <span class="hljs-keyword">public</span> StaticGraphics&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">painter</span><span class="hljs-params">()</span> <span class="hljs-keyword">override</span></span>&#123;<br>        std::cout &lt;&lt; <span class="hljs-string">&quot;ç»˜åˆ¶é™æ€çƒä½“&quot;</span>&lt;&lt;std::endl;<br>    &#125;<br>&#125;;<br><span class="hljs-comment">// é•¿æ–¹ä½“</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">StaticCube</span> : <span class="hljs-keyword">public</span> StaticGraphics&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">painter</span><span class="hljs-params">()</span> <span class="hljs-keyword">override</span></span>&#123;<br>        std::cout &lt;&lt; <span class="hljs-string">&quot;ç»˜åˆ¶é™æ€é•¿æ–¹ä½“&quot;</span>&lt;&lt;std::endl;<br>    &#125;<br>&#125;;<br><br><span class="hljs-comment">// åŠ¨æ€å›¾å½¢</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">DynamicGraphics</span>&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">painter</span><span class="hljs-params">()</span> </span>= <span class="hljs-number">0</span>;<br>&#125;;<br><span class="hljs-comment">// çƒå½¢</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">DynamicSphere</span> : <span class="hljs-keyword">public</span> DynamicGraphics&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">painter</span><span class="hljs-params">()</span> <span class="hljs-keyword">override</span></span>&#123;<br>        std::cout &lt;&lt; <span class="hljs-string">&quot;ç»˜åˆ¶åŠ¨æ€çƒä½“&quot;</span>&lt;&lt;std::endl;<br>    &#125;<br>&#125;;<br><span class="hljs-comment">// é•¿æ–¹ä½“</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">DynamicCube</span> : <span class="hljs-keyword">public</span> DynamicGraphics&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">painter</span><span class="hljs-params">()</span> <span class="hljs-keyword">override</span></span>&#123;<br>        std::cout &lt;&lt; <span class="hljs-string">&quot;ç»˜åˆ¶åŠ¨æ€é•¿æ–¹ä½“&quot;</span>&lt;&lt;std::endl;<br>    &#125;<br>&#125;;<br><br><span class="hljs-comment">// å·¥å‚æ–¹æ³•</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Factory</span>&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-keyword">virtual</span> StaticGraphics* <span class="hljs-title">createStaticGraphics</span><span class="hljs-params">()</span> </span>= <span class="hljs-number">0</span>;<br>    <span class="hljs-function"><span class="hljs-keyword">virtual</span> DynamicGraphics* <span class="hljs-title">createDynamicGraphics</span><span class="hljs-params">()</span> </span>= <span class="hljs-number">0</span>;<br>&#125;;<br><span class="hljs-comment">// çƒä½“</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">SphereFactory</span> : <span class="hljs-keyword">public</span> Factory&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function">StaticGraphics * <span class="hljs-title">createStaticGraphics</span><span class="hljs-params">()</span> <span class="hljs-keyword">override</span></span>&#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> StaticSphere;<br>    &#125;<br>    <span class="hljs-function">DynamicGraphics * <span class="hljs-title">createDynamicGraphics</span><span class="hljs-params">()</span> <span class="hljs-keyword">override</span></span>&#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> DynamicSphere;<br>    &#125;<br>&#125;;<br><span class="hljs-comment">// é•¿æ–¹ä½“</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">CubeFactory</span> : <span class="hljs-keyword">public</span> Factory&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function">StaticGraphics * <span class="hljs-title">createStaticGraphics</span><span class="hljs-params">()</span> <span class="hljs-keyword">override</span></span>&#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> StaticCube;<br>    &#125;<br>    <span class="hljs-function">DynamicGraphics * <span class="hljs-title">createDynamicGraphics</span><span class="hljs-params">()</span> <span class="hljs-keyword">override</span></span>&#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> DynamicCube;<br>    &#125;<br>&#125;;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span>&#123;<br>    <span class="hljs-comment">// å®šä¹‰å·¥å‚å’Œå›¾å½¢</span><br>    SphereFactory sphereFactory;<br>    CubeFactory cubeFactory;<br>    StaticGraphics* staticGraphics;<br>    DynamicGraphics* dynamicGraphics;<br><br>    <span class="hljs-comment">// åˆ›å»ºçƒä½“</span><br>    staticGraphics = sphereFactory.<span class="hljs-built_in">createStaticGraphics</span>();<br>    dynamicGraphics = sphereFactory.<span class="hljs-built_in">createDynamicGraphics</span>();<br>    staticGraphics-&gt;<span class="hljs-built_in">painter</span>();<br>    dynamicGraphics-&gt;<span class="hljs-built_in">painter</span>();<br><br>    <span class="hljs-comment">// åˆ›å»ºé•¿æ–¹ä½“</span><br>    staticGraphics = cubeFactory.<span class="hljs-built_in">createStaticGraphics</span>();<br>    dynamicGraphics = cubeFactory.<span class="hljs-built_in">createDynamicGraphics</span>();<br>    staticGraphics-&gt;<span class="hljs-built_in">painter</span>();<br>    dynamicGraphics-&gt;<span class="hljs-built_in">painter</span>();<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><br><span class="hljs-comment">// è¾“å‡º</span><br><span class="hljs-comment">// ç»˜åˆ¶é™æ€çƒä½“</span><br><span class="hljs-comment">// ç»˜åˆ¶åŠ¨æ€çƒä½“</span><br><span class="hljs-comment">// ç»˜åˆ¶é™æ€é•¿æ–¹ä½“</span><br><span class="hljs-comment">// ç»˜åˆ¶åŠ¨æ€é•¿æ–¹ä½“</span><br><br></code></pre></td></tr></table></figure><h2 id="2ã€ç­–ç•¥æ¨¡å¼"><a href="#2ã€ç­–ç•¥æ¨¡å¼" class="headerlink" title="2ã€ç­–ç•¥æ¨¡å¼"></a>2ã€ç­–ç•¥æ¨¡å¼</h2><p>å°†ä¸€ä¸ªç±»çš„è¡Œä¸ºå§”æ‰˜ç»™å¦ä¸€ä¸ªç±»å®ç°ã€‚</p><p><strong>ç­–ç•¥æ¨¡å¼æ˜¯æŒ‡å®šä¹‰ä¸€ç³»åˆ—çš„ç®—æ³•ï¼ŒæŠŠå®ƒä»¬ä¸€ä¸ªä¸ªå°è£…èµ·æ¥ï¼Œå¹¶ä¸”ä½¿å®ƒä»¬å¯ç›¸äº’æ›¿æ¢</strong>ã€‚<br>è¿™é‡Œä»¥ Cache ä¸­çš„æ›¿æ¢ç®—æ³•ä¸¾ä¾‹ã€‚æœ¬æ¡ˆä¾‹ä¸­ Cache ä¸­ replaceAlgorithm ä¸è‡ªå·±å®ç°ï¼Œé€šè¿‡å…¶ä»–ç®—æ³•ç±»å®ç°ã€‚</p><p><img src="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/20230402154638.png" alt="image.png"></p><p>1ã€å®šä¹‰ç®—æ³•ç±»</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-keyword">class</span> <span class="hljs-title class_">ReplaceAlgorithm</span>&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">replace</span><span class="hljs-params">()</span> </span>= <span class="hljs-number">0</span>;<br>&#125;;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">FIFO_ReplaceAlgorithm</span> : <span class="hljs-keyword">public</span> ReplaceAlgorithm&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">replace</span><span class="hljs-params">()</span> <span class="hljs-keyword">override</span></span>&#123;<br>        std::cout &lt;&lt; <span class="hljs-string">&quot;FIFO_ReplaceAlgorithmè¢«è°ƒç”¨&quot;</span> &lt;&lt; std::endl;<br>    &#125;<br>&#125;;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">LRU_ReplaceAlgorithm</span> : <span class="hljs-keyword">public</span> ReplaceAlgorithm&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">replace</span><span class="hljs-params">()</span> <span class="hljs-keyword">override</span></span>&#123;<br>        std::cout &lt;&lt; <span class="hljs-string">&quot;LRU_ReplaceAlgorithmè¢«è°ƒç”¨&quot;</span> &lt;&lt; std::endl;<br>    &#125;<br>&#125;;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Random_ReplaceAlgorithm</span> : <span class="hljs-keyword">public</span> ReplaceAlgorithm&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">replace</span><span class="hljs-params">()</span> <span class="hljs-keyword">override</span></span>&#123;<br>        std::cout &lt;&lt; <span class="hljs-string">&quot;Random_ReplaceAlgorithmè¢«è°ƒç”¨&quot;</span> &lt;&lt; std::endl;<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure><p>å®ç° Cache è°ƒç”¨ä¸Šè¿°ç®—æ³•æœ‰ 3 ç§æ–¹æ³•</p><ul><li>æ„é€ å‡½æ•°ä¼ å…¥ç®—æ³•å¯¹è±¡ï¼›</li><li>æ„é€ å‡½æ•°ä¼ å…¥ç®—æ³•ç±»å‹ï¼Œåœ¨æ„é€ å‡½æ•°ä¸­ new ä¸€ä¸ªç®—æ³•ï¼›</li><li>é¿å…ä¼ å…¥å‚æ•°ï¼Œä½¿ç”¨æ¨¡æ¿å®ç°ã€‚</li></ul><p>æ–¹æ³•ä¸€</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">// æ–¹æ³•ä¸€</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Cache</span>&#123;<br><span class="hljs-keyword">private</span>:<br>    ReplaceAlgorithm *m_ra;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-built_in">Cache</span>(ReplaceAlgorithm *ra):<span class="hljs-built_in">m_ra</span>(ra)&#123;&#125;;<br>    ~<span class="hljs-built_in">Cache</span>()&#123;<br>        <span class="hljs-keyword">delete</span> m_ra;<br>    &#125;;<br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">replaceAlgorithm</span><span class="hljs-params">()</span></span>&#123;<br>        m_ra-&gt;<span class="hljs-built_in">replace</span>();<br>    &#125;<br>&#125;;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>   <span class="hljs-function">Cache <span class="hljs-title">cache</span><span class="hljs-params">(<span class="hljs-keyword">new</span> FIFO_ReplaceAlgorithm())</span></span>;<br>   <span class="hljs-function">Cache <span class="hljs-title">cache1</span><span class="hljs-params">(<span class="hljs-keyword">new</span> LRU_ReplaceAlgorithm())</span></span>;<br>   <span class="hljs-function">Cache <span class="hljs-title">cache2</span><span class="hljs-params">(<span class="hljs-keyword">new</span> Random_ReplaceAlgorithm())</span></span>;<br>   cache.<span class="hljs-built_in">replaceAlgorithm</span>();<br>   cache1.<span class="hljs-built_in">replaceAlgorithm</span>();<br>   cache2.<span class="hljs-built_in">replaceAlgorithm</span>();<br><span class="hljs-comment">// è¾“å‡º</span><br><span class="hljs-comment">// FIFO_ReplaceAlgorithmè¢«è°ƒç”¨</span><br><span class="hljs-comment">// LRU_ReplaceAlgorithmè¢«è°ƒç”¨</span><br><span class="hljs-comment">// Random_ReplaceAlgorithmè¢«è°ƒç”¨</span><br>&#125;<br></code></pre></td></tr></table></figure><p>æ–¹æ³•äºŒ</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-keyword">enum</span> <span class="hljs-title class_">ALGORITHM_TYPE</span>&#123;<br>    FIFO,<br>    LRU,<br>    RANDOM<br>&#125;;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Cache</span>&#123;<br><span class="hljs-keyword">private</span>:<br>    ReplaceAlgorithm *m_ra;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-built_in">Cache</span>(<span class="hljs-keyword">enum</span> ALGORITHM_TYPE type)&#123;<br>        <span class="hljs-keyword">switch</span> (type) &#123;<br>            <span class="hljs-keyword">case</span> FIFO:<br>                m_ra = <span class="hljs-keyword">new</span> FIFO_ReplaceAlgorithm;<br>                <span class="hljs-keyword">break</span>;<br>            <span class="hljs-keyword">case</span> LRU:<br>                m_ra = <span class="hljs-keyword">new</span> LRU_ReplaceAlgorithm;<br>                <span class="hljs-keyword">break</span>;<br>            <span class="hljs-keyword">case</span> RANDOM:<br>                m_ra = <span class="hljs-keyword">new</span> Random_ReplaceAlgorithm;<br>                <span class="hljs-keyword">break</span>;<br>            <span class="hljs-keyword">default</span>:<br>                m_ra = <span class="hljs-literal">nullptr</span>;<br>        &#125;    &#125;;<br>    ~<span class="hljs-built_in">Cache</span>()&#123;<br>        <span class="hljs-keyword">delete</span> m_ra;<br>    &#125;;<br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">replaceAlgorithm</span><span class="hljs-params">()</span></span>&#123;<br>        m_ra-&gt;<span class="hljs-built_in">replace</span>();<br>    &#125;<br>&#125;;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span>&#123;<br>    æ–¹æ³•äºŒ<br>   <span class="hljs-function">Cache <span class="hljs-title">cache</span><span class="hljs-params">(ALGORITHM_TYPE::FIFO)</span></span>;<br>   cache.<span class="hljs-built_in">replaceAlgorithm</span>();<br>   <span class="hljs-function">Cache <span class="hljs-title">cache1</span><span class="hljs-params">(ALGORITHM_TYPE::LRU)</span></span>;<br>   cache1.<span class="hljs-built_in">replaceAlgorithm</span>();<br>   <span class="hljs-function">Cache <span class="hljs-title">cache2</span><span class="hljs-params">(ALGORITHM_TYPE::RANDOM)</span></span>;<br>   cache2.<span class="hljs-built_in">replaceAlgorithm</span>();<br><span class="hljs-comment">// è¾“å‡º</span><br><span class="hljs-comment">// FIFO_ReplaceAlgorithmè¢«è°ƒç”¨</span><br><span class="hljs-comment">// LRU_ReplaceAlgorithmè¢«è°ƒç”¨</span><br><span class="hljs-comment">// Random_ReplaceAlgorithmè¢«è°ƒç”¨</span><br>&#125;<br></code></pre></td></tr></table></figure><p>æ–¹æ³•ä¸‰</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-keyword">template</span> &lt;<span class="hljs-keyword">class</span> <span class="hljs-title class_">RA</span>&gt;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Cache</span>&#123;<br><span class="hljs-keyword">private</span>:<br>    RA m_ra;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-built_in">Cache</span>()&#123;&#125;;<br>    ~<span class="hljs-built_in">Cache</span>()&#123;&#125;;<br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">replaceAlgorithm</span><span class="hljs-params">()</span></span>&#123;<br>        m_ra.<span class="hljs-built_in">replace</span>();<br>    &#125;<br>&#125;;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span>&#123;<br>Cache&lt;FIFO_ReplaceAlgorithm&gt; cache;<br>cache.<span class="hljs-built_in">replaceAlgorithm</span>();<br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><blockquote><p>è¿™é‡Œéœ€è¦æ³¨æ„ï¼Œä½¿ç”¨è¿™ä¸€ç§æ–¹æ³•æ—¶ï¼Œm_ra ä¸èƒ½æ˜¯ä¸€ä¸ªæŒ‡é’ˆï¼Œå†™æˆæŒ‡é’ˆçš„å½¢å¼ï¼Œåªæ˜¯å°† FIFO_ReplaceAlgorithm ä¼ å…¥è¿‡æ¥ï¼Œå¹¶æ²¡æœ‰å®ä¾‹åŒ–å¯¹è±¡ã€‚å¦‚æœéè¦å†™æˆæŒ‡é’ˆå½¢å¼ï¼Œéœ€è¦è‡ªå·± new å¯¹è±¡ã€‚</p></blockquote><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-keyword">template</span> &lt;<span class="hljs-keyword">class</span> <span class="hljs-title class_">RA</span>&gt;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Cache</span>&#123;<br><span class="hljs-keyword">private</span>:<br>    RA *m_ra = <span class="hljs-keyword">new</span> RA;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-built_in">Cache</span>()&#123;&#125;;<br>    ~<span class="hljs-built_in">Cache</span>()&#123;&#125;;<br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">replaceAlgorithm</span><span class="hljs-params">()</span></span>&#123;<br>        m_ra-:&gt;<span class="hljs-built_in">replace</span>();<br>    &#125;<br>&#125;;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span>&#123;<br>Cache&lt;FIFO_ReplaceAlgorithm&gt; cache;<br>cache.<span class="hljs-built_in">replaceAlgorithm</span>();<br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="3ã€é€‚é…å™¨æ¨¡å¼"><a href="#3ã€é€‚é…å™¨æ¨¡å¼" class="headerlink" title="3ã€é€‚é…å™¨æ¨¡å¼"></a>3ã€é€‚é…å™¨æ¨¡å¼</h2><p>C++é€‚é…å™¨æ¨¡å¼ï¼ˆAdapter Patternï¼‰æ˜¯ä¸€ç§ç»“æ„å‹è®¾è®¡æ¨¡å¼ï¼Œå®ƒå…è®¸å°†ä¸å…¼å®¹çš„æ¥å£è½¬æ¢ä¸ºå®¢æˆ·ç«¯å¸Œæœ›çš„æ¥å£ã€‚<br>é€‚é…å™¨æ¨¡å¼é€šå¸¸ä½¿ç”¨åœ¨ä»¥ä¸‹åœºæ™¯ï¼š</p><ol><li>å½“<strong>å·²æœ‰çš„ç±»</strong>æ— æ³•æ»¡è¶³å®¢æˆ·ç«¯çš„éœ€æ±‚æ—¶ï¼Œå¯ä»¥ä½¿ç”¨é€‚é…å™¨æ¨¡å¼<strong>å¯¹å·²æœ‰ç±»çš„æ¥å£è¿›è¡Œè½¬æ¢</strong>ï¼Œä»¥æ»¡è¶³å®¢æˆ·ç«¯çš„éœ€æ±‚ã€‚</li><li>å½“éœ€è¦ä½¿ç”¨æŸä¸ªç±»ï¼Œä½†è¯¥ç±»çš„æ¥å£ä¸å¦ä¸€ä¸ªç±»çš„æ¥å£ä¸å…¼å®¹æ—¶ï¼Œå¯ä»¥ä½¿ç”¨é€‚é…å™¨æ¨¡å¼è¿›è¡Œè½¬æ¢ã€‚</li></ol><p>é€‚é…å™¨æ¨¡å¼é€šå¸¸åŒ…å«ä»¥ä¸‹è§’è‰²ï¼š</p><ol><li>ç›®æ ‡æ¥å£ï¼ˆTargetï¼‰ï¼šå®¢æˆ·ç«¯å¸Œæœ›ä½¿ç”¨çš„æ¥å£ã€‚</li><li>æºæ¥å£ï¼ˆAdapteeï¼‰ï¼šå·²æœ‰çš„æ¥å£ï¼Œéœ€è¦è¢«è½¬æ¢ã€‚</li><li>é€‚é…å™¨ï¼ˆAdapterï¼‰ï¼šå®ç°ç›®æ ‡æ¥å£ï¼Œå¹¶é€šè¿‡è°ƒç”¨æºæ¥å£çš„æ–¹æ³•ï¼Œå®ç°ç›®æ ‡æ¥å£ä¸æºæ¥å£çš„é€‚é…</li></ol><p>é€‚é…å™¨æ¨¡å¼å¯ä»¥åˆ†ä¸ºç±»é€‚é…å™¨æ¨¡å¼å’Œå¯¹è±¡é€‚é…å™¨æ¨¡å¼ï¼š</p><ol><li>ç±»é€‚é…å™¨æ¨¡å¼ï¼šä½¿ç”¨ç»§æ‰¿çš„æ–¹å¼å®ç°é€‚é…å™¨ã€‚</li><li>å¯¹è±¡é€‚é…å™¨æ¨¡å¼ï¼šä½¿ç”¨ç»„åˆçš„æ–¹å¼å®ç°é€‚é…å™¨ã€‚</li></ol><p><img src="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/20230402170122.png" alt="image.png"><br><strong>ä»£ç ç¤ºä¾‹</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">/*</span><br><span class="hljs-comment"> * Created by 23984 on 2023/4/2. * é€‚é…å™¨æ¨¡å¼</span><br><span class="hljs-comment"> * é€‚é…å™¨æ¨¡å¼ï¼ˆAdapter Patternï¼‰æ˜¯ä¸€ç§ç»“æ„å‹è®¾è®¡æ¨¡å¼ï¼Œå®ƒå…è®¸å°†ä¸å…¼å®¹çš„æ¥å£è½¬æ¢ä¸ºå®¢æˆ·ç«¯å¸Œæœ›çš„æ¥å£ã€‚</span><br><span class="hljs-comment"> * STLå®ç°äº†ä¸€ç§æ•°æ®ç»“æ„ï¼Œç§°ä¸ºåŒç«¯é˜Ÿåˆ—ï¼ˆdequeï¼‰ï¼Œæ”¯æŒå‰åä¸¤æ®µçš„æ’å…¥ä¸åˆ é™¤ã€‚STLå®ç°æ ˆå’Œé˜Ÿåˆ—æ—¶ï¼Œæ²¡æœ‰ä»å¤´å¼€å§‹å®šä¹‰å®ƒä»¬ï¼Œè€Œæ˜¯ç›´æ¥ä½¿ç”¨åŒç«¯é˜Ÿåˆ—å®ç°çš„ã€‚</span><br><span class="hljs-comment"> * è¿™é‡ŒåŒç«¯é˜Ÿåˆ—å°±æ‰®æ¼”äº†é€‚é…å™¨çš„è§’è‰²ã€‚é˜Ÿåˆ—ç”¨åˆ°äº†å®ƒçš„åç«¯æ’å…¥ï¼Œå‰ç«¯åˆ é™¤ã€‚è€Œæ ˆç”¨åˆ°äº†å®ƒçš„åç«¯æ’å…¥ï¼Œåç«¯åˆ é™¤ã€‚</span><br><span class="hljs-comment"> * */</span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&quot;iostream&quot;</span></span><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Deque</span>&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">push_back</span><span class="hljs-params">(<span class="hljs-type">int</span> x)</span></span>&#123;<br>        std::cout &lt;&lt; <span class="hljs-string">&quot;Deque push_back&quot;</span> &lt;&lt; std::endl;<br>    &#125;<br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">push_front</span><span class="hljs-params">(<span class="hljs-type">int</span> x)</span></span>&#123;<br>        std::cout &lt;&lt; <span class="hljs-string">&quot;Deque push_front&quot;</span> &lt;&lt; std::endl;<br>    &#125;<br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">pop_back</span><span class="hljs-params">()</span></span>&#123;<br>        std::cout &lt;&lt; <span class="hljs-string">&quot;Deque pop_back&quot;</span> &lt;&lt; std::endl;<br>    &#125;<br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">pop_front</span><span class="hljs-params">()</span></span>&#123;<br>        std::cout &lt;&lt; <span class="hljs-string">&quot;Deque pop_front&quot;</span> &lt;&lt; std::endl;<br>    &#125;<br>&#125;;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Sequence</span>&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">push</span><span class="hljs-params">(<span class="hljs-type">int</span> x)</span> </span>= <span class="hljs-number">0</span>;<br>    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">pop</span><span class="hljs-params">()</span> </span>= <span class="hljs-number">0</span>;<br>&#125;;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Stack</span> : <span class="hljs-keyword">public</span> Sequence&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">push</span><span class="hljs-params">(<span class="hljs-type">int</span> x)</span> <span class="hljs-keyword">override</span></span>&#123;<br>        deque.<span class="hljs-built_in">push_back</span>(x);<br>    &#125;<br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">pop</span><span class="hljs-params">()</span> <span class="hljs-keyword">override</span></span>&#123;<br>        deque.<span class="hljs-built_in">pop_back</span>();<br>    &#125;;<br><span class="hljs-keyword">private</span>:<br>    Deque deque;<br>&#125;;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Queue</span> : <span class="hljs-keyword">public</span> Sequence&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">push</span><span class="hljs-params">(<span class="hljs-type">int</span> x)</span> <span class="hljs-keyword">override</span></span>&#123;<br>        deque.<span class="hljs-built_in">push_front</span>(x);<br>    &#125;<br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">pop</span><span class="hljs-params">()</span> <span class="hljs-keyword">override</span></span>&#123;<br>        deque.<span class="hljs-built_in">pop_front</span>();<br>    &#125;;<br><span class="hljs-keyword">private</span>:<br>    Deque deque;<br>&#125;;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span>&#123;<br>    Sequence *s1 = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Stack</span>();<br>    Sequence *s2 = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Queue</span>();<br>    s1-&gt;<span class="hljs-built_in">push</span>(<span class="hljs-number">1</span>);<br>    s1-&gt;<span class="hljs-built_in">pop</span>();<br>    s2-&gt;<span class="hljs-built_in">push</span>(<span class="hljs-number">1</span>);<br>    s2-&gt;<span class="hljs-built_in">pop</span>();<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><br><span class="hljs-comment">// è¾“å‡º</span><br><span class="hljs-comment">// Deque push_back</span><br><span class="hljs-comment">// Deque pop_back</span><br><span class="hljs-comment">// Deque push_front</span><br><span class="hljs-comment">// Deque pop_front</span><br></code></pre></td></tr></table></figure><h2 id="4ã€å•ä¾‹æ¨¡å¼"><a href="#4ã€å•ä¾‹æ¨¡å¼" class="headerlink" title="4ã€å•ä¾‹æ¨¡å¼"></a>4ã€å•ä¾‹æ¨¡å¼</h2><p>å•ä¾‹æ¨¡å¼æ˜¯ä¸€ç§å¸¸è§çš„è½¯ä»¶è®¾è®¡æ¨¡å¼ï¼Œå®ƒä¿è¯<em>ä¸€ä¸ªç±»åªæœ‰ä¸€ä¸ªå®ä¾‹</em>ï¼Œå¹¶ä¸”æä¾›ä¸€ä¸ªå…¨å±€è®¿é—®ç‚¹æ¥è®¿é—®è¯¥å®ä¾‹ã€‚</p><p>åœ¨å•ä¾‹æ¨¡å¼ä¸­ï¼Œé€šå¸¸ä¼šå°†ç±»çš„æ„é€ å‡½æ•°ç§æœ‰åŒ–ï¼Œä»¥é¿å…å¤–éƒ¨ä»£ç ç›´æ¥åˆ›å»ºè¯¥ç±»çš„å¯¹è±¡å®ä¾‹ã€‚åŒæ—¶ï¼Œè¯¥ç±»ä¼šå®šä¹‰ä¸€ä¸ªé™æ€æ–¹æ³•æˆ–é™æ€æˆå‘˜å˜é‡æ¥è®¿é—®ç±»çš„å”¯ä¸€å®ä¾‹ã€‚å¦‚æœè¯¥å®ä¾‹ä¸å­˜åœ¨ï¼Œåˆ™è¯¥é™æ€æ–¹æ³•æˆ–æˆå‘˜å˜é‡ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„å®ä¾‹ï¼Œå¹¶è¿”å›è¯¥å®ä¾‹ï¼›å¦‚æœå®ä¾‹å·²ç»å­˜åœ¨ï¼Œåˆ™ç›´æ¥è¿”å›è¯¥å®ä¾‹ã€‚</p><p>å•ä¾‹æ¨¡å¼çš„ä¼˜ç‚¹æ˜¯ï¼š</p><ol><li>ä¿è¯ç³»ç»Ÿä¸­åªæœ‰ä¸€ä¸ªå®ä¾‹ï¼Œå‡å°‘äº†èµ„æºçš„å ç”¨ï¼Œé¿å…äº†ä¸å¿…è¦çš„å†…å­˜æµªè´¹ã€‚</li><li>å¯¹äºæŸäº›éœ€è¦é¢‘ç¹åˆ›å»ºå’Œé”€æ¯å¯¹è±¡çš„åœºæ™¯ï¼Œä½¿ç”¨å•ä¾‹æ¨¡å¼å¯ä»¥å‡å°‘ç³»ç»Ÿçš„å¼€é”€ã€‚</li><li>å•ä¾‹æ¨¡å¼å¯ä»¥å…¨å±€è®¿é—®ï¼Œæ–¹ä¾¿ç»Ÿä¸€ç®¡ç†å’Œè°ƒç”¨ã€‚</li></ol><p>å•ä¾‹æ¨¡å¼ä¹Ÿå­˜åœ¨ä¸€äº›ç¼ºç‚¹:</p><ol><li>å•ä¾‹æ¨¡å¼ä¼šå¯¹ä»£ç çš„å¯æµ‹è¯•æ€§é€ æˆå½±å“ï¼Œå› ä¸ºå•ä¾‹å®ä¾‹åœ¨æ•´ä¸ªç³»ç»Ÿä¸­åªå­˜åœ¨ä¸€ä¸ªï¼Œå¾ˆéš¾è¿›è¡Œå•å…ƒæµ‹è¯•ã€‚</li><li>å•ä¾‹æ¨¡å¼çš„å®ç°æœ‰æ—¶ä¼šç‰µæ‰¯åˆ°å¤æ‚çš„çº¿ç¨‹åŒæ­¥æ“ä½œï¼Œå¦‚æœå®ç°ä¸å½“ï¼Œå¯èƒ½ä¼šå¯¼è‡´æ­»é”ç­‰é—®é¢˜ã€‚</li></ol><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">// åªæœ‰ä¸€ä¸ªç±»</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Singleton</span><br>&#123;<br><span class="hljs-keyword">public</span>:<br>   <span class="hljs-function"><span class="hljs-type">static</span> Singleton *<span class="hljs-title">getInstance</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-type">char</span> *name)</span></span>;<br>   <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">show</span><span class="hljs-params">()</span></span>&#123;&#125;;<br>   ~<span class="hljs-built_in">Singleton</span>()<br>   &#123;<br>      cout &lt;&lt; <span class="hljs-string">&quot;Singletonææ„å‡½æ•°è°ƒç”¨&quot;</span> &lt;&lt; endl;<br>      singleton = <span class="hljs-literal">nullptr</span>;<br>      <span class="hljs-keyword">delete</span> singleton;<br>   &#125;;<br><br><span class="hljs-keyword">protected</span>:<br>   <span class="hljs-comment">// è¿™é‡Œçš„æ„é€ å‡½æ•°å¿…é¡»ä¸ºprotectedï¼Œå¦åˆ™å­ç±»ä¸æ³•è®¿é—®çˆ¶ç±»æ„é€ å‡½æ•°</span><br>   <span class="hljs-built_in">Singleton</span>()<br>   &#123;<br>      cout &lt;&lt; <span class="hljs-string">&quot;Singletonæ„é€ å‡½æ•°è°ƒç”¨&quot;</span> &lt;&lt; endl;<br>   &#125;;<br><br><span class="hljs-keyword">private</span>:<br>   <span class="hljs-type">static</span> Singleton *singleton;<br>&#125;;<br><br><span class="hljs-comment">// SingletonA</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">SingletonA</span> : <span class="hljs-keyword">public</span> Singleton<br>&#123;<br>   <span class="hljs-keyword">friend</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Singleton</span>; <span class="hljs-comment">// å¿…é¡»ä¸ºå‹å…ƒï¼Œå¦åˆ™çˆ¶ç±»æ— æ³•è®¿é—®å­ç±»çš„æ„é€ å‡½æ•°</span><br><span class="hljs-keyword">public</span>:<br>   <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">show</span><span class="hljs-params">()</span></span><br><span class="hljs-function">   </span>&#123;<br>      std::cout &lt;&lt; <span class="hljs-string">&quot;SingletonAçš„showè°ƒç”¨&quot;</span> &lt;&lt; std::endl;<br>   &#125;<br><br>   ~<span class="hljs-built_in">SingletonA</span>()<br>   &#123;<br>      cout &lt;&lt; <span class="hljs-string">&quot;SingletonAææ„å‡½æ•°è°ƒç”¨&quot;</span> &lt;&lt; endl;<br>   &#125;;<br><br><span class="hljs-keyword">private</span>:<br>   <span class="hljs-built_in">SingletonA</span>()<br>   &#123;<br>      cout &lt;&lt; <span class="hljs-string">&quot;SingletonAæ„é€ å‡½æ•°è°ƒç”¨&quot;</span> &lt;&lt; endl;<br>   &#125;;<br>&#125;;<br><br><span class="hljs-comment">// SingletonB</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">SingletonB</span> : <span class="hljs-keyword">public</span> Singleton<br>&#123;<br>   <span class="hljs-keyword">friend</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Singleton</span>; <span class="hljs-comment">// å¿…é¡»ä¸ºå‹å…ƒï¼Œå¦åˆ™çˆ¶ç±»æ— æ³•è®¿é—®å­ç±»çš„æ„é€ å‡½æ•°</span><br><span class="hljs-keyword">public</span>:<br>   <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">show</span><span class="hljs-params">()</span></span><br><span class="hljs-function">   </span>&#123;<br>      std::cout &lt;&lt; <span class="hljs-string">&quot;SingletonBçš„showè°ƒç”¨&quot;</span> &lt;&lt; std::endl;<br>   &#125;<br><br>   ~<span class="hljs-built_in">SingletonB</span>()<br>   &#123;<br>      cout &lt;&lt; <span class="hljs-string">&quot;SingletonBææ„å‡½æ•°è°ƒç”¨&quot;</span> &lt;&lt; endl;<br>   &#125;;<br><br><span class="hljs-keyword">private</span>:<br>   <span class="hljs-built_in">SingletonB</span>()<br>   &#123;<br>      cout &lt;&lt; <span class="hljs-string">&quot;SingletonBæ„é€ å‡½æ•°è°ƒç”¨&quot;</span> &lt;&lt; endl;<br>   &#125;;<br>&#125;;<br><br><span class="hljs-comment">// åˆå§‹åŒ–é™æ€æˆå‘˜å˜é‡singleton</span><br>Singleton *Singleton::singleton = <span class="hljs-literal">nullptr</span>;<br><span class="hljs-comment">// åˆå§‹åŒ–å®ä¾‹å‡½æ•°</span><br><span class="hljs-function">Singleton *<span class="hljs-title">Singleton::getInstance</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-type">char</span> *name)</span></span><br><span class="hljs-function"></span>&#123;<br>   <span class="hljs-keyword">if</span> (singleton == <span class="hljs-literal">nullptr</span>)<br>   &#123;<br>      <span class="hljs-keyword">if</span> (<span class="hljs-built_in">strcmp</span>(name, <span class="hljs-string">&quot;singletonA&quot;</span>) == <span class="hljs-number">0</span>)<br>      &#123;<br>         singleton = <span class="hljs-keyword">new</span> <span class="hljs-built_in">SingletonA</span>();<br>      &#125;<br>      <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-built_in">strcmp</span>(name, <span class="hljs-string">&quot;singletonB&quot;</span>) == <span class="hljs-number">0</span>)<br>      &#123;<br>         singleton = <span class="hljs-keyword">new</span> <span class="hljs-built_in">SingletonB</span>();<br>      &#125;<br>      <span class="hljs-keyword">else</span><br>      &#123;<br>         singleton = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Singleton</span>();<br>      &#125;<br>   &#125;<br>   <span class="hljs-keyword">return</span> singleton;<br>&#125;<br></code></pre></td></tr></table></figure><p>æµ‹è¯•</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>   Singleton *st = Singleton::<span class="hljs-built_in">getInstance</span>(<span class="hljs-string">&quot;singletonA&quot;</span>);<br>   st-&gt;<span class="hljs-built_in">show</span>();<br>   <span class="hljs-keyword">delete</span> st;<br>   st = Singleton::<span class="hljs-built_in">getInstance</span>(<span class="hljs-string">&quot;singletonB&quot;</span>);<br>   st-&gt;<span class="hljs-built_in">show</span>();<br>   <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>å¦‚æœä¸ delete æ‰ stï¼Œå†èµ‹å€¼ä¸º singletonB æ²¡æœ‰ååº”</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>   Singleton *st = Singleton::<span class="hljs-built_in">getInstance</span>(<span class="hljs-string">&quot;singletonA&quot;</span>);<br>   st-&gt;<span class="hljs-built_in">show</span>();<br>   <span class="hljs-comment">// st = nullptr;</span><br>   <span class="hljs-comment">// delete st;</span><br>   Singleton *st1 = Singleton::<span class="hljs-built_in">getInstance</span>(<span class="hljs-string">&quot;singletonB&quot;</span>);<br>   st1-&gt;<span class="hljs-built_in">show</span>();<br>   <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>è¿™æ ·ä¹Ÿä¸è¡Œï¼Œè¿˜æ˜¯åªè¦ st å­˜åœ¨ï¼Œå°±ä¼šè¿”å› Singleton::singleton</p><h2 id="5ã€åŸå‹æ¨¡å¼"><a href="#5ã€åŸå‹æ¨¡å¼" class="headerlink" title="5ã€åŸå‹æ¨¡å¼"></a>5ã€åŸå‹æ¨¡å¼</h2><ol><li>åŸå‹æ¨¡å¼ï¼ˆPrototype Patternï¼‰æ˜¯ä¸€ç§<strong>åˆ›å»ºå‹è®¾è®¡æ¨¡å¼</strong>ï¼Œå®ƒå…è®¸é€šè¿‡å¤åˆ¶ç°æœ‰å¯¹è±¡æ¥åˆ›å»ºæ–°çš„å¯¹è±¡ï¼Œè€Œæ— éœ€çŸ¥é“å¯¹è±¡çš„å…·ä½“å®ç°ç»†èŠ‚ã€‚åœ¨åŸå‹æ¨¡å¼ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥å°†ç°æœ‰å¯¹è±¡ä½œä¸ºåŸå‹ï¼Œç„¶åé€šè¿‡å¤åˆ¶è¯¥åŸå‹æ¥åˆ›å»ºæ–°çš„å¯¹è±¡ã€‚</li><li>ä½¿ç”¨åŸå‹æ¨¡å¼çš„ä¸€ä¸ªæ˜¾è‘—ä¼˜ç‚¹æ˜¯å¯ä»¥é¿å…é‡å¤åˆ›å»ºç›¸ä¼¼çš„å¯¹è±¡ï¼Œä»è€Œæé«˜ç¨‹åºçš„æ€§èƒ½å’Œæ•ˆç‡ã€‚å¦å¤–ï¼ŒåŸå‹æ¨¡å¼ä¹Ÿå¯ä»¥ç”¨æ¥éšè—å¯¹è±¡åˆ›å»ºçš„ç»†èŠ‚ï¼Œä»è€Œä½¿ä»£ç æ›´åŠ ç®€æ´å’Œæ˜“äºç»´æŠ¤ã€‚</li><li>åœ¨å®ç°åŸå‹æ¨¡å¼æ—¶ï¼Œé€šå¸¸éœ€è¦åœ¨åŸå‹ç±»ä¸­å®šä¹‰ä¸€ä¸ª clone()æ–¹æ³•ï¼Œç”¨äºåˆ›å»ºå¹¶è¿”å›ä¸€ä¸ªæ–°çš„å¯¹è±¡å®ä¾‹ã€‚**clone()**æ–¹æ³•é€šå¸¸ä¼šå…ˆåˆ›å»ºä¸€ä¸ªä¸åŸå‹å¯¹è±¡ç›¸åŒç±»å‹çš„æ–°å¯¹è±¡ï¼Œç„¶åå°†åŸå‹å¯¹è±¡çš„çŠ¶æ€å¤åˆ¶åˆ°æ–°å¯¹è±¡ä¸­ï¼Œæœ€åè¿”å›æ–°å¯¹è±¡ã€‚åœ¨ C++ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨æ‹·è´æ„é€ å‡½æ•°æˆ–èµ‹å€¼è¿ç®—ç¬¦æ¥å®ç°å¯¹è±¡çš„å¤åˆ¶ã€‚</li></ol><p><img src="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/20230405153846.png" alt="åŸå‹æ¨¡å¼"></p><p>ä»£ç ç¤ºä¾‹</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Shape</span> &#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-keyword">virtual</span> Shape* <span class="hljs-title">clone</span><span class="hljs-params">()</span> </span>= <span class="hljs-number">0</span>;<br>    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">draw</span><span class="hljs-params">()</span> </span>= <span class="hljs-number">0</span>;<br>&#125;;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Circle</span> : <span class="hljs-keyword">public</span> Shape &#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-built_in">Circle</span>() &#123;&#125;<br>    <span class="hljs-built_in">Circle</span>(<span class="hljs-type">const</span> Circle&amp; other) &#123;&#125;<br>    <span class="hljs-function"><span class="hljs-keyword">virtual</span> Shape* <span class="hljs-title">clone</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-comment">// return new Circle(*this) çš„ä½œç”¨æ˜¯åˆ›å»ºä¸€ä¸ªæ–°çš„ Circle å¯¹è±¡ï¼Œå¹¶è¿”å›è¯¥å¯¹è±¡çš„æŒ‡é’ˆï¼Œä»è€Œå®ç°äº†åŸå‹æ¨¡å¼çš„å¤åˆ¶åŠŸèƒ½</span><br>        <span class="hljs-comment">// *thisæŒ‡çš„æ˜¯å½“å‰çš„Circleå¯¹è±¡</span><br>        <span class="hljs-comment">// new Circle(*this)ä¼šè°ƒç”¨æ‹·è´æ„é€ å‡½æ•°</span><br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Circle</span>(*<span class="hljs-keyword">this</span>);<br>    &#125;<br>    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">draw</span><span class="hljs-params">()</span> </span>&#123;<br>        std::cout &lt;&lt; <span class="hljs-string">&quot;Drawing a circle.\n&quot;</span>;<br>    &#125;<br>&#125;;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Square</span> : <span class="hljs-keyword">public</span> Shape &#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-built_in">Square</span>() &#123;&#125;<br>    <span class="hljs-built_in">Square</span>(<span class="hljs-type">const</span> Square&amp; other) &#123;&#125;<br>    <span class="hljs-function"><span class="hljs-keyword">virtual</span> Shape* <span class="hljs-title">clone</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Square</span>(*<span class="hljs-keyword">this</span>);<br>    &#125;<br>    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">draw</span><span class="hljs-params">()</span> </span>&#123;<br>        std::cout &lt;&lt; <span class="hljs-string">&quot;Drawing a square.\n&quot;</span>;<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure><blockquote><p><code>return new Circle(*this);</code></p><p>&#x2F;&#x2F; return new Circle(*this) çš„ä½œç”¨æ˜¯åˆ›å»ºä¸€ä¸ªæ–°çš„ Circle å¯¹è±¡ï¼Œå¹¶è¿”å›è¯¥å¯¹è±¡çš„æŒ‡é’ˆï¼Œä»è€Œå®ç°äº†åŸå‹æ¨¡å¼çš„å¤åˆ¶åŠŸèƒ½</p><p>&#x2F;&#x2F; *this æŒ‡çš„æ˜¯å½“å‰çš„ Circle å¯¹è±¡</p><p>&#x2F;&#x2F; new Circle(*this)ä¼šè°ƒç”¨æ‹·è´æ„é€ å‡½æ•°</p></blockquote><p>æµ‹è¯•</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs c++"><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>  Circle* prototypeCircle = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Circle</span>();<br>  Square* prototypeSquare = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Square</span>();<br><br>  Shape* circle1 = prototypeCircle-&gt;<span class="hljs-built_in">clone</span>();<br>  Shape* circle2 = prototypeCircle-&gt;<span class="hljs-built_in">clone</span>();<br>  circle1-&gt;<span class="hljs-built_in">draw</span>();<br>  circle2-&gt;<span class="hljs-built_in">draw</span>();<br>  Shape* square1 = prototypeSquare-&gt;<span class="hljs-built_in">clone</span>();<br>  square1-&gt;<span class="hljs-built_in">draw</span>();<br><br>  <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="6ã€å»ºé€ è€…æ¨¡å¼"><a href="#6ã€å»ºé€ è€…æ¨¡å¼" class="headerlink" title="6ã€å»ºé€ è€…æ¨¡å¼"></a>6ã€å»ºé€ è€…æ¨¡å¼</h2><p>å»ºé€ è€…æ¨¡å¼ï¼ˆBuilder Patternï¼‰æ˜¯ä¸€ç§åˆ›å»ºå‹è®¾è®¡æ¨¡å¼ï¼Œå®ƒå…è®¸ä½ ä½¿ç”¨ç›¸åŒçš„æ„å»ºè¿‡ç¨‹æ¥åˆ›å»ºä¸åŒçš„è¡¨ç¤ºå½¢å¼ã€‚</p><p>å»ºé€ è€…æ¨¡å¼çš„ä¸»è¦ç›®çš„æ˜¯å°†ä¸€ä¸ªå¤æ‚å¯¹è±¡çš„æ„å»ºè¿‡ç¨‹åˆ†ç¦»å‡ºæ¥ï¼Œä½¿å…¶å¯ä»¥ç‹¬ç«‹äºä¸»è¦çš„ä¸šåŠ¡é€»è¾‘è€Œå˜åŒ–ã€‚é€šè¿‡ä½¿ç”¨å»ºé€ è€…æ¨¡å¼ï¼Œæˆ‘ä»¬å¯ä»¥æ›´åŠ çµæ´»åœ°åˆ›å»ºå¤æ‚çš„å¯¹è±¡ï¼Œè€Œä¸éœ€è¦å…³å¿ƒå…¶å…·ä½“çš„æ„å»ºè¿‡ç¨‹ã€‚</p><p>å»ºé€ è€…æ¨¡å¼é€šå¸¸ç”±ä»¥ä¸‹å‡ ä¸ªè§’è‰²ç»„æˆï¼š</p><ol><li>Directorï¼ˆæŒ‡æŒ¥è€…ï¼‰ï¼šè´Ÿè´£è°ƒç”¨å»ºé€ è€…æ¥æ„å»ºäº§å“ï¼Œå¹¶æ§åˆ¶å»ºé€ çš„æµç¨‹ã€‚</li><li>Builderï¼ˆå»ºé€ è€…ï¼‰ï¼šè´Ÿè´£å®šä¹‰äº§å“çš„æ„å»ºè¿‡ç¨‹ï¼Œä»¥åŠå¦‚ä½•ç»„è£…å„ä¸ªéƒ¨ä»¶ã€‚</li><li>Concrete Builderï¼ˆå…·ä½“å»ºé€ è€…ï¼‰ï¼šè´Ÿè´£å®ç° Builder æ¥å£ï¼Œä»¥å®šä¹‰äº§å“çš„å„ä¸ªéƒ¨ä»¶çš„å…·ä½“æ„å»ºæ–¹å¼ã€‚</li><li>Productï¼ˆäº§å“ï¼‰ï¼šè¦åˆ›å»ºçš„å¤æ‚å¯¹è±¡ï¼Œé€šå¸¸ç”±å¤šä¸ªéƒ¨ä»¶ç»„æˆã€‚</li></ol><p><img src="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/20230405160820.png" alt="å»ºé€ è€…æ¨¡å¼"></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">/*</span><br><span class="hljs-comment"> * Created by 23984 on 2023/4/5.</span><br><span class="hljs-comment"> * å»ºé€ è€…æ¨¡å¼</span><br><span class="hljs-comment"> * å°†ä¸€ä¸ªå¤æ‚å¯¹è±¡çš„æ„å»ºè¿‡ç¨‹åˆ†ç¦»å‡ºæ¥ï¼Œä½¿å…¶å¯ä»¥ç‹¬ç«‹äºä¸»è¦çš„ä¸šåŠ¡é€»è¾‘è€Œå˜åŒ–</span><br><span class="hljs-comment"> */</span><br><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-comment">// è¦åˆ›å»ºçš„å¤æ‚å¯¹è±¡ï¼Œé€šå¸¸ç”±å¤šä¸ªéƒ¨ä»¶ç»„æˆã€‚</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Product</span> &#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">set_part_a</span><span class="hljs-params">(<span class="hljs-type">const</span> std::string&amp; part_a)</span> </span>&#123;<br>        part_a_ = part_a;<br>    &#125;<br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">set_part_b</span><span class="hljs-params">(<span class="hljs-type">const</span> std::string&amp; part_b)</span> </span>&#123;<br>        part_b_ = part_b;<br>    &#125;<br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">set_part_c</span><span class="hljs-params">(<span class="hljs-type">const</span> std::string&amp; part_c)</span> </span>&#123;<br>        part_c_ = part_c;<br>    &#125;<br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">print_parts</span><span class="hljs-params">()</span> <span class="hljs-type">const</span> </span>&#123;<br>        std::cout &lt;&lt; <span class="hljs-string">&quot;Part A: &quot;</span> &lt;&lt; part_a_ &lt;&lt; <span class="hljs-string">&quot;\n&quot;</span>;<br>        std::cout &lt;&lt; <span class="hljs-string">&quot;Part B: &quot;</span> &lt;&lt; part_b_ &lt;&lt; <span class="hljs-string">&quot;\n&quot;</span>;<br>        std::cout &lt;&lt; <span class="hljs-string">&quot;Part C: &quot;</span> &lt;&lt; part_c_ &lt;&lt; <span class="hljs-string">&quot;\n&quot;</span>;<br>    &#125;<br><span class="hljs-keyword">private</span>:<br>    std::string part_a_;<br>    std::string part_b_;<br>    std::string part_c_;<br>&#125;;<br><br><span class="hljs-comment">// è´Ÿè´£å®šä¹‰äº§å“çš„æ„å»ºè¿‡ç¨‹ï¼Œä»¥åŠå¦‚ä½•ç»„è£…å„ä¸ªéƒ¨ä»¶ã€‚</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Builder</span> &#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">build_part_a</span><span class="hljs-params">()</span> </span>= <span class="hljs-number">0</span>;<br>    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">build_part_b</span><span class="hljs-params">()</span> </span>= <span class="hljs-number">0</span>;<br>    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">build_part_c</span><span class="hljs-params">()</span> </span>= <span class="hljs-number">0</span>;<br>    <span class="hljs-function"><span class="hljs-keyword">virtual</span> Product* <span class="hljs-title">get_product</span><span class="hljs-params">()</span> </span>= <span class="hljs-number">0</span>;<br>&#125;;<br><br><span class="hljs-comment">// è´Ÿè´£å®ç° Builder æ¥å£ï¼Œä»¥å®šä¹‰äº§å“çš„å„ä¸ªéƒ¨ä»¶çš„å…·ä½“æ„å»ºæ–¹å¼ã€‚</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">ConcreteBuilder</span> : <span class="hljs-keyword">public</span> Builder &#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-built_in">ConcreteBuilder</span>() : <span class="hljs-built_in">product_</span>(<span class="hljs-keyword">new</span> <span class="hljs-built_in">Product</span>()) &#123;&#125;<br>    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">build_part_a</span><span class="hljs-params">()</span> </span>&#123;<br>        product_-&gt;<span class="hljs-built_in">set_part_a</span>(<span class="hljs-string">&quot;Part A&quot;</span>);<br>    &#125;<br>    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">build_part_b</span><span class="hljs-params">()</span> </span>&#123;<br>        product_-&gt;<span class="hljs-built_in">set_part_b</span>(<span class="hljs-string">&quot;Part B&quot;</span>);<br>    &#125;<br>    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">build_part_c</span><span class="hljs-params">()</span> </span>&#123;<br>        product_-&gt;<span class="hljs-built_in">set_part_c</span>(<span class="hljs-string">&quot;Part C&quot;</span>);<br>    &#125;<br>    <span class="hljs-function"><span class="hljs-keyword">virtual</span> Product* <span class="hljs-title">get_product</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> product_;<br>    &#125;<br><span class="hljs-keyword">private</span>:<br>    Product* product_;<br>&#125;;<br><br><span class="hljs-comment">// è´Ÿè´£è°ƒç”¨å»ºé€ è€…æ¥æ„å»ºäº§å“ï¼Œå¹¶æ§åˆ¶å»ºé€ çš„æµç¨‹ã€‚</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Director</span> &#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-built_in">Director</span>(Builder* builder) : <span class="hljs-built_in">builder_</span>(builder) &#123;&#125;<br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">construct</span><span class="hljs-params">()</span> </span>&#123;<br>        builder_-&gt;<span class="hljs-built_in">build_part_a</span>();<br>        builder_-&gt;<span class="hljs-built_in">build_part_b</span>();<br>        builder_-&gt;<span class="hljs-built_in">build_part_c</span>();<br>    &#125;<br><span class="hljs-keyword">private</span>:<br>    Builder* builder_;<br>&#125;;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    ConcreteBuilder builder1;<br>    <span class="hljs-function">Director <span class="hljs-title">director</span><span class="hljs-params">(&amp;builder1)</span></span>;<br>    director.<span class="hljs-built_in">construct</span>();<br>    Product* product = builder1.<span class="hljs-built_in">get_product</span>();<br>    product-&gt;<span class="hljs-built_in">print_parts</span>();<br>    <span class="hljs-keyword">delete</span> product;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="7ã€å¤–è§‚æ¨¡å¼"><a href="#7ã€å¤–è§‚æ¨¡å¼" class="headerlink" title="7ã€å¤–è§‚æ¨¡å¼"></a>7ã€å¤–è§‚æ¨¡å¼</h2><p>C++å¤–è§‚æ¨¡å¼æ˜¯ä¸€ç§è®¾è®¡æ¨¡å¼ï¼Œå®ƒæä¾›äº†ä¸€ä¸ªç®€å•çš„æ¥å£ï¼Œç”¨äºè®¿é—®å¤æ‚ç³»ç»Ÿçš„å­ç³»ç»Ÿã€‚å¤–è§‚æ¨¡å¼éšè—äº†ç³»ç»Ÿçš„å¤æ‚æ€§ï¼Œå¹¶ä¸ºå®¢æˆ·ç«¯æä¾›äº†ä¸€ä¸ªç®€å•çš„æ¥å£ï¼Œä»¥ä¾¿äºä½¿ç”¨ç³»ç»Ÿã€‚</p><p>åœ¨ C++ä¸­ï¼Œå¤–è§‚æ¨¡å¼é€šå¸¸æ¶‰åŠåˆ°ä¸€ä¸ªå¤–è§‚ç±»ï¼Œè¯¥ç±»å°è£…äº†<strong>å­ç³»ç»Ÿ</strong>çš„å¤æ‚æ€§ï¼Œå¹¶æä¾›äº†ä¸€ä¸ªç®€å•çš„æ¥å£ï¼Œç”¨äºè®¿é—®å­ç³»ç»Ÿçš„åŠŸèƒ½ã€‚å®¢æˆ·ç«¯åªéœ€è¦ä¸å¤–è§‚ç±»äº¤äº’ï¼Œå¹¶ä¸éœ€è¦äº†è§£å­ç³»ç»Ÿçš„å·¥ä½œåŸç†ã€‚</p><p>ä¸‹é¢ä»¥æ•°å€¼è¿·ä½ è¿‡ç¨‹ä¸¾ä¾‹ï¼Œæ•°å€¼æ¨¡æ‹Ÿä¸€èˆ¬åŒ…æ‹¬å»ºæ¨¡ã€åˆ’åˆ†ç½‘æ ¼ã€è®¡ç®—å’Œåå¤„ç† 4 éƒ¨åˆ†ã€‚</p><p><img src="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/20230405200558.png" alt="å¤–è§‚æ¨¡å¼"></p><p>ç¤ºä¾‹ä»£ç å¦‚ä¸‹</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">/*</span><br><span class="hljs-comment"> * Created by 23984 on 2023/4/5.</span><br><span class="hljs-comment"> * å¤–è§‚æ¨¡å¼</span><br><span class="hljs-comment"> * å½“ä¸€ä¸ªç³»ç»Ÿå¾ˆå¤æ‚æ—¶ï¼Œç³»ç»Ÿæä¾›ç»™å®¢æˆ·çš„æ˜¯ä¸€ä¸ªç®€å•çš„å¯¹å¤–æ¥å£ï¼Œè€ŒæŠŠé‡Œé¢å¤æ‚çš„ç»“æ„éƒ½å°è£…äº†èµ·æ¥ã€‚</span><br><span class="hljs-comment"> */</span><br><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Model</span>&#123;<br><span class="hljs-keyword">public</span>:<br>  <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">createModel</span><span class="hljs-params">()</span></span>&#123;<br>    cout &lt;&lt; <span class="hljs-string">&quot;å»ºæ¨¡&quot;</span> &lt;&lt; endl;<br>  &#125;<br>&#125;;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Mesh</span>&#123;<br><span class="hljs-keyword">public</span>:<br>  <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">createMesh</span><span class="hljs-params">()</span></span>&#123;<br>    cout &lt;&lt; <span class="hljs-string">&quot;åˆ’åˆ†ç½‘æ ¼&quot;</span> &lt;&lt; endl;<br>  &#125;<br>&#125;;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Caculate</span>&#123;<br><span class="hljs-keyword">public</span>:<br>  <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">numericalCalculation</span><span class="hljs-params">()</span></span>&#123;<br>    cout &lt;&lt; <span class="hljs-string">&quot;æ•°å€¼è®¡ç®—&quot;</span> &lt;&lt; endl;<br>  &#125;<br>&#125;;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">PostProcess</span>&#123;<br><span class="hljs-keyword">public</span>:<br>  <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">pprocess</span><span class="hljs-params">()</span></span>&#123;<br>    cout &lt;&lt; <span class="hljs-string">&quot;åå¤„ç†&quot;</span> &lt;&lt; endl;<br>  &#125;<br>&#125;;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Simulation</span>&#123;<br><span class="hljs-keyword">public</span>:<br>  <span class="hljs-built_in">Simulation</span>():<span class="hljs-built_in">model_</span>(<span class="hljs-keyword">new</span> <span class="hljs-built_in">Model</span>()),<span class="hljs-built_in">mesh_</span>(<span class="hljs-keyword">new</span> <span class="hljs-built_in">Mesh</span>()),<span class="hljs-built_in">cal_</span>(<span class="hljs-keyword">new</span> <span class="hljs-built_in">Caculate</span>()),<span class="hljs-built_in">post_</span>(<span class="hljs-keyword">new</span> <span class="hljs-built_in">PostProcess</span>())&#123;&#125;;<br>  <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">simulate</span><span class="hljs-params">()</span></span>&#123;<br>    model_-&gt;<span class="hljs-built_in">createModel</span>();<br>    mesh_-&gt;<span class="hljs-built_in">createMesh</span>();<br>    cal_-&gt;<span class="hljs-built_in">numericalCalculation</span>();<br>    post_-&gt;<span class="hljs-built_in">pprocess</span>();<br>  &#125;<br><span class="hljs-keyword">private</span>:<br>  Model *model_;<br>  Mesh *mesh_;<br>  Caculate *cal_;<br>  PostProcess *post_;<br>&#125;;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>  Simulation s;<br>  s.<span class="hljs-built_in">simulate</span>();<br><br>  <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="8ã€ç»„åˆæ¨¡å¼"><a href="#8ã€ç»„åˆæ¨¡å¼" class="headerlink" title="8ã€ç»„åˆæ¨¡å¼"></a>8ã€ç»„åˆæ¨¡å¼</h2><p>C++ç»„åˆæ¨¡å¼æ˜¯ä¸€ç§è®¾è®¡æ¨¡å¼ï¼Œå®ƒå…è®¸æˆ‘ä»¬å°†å¯¹è±¡ç»„æˆ<u><strong>æ ‘å½¢</strong></u>ç»“æ„ï¼Œä»¥è¡¨ç¤ºâ€œæ•´ä½“&#x2F;éƒ¨åˆ†â€å±‚æ¬¡ç»“æ„ã€‚ç»„åˆæ¨¡å¼ä½¿æˆ‘ä»¬èƒ½å¤Ÿä»¥ä¸€è‡´çš„æ–¹å¼å¤„ç†å•ä¸ªå¯¹è±¡å’Œå¯¹è±¡çš„ç»„åˆã€‚</p><p>åœ¨ C++ä¸­ï¼Œç»„åˆæ¨¡å¼é€šå¸¸æ¶‰åŠåˆ°ä¸€ä¸ªç»„ä»¶ç±»ï¼Œè¯¥ç±»å®šä¹‰äº†è¡¨ç¤ºâ€œæ•´ä½“&#x2F;éƒ¨åˆ†â€å±‚æ¬¡ç»“æ„çš„æ‰€æœ‰å¯¹è±¡çš„é€šç”¨æ¥å£ã€‚ç»„ä»¶ç±»å¯ä»¥æ˜¯æŠ½è±¡çš„ï¼Œä¹Ÿå¯ä»¥æ˜¯å…·ä½“çš„ã€‚</p><p>ç»„ä»¶ç±»å¯ä»¥æœ‰å­ç±»ï¼Œè¿™äº›å­ç±»å¯ä»¥æ˜¯å¶å­èŠ‚ç‚¹ï¼Œä¹Ÿå¯ä»¥æ˜¯ç»„åˆèŠ‚ç‚¹ã€‚å¶å­èŠ‚ç‚¹è¡¨ç¤ºæ ‘ä¸­çš„å•ä¸ªå¯¹è±¡ï¼Œè€Œç»„åˆèŠ‚ç‚¹è¡¨ç¤ºæ ‘ä¸­çš„å¯¹è±¡ç»„åˆã€‚ç»„åˆèŠ‚ç‚¹å¯ä»¥åŒ…å«ä¸€ä¸ªæˆ–å¤šä¸ªå­èŠ‚ç‚¹ï¼Œè¿™äº›å­èŠ‚ç‚¹å¯ä»¥æ˜¯å¶å­èŠ‚ç‚¹ï¼Œä¹Ÿå¯ä»¥æ˜¯ç»„åˆèŠ‚ç‚¹ã€‚</p><p><img src="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/20230405205839.png" alt="ç»„åˆæ¨¡å¼"></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">/*</span><br><span class="hljs-comment"> * Created by 23984 on 2023/4/5.</span><br><span class="hljs-comment"> * ç»„åˆæ¨¡å¼</span><br><span class="hljs-comment"> * å¯¹è±¡ç»„åˆæˆæ ‘å½¢ç»“æ„ä»¥è¡¨ç¤ºâ€œéƒ¨åˆ†-æ•´ä½“â€çš„å±‚æ¬¡ç»“æ„ã€‚ç»„åˆä½¿å¾—ç”¨æˆ·å¯¹å•ä¸ªå¯¹è±¡å’Œç»„åˆå¯¹è±¡çš„ä½¿ç”¨å…·æœ‰ä¸€è‡´æ€§</span><br><span class="hljs-comment"> */</span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;list&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Item</span><br>&#123;<br><span class="hljs-keyword">public</span>:<br>  <span class="hljs-built_in">Item</span>(string name) : <span class="hljs-built_in">name_</span>(name)&#123;&#125;;<br>  <span class="hljs-keyword">virtual</span> ~<span class="hljs-built_in">Item</span>()&#123;&#125;;<br>  <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">Add</span><span class="hljs-params">(Item *aItem)</span></span>&#123;&#125;;<br>  <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">Show</span><span class="hljs-params">(<span class="hljs-type">int</span> depth)</span></span>&#123;&#125;;<br><br><span class="hljs-keyword">protected</span>:<br>  string name_;<br>&#125;;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Folder</span> : <span class="hljs-keyword">public</span> Item<br>&#123;<br><span class="hljs-keyword">public</span>:<br>  <span class="hljs-built_in">Folder</span>(string name) : <span class="hljs-built_in">Item</span>(name)&#123;&#125;;<br>  ~<span class="hljs-built_in">Folder</span>() <span class="hljs-keyword">override</span>&#123;&#125;;<br>  <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">Add</span><span class="hljs-params">(Item *aItem)</span></span><br><span class="hljs-function">  </span>&#123;<br>    item_list_.<span class="hljs-built_in">push_back</span>(aItem);<br>  &#125;;<br>  <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">Show</span><span class="hljs-params">(<span class="hljs-type">int</span> depth)</span></span><br><span class="hljs-function">  </span>&#123;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; depth; i++)<br>    &#123;<br>      <span class="hljs-comment">/* code */</span><br>      cout &lt;&lt; <span class="hljs-string">&quot;-&quot;</span>;<br>    &#125;<br>    cout &lt;&lt; name_ &lt;&lt; endl;<br>    list&lt;Item *&gt;::iterator iter = item_list_.<span class="hljs-built_in">begin</span>();<br>    <span class="hljs-keyword">for</span> (; iter != item_list_.<span class="hljs-built_in">end</span>(); iter++)<br>    &#123;<br>      <span class="hljs-comment">/* code */</span><br>      (*iter)-&gt;<span class="hljs-built_in">Show</span>(depth + <span class="hljs-number">2</span>);<br>    &#125;<br>  &#125;<br><br><span class="hljs-keyword">private</span>:<br>  list&lt;Item *&gt; item_list_;<br>&#125;;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">GraphicsA</span> : <span class="hljs-keyword">public</span> Item<br>&#123;<br><span class="hljs-keyword">public</span>:<br>  <span class="hljs-built_in">GraphicsA</span>(string name) : <span class="hljs-built_in">Item</span>(name)&#123;&#125;;<br>  ~<span class="hljs-built_in">GraphicsA</span>() <span class="hljs-keyword">override</span>&#123;&#125;;<br>  <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">Show</span><span class="hljs-params">(<span class="hljs-type">int</span> depth)</span></span><br><span class="hljs-function">  </span>&#123;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; depth; i++)<br>    &#123;<br>      cout &lt;&lt; <span class="hljs-string">&quot;-&quot;</span>;<br>    &#125;<br>    cout &lt;&lt; name_ &lt;&lt; endl;<br>  &#125;<br>&#125;;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">GraphicsB</span> : <span class="hljs-keyword">public</span> Item<br>&#123;<br><span class="hljs-keyword">public</span>:<br>  <span class="hljs-built_in">GraphicsB</span>(string name) : <span class="hljs-built_in">Item</span>(name)&#123;&#125;;<br>  ~<span class="hljs-built_in">GraphicsB</span>() <span class="hljs-keyword">override</span>&#123;&#125;;<br>  <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">Show</span><span class="hljs-params">(<span class="hljs-type">int</span> depth)</span></span><br><span class="hljs-function">  </span>&#123;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; depth; i++)<br>    &#123;<br>      cout &lt;&lt; <span class="hljs-string">&quot;-&quot;</span>;<br>    &#125;<br>    cout &lt;&lt; name_ &lt;&lt; endl;<br>  &#125;<br>&#125;;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>  Item *root = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Folder</span>(<span class="hljs-string">&quot;æ€»åˆ†ç»„&quot;</span>);<br>  Item *b1 = <span class="hljs-keyword">new</span> <span class="hljs-built_in">GraphicsA</span>(<span class="hljs-string">&quot;çƒ1&quot;</span>);<br>  Item *c1 = <span class="hljs-keyword">new</span> <span class="hljs-built_in">GraphicsB</span>(<span class="hljs-string">&quot;ç«‹æ–¹ä½“1&quot;</span>);<br>  root-&gt;<span class="hljs-built_in">Add</span>(b1);<br>  root-&gt;<span class="hljs-built_in">Add</span>(c1);<br><br>  Item *f1 = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Folder</span>(<span class="hljs-string">&quot;åˆ†ç»„1&quot;</span>);<br>  Item *b2 = <span class="hljs-keyword">new</span> <span class="hljs-built_in">GraphicsA</span>(<span class="hljs-string">&quot;çƒ2&quot;</span>);<br>  Item *c2 = <span class="hljs-keyword">new</span> <span class="hljs-built_in">GraphicsB</span>(<span class="hljs-string">&quot;ç«‹æ–¹ä½“2&quot;</span>);<br>  f1-&gt;<span class="hljs-built_in">Add</span>(b2);<br>  f1-&gt;<span class="hljs-built_in">Add</span>(c2);<br>  root-&gt;<span class="hljs-built_in">Add</span>(f1);<br><br>  root-&gt;<span class="hljs-built_in">Show</span>(<span class="hljs-number">0</span>);<br><br>  <span class="hljs-keyword">delete</span> root;<br>  <span class="hljs-keyword">delete</span> b1;<br>  <span class="hljs-keyword">delete</span> c1;<br>  <span class="hljs-keyword">delete</span> f1;<br>  <span class="hljs-keyword">delete</span> b2;<br>  <span class="hljs-keyword">delete</span> c2;<br>  <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>è¾“å‡º</p><p><img src="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/20230405204311.png" alt="ç»„åˆæ¨¡å¼"></p><blockquote><p>æ³¨æ„è¿™é‡Œçš„ show å‡½æ•°ä¼ å…¥äº†ä¸€ä¸ªæ·±åº¦ï¼Œæ·±åº¦é€’å¢+2.root è°ƒç”¨æ—¶ show ä¼ å…¥çš„ä¸º 0ï¼Œb1ã€c1 å’Œ f1 ä¼ å…¥æ—¶ show è°ƒç”¨çš„æ˜¯ 2ï¼Œb2 å’Œ c2 è°ƒç”¨æ—¶ä¼ å…¥çš„æ˜¯ 4.</p><p>ä¸Šé¢çš„å®ç°æ–¹å¼æœ‰ç¼ºç‚¹ï¼Œå°±æ˜¯å†…å­˜çš„é‡Šæ”¾ä¸å¥½ï¼Œéœ€è¦å®¢æˆ·è‡ªå·±åŠ¨æ‰‹ï¼Œéå¸¸ä¸æ–¹ä¾¿ã€‚æœ‰å¾…æ”¹è¿›ï¼Œæ¯”è¾ƒå¥½çš„åšæ³•æ˜¯è®© Folder ç±»æ¥é‡Šæ”¾ã€‚å› ä¸ºæ‰€æœ‰çš„æŒ‡é’ˆéƒ½æ˜¯å­˜åœ¨ Folder ç±»çš„é“¾è¡¨ä¸­ã€‚</p></blockquote><h2 id="9ã€ä»£ç†æ¨¡å¼"><a href="#9ã€ä»£ç†æ¨¡å¼" class="headerlink" title="9ã€ä»£ç†æ¨¡å¼"></a>9ã€ä»£ç†æ¨¡å¼</h2><p>å…è®¸æˆ‘ä»¬æä¾›ä¸€ä¸ªä»£ç†å¯¹è±¡æ¥<u><strong>æ§åˆ¶å¯¹å¦ä¸€ä¸ªå¯¹è±¡çš„è®¿é—®</strong></u>ã€‚ä»£ç†æ¨¡å¼ä½¿æˆ‘ä»¬èƒ½å¤Ÿåœ¨ä¸æ”¹å˜åŸå§‹å¯¹è±¡çš„æƒ…å†µä¸‹ï¼Œå¢å¼ºå…¶åŠŸèƒ½æˆ–æ§åˆ¶å…¶è®¿é—®ã€‚</p><p>åœ¨ C++ä¸­ï¼Œä»£ç†æ¨¡å¼é€šå¸¸æ¶‰åŠåˆ°ä¸€ä¸ªä»£ç†ç±»å’Œä¸€ä¸ªåŸå§‹ç±»ã€‚ä»£ç†ç±»å®ç°äº†ä¸åŸå§‹ç±»ç›¸åŒçš„æ¥å£ï¼Œå¹¶åœ¨å…¶å†…éƒ¨ç»´æŠ¤ä¸€ä¸ªå¯¹åŸå§‹å¯¹è±¡çš„å¼•ç”¨ã€‚ä»£ç†ç±»å¯ä»¥æ‹¦æˆªå¯¹åŸå§‹å¯¹è±¡çš„è®¿é—®ï¼Œå¹¶æ ¹æ®éœ€è¦å°†å…¶è½¬å‘ç»™åŸå§‹å¯¹è±¡ã€‚</p><p>ä¸»è¦åˆ†ä¸ºï¼ˆ1ï¼‰è¿œç¨‹ä»£ç†ï¼Œï¼ˆ2ï¼‰è™šä»£ç†ï¼Œï¼ˆ3ï¼‰ä¿æŠ¤ä»£ç†ï¼Œï¼ˆ4ï¼‰æ™ºèƒ½å¼•ç”¨ã€‚æœ¬æ–‡ä¸»è¦ä»‹ç»è™šä»£ç†å’Œæ™ºèƒ½å¼•ç”¨ä¸¤ç§æƒ…å†µã€‚</p><h3 id="9-1-è™šä»£ç†"><a href="#9-1-è™šä»£ç†" class="headerlink" title="9.1 è™šä»£ç†"></a>9.1 è™šä»£ç†</h3><p><img src="https://mmbiz.qpic.cn/mmbiz_jpg/8pECVbqIO0y4v6U2GWEqj1wOpq0tQgnKBOPUTlooMiaDichaA8sjurqucSvLElA54Ib0IayKdpXhia3p0Bz6ZwxpQ/640?wx_fmt=jpeg&tp=wxpic&wxfrom=5&wx_lazy=1&wx_co=1" alt="ä»£ç†æ¨¡å¼"></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">/*</span><br><span class="hljs-comment"> * Created by 23984 on 2023/4/5.</span><br><span class="hljs-comment"> * ä»£ç†æ¨¡å¼</span><br><span class="hljs-comment"> * å…è®¸æˆ‘ä»¬æä¾›ä¸€ä¸ªä»£ç†å¯¹è±¡æ¥æ§åˆ¶å¯¹å¦ä¸€ä¸ªå¯¹è±¡çš„è®¿é—®ã€‚ä»£ç†æ¨¡å¼ä½¿æˆ‘ä»¬èƒ½å¤Ÿåœ¨ä¸æ”¹å˜åŸå§‹å¯¹è±¡çš„æƒ…å†µä¸‹ï¼Œå¢å¼ºå…¶åŠŸèƒ½æˆ–æ§åˆ¶å…¶è®¿é—®ã€‚</span><br><span class="hljs-comment"> */</span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-comment">// å›¾ç‰‡åŸºç±»</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Image</span><br>&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-built_in">Image</span>(string name): <span class="hljs-built_in">imageName_</span>(name) &#123;&#125;<br>    <span class="hljs-keyword">virtual</span> ~<span class="hljs-built_in">Image</span>() &#123;&#125;<br>    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">Show</span><span class="hljs-params">()</span> </span>&#123;&#125;<br><span class="hljs-keyword">protected</span>:<br>    string imageName_;<br>&#125;;<br><br><span class="hljs-comment">// å¤§å›¾ç‰‡</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">BigImage</span>: <span class="hljs-keyword">public</span> Image<br>&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-built_in">BigImage</span>(string name):<span class="hljs-built_in">Image</span>(name) &#123;&#125;<br>    ~<span class="hljs-built_in">BigImage</span>() &#123;&#125;<br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">Show</span><span class="hljs-params">()</span> </span>&#123; cout&lt;&lt;<span class="hljs-string">&quot;Show big image : &quot;</span>&lt;&lt;imageName_&lt;&lt;endl; &#125;<br>&#125;;<br><br><span class="hljs-comment">// å¤§å›¾ç‰‡ä»£ç†</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">BigImageProxy</span>: <span class="hljs-keyword">public</span> Image<br>&#123;<br><span class="hljs-keyword">private</span>:<br>    BigImage *bigImage_;  <span class="hljs-comment">// å¤§å›¾ç‰‡</span><br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-built_in">BigImageProxy</span>(string name):<span class="hljs-built_in">Image</span>(name),<span class="hljs-built_in">bigImage_</span>(<span class="hljs-literal">nullptr</span>) &#123;&#125;<br>    ~<span class="hljs-built_in">BigImageProxy</span>() &#123; <span class="hljs-keyword">delete</span> bigImage_; &#125;<br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">Show</span><span class="hljs-params">()</span></span><br><span class="hljs-function">    </span>&#123;<br>        <span class="hljs-keyword">if</span>(bigImage_ == <span class="hljs-literal">nullptr</span>)<br>            bigImage_ = <span class="hljs-keyword">new</span> <span class="hljs-built_in">BigImage</span>(imageName_);<br>        bigImage_-&gt;<span class="hljs-built_in">Show</span>();<br>    &#125;<br>&#125;;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    Image *image = <span class="hljs-keyword">new</span> <span class="hljs-built_in">BigImageProxy</span>(<span class="hljs-string">&quot;proxy.jpg&quot;</span>); <span class="hljs-comment">//ä»£ç†</span><br>    image-&gt;<span class="hljs-built_in">Show</span>(); <span class="hljs-comment">//éœ€è¦æ—¶ç”±ä»£ç†è´Ÿè´£æ‰“å¼€</span><br>    <span class="hljs-keyword">delete</span> image;<br><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><br></code></pre></td></tr></table></figure><h3 id="9-2-å¼•ç”¨ä»£ç†"><a href="#9-2-å¼•ç”¨ä»£ç†" class="headerlink" title="9.2 å¼•ç”¨ä»£ç†"></a>9.2 å¼•ç”¨ä»£ç†</h3><p>æ‰‹å†™ä¸€ä¸ª auto_ptr</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-keyword">template</span> &lt;<span class="hljs-keyword">typename</span> T&gt;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">auto_ptr</span><br>&#123;<br><span class="hljs-keyword">public</span>:<br>  <span class="hljs-function"><span class="hljs-keyword">explicit</span> <span class="hljs-title">auto_ptr</span><span class="hljs-params">(T *p = <span class="hljs-literal">nullptr</span>)</span> : pointee(p)&#123;</span>&#125;;<br>  <span class="hljs-built_in">auto_ptr</span>(auto_ptr&lt;T&gt; &amp;rhs) : <span class="hljs-built_in">pointee</span>(rhs.<span class="hljs-built_in">release</span>())&#123;&#125;;<br>  ~<span class="hljs-built_in">auto_ptr</span>() &#123; <span class="hljs-keyword">delete</span> pointee; &#125;;<br>  auto_ptr&lt;T&gt; &amp;<span class="hljs-keyword">operator</span>=(auto_ptr &amp;rhs)<br>  &#123;<br>    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span> != &amp;rhs)<br>      <span class="hljs-built_in">reset</span>(rhs.<span class="hljs-built_in">release</span>());<br>    <span class="hljs-keyword">return</span> *<span class="hljs-keyword">this</span>;<br>  &#125;<br>  T &amp;<span class="hljs-keyword">operator</span>*() <span class="hljs-type">const</span> &#123; <span class="hljs-keyword">return</span> *pointee; &#125;;<br>  T &amp;<span class="hljs-keyword">operator</span>-&gt;() <span class="hljs-type">const</span> &#123; <span class="hljs-keyword">return</span> pointee; &#125;;<br>  <span class="hljs-function">T *<span class="hljs-title">get</span><span class="hljs-params">()</span> <span class="hljs-type">const</span> </span>&#123; <span class="hljs-keyword">return</span> pointee; &#125;;<br>  <span class="hljs-function">T *<span class="hljs-title">release</span><span class="hljs-params">()</span></span><br><span class="hljs-function">  </span>&#123;<br>    T *oldPointee = pointee;<br>    pointee = <span class="hljs-literal">nullptr</span>;<br>    <span class="hljs-keyword">return</span> oldPointee;<br>  &#125;<br>  <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">reset</span><span class="hljs-params">(T *p = <span class="hljs-literal">nullptr</span>)</span></span><br><span class="hljs-function">  </span>&#123;<br>    <span class="hljs-keyword">if</span> (pointee != p)<br>    &#123;<br>      <span class="hljs-keyword">delete</span> pointee;<br>      pointee = p;<br>    &#125;<br>  &#125;<br><br><span class="hljs-keyword">private</span>:<br>  T *pointee;<br>&#125;;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>  <span class="hljs-function">auto_ptr&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-title">p1</span><span class="hljs-params">(<span class="hljs-keyword">new</span> <span class="hljs-type">int</span>(<span class="hljs-number">42</span>))</span></span>;<br>  auto_ptr&lt;<span class="hljs-type">int</span>&gt; p2 = p1;<br>  cout &lt;&lt; *p2 &lt;&lt;endl;<br>  <span class="hljs-keyword">auto</span> p3 = <span class="hljs-keyword">new</span> <span class="hljs-built_in">int</span>(<span class="hljs-number">50</span>);<br>  p2.<span class="hljs-built_in">reset</span>(p3);<br>  cout &lt;&lt; *p2 &lt;&lt;endl;<br><br>  <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="10ã€äº«å…ƒæ¨¡å¼"><a href="#10ã€äº«å…ƒæ¨¡å¼" class="headerlink" title="10ã€äº«å…ƒæ¨¡å¼"></a>10ã€äº«å…ƒæ¨¡å¼</h2><ol><li>C++ä¸­çš„äº«å…ƒæ¨¡å¼æ˜¯ä¸€ç§<strong>ç»“æ„å‹è®¾è®¡æ¨¡å¼</strong>ï¼Œå®ƒæ—¨åœ¨é€šè¿‡å…±äº«å¯¹è±¡æ¥æœ€å°åŒ–å†…å­˜ä½¿ç”¨å’Œå¯¹è±¡åˆ›å»ºçš„å¼€é”€ã€‚</li><li>åœ¨äº«å…ƒæ¨¡å¼ä¸­ï¼Œå¯¹è±¡çš„çŠ¶æ€è¢«åˆ†ä¸º<strong>å†…éƒ¨çŠ¶æ€</strong>å’Œ<strong>å¤–éƒ¨çŠ¶æ€</strong>ï¼Œå…¶ä¸­å†…éƒ¨çŠ¶æ€æ˜¯å¯¹è±¡çš„å›ºæœ‰å±æ€§ï¼Œè€Œå¤–éƒ¨çŠ¶æ€åˆ™æ˜¯åœ¨è¿è¡Œæ—¶ç”±å®¢æˆ·ç«¯ä¼ é€’ç»™å¯¹è±¡çš„ä¿¡æ¯ã€‚</li><li>åœ¨ C++ä¸­ï¼Œå®ç°äº«å…ƒæ¨¡å¼éœ€è¦å®šä¹‰ä¸€ä¸ªäº«å…ƒå·¥å‚ç±»å’Œä¸€ä¸ªäº«å…ƒç±»ã€‚</li><li>äº«å…ƒå·¥å‚ç±»è´Ÿè´£åˆ›å»ºå’Œç®¡ç†äº«å…ƒå¯¹è±¡ï¼Œè€Œäº«å…ƒç±»åˆ™è´Ÿè´£å­˜å‚¨å’Œå¤„ç†å¯¹è±¡çš„å†…éƒ¨çŠ¶æ€å’Œå¤–éƒ¨çŠ¶æ€ã€‚</li></ol><p>æ¯”å¦‚ï¼šåœ¨è®¾è®¡ä¸€æ¬¾æ¸¸æˆæ—¶ï¼Œé‡Œé¢æœ‰å¾ˆå¤šçš„æ€ªç‰©ï¼Œè¿™äº›æ€ªç‰©è™½ç„¶åˆ†ä¸ºä¸åŒçš„ç±»åˆ«ï¼Œä½†æ¯ç§éƒ½æœ‰è‡ªå·±çš„è¡€æ¡ã€æ”»å‡»åŠ›å’Œé˜²å¾¡åŠ›ã€‚</p><ol><li>å®šä¹‰ä¸€ä¸ª mapï¼Œç”¨äºå­˜å‚¨å“¥å¸ƒæ—ã€å…½äººå’Œé¾™ï¼›</li><li>åˆ›å»ºå“¥å¸ƒæ—å¯¹è±¡ï¼Œå¦‚æœå·²ç»å­˜åœ¨å“¥å¸ƒæ—å¯¹è±¡ï¼Œè¿”å›å·²å­˜åœ¨çš„å“¥å¸ƒæ—çš„å¼•ç”¨ï¼Œå¦åˆ™æ–°å»ºå“¥å¸ƒæ—å¯¹è±¡ï¼›</li><li>å¯ä»¥éªŒè¯ g1 å’Œ g2 æ˜¯åŒä¸€ä¸ªå¯¹è±¡çš„å¼•ç”¨ã€‚</li></ol><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">/*</span><br><span class="hljs-comment"> * Created by 23984 on 2023/4/5.</span><br><span class="hljs-comment"> * äº«å…ƒæ¨¡å¼</span><br><span class="hljs-comment"> * C++ä¸­çš„äº«å…ƒæ¨¡å¼æ˜¯ä¸€ç§ç»“æ„å‹è®¾è®¡æ¨¡å¼ï¼Œå®ƒæ—¨åœ¨é€šè¿‡å…±äº«å¯¹è±¡æ¥æœ€å°åŒ–å†…å­˜ä½¿ç”¨å’Œå¯¹è±¡åˆ›å»ºçš„å¼€é”€ã€‚</span><br><span class="hljs-comment"> * åœ¨äº«å…ƒæ¨¡å¼ä¸­ï¼Œå¯¹è±¡çš„çŠ¶æ€è¢«åˆ†ä¸ºå†…éƒ¨çŠ¶æ€å’Œå¤–éƒ¨çŠ¶æ€ï¼Œå…¶ä¸­å†…éƒ¨çŠ¶æ€æ˜¯å¯¹è±¡çš„å›ºæœ‰å±æ€§ï¼Œè€Œå¤–éƒ¨çŠ¶æ€åˆ™æ˜¯åœ¨è¿è¡Œæ—¶ç”±å®¢æˆ·ç«¯ä¼ é€’ç»™å¯¹è±¡çš„ä¿¡æ¯ã€‚</span><br><span class="hljs-comment"> * åœ¨C++ä¸­ï¼Œå®ç°äº«å…ƒæ¨¡å¼éœ€è¦å®šä¹‰ä¸€ä¸ªäº«å…ƒå·¥å‚ç±»å’Œä¸€ä¸ªäº«å…ƒç±»ã€‚</span><br><span class="hljs-comment"> * äº«å…ƒå·¥å‚ç±»è´Ÿè´£åˆ›å»ºå’Œç®¡ç†äº«å…ƒå¯¹è±¡ï¼Œè€Œäº«å…ƒç±»åˆ™è´Ÿè´£å­˜å‚¨å’Œå¤„ç†å¯¹è±¡çš„å†…éƒ¨çŠ¶æ€å’Œå¤–éƒ¨çŠ¶æ€ã€‚</span><br><span class="hljs-comment"> */</span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;map&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Monster</span><br>&#123;<br><span class="hljs-keyword">public</span>:<br>  <span class="hljs-built_in">Monster</span>(<span class="hljs-type">int</span> hp, <span class="hljs-type">int</span> atk, <span class="hljs-type">int</span> def) : <span class="hljs-built_in">hp_</span>(hp), <span class="hljs-built_in">atk_</span>(atk), <span class="hljs-built_in">def_</span>(def)&#123;&#125;;<br>  <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">stack</span><span class="hljs-params">()</span></span><br><span class="hljs-function">  </span>&#123;<br>  &#125;<br><br><span class="hljs-keyword">private</span>:<br>  <span class="hljs-type">int</span> hp_;<br>  <span class="hljs-type">int</span> atk_;<br>  <span class="hljs-type">int</span> def_;<br>&#125;;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">MonsterFactory</span><br>&#123;<br><span class="hljs-keyword">public</span>:<br>  <span class="hljs-function">Monster *<span class="hljs-title">getMonster</span><span class="hljs-params">(<span class="hljs-type">const</span> std::string &amp;name)</span></span><br><span class="hljs-function">  </span>&#123;<br>    <span class="hljs-keyword">auto</span> it = monsterMap_.<span class="hljs-built_in">find</span>(name);<br>    <span class="hljs-keyword">if</span> (it != monsterMap_.<span class="hljs-built_in">end</span>())<br>    &#123;<br>      <span class="hljs-keyword">return</span> it-&gt;second;<br>    &#125;<br>    Monster *monster = <span class="hljs-built_in">createMonster</span>(name);<br>    monsterMap_[name] = monster;<br>    <span class="hljs-keyword">return</span> monster;<br>  &#125;<br><br><span class="hljs-keyword">private</span>:<br>  std::map&lt;std::string, Monster *&gt; monsterMap_;<br>  <span class="hljs-function">Monster *<span class="hljs-title">createMonster</span><span class="hljs-params">(<span class="hljs-type">const</span> std::string &amp;name)</span></span><br><span class="hljs-function">  </span>&#123;<br>    <span class="hljs-keyword">if</span> (name == <span class="hljs-string">&quot;Goblin&quot;</span>)<br>    &#123;<br>      <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Monster</span>(<span class="hljs-number">50</span>, <span class="hljs-number">10</span>, <span class="hljs-number">5</span>);<br>    &#125;<br>    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (name == <span class="hljs-string">&quot;Orc&quot;</span>)<br>    &#123;<br>      <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Monster</span>(<span class="hljs-number">100</span>, <span class="hljs-number">20</span>, <span class="hljs-number">10</span>);<br>    &#125;<br>    <span class="hljs-keyword">else</span><br>    &#123;<br>      <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Monster</span>(<span class="hljs-number">200</span>, <span class="hljs-number">30</span>, <span class="hljs-number">20</span>);<br>    &#125;<br>  &#125;<br>&#125;;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>  MonsterFactory monsterFactory;<br>  Monster *g1 = monsterFactory.<span class="hljs-built_in">getMonster</span>(<span class="hljs-string">&quot;Goblin&quot;</span>);<br>  Monster *g2 = monsterFactory.<span class="hljs-built_in">getMonster</span>(<span class="hljs-string">&quot;Goblin&quot;</span>);<br>  Monster *o1 = monsterFactory.<span class="hljs-built_in">getMonster</span>(<span class="hljs-string">&quot;Orc&quot;</span>);<br>  Monster *o2 = monsterFactory.<span class="hljs-built_in">getMonster</span>(<span class="hljs-string">&quot;Orc&quot;</span>);<br>  Monster *d1 = monsterFactory.<span class="hljs-built_in">getMonster</span>(<span class="hljs-string">&quot;Dragon&quot;</span>);<br>  Monster *d2 = monsterFactory.<span class="hljs-built_in">getMonster</span>(<span class="hljs-string">&quot;Dragon&quot;</span>);<br><br>  cout &lt;&lt; (g1 == g2) &lt;&lt; endl;<br>  cout &lt;&lt; (o1 == o2) &lt;&lt; endl;<br>  cout &lt;&lt; (d1 == d2) &lt;&lt; endl;<br>  cout &lt;&lt; g1-&gt;second &lt;&lt; endl;<br><br>  <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="ç»˜åˆ¶æ£‹ç›˜æ¡ˆä¾‹"><a href="#ç»˜åˆ¶æ£‹ç›˜æ¡ˆä¾‹" class="headerlink" title="ç»˜åˆ¶æ£‹ç›˜æ¡ˆä¾‹"></a>ç»˜åˆ¶æ£‹ç›˜æ¡ˆä¾‹</h3><ol><li>è™½ç„¶æ£‹ç›˜ä¸Šæœ‰å¾ˆå¤šçš„æ£‹å­ï¼Œä½†ä»–ä»¬ä¸æ˜¯ç™½è‰²éƒ½æ˜¯é»‘è‰²ï¼Œæ¯ç§é¢œè‰²çš„å±æ€§éƒ½ä¸€è‡´ï¼Œåªæ˜¯ä½ç½®ä¸åŒã€‚æˆ‘ä»¬å°†ä½ç½®å•ç‹¬å­˜æ”¾ã€‚</li><li>åˆ›å»ºç™½è‰²æ£‹å­æ—¶ï¼Œå¦‚æœå·²ç»å­˜åœ¨ä¸€ä¸ªå¯¹è±¡ï¼Œå°±ç›´æ¥å‘å®¹å™¨ä¸­æ·»åŠ ä½ç½®ï¼›å¦‚æœä¸å­˜åœ¨ï¼Œåˆ™éœ€è¦å…ˆåˆ›å»ºï¼Œå†æ·»åŠ ä½ç½®ï¼›</li><li>è¿™æ ·æ‰€æœ‰çš„ç™½è‰²åªäº«ä¸€ä¸ªå¯¹è±¡ï¼Œæå¤§åœ°èŠ‚çº¦å†…å­˜ç©ºé—´ã€‚</li></ol><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-comment">//æ£‹å­é¢œè‰²</span><br><span class="hljs-keyword">enum</span> <span class="hljs-title class_">PieceColor</span> &#123;BLACK, WHITE&#125;;<br><span class="hljs-comment">//æ£‹å­ä½ç½®</span><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">PiecePos</span><br>&#123;<br>    <span class="hljs-type">int</span> x;<br>    <span class="hljs-type">int</span> y;<br>    <span class="hljs-built_in">PiecePos</span>(<span class="hljs-type">int</span> a, <span class="hljs-type">int</span> b): <span class="hljs-built_in">x</span>(a), <span class="hljs-built_in">y</span>(b) &#123;&#125;<br>&#125;;<br><span class="hljs-comment">//æ£‹å­å®šä¹‰</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Piece</span><br>&#123;<br><span class="hljs-keyword">protected</span>:<br>    PieceColor m_color; <span class="hljs-comment">//é¢œè‰²</span><br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-built_in">Piece</span>(PieceColor color): <span class="hljs-built_in">m_color</span>(color) &#123;&#125;<br>    ~<span class="hljs-built_in">Piece</span>() &#123;&#125;<br>    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">Draw</span><span class="hljs-params">()</span> </span>&#123;&#125;<br>&#125;;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">BlackPiece</span>: <span class="hljs-keyword">public</span> Piece<br>&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-built_in">BlackPiece</span>(PieceColor color): <span class="hljs-built_in">Piece</span>(color) &#123;&#125;<br>    ~<span class="hljs-built_in">BlackPiece</span>() &#123;&#125;<br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">Draw</span><span class="hljs-params">()</span> </span>&#123; cout&lt;&lt;<span class="hljs-string">&quot;ç»˜åˆ¶ä¸€é¢—é»‘æ£‹\n&quot;</span>; &#125;<br>&#125;;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">WhitePiece</span>: <span class="hljs-keyword">public</span> Piece<br>&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-built_in">WhitePiece</span>(PieceColor color): <span class="hljs-built_in">Piece</span>(color) &#123;&#125;<br>    ~<span class="hljs-built_in">WhitePiece</span>() &#123;&#125;<br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">Draw</span><span class="hljs-params">()</span> </span>&#123; cout&lt;&lt;<span class="hljs-string">&quot;ç»˜åˆ¶ä¸€é¢—ç™½æ£‹\n&quot;</span>;&#125;<br>&#125;;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">PieceBoard</span><br>&#123;<br><span class="hljs-keyword">private</span>:<br>    vector&lt;PiecePos&gt; m_vecPos; <span class="hljs-comment">//å­˜æ”¾æ£‹å­çš„ä½ç½®</span><br>    <span class="hljs-comment">// è™½ç„¶æ£‹ç›˜ä¸Šæœ‰å¾ˆå¤šçš„æ£‹å­ï¼Œä½†ä»–ä»¬ä¸æ˜¯ç™½è‰²éƒ½æ˜¯é»‘è‰²ï¼Œæ¯ç§é¢œè‰²çš„å±æ€§éƒ½ä¸€è‡´ï¼Œåªæ˜¯ä½ç½®ä¸åŒã€‚æˆ‘ä»¬å°†ä½ç½®å•ç‹¬å­˜æ”¾ã€‚</span><br>    Piece *m_blackPiece;<br>    Piece *m_whitePiece;<br>    string m_blackName;<br>    string m_whiteName;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-built_in">PieceBoard</span>(string black, string white): <span class="hljs-built_in">m_blackName</span>(black), <span class="hljs-built_in">m_whiteName</span>(white)<br>    &#123;<br>        m_blackPiece = null;<br>        m_whitePiece = <span class="hljs-literal">NULL</span>;<br>    &#125;<br>    ~<span class="hljs-built_in">PieceBoard</span>() &#123; <span class="hljs-keyword">delete</span> m_blackPiece; <span class="hljs-keyword">delete</span> m_whitePiece;&#125;<br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">SetPiece</span><span class="hljs-params">(PieceColor color, PiecePos pos)</span></span><br><span class="hljs-function">    </span>&#123;<br>        <span class="hljs-keyword">if</span>(color == BLACK)<br>        &#123;<br>            <span class="hljs-keyword">if</span>(m_blackPiece == <span class="hljs-literal">NULL</span>)  <span class="hljs-comment">//åªæœ‰ä¸€é¢—é»‘æ£‹</span><br>                m_blackPiece = <span class="hljs-keyword">new</span> <span class="hljs-built_in">BlackPiece</span>(color);<br>            cout&lt;&lt;m_blackName&lt;&lt;<span class="hljs-string">&quot;åœ¨ä½ç½®(&quot;</span>&lt;&lt;pos.x&lt;&lt;<span class="hljs-string">&#x27;,&#x27;</span>&lt;&lt;pos.y&lt;&lt;<span class="hljs-string">&quot;)&quot;</span>;<br>            m_blackPiece-&gt;<span class="hljs-built_in">Draw</span>();<br>        &#125;<br>        <span class="hljs-keyword">else</span><br>        &#123;<br>            <span class="hljs-keyword">if</span>(m_whitePiece == <span class="hljs-literal">NULL</span>)<br>                m_whitePiece = <span class="hljs-keyword">new</span> <span class="hljs-built_in">WhitePiece</span>(color);<br>            cout&lt;&lt;m_whiteName&lt;&lt;<span class="hljs-string">&quot;åœ¨ä½ç½®(&quot;</span>&lt;&lt;pos.x&lt;&lt;<span class="hljs-string">&#x27;,&#x27;</span>&lt;&lt;pos.y&lt;&lt;<span class="hljs-string">&quot;)&quot;</span>;<br>            m_whitePiece-&gt;<span class="hljs-built_in">Draw</span>();<br>        &#125;<br>        m_vecPos.<span class="hljs-built_in">push_back</span>(pos);<br>    &#125;<br>&#125;;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-function">PieceBoard <span class="hljs-title">pieceBoard</span><span class="hljs-params">(<span class="hljs-string">&quot;A&quot;</span>,<span class="hljs-string">&quot;B&quot;</span>)</span></span>;<br>    pieceBoard.<span class="hljs-built_in">SetPiece</span>(BLACK, <span class="hljs-built_in">PiecePos</span>(<span class="hljs-number">4</span>, <span class="hljs-number">4</span>));<br>    pieceBoard.<span class="hljs-built_in">SetPiece</span>(WHITE, <span class="hljs-built_in">PiecePos</span>(<span class="hljs-number">4</span>, <span class="hljs-number">16</span>));<br>    pieceBoard.<span class="hljs-built_in">SetPiece</span>(BLACK, <span class="hljs-built_in">PiecePos</span>(<span class="hljs-number">16</span>, <span class="hljs-number">4</span>));<br>    pieceBoard.<span class="hljs-built_in">SetPiece</span>(WHITE, <span class="hljs-built_in">PiecePos</span>(<span class="hljs-number">16</span>, <span class="hljs-number">16</span>));<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="11ã€æ¡¥æ¥æ¨¡å¼"><a href="#11ã€æ¡¥æ¥æ¨¡å¼" class="headerlink" title="11ã€æ¡¥æ¥æ¨¡å¼"></a>11ã€æ¡¥æ¥æ¨¡å¼</h2><p>C++ä¸­çš„æ¡¥æ¥æ¨¡å¼æ˜¯ä¸€ç§ç»“æ„å‹è®¾è®¡æ¨¡å¼ï¼Œ<strong>å®ƒæ—¨åœ¨å°†æŠ½è±¡éƒ¨åˆ†ä¸å®ç°éƒ¨åˆ†åˆ†ç¦»å¼€æ¥ï¼Œä»è€Œä½¿å®ƒä»¬å¯ä»¥ç‹¬ç«‹åœ°å˜åŒ–</strong>ã€‚åœ¨æ¡¥æ¥æ¨¡å¼ä¸­ï¼ŒæŠ½è±¡éƒ¨åˆ†å’Œå®ç°éƒ¨åˆ†é€šè¿‡ä¸€ä¸ªæ¡¥æ¥æ¥å£è¿›è¡Œè¿æ¥ï¼Œä»è€Œå®ç°è§£è€¦å’Œçµæ´»æ€§ã€‚</p><p>åœ¨ C++ä¸­ï¼Œå®ç°æ¡¥æ¥æ¨¡å¼éœ€è¦å®šä¹‰ä¸€ä¸ª-<strong>æŠ½è±¡åŸºç±»</strong>å’Œä¸€ä¸ª<strong>å®ç°åŸºç±»</strong>ï¼Œå…¶ä¸­æŠ½è±¡åŸºç±»å®šä¹‰äº†æŠ½è±¡éƒ¨åˆ†çš„æ¥å£ï¼Œè€Œå®ç°åŸºç±»å®šä¹‰äº†å®ç°éƒ¨åˆ†çš„æ¥å£ã€‚ç„¶åï¼Œæˆ‘ä»¬é€šè¿‡ç»§æ‰¿å’Œç»„åˆæ¥å®ç°ä¸åŒçš„æŠ½è±¡éƒ¨åˆ†å’Œå®ç°éƒ¨åˆ†çš„ç»„åˆã€‚</p><p>ä¸¾ä¸€ä¸ªæ“ä½œç³»ç»Ÿçš„ä¾‹å­ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-comment">//æ“ä½œç³»ç»Ÿ</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">OS</span><br>&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">InstallOS_Imp</span><span class="hljs-params">()</span> </span>&#123;&#125;<br>&#125;;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">WindowOS</span>: <span class="hljs-keyword">public</span> OS<br>&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">InstallOS_Imp</span><span class="hljs-params">()</span> </span>&#123; cout&lt;&lt;<span class="hljs-string">&quot;å®‰è£…Windowæ“ä½œç³»ç»Ÿ&quot;</span>&lt;&lt;endl; &#125;<br>&#125;;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">LinuxOS</span>: <span class="hljs-keyword">public</span> OS<br>&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">InstallOS_Imp</span><span class="hljs-params">()</span> </span>&#123; cout&lt;&lt;<span class="hljs-string">&quot;å®‰è£…Linuxæ“ä½œç³»ç»Ÿ&quot;</span>&lt;&lt;endl; &#125;<br>&#125;;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">UnixOS</span>: <span class="hljs-keyword">public</span> OS<br>&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">InstallOS_Imp</span><span class="hljs-params">()</span> </span>&#123; cout&lt;&lt;<span class="hljs-string">&quot;å®‰è£…Unixæ“ä½œç³»ç»Ÿ&quot;</span>&lt;&lt;endl; &#125;<br>&#125;;<br><br><br><span class="hljs-comment">//è®¡ç®—æœº</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Computer</span><br>&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">InstallOS</span><span class="hljs-params">(OS *os)</span> </span>&#123;&#125;<br>&#125;;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">DellComputer</span>: <span class="hljs-keyword">public</span> Computer<br>&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">InstallOS</span><span class="hljs-params">(OS *os)</span> </span>&#123; os-&gt;<span class="hljs-built_in">InstallOS_Imp</span>(); &#125;<br>&#125;;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">AppleComputer</span>: <span class="hljs-keyword">public</span> Computer<br>&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">InstallOS</span><span class="hljs-params">(OS *os)</span> </span>&#123; os-&gt;<span class="hljs-built_in">InstallOS_Imp</span>(); &#125;<br>&#125;;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">HPComputer</span>: <span class="hljs-keyword">public</span> Computer<br>&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">InstallOS</span><span class="hljs-params">(OS *os)</span> </span>&#123; os-&gt;<span class="hljs-built_in">InstallOS_Imp</span>(); &#125;<br>&#125;;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    OS *os1 = <span class="hljs-keyword">new</span> <span class="hljs-built_in">WindowOS</span>();<br>    OS *os2 = <span class="hljs-keyword">new</span> <span class="hljs-built_in">LinuxOS</span>();<br>    Computer *computer1 = <span class="hljs-keyword">new</span> <span class="hljs-built_in">AppleComputer</span>();<br>    computer1-&gt;<span class="hljs-built_in">InstallOS</span>(os1);<br>    computer1-&gt;<span class="hljs-built_in">InstallOS</span>(os2);<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="ç»˜åˆ¶å›¾å½¢"><a href="#ç»˜åˆ¶å›¾å½¢" class="headerlink" title="ç»˜åˆ¶å›¾å½¢"></a>ç»˜åˆ¶å›¾å½¢</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">/*</span><br><span class="hljs-comment"> * Created by 23984 on 2023/4/5.</span><br><span class="hljs-comment"> * æ¡¥æ¥æ¨¡å¼</span><br><span class="hljs-comment"> * å®ƒæ—¨åœ¨å°†æŠ½è±¡éƒ¨åˆ†ä¸å®ç°éƒ¨åˆ†åˆ†ç¦»å¼€æ¥ï¼Œä»è€Œä½¿å®ƒä»¬å¯ä»¥ç‹¬ç«‹åœ°å˜åŒ–ã€‚</span><br><span class="hljs-comment"> */</span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><br><span class="hljs-comment">// æŠ½è±¡éƒ¨åˆ†çš„æ¥å£</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Shape</span><br>&#123;<br><span class="hljs-keyword">public</span>:<br>  <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">draw</span><span class="hljs-params">()</span> </span>= <span class="hljs-number">0</span>;<br>&#125;;<br><br><span class="hljs-comment">// æŠ½è±¡éƒ¨åˆ†çš„å®ç°</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Circle</span> : <span class="hljs-keyword">public</span> Shape<br>&#123;<br><span class="hljs-keyword">public</span>:<br>  <span class="hljs-built_in">Circle</span>(<span class="hljs-type">double</span> x, <span class="hljs-type">double</span> y, <span class="hljs-type">double</span> radius, DrawingAPI *drawingAPI)<br>      : <span class="hljs-built_in">m_x</span>(x), <span class="hljs-built_in">m_y</span>(y), <span class="hljs-built_in">m_radius</span>(radius), <span class="hljs-built_in">m_drawingAPI</span>(drawingAPI) &#123;&#125;<br>  <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">draw</span><span class="hljs-params">()</span> <span class="hljs-keyword">override</span></span><br><span class="hljs-function">  </span>&#123;<br>    m_drawingAPI-&gt;<span class="hljs-built_in">drawCircle</span>(m_x, m_y, m_radius);<br>  &#125;<br><br><span class="hljs-keyword">private</span>:<br>  <span class="hljs-type">double</span> m_x;<br>  <span class="hljs-type">double</span> m_y;<br>  <span class="hljs-type">double</span> m_radius;<br>  DrawingAPI *m_drawingAPI;<br>&#125;;<br><br><span class="hljs-comment">// æŠ½è±¡éƒ¨åˆ†çš„å®ç°</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Rectangle</span> : <span class="hljs-keyword">public</span> Shape<br>&#123;<br><span class="hljs-keyword">public</span>:<br>  <span class="hljs-built_in">Rectangle</span>(<span class="hljs-type">double</span> x1, <span class="hljs-type">double</span> y1, <span class="hljs-type">double</span> x2, <span class="hljs-type">double</span> y2, DrawingAPI *drawingAPI)<br>      : <span class="hljs-built_in">m_x1</span>(x1), <span class="hljs-built_in">m_y1</span>(y1), <span class="hljs-built_in">m_x2</span>(x2), <span class="hljs-built_in">m_y2</span>(y2), <span class="hljs-built_in">m_drawingAPI</span>(drawingAPI) &#123;&#125;<br>  <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">draw</span><span class="hljs-params">()</span> <span class="hljs-keyword">override</span></span><br><span class="hljs-function">  </span>&#123;<br>    m_drawingAPI-&gt;<span class="hljs-built_in">drawRectangle</span>(m_x1, m_y1, m_x2, m_y2);<br>  &#125;<br><br><span class="hljs-keyword">private</span>:<br>  <span class="hljs-type">double</span> m_x1;<br>  <span class="hljs-type">double</span> m_y1;<br>  <span class="hljs-type">double</span> m_x2;<br>  <span class="hljs-type">double</span> m_y2;<br>  DrawingAPI *m_drawingAPI;<br>&#125;;<br><br><span class="hljs-comment">// å®ç°éƒ¨åˆ†çš„æ¥å£</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">DrawingAPI</span><br>&#123;<br><span class="hljs-keyword">public</span>:<br>  <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">drawCircle</span><span class="hljs-params">(<span class="hljs-type">double</span> x, <span class="hljs-type">double</span> y, <span class="hljs-type">double</span> radius)</span> </span>= <span class="hljs-number">0</span>;<br>  <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">drawRectangle</span><span class="hljs-params">(<span class="hljs-type">double</span> x1, <span class="hljs-type">double</span> y1, <span class="hljs-type">double</span> x2, <span class="hljs-type">double</span> y2)</span> </span>= <span class="hljs-number">0</span>;<br>&#125;;<br><br><span class="hljs-comment">// å…·ä½“çš„å®ç°éƒ¨åˆ†</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">DrawingAPI1</span> : <span class="hljs-keyword">public</span> DrawingAPI<br>&#123;<br><span class="hljs-keyword">public</span>:<br>  <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">drawCircle</span><span class="hljs-params">(<span class="hljs-type">double</span> x, <span class="hljs-type">double</span> y, <span class="hljs-type">double</span> radius)</span> <span class="hljs-keyword">override</span></span><br><span class="hljs-function">  </span>&#123;<br>    cout &lt;&lt; <span class="hljs-string">&quot;API1.circle at &quot;</span> &lt;&lt; x &lt;&lt; <span class="hljs-string">&#x27;,&#x27;</span> &lt;&lt; y &lt;&lt; <span class="hljs-string">&#x27; &#x27;</span> &lt;&lt; radius &lt;&lt; endl;<br>  &#125;<br>  <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">drawRectangle</span><span class="hljs-params">(<span class="hljs-type">double</span> x1, <span class="hljs-type">double</span> y1, <span class="hljs-type">double</span> x2, <span class="hljs-type">double</span> y2)</span> <span class="hljs-keyword">override</span></span><br><span class="hljs-function">  </span>&#123;<br>    cout &lt;&lt; <span class="hljs-string">&quot;API1.rectangle at &quot;</span> &lt;&lt; x1 &lt;&lt; <span class="hljs-string">&#x27;,&#x27;</span> &lt;&lt; y1 &lt;&lt; <span class="hljs-string">&quot; to &quot;</span> &lt;&lt; x2 &lt;&lt; <span class="hljs-string">&#x27;,&#x27;</span> &lt;&lt; y2 &lt;&lt; endl;<br>  &#125;<br>&#125;;<br><br><span class="hljs-comment">// å…·ä½“çš„å®ç°éƒ¨åˆ†</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">DrawingAPI2</span> : <span class="hljs-keyword">public</span> DrawingAPI<br>&#123;<br><span class="hljs-keyword">public</span>:<br>  <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">drawCircle</span><span class="hljs-params">(<span class="hljs-type">double</span> x, <span class="hljs-type">double</span> y, <span class="hljs-type">double</span> radius)</span> <span class="hljs-keyword">override</span></span><br><span class="hljs-function">  </span>&#123;<br>    cout &lt;&lt; <span class="hljs-string">&quot;API2.circle at &quot;</span> &lt;&lt; x &lt;&lt; <span class="hljs-string">&#x27;,&#x27;</span> &lt;&lt; y &lt;&lt; <span class="hljs-string">&#x27; &#x27;</span> &lt;&lt; radius &lt;&lt; endl;<br>  &#125;<br>  <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">drawRectangle</span><span class="hljs-params">(<span class="hljs-type">double</span> x1, <span class="hljs-type">double</span> y1, <span class="hljs-type">double</span> x2, <span class="hljs-type">double</span> y2)</span> <span class="hljs-keyword">override</span></span><br><span class="hljs-function">  </span>&#123;<br>    cout &lt;&lt; <span class="hljs-string">&quot;API2.rectangle at &quot;</span> &lt;&lt; x1 &lt;&lt; <span class="hljs-string">&#x27;,&#x27;</span> &lt;&lt; y1 &lt;&lt; <span class="hljs-string">&quot; to &quot;</span> &lt;&lt; x2 &lt;&lt; <span class="hljs-string">&#x27;,&#x27;</span> &lt;&lt; y2 &lt;&lt; endl;<br>  &#125;<br>&#125;;<br><br><br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>  DrawingAPI1 api1;<br>  DrawingAPI2 api2;<br><br>  <span class="hljs-function">Circle <span class="hljs-title">circle1</span><span class="hljs-params">(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, &amp;api1)</span></span>;<br>  <span class="hljs-function">Rectangle <span class="hljs-title">rectangle1</span><span class="hljs-params">(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, &amp;api1)</span></span>;<br><br>  <span class="hljs-function">Circle <span class="hljs-title">circle2</span><span class="hljs-params">(<span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>, &amp;api2)</span></span>;<br>  <span class="hljs-function">Rectangle <span class="hljs-title">rectangle2</span><span class="hljs-params">(<span class="hljs-number">2</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">3</span>, &amp;api2)</span></span>;<br><br>  circle1.<span class="hljs-built_in">draw</span>();<br>  rectangle1.<span class="hljs-built_in">draw</span>();<br>  circle2.<span class="hljs-built_in">draw</span>();<br>  rectangle2.<span class="hljs-built_in">draw</span>();<br><br>  <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="12ã€è£…é¥°æ¨¡å¼"><a href="#12ã€è£…é¥°æ¨¡å¼" class="headerlink" title="12ã€è£…é¥°æ¨¡å¼"></a>12ã€è£…é¥°æ¨¡å¼</h2><p>C++ä¸­çš„è£…é¥°å™¨æ¨¡å¼ï¼ˆDecorator Patternï¼‰æ˜¯ä¸€ç§ç»“æ„å‹è®¾è®¡æ¨¡å¼ï¼Œå®ƒå…è®¸ä½ åœ¨ä¸æ”¹å˜å¯¹è±¡è‡ªèº«çš„åŸºç¡€ä¸Šï¼ŒåŠ¨æ€åœ°ç»™ä¸€ä¸ªå¯¹è±¡æ·»åŠ é¢å¤–çš„èŒè´£ã€‚è£…é¥°å™¨æ¨¡å¼ä»¥å¯¹å®¢æˆ·ç«¯é€æ˜çš„æ–¹å¼æ‰©å±•å¯¹è±¡çš„åŠŸèƒ½ã€‚</p><p>è£…é¥°å™¨æ¨¡å¼çš„æ ¸å¿ƒæ€æƒ³æ˜¯ï¼šå°†å¯¹è±¡åµŒå¥—åœ¨ä¸€ç³»åˆ—è£…é¥°å™¨ä¸­ï¼Œæ¯ä¸ªè£…é¥°å™¨éƒ½ä¸ºå¯¹è±¡å¢åŠ ä¸€äº›åŠŸèƒ½ã€‚è£…é¥°å™¨å’Œè¢«è£…é¥°çš„å¯¹è±¡éƒ½å®ç°ç›¸åŒçš„æ¥å£ï¼Œè¿™æ ·è£…é¥°å™¨å°±å¯ä»¥å®Œå…¨æ›¿ä»£è¢«è£…é¥°çš„å¯¹è±¡ã€‚</p><p>æ¯”å¦‚æœ‰ä¸€ä¸ªæ‰‹æœºï¼Œå…è®¸ä½ ä¸ºæ‰‹æœºæ·»åŠ ç‰¹æ€§ï¼Œæ¯”å¦‚å¢åŠ æŒ‚ä»¶ã€å±å¹•è´´è†œç­‰ã€‚ä¸€ç§çµæ´»çš„è®¾è®¡æ–¹å¼æ˜¯ï¼Œå°†æ‰‹æœºåµŒå…¥åˆ°å¦ä¸€å¯¹è±¡ä¸­ï¼Œç”±è¿™ä¸ªå¯¹è±¡å®Œæˆç‰¹æ€§çš„æ·»åŠ ï¼Œæˆ‘ä»¬ç§°è¿™ä¸ªåµŒå…¥çš„å¯¹è±¡ä¸ºè£…é¥°ã€‚è¿™ä¸ªè£…é¥°ä¸å®ƒæ‰€è£…é¥°çš„ç»„ä»¶æ¥å£ä¸€è‡´ï¼Œå› æ­¤å®ƒå¯¹ä½¿ç”¨è¯¥ç»„ä»¶çš„å®¢æˆ·é€æ˜ã€‚</p><p><img src="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/202304101648512.png" alt="è£…é¥°æ¨¡å¼"></p><p>ä»£ç æ¼”ç¤º</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-comment">// æ‰‹æœºç±»</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Phone</span><br>&#123;<br><span class="hljs-keyword">public</span>:<br>  <span class="hljs-built_in">Phone</span>()&#123;&#125;;<br>  <span class="hljs-keyword">virtual</span> ~<span class="hljs-built_in">Phone</span>()&#123;&#125;;<br>  <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">ShowDecorate</span><span class="hljs-params">()</span></span>&#123;&#125;;<br>&#125;;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">iPhone</span> : <span class="hljs-keyword">public</span> Phone<br>&#123;<br><span class="hljs-keyword">private</span>:<br>  string m_name;<br><br><span class="hljs-keyword">public</span>:<br>  <span class="hljs-built_in">iPhone</span>(string name) : <span class="hljs-built_in">m_name</span>(name)&#123;&#125;;<br>  ~<span class="hljs-built_in">iPhone</span>()&#123;&#125;;<br>  <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">ShowDecorate</span><span class="hljs-params">()</span> <span class="hljs-keyword">override</span> </span>&#123; cout &lt;&lt; m_name &lt;&lt; <span class="hljs-string">&quot;çš„è£…é¥°ï¼š&quot;</span>; &#125;<br>&#125;;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">NokiiaPhone</span> : <span class="hljs-keyword">public</span> Phone<br>&#123;<br><span class="hljs-keyword">private</span>:<br>  string m_name;<br><br><span class="hljs-keyword">public</span>:<br>  <span class="hljs-built_in">NokiiaPhone</span>(string name) : <span class="hljs-built_in">m_name</span>(name)&#123;&#125;;<br>  ~<span class="hljs-built_in">NokiiaPhone</span>()&#123;&#125;;<br>  <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">ShowDecorate</span><span class="hljs-params">()</span> <span class="hljs-keyword">override</span> </span>&#123; cout &lt;&lt; m_name &lt;&lt; <span class="hljs-string">&quot;çš„è£…é¥°ï¼š&quot;</span>; &#125;<br>&#125;;<br><br><span class="hljs-comment">// è£…é¥°å™¨åŸºç±»</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">DecoratorPhone</span> : <span class="hljs-keyword">public</span> Phone<br>&#123;<br><span class="hljs-keyword">private</span>:<br>  Phone *m_phone;<br><br><span class="hljs-keyword">public</span>:<br>  <span class="hljs-built_in">DecoratorPhone</span>(Phone *phone) : <span class="hljs-built_in">m_phone</span>(phone)&#123;&#125;;<br>  ~<span class="hljs-built_in">DecoratorPhone</span>()&#123;&#125;;<br>  <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">ShowDecorate</span><span class="hljs-params">()</span> </span>&#123; m_phone-&gt;<span class="hljs-built_in">ShowDecorate</span>(); &#125;;<br>&#125;;<br><br><span class="hljs-comment">// æŒ‚ä»¶è£…é¥°å™¨</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">DecoratorPhoneA</span> : <span class="hljs-keyword">public</span> DecoratorPhone<br>&#123;<br><span class="hljs-keyword">public</span>:<br>  <span class="hljs-built_in">DecoratorPhoneA</span>(Phone *phone) : <span class="hljs-built_in">DecoratorPhone</span>(phone)&#123;&#125;;<br>  <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">ShowDecorate</span><span class="hljs-params">()</span></span><br><span class="hljs-function">  </span>&#123;<br>    DecoratorPhone::<span class="hljs-built_in">ShowDecorate</span>();<br>    <span class="hljs-built_in">AddDecorate</span>();<br>  &#125;<br><br><span class="hljs-keyword">private</span>:<br>  <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">AddDecorate</span><span class="hljs-params">()</span></span><br><span class="hljs-function">  </span>&#123;<br>    cout &lt;&lt; <span class="hljs-string">&quot;å¢åŠ æŒ‚ä»¶&quot;</span> &lt;&lt; endl;<br>  &#125;<br>&#125;;<br><br><span class="hljs-comment">// è´´è†œè£…é¥°å™¨</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">DecoratorPhoneB</span> : <span class="hljs-keyword">public</span> DecoratorPhone<br>&#123;<br><span class="hljs-keyword">public</span>:<br>  <span class="hljs-built_in">DecoratorPhoneB</span>(Phone *phone) : <span class="hljs-built_in">DecoratorPhone</span>(phone)&#123;&#125;;<br>  <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">ShowDecorate</span><span class="hljs-params">()</span></span><br><span class="hljs-function">  </span>&#123;<br>    DecoratorPhone::<span class="hljs-built_in">ShowDecorate</span>();<br>    <span class="hljs-built_in">AddDecorate</span>();<br>  &#125;<br><br><span class="hljs-keyword">private</span>:<br>  <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">AddDecorate</span><span class="hljs-params">()</span></span><br><span class="hljs-function">  </span>&#123;<br>    cout &lt;&lt; <span class="hljs-string">&quot;å±å¹•è´´è†œ&quot;</span> &lt;&lt; endl;<br>  &#125;<br>&#125;;<br></code></pre></td></tr></table></figure><p>æµ‹è¯•</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>  Phone *iphone = <span class="hljs-keyword">new</span> <span class="hljs-built_in">NokiiaPhone</span>(<span class="hljs-string">&quot;6300&quot;</span>);<br>  Phone *dpa = <span class="hljs-keyword">new</span> <span class="hljs-built_in">DecoratorPhoneA</span>(iphone);<br>  Phone *dpb = <span class="hljs-keyword">new</span> <span class="hljs-built_in">DecoratorPhoneB</span>(iphone);<br>  dpb-&gt;<span class="hljs-built_in">ShowDecorate</span>();<br>  <span class="hljs-keyword">delete</span> dpa;<br>  <span class="hljs-keyword">delete</span> dpb;<br>  <span class="hljs-keyword">delete</span> iphone;<br>  <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>è¾“å‡º</p><p>6300 çš„è£…é¥°ï¼šå±å¹•è´´è†œ</p><h2 id="13ã€å¤‡å¿˜å½•æ¨¡å¼"><a href="#13ã€å¤‡å¿˜å½•æ¨¡å¼" class="headerlink" title="13ã€å¤‡å¿˜å½•æ¨¡å¼"></a>13ã€å¤‡å¿˜å½•æ¨¡å¼</h2><p>å¤‡å¿˜å½•æ¨¡å¼æ˜¯ä¸€ç§è¡Œä¸ºå‹è®¾è®¡æ¨¡å¼ï¼Œç”¨äºåœ¨ä¸ç ´åå°è£…æ€§çš„å‰æä¸‹ï¼Œæ•è·å’Œæ¢å¤å¯¹è±¡çš„å†…éƒ¨çŠ¶æ€ã€‚è¯¥æ¨¡å¼å¸¸å¸¸è¢«ç”¨äºéœ€è¦åœ¨æŸä¸ªæ—¶åˆ»ä¿å­˜å¯¹è±¡çš„çŠ¶æ€ï¼Œå¹¶åœ¨ä»¥åçš„æŸä¸ªæ—¶åˆ»æ¢å¤è¯¥çŠ¶æ€çš„æƒ…å½¢ã€‚å¤‡å¿˜å½•æ¨¡å¼çš„æ ¸å¿ƒæ˜¯å®šä¹‰äº†ä¸€ä¸ªå¤‡å¿˜å½•å¯¹è±¡ï¼Œç”¨äºå­˜å‚¨å½“å‰å¯¹è±¡çš„çŠ¶æ€ï¼Œä»¥ä¾¿åœ¨éœ€è¦æ¢å¤çŠ¶æ€æ—¶ä½¿ç”¨ã€‚</p><p>åœ¨ C++ ä¸­ï¼Œå®ç°å¤‡å¿˜å½•æ¨¡å¼é€šå¸¸éœ€è¦å®šä¹‰ä¸‰ä¸ªè§’è‰²ï¼š</p><ol><li>åŸå§‹å¯¹è±¡æ˜¯éœ€è¦ä¿å­˜çŠ¶æ€çš„å¯¹è±¡ï¼›</li><li>å¤‡å¿˜å½•å¯¹è±¡è´Ÿè´£å­˜å‚¨åŸå§‹å¯¹è±¡çš„çŠ¶æ€ï¼›</li><li>ç®¡ç†è€…å¯¹è±¡åˆ™è´Ÿè´£ç®¡ç†å¤‡å¿˜å½•å¯¹è±¡ï¼Œé€šå¸¸åŒ…æ‹¬å­˜å‚¨å¤‡å¿˜å½•å¯¹è±¡ã€æ’¤é”€æ“ä½œç­‰åŠŸèƒ½ã€‚</li></ol><p>è¿™æ ·ä»¥åå°±å¯å°†è¯¥å¯¹è±¡æ¢å¤åˆ°åŸå…ˆä¿å­˜çš„çŠ¶æ€ã€‚ä¸¾ä¸ªç®€å•çš„ä¾‹å­ï¼Œæˆ‘ä»¬ç©æ¸¸æˆæ—¶éƒ½ä¼šä¿å­˜è¿›åº¦ï¼Œæ‰€ä¿å­˜çš„è¿›åº¦ä»¥æ–‡ä»¶çš„å½¢å¼å­˜åœ¨ã€‚è¿™æ ·ä¸‹æ¬¡å°±å¯ä»¥ç»§ç»­ç©ï¼Œè€Œä¸ç”¨ä»å¤´å¼€å§‹ã€‚è¿™é‡Œçš„è¿›åº¦å…¶å®å°±æ˜¯æ¸¸æˆçš„å†…éƒ¨çŠ¶æ€ï¼Œè€Œè¿™é‡Œçš„æ–‡ä»¶ç›¸å½“äºæ˜¯åœ¨æ¸¸æˆä¹‹å¤–ä¿å­˜çŠ¶æ€ã€‚è¿™æ ·ï¼Œä¸‹æ¬¡å°±å¯ä»¥ä»æ–‡ä»¶ä¸­è¯»å…¥ä¿å­˜çš„è¿›åº¦ï¼Œä»è€Œæ¢å¤åˆ°åŸæ¥çš„çŠ¶æ€ã€‚è¿™å°±æ˜¯å¤‡å¿˜å½•æ¨¡å¼ã€‚</p><p><img src="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/20230412115456.png" alt="å¤‡å¿˜å½•"></p><p>ä»£ç æ¼”ç¤º</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">//éœ€ä¿å­˜çš„ä¿¡æ¯</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Memento</span><br>&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-type">int</span> m_vitality; <span class="hljs-comment">//ç”Ÿå‘½å€¼</span><br>    <span class="hljs-type">int</span> m_attack;   <span class="hljs-comment">//è¿›æ”»å€¼</span><br>    <span class="hljs-type">int</span> m_defense;  <span class="hljs-comment">//é˜²å®ˆå€¼</span><br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-built_in">Memento</span>(<span class="hljs-type">int</span> vitality, <span class="hljs-type">int</span> attack, <span class="hljs-type">int</span> defense):<br>      <span class="hljs-built_in">m_vitality</span>(vitality),<span class="hljs-built_in">m_attack</span>(attack),<span class="hljs-built_in">m_defense</span>(defense)&#123;&#125;<br>    Memento&amp; <span class="hljs-keyword">operator</span>=(<span class="hljs-type">const</span> Memento &amp;memento)<br>    &#123;<br>        m_vitality = memento.m_vitality;<br>        m_attack = memento.m_attack;<br>        m_defense = memento.m_defense;<br>        <span class="hljs-keyword">return</span> *<span class="hljs-keyword">this</span>;<br>    &#125;<br>&#125;;<br><span class="hljs-comment">//æ¸¸æˆè§’è‰²</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">GameRole</span><br>&#123;<br><span class="hljs-keyword">private</span>:<br>    <span class="hljs-type">int</span> m_vitality;<br>    <span class="hljs-type">int</span> m_attack;<br>    <span class="hljs-type">int</span> m_defense;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-built_in">GameRole</span>(): <span class="hljs-built_in">m_vitality</span>(<span class="hljs-number">100</span>),<span class="hljs-built_in">m_attack</span>(<span class="hljs-number">100</span>),<span class="hljs-built_in">m_defense</span>(<span class="hljs-number">100</span>) &#123;&#125;<br>    <span class="hljs-function">Memento <span class="hljs-title">Save</span><span class="hljs-params">()</span>  <span class="hljs-comment">//ä¿å­˜è¿›åº¦ï¼Œåªä¸Mementoå¯¹è±¡äº¤äº’ï¼Œå¹¶ä¸ç‰µæ¶‰åˆ°Caretake</span></span><br><span class="hljs-function">    </span>&#123;<br>        <span class="hljs-function">Memento <span class="hljs-title">memento</span><span class="hljs-params">(m_vitality, m_attack, m_defense)</span></span>;<br>        <span class="hljs-keyword">return</span> memento;<br>    &#125;<br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">Load</span><span class="hljs-params">(Memento memento)</span>  <span class="hljs-comment">//è½½å…¥è¿›åº¦ï¼Œåªä¸Mementoå¯¹è±¡äº¤äº’ï¼Œå¹¶ä¸ç‰µæ¶‰åˆ°Caretake</span></span><br><span class="hljs-function">    </span>&#123;<br>        m_vitality = memento.m_vitality;<br>        m_attack = memento.m_attack;<br>        m_defense = memento.m_defense;<br>    &#125;<br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">Show</span><span class="hljs-params">()</span> </span>&#123; cout&lt;&lt;<span class="hljs-string">&quot;vitality : &quot;</span>&lt;&lt; m_vitality&lt;&lt;<span class="hljs-string">&quot;, attack : &quot;</span>&lt;&lt; m_attack&lt;&lt;<span class="hljs-string">&quot;, defense : &quot;</span>&lt;&lt; m_defense&lt;&lt;endl; &#125;<br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">Attack</span><span class="hljs-params">()</span> </span>&#123; m_vitality -= <span class="hljs-number">10</span>; m_attack -= <span class="hljs-number">10</span>;  m_defense -= <span class="hljs-number">10</span>; &#125;<br>&#125;;<br><span class="hljs-comment">//ä¿å­˜çš„è¿›åº¦åº“</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Caretake</span><br>&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-built_in">Caretake</span>() &#123;&#125;<br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">Save</span><span class="hljs-params">(Memento menento)</span> </span>&#123; m_vecMemento.<span class="hljs-built_in">push_back</span>(menento); &#125;<br>    <span class="hljs-function">Memento <span class="hljs-title">Load</span><span class="hljs-params">(<span class="hljs-type">int</span> state)</span> </span>&#123; <span class="hljs-keyword">return</span> m_vecMemento[state]; &#125;<br><span class="hljs-keyword">private</span>:<br>    vector&lt;Memento&gt; m_vecMemento;<br>&#125;;<br></code></pre></td></tr></table></figure><p>æµ‹è¯•</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span>&#123;<br>    Caretake caretake;  <span class="hljs-comment">//ä¿å­˜çš„è¿›åº¦åº“</span><br>    GameRole role;  <span class="hljs-comment">//æ¸¸æˆè§’è‰²</span><br>    role.<span class="hljs-built_in">Show</span>();   <span class="hljs-comment">//åˆå§‹å€¼</span><br>    caretake.<span class="hljs-built_in">Save</span>(role.<span class="hljs-built_in">Save</span>()); <span class="hljs-comment">//ä¿å­˜çŠ¶æ€</span><br>    role.<span class="hljs-built_in">Attack</span>();<br>    role.<span class="hljs-built_in">Show</span>();  <span class="hljs-comment">//è¿›æ”»å</span><br>    role.<span class="hljs-built_in">Load</span>(caretake.<span class="hljs-built_in">Load</span>(<span class="hljs-number">0</span>)); <span class="hljs-comment">//è½½å…¥çŠ¶æ€</span><br>    role.<span class="hljs-built_in">Show</span>();  <span class="hljs-comment">//æ¢å¤åˆ°çŠ¶æ€0</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="14ã€ä¸­ä»‹è€…æ¨¡å¼"><a href="#14ã€ä¸­ä»‹è€…æ¨¡å¼" class="headerlink" title="14ã€ä¸­ä»‹è€…æ¨¡å¼"></a>14ã€ä¸­ä»‹è€…æ¨¡å¼</h2><p>ä¸­ä»‹è€…æ¨¡å¼æ˜¯ä¸€ç§è¡Œä¸ºè®¾è®¡æ¨¡å¼ï¼Œå®ƒå…è®¸å¯¹è±¡ä¹‹é—´é€šè¿‡ä¸­ä»‹è€…è¿›è¡Œé€šä¿¡ï¼Œè€Œä¸æ˜¯ç›´æ¥äº’ç›¸é€šä¿¡ã€‚</p><p>ç”¨ä¸€ä¸ªä¸­ä»‹å¯¹è±¡æ¥å°è£…ä¸€ç³»åˆ—çš„å¯¹è±¡äº¤äº’ã€‚ä¸­ä»‹è€…ä½¿å„å¯¹è±¡ä¸éœ€è¦æ˜¾å¼åœ°ç›¸äº’å¼•ç”¨ï¼Œä»è€Œä½¿å…¶è€¦åˆæ¾æ•£ï¼Œè€Œä¸”å¯ä»¥ç‹¬ç«‹åœ°æ”¹å˜å®ƒä»¬ä¹‹é—´çš„äº¤äº’ã€‚</p><p>é€šè¿‡ A ç»™ B å’Œ C å‘ä¿¡æ¯,ä¹Ÿå¯ä»¥é€šè¿‡ B ç»™ A å’Œ C å‘ä¿¡æ¯</p><p><img src="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/20230412123204.png" alt="ä¸­ä»‹è€…æ¨¡å¼"></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;string&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Colleague</span>;<br><br><span class="hljs-comment">// ä¸­ä»‹è€…ç±»</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Mediator</span> &#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">sendMessage</span><span class="hljs-params">(<span class="hljs-type">const</span> std::string&amp; message, Colleague* colleague)</span> </span>= <span class="hljs-number">0</span>;<br>&#125;;<br><br><span class="hljs-comment">// åŒäº‹ç±»</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Colleague</span> &#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-built_in">Colleague</span>(Mediator* mediator) : <span class="hljs-built_in">m_mediator</span>(mediator) &#123;&#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">sendMessage</span><span class="hljs-params">(<span class="hljs-type">const</span> std::string&amp; message)</span> </span>&#123;<br>        m_mediator-&gt;<span class="hljs-built_in">sendMessage</span>(message, <span class="hljs-keyword">this</span>);<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">receiveMessage</span><span class="hljs-params">(<span class="hljs-type">const</span> std::string&amp; message)</span> </span>= <span class="hljs-number">0</span>;<br><br><span class="hljs-keyword">protected</span>:<br>    Mediator* m_mediator;<br>&#125;;<br><br><span class="hljs-comment">// å…·ä½“åŒäº‹ç±»</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">ConcreteColleagueA</span> : <span class="hljs-keyword">public</span> Colleague &#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-built_in">ConcreteColleagueA</span>(Mediator* mediator) : <span class="hljs-built_in">Colleague</span>(mediator) &#123;&#125;<br><br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">receiveMessage</span><span class="hljs-params">(<span class="hljs-type">const</span> std::string&amp; message)</span> <span class="hljs-keyword">override</span> </span>&#123;<br>        std::cout &lt;&lt; <span class="hljs-string">&quot;ConcreteColleagueA received message: &quot;</span> &lt;&lt; message &lt;&lt; std::endl;<br>    &#125;<br>&#125;;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">ConcreteColleagueB</span> : <span class="hljs-keyword">public</span> Colleague &#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-built_in">ConcreteColleagueB</span>(Mediator* mediator) : <span class="hljs-built_in">Colleague</span>(mediator) &#123;&#125;<br><br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">receiveMessage</span><span class="hljs-params">(<span class="hljs-type">const</span> std::string&amp; message)</span> <span class="hljs-keyword">override</span> </span>&#123;<br>        std::cout &lt;&lt; <span class="hljs-string">&quot;ConcreteColleagueB received message: &quot;</span> &lt;&lt; message &lt;&lt; std::endl;<br>    &#125;<br>&#125;;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">ConcreteColleagueC</span> : <span class="hljs-keyword">public</span> Colleague &#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-built_in">ConcreteColleagueC</span>(Mediator* mediator) : <span class="hljs-built_in">Colleague</span>(mediator) &#123;&#125;<br><br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">receiveMessage</span><span class="hljs-params">(<span class="hljs-type">const</span> std::string&amp; message)</span> <span class="hljs-keyword">override</span> </span>&#123;<br>        std::cout &lt;&lt; <span class="hljs-string">&quot;ConcreteColleagueC received message: &quot;</span> &lt;&lt; message &lt;&lt; std::endl;<br>    &#125;<br>&#125;;<br><br><span class="hljs-comment">// å…·ä½“ä¸­ä»‹è€…ç±»</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">ConcreteMediator</span> : <span class="hljs-keyword">public</span> Mediator &#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">addColleague</span><span class="hljs-params">(Colleague* colleague)</span> </span>&#123;<br>        m_colleagues.<span class="hljs-built_in">push_back</span>(colleague);<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">sendMessage</span><span class="hljs-params">(<span class="hljs-type">const</span> std::string&amp; message, Colleague* sender)</span> <span class="hljs-keyword">override</span> </span>&#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">auto</span> colleague : m_colleagues) &#123;<br>            <span class="hljs-keyword">if</span> (colleague != sender) &#123;<br>                colleague-&gt;<span class="hljs-built_in">receiveMessage</span>(message);<br>            &#125;<br>        &#125;<br>    &#125;<br><br><span class="hljs-keyword">private</span>:<br>    std::vector&lt;Colleague*&gt; m_colleagues;<br>&#125;;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    ConcreteMediator mediator;<br><br>    <span class="hljs-function">ConcreteColleagueA <span class="hljs-title">colleagueA</span><span class="hljs-params">(&amp;mediator)</span></span>;<br>    <span class="hljs-function">ConcreteColleagueB <span class="hljs-title">colleagueB</span><span class="hljs-params">(&amp;mediator)</span></span>;<br>    <span class="hljs-function">ConcreteColleagueC <span class="hljs-title">colleagueC</span><span class="hljs-params">(&amp;mediator)</span></span>;<br><br>    mediator.<span class="hljs-built_in">addColleague</span>(&amp;colleagueA);<br>    mediator.<span class="hljs-built_in">addColleague</span>(&amp;colleagueB);<br>    mediator.<span class="hljs-built_in">addColleague</span>(&amp;colleagueC);<br><br>    colleagueA.<span class="hljs-built_in">sendMessage</span>(<span class="hljs-string">&quot;Hello, colleagueBå’ŒC!&quot;</span>);<br>    colleagueB.<span class="hljs-built_in">sendMessage</span>(<span class="hljs-string">&quot;Hi, colleagueAå’ŒC!&quot;</span>);<br><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>è¾“å‡º</p><p><img src="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/20230412123322.png" alt="è¾“å‡º"></p><p>æˆ¿å±‹ä¸­ä»‹æ¡ˆä¾‹</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;vector&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Mediator</span>;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span>&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">SendMessage</span><span class="hljs-params">(string msg)</span></span>&#123;&#125;;<br>    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">GetMessage</span><span class="hljs-params">(string msg)</span></span>&#123;&#125;;<br>    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">SetMediator</span><span class="hljs-params">(Mediator* mediator)</span></span>&#123;&#125;;<br>&#125;;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Mediator</span>&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">AddPerson</span><span class="hljs-params">(Person* person)</span></span>&#123;&#125;<br>    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">SendMessage</span><span class="hljs-params">(string msg,Person* person)</span></span>&#123;&#125;<br>&#125;;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">MediatorA</span> : <span class="hljs-keyword">public</span> Mediator&#123;<br><span class="hljs-keyword">private</span>:<br>    vector&lt;Person*&gt; person_vector_;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">AddPerson</span><span class="hljs-params">(Person* person)</span></span>&#123;<br>        person_vector_.<span class="hljs-built_in">push_back</span>(person);<br>    &#125;<br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">SendMessage</span><span class="hljs-params">(string msg,Person* person)</span></span>&#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">auto</span> aPerson : person_vector_)&#123;<br>            <span class="hljs-keyword">if</span>(aPerson != person)&#123;<br>                aPerson-&gt;<span class="hljs-built_in">GetMessage</span>(msg);<br>            &#125;<br>        &#125;<br><br>    &#125;<br>&#125;;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">PersonA</span> : <span class="hljs-keyword">public</span> Person&#123;<br><span class="hljs-keyword">protected</span>:<br>    Mediator *mediator_;<br>    string name_;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-built_in">PersonA</span>(string name):<span class="hljs-built_in">name_</span>(name)&#123;&#125;;<br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">SendMessage</span><span class="hljs-params">(string msg)</span></span>&#123;<br>        mediator_-&gt;<span class="hljs-built_in">SendMessage</span>(msg,<span class="hljs-keyword">this</span>);<br>    &#125;;<br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">GetMessage</span><span class="hljs-params">(string msg)</span></span>&#123;<br>        cout &lt;&lt; name_ &lt;&lt; <span class="hljs-string">&quot;è·å¾—ä¿¡æ¯&quot;</span> &lt;&lt; msg &lt;&lt; endl;<br>    &#125;;<br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">SetMediator</span><span class="hljs-params">(Mediator* mediator)</span></span>&#123;<br>        <span class="hljs-keyword">this</span>-&gt;mediator_ = mediator;<br>    &#125;;<br>&#125;;<br><br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    MediatorA med1;<br>    Person *personA = <span class="hljs-keyword">new</span> <span class="hljs-built_in">PersonA</span>(<span class="hljs-string">&quot;person1&quot;</span>);<br>    Person *personB = <span class="hljs-keyword">new</span> <span class="hljs-built_in">PersonA</span>(<span class="hljs-string">&quot;person2&quot;</span>);<br>    Person *personC = <span class="hljs-keyword">new</span> <span class="hljs-built_in">PersonA</span>(<span class="hljs-string">&quot;person3&quot;</span>);<br><br>    personA-&gt;<span class="hljs-built_in">SetMediator</span>(&amp;med1);<br>    personB-&gt;<span class="hljs-built_in">SetMediator</span>(&amp;med1);<br><br>    med1.<span class="hljs-built_in">AddPerson</span>(personA);<br>    med1.<span class="hljs-built_in">AddPerson</span>(personB);<br>    med1.<span class="hljs-built_in">AddPerson</span>(personC);<br><br>    personA-&gt;<span class="hljs-built_in">SendMessage</span>(<span class="hljs-string">&quot;ä½ å¥½&quot;</span>);<br><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>è¾“å‡º</p><p><img src="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/20230412184109.png" alt="æˆ¿äº§ä¸­ä»‹"></p><h2 id="15ã€èŒè´£é“¾æ¨¡å¼"><a href="#15ã€èŒè´£é“¾æ¨¡å¼" class="headerlink" title="15ã€èŒè´£é“¾æ¨¡å¼"></a>15ã€èŒè´£é“¾æ¨¡å¼</h2><ol><li>æ˜¯ä¸€ç§è¡Œä¸ºè®¾è®¡æ¨¡å¼ï¼Œå®ƒå…è®¸ä½ å°†è¯·æ±‚æ²¿ç€å¤„ç†è€…é“¾è¿›è¡Œå‘é€ï¼Œç›´åˆ°æœ‰ä¸€ä¸ªå¤„ç†è€…èƒ½å¤Ÿå¤„ç†è¯¥è¯·æ±‚ä¸ºæ­¢ã€‚</li><li>åœ¨èŒè´£é“¾æ¨¡å¼ä¸­ï¼Œä½ å¯ä»¥ä¸ºå¤šä¸ªå¯¹è±¡è®¾ç½®å¤„ç†è¯·æ±‚çš„æœºä¼šã€‚è¿™äº›å¯¹è±¡å½¢æˆä¸€æ¡é“¾ï¼Œè¯·æ±‚åœ¨é“¾ä¸Šä¼ é€’ï¼Œç›´åˆ°é“¾ä¸Šçš„æŸä¸ªå¯¹è±¡èƒ½å¤Ÿå¤„ç†è¯¥è¯·æ±‚ä¸ºæ­¢ã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œé“¾ä¸Šçš„æ¯ä¸ªå¯¹è±¡éƒ½æœ‰å…¶è‡ªå·±çš„å¤„ç†é€»è¾‘ï¼Œä»¥åŠå¯¹ä¸‹ä¸€ä¸ªå¤„ç†è€…çš„å¼•ç”¨ã€‚</li><li>åœ¨å®ç°èŒè´£é“¾æ¨¡å¼æ—¶ï¼Œä½ éœ€è¦åˆ›å»ºä¸€ä¸ªæŠ½è±¡å¤„ç†è€…ç±»ï¼Œç”¨äºå®šä¹‰è¯·æ±‚çš„å¤„ç†æ–¹æ³•å’Œä¸‹ä¸€ä¸ªå¤„ç†è€…çš„å¼•ç”¨ã€‚ç„¶åï¼Œä½ éœ€è¦ä¸ºæ¯ä¸ªå…·ä½“çš„å¤„ç†è€…åˆ›å»ºä¸€ä¸ªå­ç±»ï¼Œå®ç°å…¶è‡ªå·±çš„å¤„ç†é€»è¾‘ã€‚æœ€åï¼Œä½ éœ€è¦å°†è¿™äº›å¤„ç†è€…ç»„æˆä¸€æ¡é“¾ï¼Œå¹¶å°†è¯·æ±‚æ²¿ç€é“¾è¿›è¡Œä¼ é€’ã€‚</li><li>å…¶æ€æƒ³å¾ˆç®€å•ï¼Œè€ƒè™‘å‘˜å·¥è¦æ±‚åŠ è–ªã€‚å…¬å¸çš„ç®¡ç†è€…ä¸€å…±æœ‰ä¸‰çº§ï¼Œæ€»ç»ç†ã€æ€»ç›‘ã€ç»ç†ï¼Œå¦‚æœä¸€ä¸ªå‘˜å·¥è¦æ±‚åŠ è–ªï¼Œåº”è¯¥å‘ä¸»ç®¡çš„ç»ç†ç”³è¯·ï¼Œå¦‚æœåŠ è–ªçš„æ•°é‡åœ¨ç»ç†çš„èŒæƒå†…ï¼Œé‚£ä¹ˆç»ç†å¯ä»¥ç›´æ¥æ‰¹å‡†ï¼Œå¦åˆ™å°†ç”³è¯·ä¸Šäº¤ç»™æ€»ç›‘ã€‚æ€»ç›‘çš„å¤„ç†æ–¹å¼ä¹Ÿä¸€æ ·ï¼Œæ€»ç»ç†å¯ä»¥å¤„ç†æ‰€æœ‰è¯·æ±‚ã€‚è¿™å°±æ˜¯å…¸å‹çš„èŒè´£é“¾æ¨¡å¼ï¼Œè¯·æ±‚çš„å¤„ç†å½¢æˆäº†ä¸€æ¡é“¾ï¼Œç›´åˆ°æœ‰ä¸€ä¸ªå¯¹è±¡å¤„ç†è¯·æ±‚ã€‚</li></ol><p><img src="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/20230412232935.png" alt="èŒè´£é“¾æ¨¡å¼"></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-comment">//æŠ½è±¡ç®¡ç†è€…</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Manager</span><br>&#123;<br><span class="hljs-keyword">protected</span>:<br>    Manager *m_manager;<br>    string m_name;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-built_in">Manager</span>(Manager *manager, string name):<span class="hljs-built_in">m_manager</span>(manager), <span class="hljs-built_in">m_name</span>(name)&#123;&#125;<br>    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">DealWithRequest</span><span class="hljs-params">(string name, <span class="hljs-type">int</span> num)</span>  </span>&#123;&#125;<br>&#125;;<br><br><span class="hljs-comment">//ç»ç†</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">CommonManager</span>: <span class="hljs-keyword">public</span> Manager<br>&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-built_in">CommonManager</span>(Manager *manager, string name):<span class="hljs-built_in">Manager</span>(manager,name) &#123;&#125;<br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">DealWithRequest</span><span class="hljs-params">(string name, <span class="hljs-type">int</span> num)</span></span><br><span class="hljs-function">    </span>&#123;<br>        <span class="hljs-keyword">if</span>(num &lt; <span class="hljs-number">500</span>) <span class="hljs-comment">//ç»ç†èŒæƒä¹‹å†…</span><br>        &#123;<br>            cout&lt;&lt;<span class="hljs-string">&quot;ç»ç†&quot;</span>&lt;&lt;m_name&lt;&lt;<span class="hljs-string">&quot;æ‰¹å‡†&quot;</span>&lt;&lt;name&lt;&lt;<span class="hljs-string">&quot;åŠ è–ª&quot;</span>&lt;&lt;num&lt;&lt;<span class="hljs-string">&quot;å…ƒ&quot;</span>&lt;&lt;endl&lt;&lt;endl;<br>        &#125;<br>        <span class="hljs-keyword">else</span><br>        &#123;<br>            cout&lt;&lt;<span class="hljs-string">&quot;ç»ç†&quot;</span>&lt;&lt;m_name&lt;&lt;<span class="hljs-string">&quot;æ— æ³•å¤„ç†ï¼Œäº¤ç”±æ€»ç›‘å¤„ç†&quot;</span>&lt;&lt;endl;<br>            m_manager-&gt;<span class="hljs-built_in">DealWithRequest</span>(name, num);<br>        &#125;<br>    &#125;<br>&#125;;<br><br><span class="hljs-comment">//æ€»ç›‘</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Majordomo</span>: <span class="hljs-keyword">public</span> Manager<br>&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-built_in">Majordomo</span>(Manager *manager, string name):<span class="hljs-built_in">Manager</span>(manager,name) &#123;&#125;<br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">DealWithRequest</span><span class="hljs-params">(string name, <span class="hljs-type">int</span> num)</span></span><br><span class="hljs-function">    </span>&#123;<br>        <span class="hljs-keyword">if</span>(num &lt; <span class="hljs-number">1000</span>) <span class="hljs-comment">//æ€»ç›‘èŒæƒä¹‹å†…</span><br>        &#123;<br>            cout&lt;&lt;<span class="hljs-string">&quot;æ€»ç›‘&quot;</span>&lt;&lt;m_name&lt;&lt;<span class="hljs-string">&quot;æ‰¹å‡†&quot;</span>&lt;&lt;name&lt;&lt;<span class="hljs-string">&quot;åŠ è–ª&quot;</span>&lt;&lt;num&lt;&lt;<span class="hljs-string">&quot;å…ƒ&quot;</span>&lt;&lt;endl&lt;&lt;endl;<br>        &#125;<br>        <span class="hljs-keyword">else</span><br>        &#123;<br>            cout&lt;&lt;<span class="hljs-string">&quot;æ€»ç›‘&quot;</span>&lt;&lt;m_name&lt;&lt;<span class="hljs-string">&quot;æ— æ³•å¤„ç†ï¼Œäº¤ç”±æ€»ç»ç†å¤„ç†&quot;</span>&lt;&lt;endl;<br>            m_manager-&gt;<span class="hljs-built_in">DealWithRequest</span>(name, num);<br>        &#125;<br>    &#125;<br>&#125;;<br><br><span class="hljs-comment">//æ€»ç»ç†</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">GeneralManager</span>: <span class="hljs-keyword">public</span> Manager<br>&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-built_in">GeneralManager</span>(Manager *manager, string name):<span class="hljs-built_in">Manager</span>(manager,name) &#123;&#125;<br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">DealWithRequest</span><span class="hljs-params">(string name, <span class="hljs-type">int</span> num)</span>  <span class="hljs-comment">//æ€»ç»ç†å¯ä»¥å¤„ç†æ‰€æœ‰è¯·æ±‚</span></span><br><span class="hljs-function">    </span>&#123;<br>        cout&lt;&lt;<span class="hljs-string">&quot;æ€»ç»ç†&quot;</span>&lt;&lt;m_name&lt;&lt;<span class="hljs-string">&quot;æ‰¹å‡†&quot;</span>&lt;&lt;name&lt;&lt;<span class="hljs-string">&quot;åŠ è–ª&quot;</span>&lt;&lt;num&lt;&lt;<span class="hljs-string">&quot;å…ƒ&quot;</span>&lt;&lt;endl&lt;&lt;endl;<br>    &#125;<br>&#125;;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    Manager *general = <span class="hljs-keyword">new</span> <span class="hljs-built_in">GeneralManager</span>(<span class="hljs-literal">NULL</span>, <span class="hljs-string">&quot;A&quot;</span>); <span class="hljs-comment">//è®¾ç½®ä¸Šçº§ï¼Œæ€»ç»ç†æ²¡æœ‰ä¸Šçº§</span><br>    Manager *majordomo = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Majordomo</span>(general, <span class="hljs-string">&quot;B&quot;</span>); <span class="hljs-comment">//è®¾ç½®ä¸Šçº§</span><br>    Manager *common = <span class="hljs-keyword">new</span> <span class="hljs-built_in">CommonManager</span>(majordomo, <span class="hljs-string">&quot;C&quot;</span>); <span class="hljs-comment">//è®¾ç½®ä¸Šçº§</span><br>    common-&gt;<span class="hljs-built_in">DealWithRequest</span>(<span class="hljs-string">&quot;D&quot;</span>,<span class="hljs-number">300</span>);   <span class="hljs-comment">//å‘˜å·¥Dè¦æ±‚åŠ è–ª</span><br>    common-&gt;<span class="hljs-built_in">DealWithRequest</span>(<span class="hljs-string">&quot;E&quot;</span>, <span class="hljs-number">600</span>);<br>    common-&gt;<span class="hljs-built_in">DealWithRequest</span>(<span class="hljs-string">&quot;F&quot;</span>, <span class="hljs-number">1000</span>);<br>    <span class="hljs-keyword">delete</span> common; <span class="hljs-keyword">delete</span> majordomo; <span class="hljs-keyword">delete</span> general;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>è¾“å‡º</p><p><img src="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/20230412233008.png" alt="è¾“å‡º"></p><h2 id="16ã€è§‚å¯Ÿè€…æ¨¡å¼"><a href="#16ã€è§‚å¯Ÿè€…æ¨¡å¼" class="headerlink" title="16ã€è§‚å¯Ÿè€…æ¨¡å¼"></a>16ã€è§‚å¯Ÿè€…æ¨¡å¼</h2><p>è§‚å¯Ÿè€…æ¨¡å¼ï¼ˆObserver Patternï¼‰æ˜¯ä¸€ç§è¡Œä¸ºå‹è®¾è®¡æ¨¡å¼ï¼Œå®ƒå…è®¸å¤šä¸ªå¯¹è±¡åŒæ—¶ç›‘å¬å¦ä¸€ä¸ªå¯¹è±¡ï¼Œå¹¶åœ¨è¯¥å¯¹è±¡å‘ç”ŸçŠ¶æ€æ”¹å˜æ—¶è‡ªåŠ¨é€šçŸ¥è¿™äº›ç›‘å¬è€…ï¼Œä»è€Œå®ç°å¯¹è±¡é—´çš„æ¾è€¦åˆã€‚</p><p>åœ¨ C++ä¸­ï¼Œè§‚å¯Ÿè€…æ¨¡å¼é€šå¸¸åŒ…å«ä»¥ä¸‹å‡ ä¸ªéƒ¨åˆ†ï¼š</p><ul><li>æŠ½è±¡ä¸»é¢˜ï¼ˆSubjectï¼‰ï¼šè¢«è§‚å¯Ÿè€…ï¼Œå®ƒç»´æŠ¤äº†ä¸€ç³»åˆ—çš„è§‚å¯Ÿè€…ï¼Œå¹¶æä¾›äº†æ·»åŠ ã€åˆ é™¤å’Œé€šçŸ¥è§‚å¯Ÿè€…çš„æ¥å£ã€‚</li><li>å…·ä½“ä¸»é¢˜ï¼ˆConcreteSubjectï¼‰ï¼šå…·ä½“çš„è¢«è§‚å¯Ÿè€…å®ç°ï¼Œå®ƒå®ç°äº†æŠ½è±¡ä¸»é¢˜ä¸­çš„æ¥å£ï¼Œå¹¶ä¸”ç»´æŠ¤äº†ä¸€ä¸ªçŠ¶æ€ã€‚</li><li>æŠ½è±¡è§‚å¯Ÿè€…ï¼ˆObserverï¼‰ï¼šè§‚å¯Ÿè€…çš„æŠ½è±¡ç±»ï¼Œå®ƒå®šä¹‰äº†æ¥æ”¶é€šçŸ¥çš„æ¥å£ã€‚</li><li>å…·ä½“è§‚å¯Ÿè€…ï¼ˆConcreteObserverï¼‰ï¼šå…·ä½“çš„è§‚å¯Ÿè€…å®ç°ï¼Œå®ƒå®ç°äº†æŠ½è±¡è§‚å¯Ÿè€…ä¸­çš„æ¥å£ï¼ŒåŒæ—¶å­˜å‚¨äº†ä¸€ä¸ªæŒ‡å‘å…·ä½“ä¸»é¢˜çš„æŒ‡é’ˆã€‚</li></ul><p>ä¸¾ä¸ªåšå®¢è®¢é˜…çš„ä¾‹å­ï¼Œå½“åšä¸»å‘è¡¨æ–°æ–‡ç« çš„æ—¶å€™ï¼Œå³åšä¸»çŠ¶æ€å‘ç”Ÿäº†æ”¹å˜ï¼Œé‚£äº›è®¢é˜…çš„è¯»è€…å°±ä¼šæ”¶åˆ°é€šçŸ¥ï¼Œç„¶åè¿›è¡Œç›¸åº”çš„åŠ¨ä½œï¼Œæ¯”å¦‚å»çœ‹æ–‡ç« ï¼Œæˆ–è€…æ”¶è—èµ·æ¥ã€‚åšä¸»ä¸è¯»è€…ä¹‹é—´å­˜åœ¨ç§ä¸€å¯¹å¤šçš„ä¾èµ–å…³ç³»ã€‚</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;list&gt;</span></span><br><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-comment">//è§‚å¯Ÿè€…</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Observer</span><br>&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-built_in">Observer</span>() &#123;&#125;<br>    <span class="hljs-keyword">virtual</span> ~<span class="hljs-built_in">Observer</span>() &#123;&#125;<br>    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">Update</span><span class="hljs-params">()</span> </span>&#123;&#125;<br>    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">Attach</span><span class="hljs-params">()</span></span>&#123;&#125;<br>    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">Remove</span><span class="hljs-params">()</span></span>&#123;&#125;<br>&#125;;<br><br><span class="hljs-comment">//åšå®¢</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Blog</span><br>&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-built_in">Blog</span>() &#123;&#125;<br>    <span class="hljs-keyword">virtual</span> ~<span class="hljs-built_in">Blog</span>() &#123;&#125;<br>    <span class="hljs-comment">//æ·»åŠ è§‚å¯Ÿè€…</span><br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">Attach</span><span class="hljs-params">(Observer *observer)</span></span><br><span class="hljs-function">    </span>&#123;<br>        m_observers.<span class="hljs-built_in">push_back</span>(observer);cout &lt;&lt; <span class="hljs-string">&quot;è®¢é˜…æˆåŠŸ&quot;</span> &lt;&lt;endl;<br>    &#125;<br>    <span class="hljs-comment">//ç§»é™¤è§‚å¯Ÿè€…</span><br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">Remove</span><span class="hljs-params">(Observer *observer)</span></span><br><span class="hljs-function">    </span>&#123;<br>        m_observers.<span class="hljs-built_in">remove</span>(observer);<br>        cout &lt;&lt; <span class="hljs-string">&quot;å–æ¶ˆè®¢é˜…&quot;</span> &lt;&lt;endl;<br>    &#125;<br>    <span class="hljs-comment">//é€šçŸ¥è§‚å¯Ÿè€…</span><br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">Notify</span><span class="hljs-params">()</span></span><br><span class="hljs-function">    </span>&#123;<br>        list&lt;Observer*&gt;::iterator iter = m_observers.<span class="hljs-built_in">begin</span>();<br>        <span class="hljs-keyword">for</span>(; iter != m_observers.<span class="hljs-built_in">end</span>(); iter++)<br>            (*iter)-&gt;<span class="hljs-built_in">Update</span>();<br>    &#125;<br>    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">SetStatus</span><span class="hljs-params">(string s)</span> </span>&#123; m_status = s; &#125; <span class="hljs-comment">//è®¾ç½®çŠ¶æ€</span><br>    <span class="hljs-function"><span class="hljs-keyword">virtual</span> string <span class="hljs-title">GetStatus</span><span class="hljs-params">()</span> </span>&#123; <span class="hljs-keyword">return</span> m_status; &#125;    <span class="hljs-comment">//è·å¾—çŠ¶æ€</span><br><span class="hljs-keyword">private</span>:<br>    list&lt;Observer* &gt; m_observers; <span class="hljs-comment">//è§‚å¯Ÿè€…é“¾è¡¨</span><br><span class="hljs-keyword">protected</span>:<br>    string m_status; <span class="hljs-comment">//çŠ¶æ€</span><br>&#125;;<br><br><span class="hljs-comment">//å…·ä½“åšå®¢ç±»</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">BlogCSDN</span> : <span class="hljs-keyword">public</span> Blog<br>&#123;<br><span class="hljs-keyword">private</span>:<br>    string m_name; <span class="hljs-comment">//åšä¸»åç§°</span><br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-built_in">BlogCSDN</span>(string name): <span class="hljs-built_in">m_name</span>(name) &#123;&#125;<br>    ~<span class="hljs-built_in">BlogCSDN</span>() &#123;&#125;<br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">SetStatus</span><span class="hljs-params">(string s)</span> </span>&#123; m_status = <span class="hljs-string">&quot;CSDNé€šçŸ¥ : &quot;</span> + m_name + s; &#125; <span class="hljs-comment">//å…·ä½“è®¾ç½®çŠ¶æ€ä¿¡æ¯</span><br>    <span class="hljs-function">string <span class="hljs-title">GetStatus</span><span class="hljs-params">()</span> </span>&#123; <span class="hljs-keyword">return</span> m_status; &#125;<br>&#125;;<br><span class="hljs-comment">//å…·ä½“è§‚å¯Ÿè€…</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">ObserverBlog</span> : <span class="hljs-keyword">public</span> Observer<br>&#123;<br><span class="hljs-keyword">private</span>:<br>    string m_name;  <span class="hljs-comment">//è§‚å¯Ÿè€…åç§°</span><br>    Blog *m_blog;   <span class="hljs-comment">//è§‚å¯Ÿçš„åšå®¢ï¼Œå½“ç„¶ä»¥é“¾è¡¨å½¢å¼æ›´å¥½ï¼Œå°±å¯ä»¥è§‚å¯Ÿå¤šä¸ªåšå®¢</span><br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-built_in">ObserverBlog</span>(string name,Blog *blog): <span class="hljs-built_in">m_name</span>(name), <span class="hljs-built_in">m_blog</span>(blog) &#123;&#125;<br>    ~<span class="hljs-built_in">ObserverBlog</span>() &#123;&#125;<br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">Update</span><span class="hljs-params">()</span>  <span class="hljs-comment">//è·å¾—æ›´æ–°çŠ¶æ€</span></span><br><span class="hljs-function">    </span>&#123;<br>        string status = m_blog-&gt;<span class="hljs-built_in">GetStatus</span>();<br>        cout&lt;&lt;m_name&lt;&lt;<span class="hljs-string">&quot;-------&quot;</span>&lt;&lt;status&lt;&lt;endl;<br>    &#125;<br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">Attach</span><span class="hljs-params">()</span></span>&#123;<br>        m_blog-&gt;<span class="hljs-built_in">Attach</span>(<span class="hljs-keyword">this</span>);<br>    &#125;<br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">Remove</span><span class="hljs-params">()</span></span>&#123;<br>        m_blog-&gt;<span class="hljs-built_in">Remove</span>(<span class="hljs-keyword">this</span>);<br>    &#125;<br>&#125;;<br><br><span class="hljs-comment">//æµ‹è¯•æ¡ˆä¾‹</span><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    Blog *blog = <span class="hljs-keyword">new</span> <span class="hljs-built_in">BlogCSDN</span>(<span class="hljs-string">&quot;åšå®¢1&quot;</span>);<br>    Observer *observer1 = <span class="hljs-keyword">new</span> <span class="hljs-built_in">ObserverBlog</span>(<span class="hljs-string">&quot;è§‚å¯Ÿè€…1&quot;</span>, blog);<br>    <span class="hljs-comment">// ç”±ç²‰ä¸è°ƒç”¨</span><br>    observer1-&gt;<span class="hljs-built_in">Attach</span>();<br>    <span class="hljs-comment">// ç”±å…¬ä¼—å·ç»è¥è€…è°ƒç”¨</span><br>    blog-&gt;<span class="hljs-built_in">SetStatus</span>(<span class="hljs-string">&quot;å‘è¡¨è®¾è®¡æ¨¡å¼C++å®ç°ï¼ˆ15ï¼‰â€”â€”è§‚å¯Ÿè€…æ¨¡å¼&quot;</span>);<br>    <span class="hljs-comment">// ç”±å…¬ä¼—å·ç»è¥è€…è°ƒç”¨</span><br>    blog-&gt;<span class="hljs-built_in">Notify</span>();<br>    <span class="hljs-comment">// ç”±ç²‰ä¸è°ƒç”¨</span><br>    observer1-&gt;<span class="hljs-built_in">Remove</span>();<br><br>    <span class="hljs-comment">// å–æ¶ˆè®¢é˜…åï¼Œè§‚å¯Ÿè€…ä¸ä¼šæ¥å—</span><br>    blog-&gt;<span class="hljs-built_in">SetStatus</span>(<span class="hljs-string">&quot;å‘è¡¨è®¾è®¡æ¨¡å¼C++å®ç°ï¼ˆ16ï¼‰â€”â€”è§‚å¯Ÿè€…æ¨¡å¼&quot;</span>);<br>blog-&gt;<span class="hljs-built_in">Notify</span>();<br><br>    <span class="hljs-keyword">delete</span> blog;<br>    <span class="hljs-keyword">delete</span> observer1;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="17ã€çŠ¶æ€æ¨¡å¼"><a href="#17ã€çŠ¶æ€æ¨¡å¼" class="headerlink" title="17ã€çŠ¶æ€æ¨¡å¼"></a>17ã€çŠ¶æ€æ¨¡å¼</h2><p>C++ä¸­çŠ¶æ€æ¨¡å¼æ˜¯ä¸€ç§è¡Œä¸ºè®¾è®¡æ¨¡å¼ï¼Œå®ƒå…è®¸ä¸€ä¸ªå¯¹è±¡åœ¨å†…éƒ¨çŠ¶æ€æ”¹å˜æ—¶æ”¹å˜å®ƒçš„è¡Œä¸ºï¼Œçœ‹èµ·æ¥ä¼¼ä¹æ”¹å˜äº†å®ƒçš„ç±»ã€‚åœ¨çŠ¶æ€æ¨¡å¼ä¸­ï¼Œæˆ‘ä»¬åˆ›å»ºè¡¨ç¤ºå„ç§çŠ¶æ€çš„å¯¹è±¡å’Œä¸€ä¸ªè¡Œä¸ºéšç€çŠ¶æ€å¯¹è±¡æ”¹å˜è€Œæ”¹å˜çš„å¯¹è±¡ã€‚çŠ¶æ€æ¨¡å¼ä¸»è¦è§£å†³çš„æ˜¯åœ¨å¯¹è±¡çŠ¶æ€è½¬æ¢çš„æ—¶å€™å¸¦æ¥çš„å¤æ‚æ€§é—®é¢˜ã€‚é€šå¸¸å½“ä¸€ä¸ªå¯¹è±¡çš„è¡Œä¸ºå–å†³äºå®ƒçš„çŠ¶æ€ï¼Œå¹¶ä¸”å®ƒå¿…é¡»åœ¨è¿è¡Œæ—¶æ ¹æ®çŠ¶æ€æ”¹å˜å®ƒçš„è¡Œä¸ºæ—¶ï¼Œè¿™æ—¶å€™å¯ä»¥è€ƒè™‘ä½¿ç”¨çŠ¶æ€æ¨¡å¼ã€‚</p><p>å®ƒæœ‰ä¸¤ç§ä½¿ç”¨æƒ…å†µï¼š</p><ol><li>ä¸€ä¸ªå¯¹è±¡çš„è¡Œä¸ºå–å†³äºå®ƒçš„çŠ¶æ€, å¹¶ä¸”å®ƒå¿…é¡»åœ¨è¿è¡Œæ—¶åˆ»æ ¹æ®çŠ¶æ€æ”¹å˜å®ƒçš„è¡Œä¸ºã€‚</li><li>ä¸€ä¸ªæ“ä½œä¸­å«æœ‰åºå¤§çš„å¤šåˆ†æ”¯çš„æ¡ä»¶è¯­å¥ï¼Œä¸”è¿™äº›åˆ†æ”¯ä¾èµ–äºè¯¥å¯¹è±¡çš„çŠ¶æ€ã€‚</li></ol><p>å®ç°ï¼šContext ç±»åŒ…å«ä¸€ä¸ªå½“å‰çŠ¶æ€å¯¹è±¡æŒ‡é’ˆ m_stateï¼Œå½“ Context çš„ Request()æ–¹æ³•è¢«è°ƒç”¨æ—¶ï¼Œä¼šè°ƒç”¨å½“å‰çŠ¶æ€å¯¹è±¡çš„ Handle()æ–¹æ³•æ¥å¤„ç†è¯·æ±‚ã€‚åŒæ—¶ï¼ŒContext ç±»è¿˜æä¾›äº†ä¸€ä¸ª SetState()æ–¹æ³•ï¼Œç”¨äºåˆ‡æ¢çŠ¶æ€å¯¹è±¡ã€‚å…·ä½“çš„çŠ¶æ€å¯¹è±¡å®ç°äº† State ç±»çš„æ¥å£ï¼Œå¹¶å®ç°äº†å®ƒä»¬è‡ªå·±çš„è¡Œä¸ºã€‚</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-comment">// æŠ½è±¡çŠ¶æ€(State)åŸºç±»</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">State</span> &#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">Handle</span><span class="hljs-params">()</span> </span>= <span class="hljs-number">0</span>;<br>&#125;;<br><br><span class="hljs-comment">// å…·ä½“çŠ¶æ€</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">ConcreteStateA</span> : <span class="hljs-keyword">public</span> State &#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">Handle</span><span class="hljs-params">()</span> <span class="hljs-keyword">override</span> </span>&#123;<br>        std::cout &lt;&lt; <span class="hljs-string">&quot;Handle state A.&quot;</span> &lt;&lt; std::endl;<br>    &#125;<br>&#125;;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">ConcreteStateB</span> : <span class="hljs-keyword">public</span> State &#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">Handle</span><span class="hljs-params">()</span> <span class="hljs-keyword">override</span> </span>&#123;<br>        std::cout &lt;&lt; <span class="hljs-string">&quot;Handle state B.&quot;</span> &lt;&lt; std::endl;<br>    &#125;<br>&#125;;<br><br><span class="hljs-comment">// åˆ›å»ºä¸€ä¸ªContextç±»ï¼Œå®ƒåŒ…å«ä¸€ä¸ªå½“å‰çŠ¶æ€å¯¹è±¡å’Œä¸€äº›å¯ä»¥åœ¨çŠ¶æ€å¯¹è±¡ä¹‹é—´è½¬æ¢çš„æ–¹æ³•</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Context</span> &#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">SetState</span><span class="hljs-params">(State* state)</span> </span>&#123;<br>        m_state = state;<br>    &#125;<br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">Request</span><span class="hljs-params">()</span> </span>&#123;<br>        m_state-&gt;<span class="hljs-built_in">Handle</span>();<br>    &#125;<br><span class="hljs-keyword">private</span>:<br>    State* m_state;<br>&#125;;<br><br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span>&#123;<br>    ConcreteStateA stateA;<br>    ConcreteStateB stateB;<br><br>    Context context;<br>    context.<span class="hljs-built_in">SetState</span>(&amp;stateA);<br>    context.<span class="hljs-built_in">Request</span>();<br><br>    context.<span class="hljs-built_in">SetState</span>(&amp;stateB);<br>    context.<span class="hljs-built_in">Request</span>();<br><br>&#125;<br></code></pre></td></tr></table></figure><p>é€šè¿‡ä½¿ç”¨çŠ¶æ€æ¨¡å¼ï¼Œæˆ‘ä»¬å¯ä»¥é¿å…åœ¨å¯¹è±¡çŠ¶æ€è½¬æ¢æ—¶å¼•å…¥å¤§é‡çš„æ¡ä»¶åˆ†æ”¯å’Œå¤æ‚çš„ if-else è¯­å¥ï¼Œä½¿ä»£ç æ›´åŠ ç®€æ´å’Œæ˜“äºç»´æŠ¤ã€‚å½“ä¸€ä¸ªå¯¹è±¡çš„è¡Œä¸ºå–å†³äºå®ƒçš„çŠ¶æ€ï¼Œå¹¶ä¸”å®ƒå¿…é¡»åœ¨è¿è¡Œæ—¶æ ¹æ®çŠ¶æ€æ”¹å˜å®ƒçš„è¡Œä¸ºæ—¶ï¼Œå°±å¯ä»¥è€ƒè™‘ä½¿ç”¨çŠ¶æ€æ¨¡å¼äº†ã€‚</p><p>æˆ˜äº‰æ¡ˆä¾‹</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">War</span>;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">State</span><br>&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">Prophase</span><span class="hljs-params">()</span> </span>&#123;&#125;<br>    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">Metaphase</span><span class="hljs-params">()</span> </span>&#123;&#125;<br>    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">Anaphase</span><span class="hljs-params">()</span> </span>&#123;&#125;<br>    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">End</span><span class="hljs-params">()</span> </span>&#123;&#125;<br>    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">CurrentState</span><span class="hljs-params">(War *war)</span> </span>&#123;&#125;<br>&#125;;<br><span class="hljs-comment">//æˆ˜äº‰</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">War</span><br>&#123;<br><span class="hljs-keyword">private</span>:<br>    State *m_state;  <span class="hljs-comment">//ç›®å‰çŠ¶æ€</span><br>    <span class="hljs-type">int</span> m_days;      <span class="hljs-comment">//æˆ˜äº‰æŒç»­æ—¶é—´</span><br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-built_in">War</span>(State *state): <span class="hljs-built_in">m_state</span>(state), <span class="hljs-built_in">m_days</span>(<span class="hljs-number">0</span>) &#123;&#125;<br>    ~<span class="hljs-built_in">War</span>() &#123; <span class="hljs-keyword">delete</span> m_state; &#125;<br>    <span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">GetDays</span><span class="hljs-params">()</span> </span>&#123; <span class="hljs-keyword">return</span> m_days; &#125;<br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">SetDays</span><span class="hljs-params">(<span class="hljs-type">int</span> days)</span> </span>&#123; m_days = days; &#125;<br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">SetState</span><span class="hljs-params">(State *state)</span> </span>&#123; <span class="hljs-keyword">delete</span> m_state; m_state = state; &#125;<br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">GetState</span><span class="hljs-params">()</span> </span>&#123; m_state-&gt;<span class="hljs-built_in">CurrentState</span>(<span class="hljs-keyword">this</span>); &#125;<br>&#125;;<br><br><span class="hljs-comment">//æˆ˜äº‰ç»“æŸ</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">EndState</span>: <span class="hljs-keyword">public</span> State<br>&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">End</span><span class="hljs-params">(War *war)</span> <span class="hljs-comment">//ç»“æŸé˜¶æ®µçš„å…·ä½“è¡Œä¸º</span></span><br><span class="hljs-function">    </span>&#123;<br>        cout&lt;&lt;<span class="hljs-string">&quot;æˆ˜äº‰ç»“æŸ&quot;</span>&lt;&lt;endl;<br>    &#125;<br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">CurrentState</span><span class="hljs-params">(War *war)</span> </span>&#123; <span class="hljs-built_in">End</span>(war); &#125;<br>&#125;;<br><span class="hljs-comment">//åæœŸ</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">AnaphaseState</span>: <span class="hljs-keyword">public</span> State<br>&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">Anaphase</span><span class="hljs-params">(War *war)</span> <span class="hljs-comment">//åæœŸçš„å…·ä½“è¡Œä¸º</span></span><br><span class="hljs-function">    </span>&#123;<br>        <span class="hljs-keyword">if</span>(war-&gt;<span class="hljs-built_in">GetDays</span>() &lt; <span class="hljs-number">30</span>)<br>            cout&lt;&lt;<span class="hljs-string">&quot;ç¬¬&quot;</span>&lt;&lt;war-&gt;<span class="hljs-built_in">GetDays</span>()&lt;&lt;<span class="hljs-string">&quot;å¤©ï¼šæˆ˜äº‰åæœŸï¼ŒåŒæ–¹æ‹¼æ­»ä¸€æ&quot;</span>&lt;&lt;endl;<br>        <span class="hljs-keyword">else</span><br>        &#123;<br>            war-&gt;<span class="hljs-built_in">SetState</span>(<span class="hljs-keyword">new</span> <span class="hljs-built_in">EndState</span>());<br>            war-&gt;<span class="hljs-built_in">GetState</span>();<br>        &#125;<br>    &#125;<br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">CurrentState</span><span class="hljs-params">(War *war)</span> </span>&#123; <span class="hljs-built_in">Anaphase</span>(war); &#125;<br>&#125;;<br><span class="hljs-comment">//ä¸­æœŸ</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">MetaphaseState</span>: <span class="hljs-keyword">public</span> State<br>&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">Metaphase</span><span class="hljs-params">(War *war)</span> <span class="hljs-comment">//ä¸­æœŸçš„å…·ä½“è¡Œä¸º</span></span><br><span class="hljs-function">    </span>&#123;<br>        <span class="hljs-keyword">if</span>(war-&gt;<span class="hljs-built_in">GetDays</span>() &lt; <span class="hljs-number">20</span>)<br>            cout&lt;&lt;<span class="hljs-string">&quot;ç¬¬&quot;</span>&lt;&lt;war-&gt;<span class="hljs-built_in">GetDays</span>()&lt;&lt;<span class="hljs-string">&quot;å¤©ï¼šæˆ˜äº‰ä¸­æœŸï¼Œè¿›å…¥ç›¸æŒé˜¶æ®µï¼ŒåŒå‘å„æœ‰æŸè€—&quot;</span>&lt;&lt;endl;<br>        <span class="hljs-keyword">else</span><br>        &#123;<br>            war-&gt;<span class="hljs-built_in">SetState</span>(<span class="hljs-keyword">new</span> <span class="hljs-built_in">AnaphaseState</span>());<br>            war-&gt;<span class="hljs-built_in">GetState</span>();<br>        &#125;<br>    &#125;<br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">CurrentState</span><span class="hljs-params">(War *war)</span> </span>&#123; <span class="hljs-built_in">Metaphase</span>(war); &#125;<br>&#125;;<br><span class="hljs-comment">//å‰æœŸ</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">ProphaseState</span>: <span class="hljs-keyword">public</span> State<br>&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">Prophase</span><span class="hljs-params">(War *war)</span>  <span class="hljs-comment">//å‰æœŸçš„å…·ä½“è¡Œä¸º</span></span><br><span class="hljs-function">    </span>&#123;<br>        <span class="hljs-keyword">if</span>(war-&gt;<span class="hljs-built_in">GetDays</span>() &lt; <span class="hljs-number">10</span>)<br>            cout&lt;&lt;<span class="hljs-string">&quot;ç¬¬&quot;</span>&lt;&lt;war-&gt;<span class="hljs-built_in">GetDays</span>()&lt;&lt;<span class="hljs-string">&quot;å¤©ï¼šæˆ˜äº‰åˆæœŸï¼ŒåŒæ–¹ä½ æ¥æˆ‘å¾€ï¼Œäº’ç›¸è¯•æ¢å¯¹æ–¹&quot;</span>&lt;&lt;endl;<br>        <span class="hljs-keyword">else</span><br>        &#123;<br>            war-&gt;<span class="hljs-built_in">SetState</span>(<span class="hljs-keyword">new</span> <span class="hljs-built_in">MetaphaseState</span>());<br>            war-&gt;<span class="hljs-built_in">GetState</span>();<br>        &#125;<br>    &#125;<br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">CurrentState</span><span class="hljs-params">(War *war)</span> </span>&#123; <span class="hljs-built_in">Prophase</span>(war); &#125;<br>&#125;;<br><br><span class="hljs-comment">//æµ‹è¯•æ¡ˆä¾‹</span><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    War *war = <span class="hljs-keyword">new</span> <span class="hljs-built_in">War</span>(<span class="hljs-keyword">new</span> <span class="hljs-built_in">ProphaseState</span>());<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt; <span class="hljs-number">40</span>;i += <span class="hljs-number">5</span>)<br>    &#123;<br>        war-&gt;<span class="hljs-built_in">SetDays</span>(i);<br>        war-&gt;<span class="hljs-built_in">GetState</span>();<br>    &#125;<br>    <span class="hljs-keyword">delete</span> war;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>å‚è€ƒé“¾æ¥ï¼š</p><ol><li><a href="https://design-patterns.readthedocs.io/zh-cn/latest/index.html">å›¾è¯´è®¾è®¡æ¨¡å¼</a></li><li><a href="https://zhuanlan.zhihu.com/p/128145128">çŸ¥ä¹ï¼šå¿«é€Ÿè®°å¿† 23 ç§è®¾è®¡æ¨¡å¼</a></li></ol>]]></content>
    
    
    <categories>
      
      <category>ç¼–ç¨‹</category>
      
    </categories>
    
    
    <tags>
      
      <tag>C++</tag>
      
      <tag>è®¾è®¡æ¨¡å¼</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>C++åŸºç¡€</title>
    <link href="/2024/03/17/001%20C++%E5%9F%BA%E7%A1%80/"/>
    <url>/2024/03/17/001%20C++%E5%9F%BA%E7%A1%80/</url>
    
    <content type="html"><![CDATA[<h1 id="1ã€å…³é”®å­—"><a href="#1ã€å…³é”®å­—" class="headerlink" title="1ã€å…³é”®å­—"></a>1ã€å…³é”®å­—</h1><p><a href="https://www.runoob.com/w3cnote/cpp-keyword-intro.html">èœé¸Ÿæ•™ç¨‹</a></p><p><img src="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/202203282321032.jpg#crop=0&crop=0&crop=1&crop=1&id=SHdFq&originHeight=363&originWidth=689&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title="></p><h1 id="2ã€æ•°æ®ç±»å‹"><a href="#2ã€æ•°æ®ç±»å‹" class="headerlink" title="2ã€æ•°æ®ç±»å‹"></a>2ã€æ•°æ®ç±»å‹</h1><p>å†…ç½®æ•°æ®ç±»å‹ï¼šç®—æ•°ç±»å‹å’Œç©ºç±»å‹</p><p>ç®—æ•°ç±»å‹ï¼šæ•´å½¢å’Œæµ®ç‚¹å‹</p><h2 id="2-1-æ•´å‹"><a href="#2-1-æ•´å‹" class="headerlink" title="2.1 æ•´å‹"></a>2.1 æ•´å‹</h2><ol><li>å®šä¹‰è¶…å‡ºèŒƒå›´ä¼šæº¢å‡ºï¼›<table><thead><tr><th>æ•°æ®ç±»å‹</th><th>å ç”¨ç©ºé—´</th><th>å–å€¼èŒƒå›´</th></tr></thead><tbody><tr><td>shortï¼ˆçŸ­æ•´å‹ï¼‰</td><td>2 å­—èŠ‚</td><td>(-215~215-1)</td></tr><tr><td>intï¼ˆæ•´å‹ï¼‰</td><td>4 å­—èŠ‚</td><td>(-231~231-1)</td></tr><tr><td>longï¼ˆé•¿æ•´å‹ï¼‰</td><td>win ä¸º 4ï¼Œlinux ä¸º 4ï¼ˆ32 ä½ï¼‰ï¼Œ8ï¼ˆ64 ä½ï¼‰</td><td>(-231~231-1ï¼‰</td></tr><tr><td>long longï¼ˆé•¿é•¿æ•´å‹ï¼‰</td><td>8 å­—èŠ‚</td><td>(-263~263-1)</td></tr></tbody></table></li></ol><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;iostream&gt;</span></span><br>using namespace <span class="hljs-built_in">std</span>;<br><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span>&#123;<br><span class="hljs-comment">// 1.çŸ­æ•´å‹</span><br><span class="hljs-type">short</span> a = <span class="hljs-number">10</span>;<br><br><span class="hljs-comment">// 2.æ•´å‹</span><br><span class="hljs-type">int</span> b = <span class="hljs-number">10</span>;<br><br><span class="hljs-comment">// 3.é•¿æ•´å‹</span><br><span class="hljs-type">long</span> c = <span class="hljs-number">10</span>;<br><br><span class="hljs-comment">// 4.é•¿é•¿æ•´å‹</span><br><span class="hljs-type">long</span> <span class="hljs-type">long</span> d = <span class="hljs-number">10</span>;<br><br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;num1=&quot;</span> &lt;&lt; a &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;num2=&quot;</span> &lt;&lt; b &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;num3=&quot;</span> &lt;&lt; c &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;num4=&quot;</span> &lt;&lt; d &lt;&lt; <span class="hljs-built_in">endl</span>;<br><br>system(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="2-2-å®å‹"><a href="#2-2-å®å‹" class="headerlink" title="2.2 å®å‹"></a>2.2 å®å‹</h2><ol><li>ç”¨äºè¡¨ç¤ºå°æ•°ï¼›</li><li>å•ç²¾åº¦ float å’ŒåŒç²¾åº¦ doubleï¼›</li><li>å°æ•°é»˜è®¤ä¸ºåŒç²¾åº¦ï¼Œå®šä¹‰ float æ—¶éœ€è¦åŠ  fï¼Œå¦‚<code>float a =3.14f;</code>ï¼Œå¦åˆ™ä¼šæˆªæ–­ï¼›</li><li>ç§‘å­¦è®¡æ•°æ³•ï¼Œ<code>float f2 = 3e2;//3*10^2</code> <code>float f2 = 3e-2;//3*0.1^2</code></li></ol><p><strong>åŒºåˆ«</strong></p><table><thead><tr><th>æ•°æ®ç±»å‹</th><th>å ç”¨ç©ºé—´</th><th>æœ‰æ•ˆæ•°å­—ç±»å‹</th></tr></thead><tbody><tr><td>float</td><td>4 å­—èŠ‚</td><td>7 ä½æœ‰æ•ˆæ•°å­—</td></tr><tr><td>double</td><td>8 å­—èŠ‚</td><td>15-16 ä½æœ‰æ•ˆæ•°å­—</td></tr></tbody></table><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;iostream&gt;</span></span><br>using namespace <span class="hljs-built_in">std</span>;<br><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> &#123;<br><br><span class="hljs-type">float</span> a = <span class="hljs-number">3.14f</span>;<br><span class="hljs-type">double</span> b = <span class="hljs-number">3.14</span>;<br><br>system(<span class="hljs-string">&quot;pause&quot;</span>);<br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="2-3-å­—ç¬¦å‹"><a href="#2-3-å­—ç¬¦å‹" class="headerlink" title="2.3 å­—ç¬¦å‹"></a>2.3 å­—ç¬¦å‹</h2><ol><li>è¡¨ç¤ºå½¢å¼<code>char ch = &#39;a&#39;;</code></li><li>å•å¼•å·é‡Œé¢åªèƒ½å†™ä¸€ä¸ªå­—ç¬¦ï¼›</li><li>åªå ç”¨ä¸€ä¸ªå­—èŠ‚ï¼›</li><li>å­—ç¬¦å‹è¿›è¡Œå­˜å‚¨æ—¶ä»¥ ASCII å­˜å‚¨ï¼›</li></ol><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;iostream&gt;</span></span><br>using namespace <span class="hljs-built_in">std</span>;<br><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> &#123;<br><span class="hljs-comment">// åˆ›å»ºå­—ç¬¦å‹å˜é‡</span><br><span class="hljs-type">char</span> ch = <span class="hljs-string">&#x27;a&#x27;</span>;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;å­—ç¬¦ä¸º&quot;</span> &lt;&lt; ch &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;å­—ç¬¦æ‰€å å†…å­˜ä¸º&quot;</span> &lt;&lt; <span class="hljs-keyword">sizeof</span>(ch) &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;å­—ç¬¦chå¯¹åº”çš„ASCIIç¼–ç ä¸º&quot;</span> &lt;&lt; (<span class="hljs-type">int</span>)ch &lt;&lt; <span class="hljs-built_in">endl</span>;<br><br>system(<span class="hljs-string">&quot;pause&quot;</span>);<br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="2-4-è½¬ä¹‰å­—ç¬¦"><a href="#2-4-è½¬ä¹‰å­—ç¬¦" class="headerlink" title="2.4 è½¬ä¹‰å­—ç¬¦"></a>2.4 è½¬ä¹‰å­—ç¬¦</h2><figure class="highlight livescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs livescript"><span class="hljs-string">\a:èœ‚é¸£ï¼Œå“é“ƒ</span><br><span class="hljs-string">\b:å›é€€ï¼šå‘åé€€ä¸€æ ¼</span><br><span class="hljs-string">\f:æ¢é¡µ</span><br><span class="hljs-string">\n:æ¢è¡Œï¼Œå…‰æ ‡åˆ°ä¸‹è¡Œè¡Œé¦–</span><br><span class="hljs-string">\r:å›è½¦ï¼Œå…‰æ ‡åˆ°æœ¬è¡Œè¡Œé¦–</span><br><span class="hljs-string">\t:æ°´å¹³åˆ¶è¡¨</span><br><span class="hljs-string">\v:å‚ç›´åˆ¶è¡¨</span><br><span class="hljs-string">\\:åæ–œæ </span><br><span class="hljs-string">\&#x27;:å•å¼•å·</span><br><span class="hljs-string">\&quot;:åŒå¼•å·</span><br><span class="hljs-string">\?:é—®å·</span><br><span class="hljs-string">\ddd:ä¸‰ä½å…«è¿›åˆ¶</span><br><span class="hljs-string">\xhh:äºŒä½åå…­è¿›åˆ¶</span><br><span class="hljs-string">\0:ç©ºå­—ç¬¦(NULL),ä»€ä¹ˆéƒ½ä¸åš</span><br></code></pre></td></tr></table></figure><h2 id="2-5-å­—ç¬¦ä¸²å‹"><a href="#2-5-å­—ç¬¦ä¸²å‹" class="headerlink" title="2.5 å­—ç¬¦ä¸²å‹"></a>2.5 å­—ç¬¦ä¸²å‹</h2><ol><li>C è¯­è¨€ç±»å‹ï¼š<code>char å˜é‡å[] = &quot;å­—ç¬¦ä¸²å€¼&quot;;</code></li><li>C++ç±»å‹ï¼š<code>string å˜é‡å = &quot;å­—ç¬¦ä¸²å€¼&quot;;</code></li><li><code>iostream</code>å·²ç»éšå¼åœ°åŒ…å«äº† string åº“ï¼Œä½†æœ€å¥½è¿˜æ˜¯æ˜¾å¼ä¸€ä¸‹ï¼Œä»¥å…å‘ç”Ÿé”™è¯¯ã€‚å¤´æ–‡ä»¶<code>#include&lt;string&gt;</code></li><li></li></ol><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;string&gt;</span></span><br>using namespace <span class="hljs-built_in">std</span>;<br><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> &#123;<br><span class="hljs-comment">// 1ã€Cè¯­è¨€é£æ ¼</span><br><span class="hljs-type">char</span> string1[] = <span class="hljs-string">&quot;hello&quot;</span>;<br><span class="hljs-comment">// 2ã€C++é£æ ¼</span><br><span class="hljs-built_in">string</span> string2 = <span class="hljs-string">&quot;world&quot;</span>;<br><br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;string1=&quot;</span>&lt;&lt;string1 &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;string2=&quot;</span>&lt;&lt;string2 &lt;&lt; <span class="hljs-built_in">endl</span>;<br><br>system(<span class="hljs-string">&quot;pause&quot;</span>);<br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="2-6-å¸ƒå°”ç±»å‹"><a href="#2-6-å¸ƒå°”ç±»å‹" class="headerlink" title="2.6 å¸ƒå°”ç±»å‹"></a>2.6 å¸ƒå°”ç±»å‹</h2><ol><li>true å’Œ falseï¼›</li><li>åªå ç”¨ 1 å­—èŠ‚ï¼›</li><li>å®è´¨ä¸Š true ä¸º 1ï¼Œfalse ä¸º 0ï¼›</li></ol><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;iostream&gt;</span></span><br>using namespace <span class="hljs-built_in">std</span>;<br><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> &#123;<br><span class="hljs-comment">// bool</span><br><span class="hljs-type">bool</span> flag = <span class="hljs-literal">true</span>;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;flag=&quot;</span> &lt;&lt; flag &lt;&lt; <span class="hljs-built_in">endl</span>; <span class="hljs-comment">//è¾“å‡ºä¸ºflag=1</span><br><br>system(<span class="hljs-string">&quot;pause&quot;</span>);<br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="2-7-è¾“å…¥"><a href="#2-7-è¾“å…¥" class="headerlink" title="2.7 è¾“å…¥"></a>2.7 è¾“å…¥</h2><ol><li><code>cin å˜é‡å</code></li></ol><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;iostream&gt;</span></span><br>using namespace <span class="hljs-built_in">std</span>;<br><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> &#123;<br><span class="hljs-comment">// 1ã€æ•´å‹</span><br><span class="hljs-type">int</span> a = <span class="hljs-number">10</span>;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;a=&quot;</span> &lt;&lt; a &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-built_in">cin</span> &gt;&gt; a;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;aä¹‹å=&quot;</span> &lt;&lt; a &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-comment">// 2ã€å­—ç¬¦ä¸²</span><br><span class="hljs-built_in">string</span> str = <span class="hljs-string">&quot;helllo&quot;</span>;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;str1=&quot;</span> &lt;&lt; str &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-built_in">cin</span> &gt;&gt; str;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;str2=&quot;</span> &lt;&lt; str &lt;&lt; <span class="hljs-built_in">endl</span>;<br>system(<span class="hljs-string">&quot;pause&quot;</span>);<br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="2-8-decltype-ç±»å‹æŒ‡ç¤ºç¬¦"><a href="#2-8-decltype-ç±»å‹æŒ‡ç¤ºç¬¦" class="headerlink" title="2.8 decltype ç±»å‹æŒ‡ç¤ºç¬¦"></a>2.8 decltype ç±»å‹æŒ‡ç¤ºç¬¦</h2><ol><li>ä»è¡¨è¾¾å¼çš„ç±»å‹æ¨ç®—å‡ºè¦å®šä¹‰å˜é‡çš„ç±»å‹ï¼Œè€Œä¸ä½¿ç”¨è¯¥å¯¹è±¡çš„åˆå§‹åŒ–å˜é‡ï¼›</li><li><code>decltype(f()) sum = 0;</code>sum çš„ç±»å‹å°±æ˜¯ f()å‡½æ•°è¿”å›å€¼ç±»å‹ï¼›</li></ol><p><strong>å…³äºå¼•ç”¨ç±»å‹</strong></p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;iostream&gt;</span></span><br><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span><br>&#123;<br><span class="hljs-type">const</span> <span class="hljs-type">int</span> ci = <span class="hljs-number">0</span>, &amp; cj = ci;<br>decltype(ci) x = ci; <span class="hljs-comment">//xç±»å‹æ˜¯const int</span><br>decltype(cj) y = x; <span class="hljs-comment">//yç±»å‹æ˜¯const int&amp;</span><br><span class="hljs-comment">// decltype(cj) z; //é”™è¯¯ï¼Œzçš„ç±»å‹ä¸ºå¼•ç”¨ï¼Œå¿…é¡»åˆå§‹åŒ–ï¼›</span><br>&#125;<br></code></pre></td></tr></table></figure><p><strong>æŒ‡é’ˆè§£å¼•ç”¨</strong></p><ol><li>è§£å¼•ç”¨ä¹‹åå¾—åˆ°å¼•ç”¨ç±»å‹</li></ol><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">int</span> i = <span class="hljs-number">42</span>, * p = &amp;i, &amp; r = i;<br>decltype(r + <span class="hljs-number">0</span>) b;<br><span class="hljs-comment">//decltype(*p) c; //é”™è¯¯ï¼Œ*pè§£å¼•ç”¨ä¹‹åç±»å‹ä¸ºå¼•ç”¨ï¼Œå³int&amp;</span><br></code></pre></td></tr></table></figure><p><strong>å¤šå±‚æ‹¬å·</strong></p><ol><li>åŒå±‚æ‹¬å·æ°¸è¿œæ˜¯å¼•ç”¨</li></ol><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">int</span> i = <span class="hljs-number">42</span>;<br><span class="hljs-comment">//decltype((i)) d; // é”™è¯¯ï¼ŒåŠ æ‹¬å·ä¹‹åï¼ˆiï¼‰ä¸ºè¡¨è¾¾å¼ï¼Œå¾—åˆ°å¼•ç”¨ç±»å‹</span><br>decltype(i) d;<br></code></pre></td></tr></table></figure><h1 id="3ã€è¿ç®—ç¬¦"><a href="#3ã€è¿ç®—ç¬¦" class="headerlink" title="3ã€è¿ç®—ç¬¦"></a>3ã€è¿ç®—ç¬¦</h1><h2 id="3-1-ç®—æ•°è¿ç®—ç¬¦"><a href="#3-1-ç®—æ•°è¿ç®—ç¬¦" class="headerlink" title="3.1 ç®—æ•°è¿ç®—ç¬¦"></a>3.1 ç®—æ•°è¿ç®—ç¬¦</h2><ol><li>ä¸¤ä¸ªå°æ•°ä¸èƒ½åšå–æ¨¡è¿ç®—ï¼›<table><thead><tr><th>è¿ç®—ç¬¦</th><th>æè¿°</th><th>å®ä¾‹</th></tr></thead><tbody><tr><td>+</td><td>æŠŠä¸¤ä¸ªæ“ä½œæ•°ç›¸åŠ </td><td>A + B å°†å¾—åˆ° 30</td></tr><tr><td>-</td><td>ä»ç¬¬ä¸€ä¸ªæ“ä½œæ•°ä¸­å‡å»ç¬¬äºŒä¸ªæ“ä½œæ•°</td><td>A - B å°†å¾—åˆ° -10</td></tr><tr><td>_</td><td>æŠŠä¸¤ä¸ªæ“ä½œæ•°ç›¸ä¹˜</td><td>A _ B å°†å¾—åˆ° 200</td></tr><tr><td>&#x2F;</td><td>åˆ†å­é™¤ä»¥åˆ†æ¯</td><td>B &#x2F; A å°†å¾—åˆ° 2</td></tr><tr><td>%</td><td>å–æ¨¡è¿ç®—ç¬¦ï¼Œæ•´é™¤åçš„ä½™æ•°</td><td>B % A å°†å¾—åˆ° 0</td></tr><tr><td>++</td><td><a href="https://www.runoob.com/cplusplus/cpp-increment-decrement-operators.html">è‡ªå¢è¿ç®—ç¬¦</a></td><td></td></tr><tr><td>ï¼Œæ•´æ•°å€¼å¢åŠ  1</td><td>A++ å°†å¾—åˆ° 11</td><td></td></tr><tr><td>â€“</td><td><a href="https://www.runoob.com/cplusplus/cpp-increment-decrement-operators.html">è‡ªå‡è¿ç®—ç¬¦</a></td><td></td></tr><tr><td>ï¼Œæ•´æ•°å€¼å‡å°‘ 1</td><td>Aâ€“ å°†å¾—åˆ° 9</td><td></td></tr></tbody></table></li></ol><p><strong>å‰ç½®è‡ªå¢å’Œåç½®è‡ªå¢</strong></p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br>using namespace <span class="hljs-built_in">std</span>;<br><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span><br>&#123;<br>   <span class="hljs-type">int</span> a = <span class="hljs-number">21</span>;<br>   <span class="hljs-type">int</span> c ;<br><br>   <span class="hljs-comment">// a çš„å€¼åœ¨èµ‹å€¼ä¹‹å‰ä¸ä¼šè‡ªå¢</span><br>   c = a++;<br>   <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;Line 1 - Value of a++ is :&quot;</span> &lt;&lt; c &lt;&lt; <span class="hljs-built_in">endl</span> ;<br><br>   <span class="hljs-comment">// è¡¨è¾¾å¼è®¡ç®—ä¹‹åï¼Œa çš„å€¼å¢åŠ  1</span><br>   <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;Line 2 - Value of a is :&quot;</span> &lt;&lt; a &lt;&lt; <span class="hljs-built_in">endl</span> ;<br><br>   <span class="hljs-comment">// a çš„å€¼åœ¨èµ‹å€¼ä¹‹å‰è‡ªå¢</span><br>   c = ++a;<br>   <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;Line 3 - Value of ++a is  :&quot;</span> &lt;&lt; c &lt;&lt; <span class="hljs-built_in">endl</span> ;<br>   <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">Line</span> <span class="hljs-number">1</span> - Value of a++ is :<span class="hljs-number">21</span><br><span class="hljs-attribute">Line</span> <span class="hljs-number">2</span> - Value of a is :<span class="hljs-number">22</span><br><span class="hljs-attribute">Line</span> <span class="hljs-number">3</span> - Value of ++a is  :<span class="hljs-number">23</span><br></code></pre></td></tr></table></figure><h2 id="3-2-èµ‹å€¼è¿ç®—ç¬¦"><a href="#3-2-èµ‹å€¼è¿ç®—ç¬¦" class="headerlink" title="3.2 èµ‹å€¼è¿ç®—ç¬¦"></a>3.2 èµ‹å€¼è¿ç®—ç¬¦</h2><table><thead><tr><th>ç®—ç¬¦</th><th>æè¿°</th><th>å®ä¾‹</th></tr></thead><tbody><tr><td>&#x3D;</td><td>ç®€å•çš„èµ‹å€¼è¿ç®—ç¬¦ï¼ŒæŠŠå³è¾¹æ“ä½œæ•°çš„å€¼èµ‹ç»™å·¦è¾¹æ“ä½œæ•°</td><td>C &#x3D; A + B å°†æŠŠ A + B çš„å€¼èµ‹ç»™ C</td></tr><tr><td>+&#x3D;</td><td>åŠ ä¸”èµ‹å€¼è¿ç®—ç¬¦ï¼ŒæŠŠå³è¾¹æ“ä½œæ•°åŠ ä¸Šå·¦è¾¹æ“ä½œæ•°çš„ç»“æœèµ‹å€¼ç»™å·¦è¾¹æ“ä½œæ•°</td><td>C +&#x3D; A ç›¸å½“äº C &#x3D; C + A</td></tr><tr><td>-&#x3D;</td><td>å‡ä¸”èµ‹å€¼è¿ç®—ç¬¦ï¼ŒæŠŠå·¦è¾¹æ“ä½œæ•°å‡å»å³è¾¹æ“ä½œæ•°çš„ç»“æœèµ‹å€¼ç»™å·¦è¾¹æ“ä½œæ•°</td><td>C -&#x3D; A ç›¸å½“äº C &#x3D; C - A</td></tr><tr><td>*&#x3D;</td><td>ä¹˜ä¸”èµ‹å€¼è¿ç®—ç¬¦ï¼ŒæŠŠå³è¾¹æ“ä½œæ•°ä¹˜ä»¥å·¦è¾¹æ“ä½œæ•°çš„ç»“æœèµ‹å€¼ç»™å·¦è¾¹æ“ä½œæ•°</td><td>C _&#x3D; A ç›¸å½“äº C &#x3D; C _ A</td></tr><tr><td>&#x2F;&#x3D;</td><td>é™¤ä¸”èµ‹å€¼è¿ç®—ç¬¦ï¼ŒæŠŠå·¦è¾¹æ“ä½œæ•°é™¤ä»¥å³è¾¹æ“ä½œæ•°çš„ç»“æœèµ‹å€¼ç»™å·¦è¾¹æ“ä½œæ•°</td><td>C &#x2F;&#x3D; A ç›¸å½“äº C &#x3D; C &#x2F; A</td></tr><tr><td>%&#x3D;</td><td>æ±‚æ¨¡ä¸”èµ‹å€¼è¿ç®—ç¬¦ï¼Œæ±‚ä¸¤ä¸ªæ“ä½œæ•°çš„æ¨¡èµ‹å€¼ç»™å·¦è¾¹æ“ä½œæ•°</td><td>C %&#x3D; A ç›¸å½“äº C &#x3D; C % A</td></tr><tr><td>&lt;&lt;&#x3D;</td><td>å·¦ç§»ä¸”èµ‹å€¼è¿ç®—ç¬¦</td><td>C &lt;&lt;&#x3D; 2 ç­‰åŒäº C &#x3D; C &lt;&lt; 2</td></tr><tr><td>&gt;&gt;&#x3D;</td><td>å³ç§»ä¸”èµ‹å€¼è¿ç®—ç¬¦</td><td>C &gt;&gt;&#x3D; 2 ç­‰åŒäº C &#x3D; C &gt;&gt; 2</td></tr><tr><td>&amp;&#x3D;</td><td>æŒ‰ä½ä¸ä¸”èµ‹å€¼è¿ç®—ç¬¦</td><td>C &amp;&#x3D; 2 ç­‰åŒäº C &#x3D; C &amp; 2</td></tr><tr><td>^&#x3D;</td><td>æŒ‰ä½å¼‚æˆ–ä¸”èµ‹å€¼è¿ç®—ç¬¦</td><td>C ^&#x3D; 2 ç­‰åŒäº C &#x3D; C ^ 2</td></tr><tr><td>&#124;&#x3D;</td><td>æŒ‰ä½æˆ–ä¸”èµ‹å€¼è¿ç®—ç¬¦</td><td>C &#124;&#x3D; 2 ç­‰åŒäº C &#x3D; C &#124; 2</td></tr></tbody></table><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;iostream&gt;</span></span><br>using namespace <span class="hljs-built_in">std</span>;<br><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> &#123;<br><span class="hljs-type">int</span> a = <span class="hljs-number">8</span>;<br>a &gt;&gt;= <span class="hljs-number">2</span>;<span class="hljs-comment">// ç­‰äº8/2^2</span><br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;a = &quot;</span> &lt;&lt; a &lt;&lt; <span class="hljs-built_in">endl</span>;<br><br>system(<span class="hljs-string">&quot;pause&quot;</span>);<br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="3-3-æ¯”è¾ƒè¿ç®—ç¬¦"><a href="#3-3-æ¯”è¾ƒè¿ç®—ç¬¦" class="headerlink" title="3.3 æ¯”è¾ƒè¿ç®—ç¬¦"></a>3.3 æ¯”è¾ƒè¿ç®—ç¬¦</h2><ol><li>è¾“å‡ºæ—¶åŠ æ‹¬å·ï¼›<code>(a==b);</code></li><li>è®¡ç®—æ—¶å¯åŠ å¯ä¸åŠ ï¼›<table><thead><tr><th>è¿ç®—ç¬¦</th><th>æè¿°</th><th>å®ä¾‹</th></tr></thead><tbody><tr><td>&#x3D;&#x3D;</td><td>æ£€æŸ¥ä¸¤ä¸ªæ“ä½œæ•°çš„å€¼æ˜¯å¦ç›¸ç­‰ï¼Œå¦‚æœç›¸ç­‰åˆ™æ¡ä»¶ä¸ºçœŸã€‚</td><td>(A &#x3D;&#x3D; B) ä¸ä¸ºçœŸã€‚</td></tr><tr><td>!&#x3D;</td><td>æ£€æŸ¥ä¸¤ä¸ªæ“ä½œæ•°çš„å€¼æ˜¯å¦ç›¸ç­‰ï¼Œå¦‚æœä¸ç›¸ç­‰åˆ™æ¡ä»¶ä¸ºçœŸã€‚</td><td>(A !&#x3D; B) ä¸ºçœŸã€‚</td></tr><tr><td>&gt;</td><td>æ£€æŸ¥å·¦æ“ä½œæ•°çš„å€¼æ˜¯å¦å¤§äºå³æ“ä½œæ•°çš„å€¼ï¼Œå¦‚æœæ˜¯åˆ™æ¡ä»¶ä¸ºçœŸã€‚</td><td>(A &gt; B) ä¸ä¸ºçœŸã€‚</td></tr><tr><td>&lt;</td><td>æ£€æŸ¥å·¦æ“ä½œæ•°çš„å€¼æ˜¯å¦å°äºå³æ“ä½œæ•°çš„å€¼ï¼Œå¦‚æœæ˜¯åˆ™æ¡ä»¶ä¸ºçœŸã€‚</td><td>(A &lt; B) ä¸ºçœŸã€‚</td></tr><tr><td>&gt;&#x3D;</td><td>æ£€æŸ¥å·¦æ“ä½œæ•°çš„å€¼æ˜¯å¦å¤§äºæˆ–ç­‰äºå³æ“ä½œæ•°çš„å€¼ï¼Œå¦‚æœæ˜¯åˆ™æ¡ä»¶ä¸ºçœŸã€‚</td><td>(A &gt;&#x3D; B) ä¸ä¸ºçœŸã€‚</td></tr><tr><td>&lt;&#x3D;</td><td>æ£€æŸ¥å·¦æ“ä½œæ•°çš„å€¼æ˜¯å¦å°äºæˆ–ç­‰äºå³æ“ä½œæ•°çš„å€¼ï¼Œå¦‚æœæ˜¯åˆ™æ¡ä»¶ä¸ºçœŸã€‚</td><td>(A &lt;&#x3D; B) ä¸ºçœŸã€‚</td></tr></tbody></table></li></ol><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;iostream&gt;</span></span><br>using namespace <span class="hljs-built_in">std</span>;<br><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> &#123;<br><span class="hljs-type">int</span> a = <span class="hljs-number">8</span>;<br><span class="hljs-type">int</span> b = <span class="hljs-number">10</span>;<br><span class="hljs-built_in">cout</span> &lt;&lt; (a==b) &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-type">bool</span> c = a != b;<br><span class="hljs-built_in">cout</span> &lt;&lt; c &lt;&lt; <span class="hljs-built_in">endl</span>;<br>system(<span class="hljs-string">&quot;pause&quot;</span>);<br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">line</span> <span class="hljs-number">1</span>:<span class="hljs-number">0</span><br><span class="hljs-attribute">line</span> <span class="hljs-number">2</span>:<span class="hljs-number">1</span><br></code></pre></td></tr></table></figure><h2 id="3-4-é€»è¾‘è¿ç®—ç¬¦"><a href="#3-4-é€»è¾‘è¿ç®—ç¬¦" class="headerlink" title="3.4 é€»è¾‘è¿ç®—ç¬¦"></a>3.4 é€»è¾‘è¿ç®—ç¬¦</h2><p>å‡è®¾å˜é‡ A çš„å€¼ä¸º 1ï¼Œå˜é‡ B çš„å€¼ä¸º 0ï¼Œåˆ™ï¼š</p><table><thead><tr><th>è¿ç®—ç¬¦</th><th>æè¿°</th><th>å®ä¾‹</th></tr></thead><tbody><tr><td>&amp;&amp;</td><td>ç§°ä¸ºé€»è¾‘ä¸è¿ç®—ç¬¦ã€‚å¦‚æœä¸¤ä¸ªæ“ä½œæ•°éƒ½ trueï¼Œåˆ™æ¡ä»¶ä¸º trueã€‚</td><td>(A &amp;&amp; B) ä¸º falseã€‚</td></tr><tr><td>&#124;&#124;</td><td>ç§°ä¸ºé€»è¾‘æˆ–è¿ç®—ç¬¦ã€‚å¦‚æœä¸¤ä¸ªæ“ä½œæ•°ä¸­æœ‰ä»»æ„ä¸€ä¸ª trueï¼Œåˆ™æ¡ä»¶ä¸º trueã€‚</td><td>(A &#124;&#124; B) ä¸º trueã€‚</td></tr><tr><td>!</td><td>ç§°ä¸ºé€»è¾‘éè¿ç®—ç¬¦ã€‚ç”¨æ¥é€†è½¬æ“ä½œæ•°çš„é€»è¾‘çŠ¶æ€ï¼Œå¦‚æœæ¡ä»¶ä¸º true åˆ™é€»è¾‘éè¿ç®—ç¬¦å°†ä½¿å…¶ä¸º falseã€‚</td><td>!(A &amp;&amp; B) ä¸º trueã€‚</td></tr></tbody></table><h2 id="3-5-æŒ‰ä½èµ‹å€¼æ“ä½œ"><a href="#3-5-æŒ‰ä½èµ‹å€¼æ“ä½œ" class="headerlink" title="3.5 æŒ‰ä½èµ‹å€¼æ“ä½œ"></a>3.5 æŒ‰ä½èµ‹å€¼æ“ä½œ</h2><ol><li>æŒ‰ä½ä¸ï¼ˆ&amp;&#x3D;ï¼‰è¿ç®—ç¬¦ï¼Œå®ƒæ˜¯äºŒè¿›åˆ¶çš„â€œä¸â€æ“ä½œï¼Œå³ä¸¤æ•°ä¸­å¯¹åº”ä½éƒ½ä¸º 1 æ—¶ä¸º 1ï¼Œå…¶ä»–æƒ…å†µéƒ½ä¸º 0ã€‚ä¾‹å¦‚ï¼Œ3 &amp; 5 çš„ç»“æœä¸º 1ã€‚è€ŒæŒ‰ä½ä¸èµ‹å€¼æ“ä½œå°±æ˜¯å°†å·¦æ“ä½œæ•°å’Œå³æ“ä½œæ•°è¿›è¡ŒæŒ‰ä½ä¸æ“ä½œï¼Œç„¶åå°†ç»“æœèµ‹ç»™å·¦æ“ä½œæ•°ï¼Œå³ a &amp;&#x3D; b ç­‰ä»·äº a &#x3D; a &amp; bã€‚</li><li>å…¶æ¬¡æ˜¯æŒ‰ä½æˆ–ï¼ˆ|&#x3D;ï¼‰è¿ç®—ç¬¦ï¼Œå®ƒæ˜¯äºŒè¿›åˆ¶çš„â€œæˆ–â€æ“ä½œï¼Œå³ä¸¤æ•°ä¸­å¯¹åº”ä½æœ‰ä¸€ä¸ªä¸º 1 æ—¶ä¸º 1ï¼Œå…¶ä»–æƒ…å†µéƒ½ä¸º 0ã€‚ä¾‹å¦‚ï¼Œ3 | 5 çš„ç»“æœä¸º 7ã€‚è€ŒæŒ‰ä½æˆ–èµ‹å€¼æ“ä½œå°±æ˜¯å°†å·¦æ“ä½œæ•°å’Œå³æ“ä½œæ•°è¿›è¡ŒæŒ‰ä½æˆ–æ“ä½œï¼Œç„¶åå°†ç»“æœèµ‹ç»™å·¦æ“ä½œæ•°ï¼Œå³ a |&#x3D; b ç­‰ä»·äº a &#x3D; a | bã€‚</li><li>æ¥ä¸‹æ¥æ˜¯æŒ‰ä½å¼‚æˆ–ï¼ˆ^&#x3D;ï¼‰è¿ç®—ç¬¦ï¼Œå®ƒæ˜¯äºŒè¿›åˆ¶çš„â€œå¼‚æˆ–â€æ“ä½œï¼Œå³ä¸¤æ•°ä¸­å¯¹åº”ä½ç›¸åŒæ—¶ä¸º 0ï¼Œä¸åŒæ—¶ä¸º 1ã€‚ä¾‹å¦‚ï¼Œ3 ^ 5 çš„ç»“æœä¸º 6ã€‚è€ŒæŒ‰ä½å¼‚æˆ–èµ‹å€¼æ“ä½œå°±æ˜¯å°†å·¦æ“ä½œæ•°å’Œå³æ“ä½œæ•°è¿›è¡ŒæŒ‰ä½å¼‚æˆ–æ“ä½œï¼Œç„¶åå°†ç»“æœèµ‹ç»™å·¦æ“ä½œæ•°ï¼Œå³ a ^&#x3D; b ç­‰ä»·äº a &#x3D; a ^ bã€‚</li><li>ç¬¬å››ä¸ªæ˜¯å·¦ç§»ä½ï¼ˆ&lt;&lt;&#x3D;ï¼‰è¿ç®—ç¬¦ï¼Œå®ƒå¯ä»¥å°†ä¸€ä¸ªæ•°å·¦ç§» n ä½ï¼Œç›¸å½“äºå°†å…¶ä¹˜ä»¥ 2 çš„ n æ¬¡æ–¹ã€‚ä¾‹å¦‚ï¼Œ3 &lt;&lt; 5 çš„ç»“æœä¸º 96ã€‚è€Œå·¦ç§»ä½èµ‹å€¼æ“ä½œå°±æ˜¯å°†å·¦æ“ä½œæ•°å·¦ç§»å³æ“ä½œæ•°ä½æ•°ä¸ªä½ç½®ï¼Œç„¶åå°†ç»“æœèµ‹ç»™å·¦æ“ä½œæ•°ï¼Œå³ a &lt;&lt;&#x3D; b ç­‰ä»·äº a &#x3D; a &lt;&lt; bã€‚</li><li>ç¬¬äº”ä¸ªæ˜¯å³ç§»ä½ï¼ˆ&gt;&gt;&#x3D;ï¼‰è¿ç®—ç¬¦ï¼Œå®ƒå¯ä»¥å°†ä¸€ä¸ªæ•°å³ç§» n ä½ï¼Œç›¸å½“äºå°†å…¶é™¤ä»¥ 2 çš„ n æ¬¡æ–¹ã€‚ä¾‹å¦‚ï¼Œ16 &gt;&gt; 2 çš„ç»“æœä¸º 4ã€‚è€Œå³ç§»ä½èµ‹å€¼æ“ä½œå°±æ˜¯å°†å·¦æ“ä½œæ•°å³ç§»å³æ“ä½œæ•°ä½æ•°ä¸ªä½ç½®ï¼Œç„¶åå°†ç»“æœèµ‹ç»™å·¦æ“ä½œæ•°ï¼Œå³ a &gt;&gt;&#x3D; b ç­‰ä»·äº a &#x3D; a &gt;&gt; bã€‚</li><li>ç¬¬å…­ä¸ªæ˜¯å–åï¼ˆ<del>ï¼‰è¿ç®—ç¬¦ï¼Œå®ƒå¯ä»¥å°†ä¸€ä¸ªæ•°çš„äºŒè¿›åˆ¶ç æŒ‰ä½å–åï¼Œä¾‹å¦‚ï¼Œ</del>3 çš„ç»“æœä¸º-4ã€‚è€ŒæŒ‰ä½ä¸å–åï¼ˆ&amp;~ï¼‰èµ‹å€¼è¿ç®—ç¬¦æ˜¯ a &amp;&#x3D; ~b çš„ç®€å†™ï¼Œå³å…ˆæŒ‰ä½å–å bï¼Œç„¶åä¸ a è¿›è¡ŒæŒ‰ä½ä¸æ“ä½œï¼Œæœ€åå°†ç»“æœèµ‹ç»™ a</li></ol><h1 id="4ã€ç¨‹åºæµç¨‹ç»“æ„"><a href="#4ã€ç¨‹åºæµç¨‹ç»“æ„" class="headerlink" title="4ã€ç¨‹åºæµç¨‹ç»“æ„"></a>4ã€ç¨‹åºæµç¨‹ç»“æ„</h1><ol><li>é¡ºåºç»“æ„ã€é€‰æ‹©ç»“æ„ã€å¾ªç¯ç»“æ„</li></ol><h2 id="4-1-é€‰æ‹©ç»“æ„"><a href="#4-1-é€‰æ‹©ç»“æ„" class="headerlink" title="4.1 é€‰æ‹©ç»“æ„"></a>4.1 é€‰æ‹©ç»“æ„</h2><ol><li>if</li><li>ifâ€¦else</li><li>ifâ€¦else if..else ifâ€¦</li></ol><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;iostream&gt;</span></span><br>using namespace <span class="hljs-built_in">std</span>;<br><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> &#123;<br><span class="hljs-type">int</span> score = <span class="hljs-number">0</span>;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;è¯·è¾“å…¥åˆ†æ•°&quot;</span> &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-built_in">cin</span> &gt;&gt; score;<br><span class="hljs-keyword">if</span> (score &gt; <span class="hljs-number">600</span>) &#123;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;åŠæ ¼äº†&quot;</span> &lt;&lt; <span class="hljs-built_in">endl</span>;<br>&#125;<br><br>system(<span class="hljs-string">&quot;pause&quot;</span>);<br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>é¡ºåºè®¡æ•°å™¨</strong></p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;iostream&gt;</span></span><br><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> &#123;<br><span class="hljs-type">int</span> currVal = <span class="hljs-number">0</span>, val = <span class="hljs-number">0</span>;<br><span class="hljs-keyword">if</span> (<span class="hljs-built_in">std</span>::<span class="hljs-built_in">cin</span> &gt;&gt; currVal) &#123;<br><span class="hljs-type">int</span> cnt = <span class="hljs-number">1</span>;<br><span class="hljs-keyword">while</span> (<span class="hljs-built_in">std</span>::<span class="hljs-built_in">cin</span> &gt;&gt; val) &#123;<br><span class="hljs-keyword">if</span> (val == currVal)<br>++cnt;<br><span class="hljs-keyword">else</span> &#123;<br><span class="hljs-built_in">std</span>::<span class="hljs-built_in">cout</span> &lt;&lt; currVal &lt;&lt; <span class="hljs-string">&quot; occurs &quot;</span> &lt;&lt; cnt &lt;&lt; <span class="hljs-string">&quot; times&quot;</span> &lt;&lt; <span class="hljs-built_in">std</span>::<span class="hljs-built_in">endl</span>;<br>currVal = val;<br>cnt = <span class="hljs-number">1</span>;<br>&#125;<br>&#125;<br><span class="hljs-built_in">std</span>::<span class="hljs-built_in">cout</span> &lt;&lt; currVal &lt;&lt; <span class="hljs-string">&quot; occurs &quot;</span> &lt;&lt; cnt &lt;&lt; <span class="hljs-string">&quot; times&quot;</span> &lt;&lt; <span class="hljs-built_in">std</span>::<span class="hljs-built_in">endl</span>;<br>&#125;<br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="4-2-ä¸‰ç›®è¿ç®—ç¬¦"><a href="#4-2-ä¸‰ç›®è¿ç®—ç¬¦" class="headerlink" title="4.2 ä¸‰ç›®è¿ç®—ç¬¦"></a>4.2 ä¸‰ç›®è¿ç®—ç¬¦</h2><ol><li>åšç®€å•çš„åˆ¤æ–­ï¼›</li><li><code>a &gt; b ? a : b ;</code>a æ¯” b å¤§åˆ™ä¸º aï¼Œå¦åˆ™ä¸º bï¼›</li></ol><h2 id="4-3-switch"><a href="#4-3-switch" class="headerlink" title="4.3 switch"></a>4.3 switch</h2><ol><li>switch é€‰æ‹©ç»“æ„ï¼›</li><li>switch åªèƒ½åˆ¤æ–­æ•´å‹æˆ–è€…å­—ç¬¦å‹ï¼Œä¸èƒ½æ˜¯åŒºé—´ï¼›</li><li>switch æ•ˆç‡è¾ƒé«˜ï¼›</li></ol><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;iostream&gt;</span></span><br>using namespace <span class="hljs-built_in">std</span>;<br><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> &#123;<br><span class="hljs-type">int</span> score = <span class="hljs-number">0</span>;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;è¯·è¾“å…¥åˆ†æ•°&quot;</span> &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-built_in">cin</span> &gt;&gt; score;<br><span class="hljs-keyword">switch</span> (score) &#123;<br><span class="hljs-keyword">case</span> <span class="hljs-number">10</span>:<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;ç»å…¸&quot;</span> &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-keyword">break</span>;<br><span class="hljs-keyword">case</span> <span class="hljs-number">9</span>:<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;è¿˜è¡Œ&quot;</span> &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-keyword">break</span>;<br><span class="hljs-keyword">default</span>:<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;ä¸è¡Œ&quot;</span>&lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-keyword">break</span>;<br>&#125;<br><br>system(<span class="hljs-string">&quot;pause&quot;</span>);<br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="4-4-while"><a href="#4-4-while" class="headerlink" title="4.4 while"></a>4.4 while</h2><p><img src="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/GmU91p2bXekIsBN.jpg#crop=0&crop=0&crop=1&crop=1&id=ssv2m&originHeight=463&originWidth=414&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title="></p><ol><li><code>while(å¾ªç¯æ¡ä»¶)&#123;å¾ªç¯ç»“æ„&#125;</code></li></ol><p><strong>while è¯­å¥</strong></p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> &#123;<br><span class="hljs-type">int</span> sum = <span class="hljs-number">0</span>, val = <span class="hljs-number">1</span>;<br><span class="hljs-keyword">while</span> (val &lt;=<span class="hljs-number">10</span>)<br>&#123;<br>sum += val;<br>++val;<br>&#125;<br><span class="hljs-built_in">std</span>::<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;Sum of 1 to 10 inclusive is &quot;</span><br>&lt;&lt; sum &lt;&lt; <span class="hljs-built_in">std</span>::<span class="hljs-built_in">endl</span>;<br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>è¾“å‡ºï¼šum of 1 to 10 inclusive is 55</p><p><strong>çŒœæ•°å­—</strong></p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;iostream&gt;</span></span><br>using namespace <span class="hljs-built_in">std</span>;<br><br><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> &#123;<br><span class="hljs-type">int</span> num = <span class="hljs-number">0</span>;<br><span class="hljs-type">int</span> numRam = rand() % <span class="hljs-number">100</span> + <span class="hljs-number">1</span>;<span class="hljs-comment">// ç”Ÿæˆ1-100çš„éšæœºæ•°</span><br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;è¯·è¾“å…¥æ•°å­—&quot;</span> &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-built_in">cin</span> &gt;&gt; num;<br><span class="hljs-keyword">while</span> (num != numRam) &#123;<br><span class="hljs-keyword">if</span> (num &gt; numRam) &#123;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;å¤§äº†&quot;</span> &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-built_in">cin</span> &gt;&gt; num;<br>&#125;<br><span class="hljs-keyword">else</span> &#123;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;å°äº†&quot;</span> &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-built_in">cin</span> &gt;&gt; num;<br>&#125;<br>&#125;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;çŒœå¯¹äº†&quot;</span> &lt;&lt; <span class="hljs-built_in">endl</span>;<br>system(<span class="hljs-string">&quot;pause&quot;</span>);<br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="4-5-doâ€¦while"><a href="#4-5-doâ€¦while" class="headerlink" title="4.5 doâ€¦while"></a>4.5 doâ€¦while</h2><ol><li><code>do&#123; å¾ªç¯è¯­å¥ &#125; while &#123; å¾ªç¯æ¡ä»¶ &#125;;</code></li><li>ä¼šå…ˆæ‰§è¡Œä¸€æ¬¡ï¼›</li></ol><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;iostream&gt;</span></span><br>using namespace <span class="hljs-built_in">std</span>;<br><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> &#123;<br><span class="hljs-type">int</span> num = <span class="hljs-number">100</span>;<br><span class="hljs-keyword">do</span> &#123;<br><span class="hljs-type">int</span> a = <span class="hljs-number">0</span>;<br><span class="hljs-type">int</span> b = <span class="hljs-number">0</span>;<br><span class="hljs-type">int</span> c = <span class="hljs-number">0</span>;<br>a = num / <span class="hljs-number">100</span>;<br>b = num / <span class="hljs-number">10</span> % <span class="hljs-number">10</span>;<br>c = num % <span class="hljs-number">10</span>;<br><span class="hljs-keyword">if</span> (a*a*a + b*b*b + c*c*c == num) &#123;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;æ˜¯æ°´ä»™èŠ±æ•°&quot;</span> &lt;&lt; num &lt;&lt; <span class="hljs-built_in">endl</span>;<br>&#125;<br>num++;<br>&#125; <span class="hljs-keyword">while</span> (num &gt;= <span class="hljs-number">100</span> &amp;&amp; num &lt; <span class="hljs-number">1000</span>);<br>system(<span class="hljs-string">&quot;pause&quot;</span>);<br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="4-6-for-å¾ªç¯"><a href="#4-6-for-å¾ªç¯" class="headerlink" title="4.6 for å¾ªç¯"></a>4.6 for å¾ªç¯</h2><ol><li><code>for( èµ·å§‹è¡¨è¾¾å¼ï¼› æ¡ä»¶è¡¨è¾¾å¼ï¼›å¾ªç¯è¯­å¥ )&#123; å¾ªç¯è¯­å¥ &#125;</code></li><li>å¯ä»¥ç”¨æ¥è¯»å–ä¸€ç»„æ•°æ®ï¼›</li></ol><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;iostream&gt;</span></span><br>using namespace <span class="hljs-built_in">std</span>;<br><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> &#123;<br><span class="hljs-type">int</span> a = <span class="hljs-number">0</span>;<br><span class="hljs-type">int</span> b = <span class="hljs-number">0</span>;<br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> num = <span class="hljs-number">1</span>; num &lt; <span class="hljs-number">100</span>; num++) &#123;<br>a = num / <span class="hljs-number">10</span>;<br>b = num % <span class="hljs-number">10</span>;<br><span class="hljs-keyword">if</span> (a == <span class="hljs-number">7</span> || b == <span class="hljs-number">7</span> || num % <span class="hljs-number">7</span> == <span class="hljs-number">0</span>) &#123;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;æ•²æ¡Œå­&quot;</span> &lt;&lt; num &lt;&lt; <span class="hljs-built_in">endl</span>;<br>&#125;<br>&#125;<br>system(<span class="hljs-string">&quot;pause&quot;</span>);<br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>è¯»å–è¾“å…¥ä¸å®šçš„è¾“å…¥æ•°æ®</strong></p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> &#123;<br><span class="hljs-type">int</span> sum = <span class="hljs-number">0</span>, value = <span class="hljs-number">0</span>;<br><span class="hljs-keyword">while</span> (<span class="hljs-built_in">std</span>::<span class="hljs-built_in">cin</span> &gt;&gt; value)<br>&#123;<br>sum += value;<br>&#125;<br><span class="hljs-built_in">std</span>::<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;Sum is: &quot;</span> &lt;&lt; sum &lt;&lt; <span class="hljs-built_in">std</span>::<span class="hljs-built_in">endl</span>;<br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>è¾“å…¥ï¼š1 2 3 4 5 6 8 da<br>è¾“å‡ºï¼šSum is: 29</p><blockquote><p>æˆ–è€… ctrl+zï¼Œå†æŒ‰ Enterï¼Œè¡¨ç¤ºè¾“å…¥ç»“æŸ</p></blockquote><p>è¾“å…¥ï¼š1 2 3 4^z<br>è¾“å‡ºï¼šSum is: 10</p><p><strong>ä¹˜æ³•å£è¯€</strong></p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;iostream&gt;</span></span><br>using namespace <span class="hljs-built_in">std</span>;<br><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> &#123;<br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt; <span class="hljs-number">10</span>; i++) &#123;<br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">1</span>; j &lt;= i; j++) &#123;<br><span class="hljs-built_in">cout</span> &lt;&lt; j &lt;&lt;<span class="hljs-string">&quot;*&quot;</span>&lt;&lt;i &lt;&lt;<span class="hljs-string">&quot;=&quot;</span> &lt;&lt;i*j&lt;&lt;<span class="hljs-string">&quot;\t&quot;</span>;<br>&#125;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-built_in">endl</span>;<br>&#125;<br>system(<span class="hljs-string">&quot;pause&quot;</span>);<br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="4-7-break-å’Œ-continue"><a href="#4-7-break-å’Œ-continue" class="headerlink" title="4.7 break å’Œ continue"></a>4.7 break å’Œ continue</h2><ol><li>break è·³å‡ºå¾ªç¯ä½“ï¼›</li><li>continueï¼Œæ‰§è¡Œåˆ°æœ¬è¡Œä¸å¾€ä¸‹æ‰§è¡Œï¼Œä½†æ˜¯å¾ªç¯ä¼šç»§ç»­ï¼Œåªæ˜¯è·³å‡ºæœ¬æ¬¡æ‰§è¡Œå—ï¼›</li></ol><h2 id="4-8-goto"><a href="#4-8-goto" class="headerlink" title="4.8 goto"></a>4.8 goto</h2><ol><li>éœ€è¦ä¸€ä¸ªè¡¨ç¤ºç¬¦ï¼Œæ ‡è¯†ç¬¦å‘½åè§„èŒƒåŒå˜é‡ï¼›</li><li>æ ‡è¯†ç¬¦ä¸€èˆ¬å¤§å†™ï¼›</li></ol><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-keyword">goto</span> FLAG;<br><br>FLAG:<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;è·³è½¬æ‰§è¡Œåˆ°è¿™&quot;</span> &lt;&lt; <span class="hljs-built_in">endl</span>;<br></code></pre></td></tr></table></figure><h1 id="5ã€æ•°ç»„"><a href="#5ã€æ•°ç»„" class="headerlink" title="5ã€æ•°ç»„"></a>5ã€æ•°ç»„</h1><ol><li>å­˜æ”¾ç›¸åŒç±»å‹çš„æ•°æ®ï¼›</li><li>ç´¢å¼•ä» 0 å¼€å§‹ï¼›</li></ol><h2 id="5-1-ä¸€ç»´æ•°ç»„"><a href="#5-1-ä¸€ç»´æ•°ç»„" class="headerlink" title="5.1 ä¸€ç»´æ•°ç»„"></a>5.1 ä¸€ç»´æ•°ç»„</h2><ol><li>å®šä¹‰</li></ol><ul><li><code>æ•°æ®ç±»å‹ æ•°ç»„å[ æ•°ç»„é•¿åº¦ ];</code></li><li><code>æ•°æ®ç±»å‹ æ•°ç»„å[ æ•°ç»„é•¿åº¦ ] = &#123; å€¼1 ï¼Œå€¼2 ï¼Œå€¼3...&#125;;</code></li><li><code>æ•°ç»„ç±»å‹ æ•°ç»„å[] = &#123;å€¼1 ï¼Œå€¼2ï¼Œå€¼3...&#125;;</code></li></ul><ol start="2"><li>è·å–æ•°ç»„ä¸­çš„æ•°æ®<code>arr[i]</code>ï¼›</li><li>æ•°ç»„å å±…å†…å­˜å¤§å°<code>sizeof(arr)</code>ï¼›</li><li>å…ƒç´ ä¸ªæ•°<code>sizeof(arr)/sizeof(arr[0])</code>ï¼›</li><li>ç›´æ¥æ‰“å° arrï¼Œè¾“å‡ºä¸ºé¦–åœ°å€ï¼›å…ƒç´ åœ°å€ä¸º<code>&amp;arr[0]</code>ï¼›</li></ol><h1 id="6ã€å¼•ç”¨"><a href="#6ã€å¼•ç”¨" class="headerlink" title="6ã€å¼•ç”¨"></a>6ã€å¼•ç”¨</h1><h2 id="6-1-åŸºæœ¬ä»‹ç»"><a href="#6-1-åŸºæœ¬ä»‹ç»" class="headerlink" title="6.1 åŸºæœ¬ä»‹ç»"></a>6.1 åŸºæœ¬ä»‹ç»</h2><ol><li>å¼•ç”¨æ˜¯å˜é‡çš„åˆ«åï¼›</li><li>æœ¬è´¨å°±æ˜¯ä¸€ä¸ªæŒ‡é’ˆå¸¸é‡ï¼›</li><li>åº”ç”¨å¿…é¡»åˆå§‹åŒ–ï¼Œåˆå§‹åŒ–åä¸èƒ½æ”¹å˜ï¼›</li><li>å¯ä»¥ä½¿ç”¨å¼•ç”¨è¿›è¡Œåœ°å€ä¼ é€’ï¼›</li></ol><p><strong>åŸºæœ¬ä½¿ç”¨</strong></p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;iostream&gt;</span></span><br>using namespace <span class="hljs-built_in">std</span>;<br><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> &#123;<br><span class="hljs-type">int</span> a = <span class="hljs-number">10</span>;<br><span class="hljs-type">int</span>&amp; b = a;<br>b = <span class="hljs-number">20</span>;<br><span class="hljs-built_in">cout</span> &lt;&lt; a &lt;&lt; <span class="hljs-built_in">endl</span> &lt;&lt; b &lt;&lt; <span class="hljs-built_in">endl</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="6-2-3-ç§äº¤æ¢å‡½æ•°"><a href="#6-2-3-ç§äº¤æ¢å‡½æ•°" class="headerlink" title="6.2 3 ç§äº¤æ¢å‡½æ•°"></a>6.2 3 ç§äº¤æ¢å‡½æ•°</h2><ol><li>åœ°å€ä¼ é€’ï¼›</li><li>å¼•ç”¨çš„å¥½å¤„å°±æ˜¯ä¸éœ€è¦è§£å¼•ç”¨ï¼Œåœ¨ä½œä¸ºå‡½æ•°å®å‚åï¼Œéœ€è¦ç”¨åˆ°å€¼æ—¶ï¼Œç›´æ¥ä½¿ç”¨å¼•ç”¨åï¼Œè€ŒæŒ‡é’ˆéœ€è¦åŠ *ã€‚</li><li>æ¯æ¬¡ä½¿ç”¨å¼•ç”¨å®é™…ä¸Šæ˜¯è§£å¼•ç”¨çš„æ“ä½œã€‚</li></ol><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;iostream&gt;</span></span><br>using namespace <span class="hljs-built_in">std</span>;<br><br><span class="hljs-comment">// å€¼ä¼ é€’</span><br><span class="hljs-type">void</span> <span class="hljs-title function_">f1</span><span class="hljs-params">(<span class="hljs-type">int</span> a, <span class="hljs-type">int</span> b)</span> &#123;<br><span class="hljs-type">int</span> temp = a;<br>a = b;<br>b = temp;<br>&#125;<br><br><span class="hljs-comment">// åœ°å€ä¼ é€’</span><br><span class="hljs-type">void</span> <span class="hljs-title function_">f2</span><span class="hljs-params">(<span class="hljs-type">int</span> *a ,<span class="hljs-type">int</span>*b)</span> &#123;<br><span class="hljs-type">int</span> temp = *a;<br>*a = *b;<br>*b = temp;<br>&#125;<br><br><span class="hljs-comment">// å¼•ç”¨ä¼ é€’</span><br><span class="hljs-type">void</span> <span class="hljs-title function_">f3</span><span class="hljs-params">(<span class="hljs-type">int</span> &amp;a, <span class="hljs-type">int</span> &amp;b)</span> &#123;<br><span class="hljs-type">int</span> temp = a;<br>a = b;<br>b = temp;<br>&#125;<br><br><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span>&#123;<br><span class="hljs-type">int</span> a = <span class="hljs-number">10</span>;<br><span class="hljs-type">int</span> b = <span class="hljs-number">20</span>;<br><span class="hljs-comment">//f1(a, b);</span><br><span class="hljs-comment">//f2(&amp;a, &amp;b);</span><br>f3(a, b);<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;a = &quot;</span> &lt;&lt; a&lt;&lt;<span class="hljs-built_in">endl</span>;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;b = &quot;</span> &lt;&lt; b;<br><br>&#125;<br></code></pre></td></tr></table></figure><h2 id="6-3-å¼•ç”¨å‡½æ•°å‡½æ•°è¿”å›å€¼"><a href="#6-3-å¼•ç”¨å‡½æ•°å‡½æ•°è¿”å›å€¼" class="headerlink" title="6.3 å¼•ç”¨å‡½æ•°å‡½æ•°è¿”å›å€¼"></a>6.3 å¼•ç”¨å‡½æ•°å‡½æ•°è¿”å›å€¼</h2><ol><li>ä¸è¦è¿”å›å±€éƒ¨å˜é‡çš„å¼•ç”¨ï¼ˆè¾ƒè€çš„ç‰ˆæœ¬ä¸­ï¼‰ï¼›</li><li>å‡½æ•°çš„è°ƒç”¨å¯ä»¥ä½œä¸ºå·¦å€¼ï¼›</li></ol><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">int</span>&amp; <span class="hljs-title function_">test02</span><span class="hljs-params">()</span> &#123;<br><span class="hljs-type">static</span> <span class="hljs-type">int</span> a = <span class="hljs-number">20</span>;<br><span class="hljs-keyword">return</span> a; <span class="hljs-comment">//è¿”å›å¼•ç”¨åœ°å€</span><br>&#125;<br><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> &#123;<br><span class="hljs-type">int</span>&amp; res = test02();<br><span class="hljs-built_in">cout</span> &lt;&lt; res &lt;&lt; <span class="hljs-built_in">endl</span>;<br>test02() = <span class="hljs-number">1000</span>;<br><span class="hljs-built_in">cout</span> &lt;&lt; res &lt;&lt; <span class="hljs-built_in">endl</span>;<br><br>&#125;<br></code></pre></td></tr></table></figure><p>è¾“å‡ºä¸º</p><p>20</p><p>1000</p><h2 id="6-4-å¸¸é‡å¼•ç”¨"><a href="#6-4-å¸¸é‡å¼•ç”¨" class="headerlink" title="6.4 å¸¸é‡å¼•ç”¨"></a>6.4 å¸¸é‡å¼•ç”¨</h2><ol><li>ä½¿ç”¨åœºæ™¯ï¼šç”¨æ¥ä¿®é¥°å½¢å‚ï¼Œé˜²æ­¢è¯¯æ“ä½œï¼›</li></ol><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;iostream&gt;</span></span><br>using namespace <span class="hljs-built_in">std</span>;<br><br><span class="hljs-type">void</span> <span class="hljs-title function_">f1</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-type">int</span> &amp;a)</span> &#123;<br><span class="hljs-comment">// ä¸èƒ½å†ä¿®æ”¹</span><br><span class="hljs-comment">// a = 20;</span><br><span class="hljs-built_in">cout</span> &lt;&lt; a &lt;&lt; <span class="hljs-built_in">endl</span>;<br>&#125;<br><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> &#123;<br><span class="hljs-comment">// ç¼–è¯‘å™¨ä¼šä¿®æ”¹ä¸º int temp= 10ï¼›const int &amp;a = temp;åªä¸è¿‡è¿™ä¸ªä¸´æ—¶å˜é‡æˆ‘ä»¬ä¸çŸ¥é“</span><br><span class="hljs-type">const</span> <span class="hljs-type">int</span>&amp; a = <span class="hljs-number">10</span>;<br><span class="hljs-comment">// ä¿®æ”¹aä¼šæŠ¥é”™,aå·²ä¸ºåªè¯»</span><br><span class="hljs-comment">// a = 20;</span><br><span class="hljs-type">int</span> b = <span class="hljs-number">10</span>;<br>f1(b);<br>&#125;<br></code></pre></td></tr></table></figure><h1 id="7ã€ç»“æ„ä½“"><a href="#7ã€ç»“æ„ä½“" class="headerlink" title="7ã€ç»“æ„ä½“"></a>7ã€ç»“æ„ä½“</h1><h2 id="7-1-ç»“æ„ä½“æ¦‚å¿µ"><a href="#7-1-ç»“æ„ä½“æ¦‚å¿µ" class="headerlink" title="7.1 ç»“æ„ä½“æ¦‚å¿µ"></a>7.1 ç»“æ„ä½“æ¦‚å¿µ</h2><ol><li>ç”¨æˆ·è‡ªå®šä¹‰æ•°æ®ç±»å‹ï¼›</li></ol><h2 id="7-2-ç»“æ„ä½“ä½¿ç”¨"><a href="#7-2-ç»“æ„ä½“ä½¿ç”¨" class="headerlink" title="7.2 ç»“æ„ä½“ä½¿ç”¨"></a>7.2 ç»“æ„ä½“ä½¿ç”¨</h2><ol><li><code>struct ç»“æ„ä½“åç§° &#123; ç»“æ„ä½“æˆå‘˜åˆ—è¡¨ &#125;</code></li><li>å®ä¾‹åŒ–çš„ä¸‰ç§æ–¹æ³•</li></ol><ul><li>struct ç»“æ„ä½“å å˜é‡å</li><li>struct ç»“æ„ä½“å å˜é‡å &#x3D; {æˆå‘˜ 1 å€¼ï¼Œæˆå‘˜ 2 å€¼â€¦}</li><li>å®šä¹‰ç»“æ„ä½“æ—¶é¡ºä¾¿åˆ›å»º</li></ul><p><strong>åˆ›å»ºç»“æ„ä½“</strong></p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Student</span> &#123;</span><br><span class="hljs-built_in">string</span> name;<br><span class="hljs-type">int</span> age;<br><span class="hljs-type">int</span> score;<br>&#125;s3;<br></code></pre></td></tr></table></figure><p><strong>å®ä¾‹åŒ–</strong></p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-comment">//1. struct ç»“æ„ä½“å å˜é‡å</span><br><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Student</span> <span class="hljs-title">s1</span>;</span><br>s1.name = <span class="hljs-string">&quot;å¼ ä¸‰&quot;</span>;<br>s1.age = <span class="hljs-number">18</span>;<br>s1.score = <span class="hljs-number">78.5</span>;<br><span class="hljs-built_in">cout</span> &lt;&lt; s1.name &lt;&lt; <span class="hljs-string">&quot;\t&quot;</span> &lt;&lt; s1.age &lt;&lt; <span class="hljs-string">&quot;\t&quot;</span> &lt;&lt; s1.score &lt;&lt; <span class="hljs-built_in">endl</span>;<br><br><span class="hljs-comment">//2. struct ç»“æ„ä½“å å˜é‡å = &#123;&#125;</span><br><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Student</span> <span class="hljs-title">s2</span> =</span> &#123; <span class="hljs-string">&quot;æå››&quot;</span>,<span class="hljs-number">20</span>,<span class="hljs-number">80.0</span> &#125;;<br><span class="hljs-built_in">cout</span> &lt;&lt; s2.name &lt;&lt; <span class="hljs-string">&quot;\t&quot;</span> &lt;&lt; s2.age &lt;&lt; <span class="hljs-string">&quot;\t&quot;</span> &lt;&lt; s2.score &lt;&lt; <span class="hljs-built_in">endl</span>;<br><br><br><span class="hljs-comment">//3. åˆ›å»ºç»“æ„ä½“æ—¶åˆ›å»ºå˜é‡s3</span><br>s3.name = <span class="hljs-string">&quot;ç‹äº”&quot;</span>;<br>s3.age = <span class="hljs-number">23</span>;<br>s3.score = <span class="hljs-number">90.0</span>;<br><span class="hljs-built_in">cout</span> &lt;&lt; s3.name &lt;&lt; <span class="hljs-string">&quot;\t&quot;</span> &lt;&lt; s3.age &lt;&lt; <span class="hljs-string">&quot;\t&quot;</span> &lt;&lt; s3.score &lt;&lt; <span class="hljs-built_in">endl</span>;<br></code></pre></td></tr></table></figure><h2 id="7-3-ç»“æ„ä½“æ•°ç»„"><a href="#7-3-ç»“æ„ä½“æ•°ç»„" class="headerlink" title="7.3 ç»“æ„ä½“æ•°ç»„"></a>7.3 ç»“æ„ä½“æ•°ç»„</h2><ol><li><code>struct Student stuArray[2] = &#123;&#123;"å¼ ä¸‰",18,60&#125;,&#123;"æå››",20,80&#125;&#125;;</code></li><li>ç´¢å¼•ä»ç¬¬ 0 ä¸ªå¼€å§‹</li></ol><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;iostream&gt;</span></span><br>using namespace <span class="hljs-built_in">std</span>;<br><br><span class="hljs-comment">//1. å®šä¹‰ç»“æ„ä½“</span><br><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Student</span> &#123;</span><br><span class="hljs-built_in">string</span> name;<br><span class="hljs-type">int</span> age;<br><span class="hljs-type">double</span> score;<br>&#125;;<br><br><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span><br>&#123;<br><span class="hljs-comment">//2. åˆ›å»ºç»“æ„ä½“æ•°ç»„</span><br><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Student</span> <span class="hljs-title">stuArray</span>[3] =</span> &#123;<br>&#123;<span class="hljs-string">&quot;å¼ ä¸‰&quot;</span>,<span class="hljs-number">18</span>,<span class="hljs-number">20</span>&#125;,<br>&#123;<span class="hljs-string">&quot;æå››&quot;</span>,<span class="hljs-number">18</span>,<span class="hljs-number">20</span>&#125;,<br>&#123;<span class="hljs-string">&quot;ç‹äº”&quot;</span>,<span class="hljs-number">18</span>,<span class="hljs-number">20</span>&#125;,<br>&#125;;<br><br><span class="hljs-comment">//3. èµ‹å€¼</span><br>stuArray[<span class="hljs-number">2</span>].name = <span class="hljs-string">&quot;èµµå…­&quot;</span>;<br>stuArray[<span class="hljs-number">2</span>].age = <span class="hljs-number">20</span>;<br>stuArray[<span class="hljs-number">2</span>].score = <span class="hljs-number">30</span>;<br><br><span class="hljs-comment">//4. éå†</span><br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">3</span>; i++) &#123;<br><span class="hljs-built_in">cout</span> &lt;&lt; stuArray[i].name &lt;&lt; <span class="hljs-string">&quot;\t&quot;</span> &lt;&lt; stuArray[i].age &lt;&lt; <span class="hljs-string">&quot;\t&quot;</span> &lt;&lt; stuArray[i].score &lt;&lt; <span class="hljs-built_in">endl</span>;<br>&#125;<br><br><br>&#125;<br></code></pre></td></tr></table></figure><p><img src="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/dXKQRcAVmEWfrhx.png#crop=0&crop=0&crop=1&crop=1&id=mjoK4&originHeight=767&originWidth=1470&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title="></p><h2 id="7-4-ç»“æ„ä½“æŒ‡é’ˆ"><a href="#7-4-ç»“æ„ä½“æŒ‡é’ˆ" class="headerlink" title="7.4 ç»“æ„ä½“æŒ‡é’ˆ"></a>7.4 ç»“æ„ä½“æŒ‡é’ˆ</h2><ol><li>æŒ‡å‘ç»“æ„ä½“<code>struct Student* p = &amp;s;</code>,å…¶ä¸­<code>struct</code>å¯ä»¥çœç•¥ï¼›</li><li>è®¿é—®ç»“æ„ä½“æŒ‡é’ˆè®¿é—®<code>p-&gt;name</code>;</li></ol><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;iostream&gt;</span></span><br>using namespace <span class="hljs-built_in">std</span>;<br><br><span class="hljs-comment">//1.å®šä¹‰ç»“æ„ä½“</span><br><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Student</span> &#123;</span><br><span class="hljs-built_in">string</span> name;<br><span class="hljs-type">int</span> age;<br><span class="hljs-type">double</span> score;<br>&#125;;<br><br><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> &#123;<br><span class="hljs-comment">//2.åˆ›å»ºç»“æ„ä½“å˜é‡</span><br><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Student</span> <span class="hljs-title">s</span> =</span> &#123;<span class="hljs-string">&quot;å¼ ä¸‰&quot;</span>,<span class="hljs-number">18</span>,<span class="hljs-number">80</span>&#125;;<br><br><span class="hljs-comment">//3.é€šè¿‡æŒ‡é’ˆæŒ‡å‘ç»“æ„ä½“å˜é‡</span><br><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Student</span>* <span class="hljs-title">p</span> =</span> &amp;s;<br><br><span class="hljs-comment">//4.é€šè¿‡æŒ‡é’ˆè®¿é—®ç»“æ„ä½“å˜é‡</span><br><span class="hljs-built_in">cout</span> &lt;&lt; p-&gt;name &lt;&lt;<span class="hljs-string">&quot;\t&quot;</span> &lt;&lt; p-&gt;age&lt;&lt;<span class="hljs-string">&quot;\t&quot;</span> &lt;&lt; p-&gt;score &lt;&lt; <span class="hljs-built_in">endl</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="7-5-ç»“æ„ä½“åµŒå¥—ç»“æ„ä½“"><a href="#7-5-ç»“æ„ä½“åµŒå¥—ç»“æ„ä½“" class="headerlink" title="7.5 ç»“æ„ä½“åµŒå¥—ç»“æ„ä½“"></a>7.5 ç»“æ„ä½“åµŒå¥—ç»“æ„ä½“</h2><ol><li>ç»“æ„ä½“ 1 ä½œä¸ºç»“æ„ä½“ 2 çš„æˆå‘˜å˜é‡ï¼›</li><li>ç»“æ„ä½“ 1 åº”è¯¥å®šä¹‰åœ¨ç»“æ„ä½“ 2 å‰é¢ï¼›</li><li>ç»“æ„ä½“é‡Œç»“æ„ä½“èµ‹å€¼<code>t.stu.score = 80;</code>æˆ–è€…<code>t.stu = &#123; &quot;å¼ ä¸‰&quot;,20,100 &#125;;</code></li></ol><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;iostream&gt;</span></span><br>using namespace <span class="hljs-built_in">std</span>;<br><br><span class="hljs-comment">// å®šä¹‰å­¦ç”Ÿçš„ç»“æ„ä½“</span><br><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Student</span> &#123;</span><br><span class="hljs-built_in">string</span> name;<br><span class="hljs-type">int</span> age;<br><span class="hljs-type">double</span> score;<br>&#125;;<br><br><span class="hljs-comment">// å®šä¹‰è€å¸ˆçš„ç»“æ„ä½“</span><br><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Teacher</span> &#123;</span><br><span class="hljs-type">int</span> id;<br><span class="hljs-built_in">string</span> name;<br><span class="hljs-type">int</span> age;<br><span class="hljs-comment">//å°†å¦ä¸€ä¸ªç»“æ„ä½“ä½œä¸ºæœ¬ç»“æ„ä½“çš„æˆå‘˜</span><br><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Student</span> <span class="hljs-title">stu</span>;</span><br>&#125;;<br><br><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> &#123;<br>Teacher t;<br>t.id = <span class="hljs-number">01</span>;<br>t.name = <span class="hljs-string">&quot;è€å¸ˆ1&quot;</span>;<br>t.age = <span class="hljs-number">45</span>;<br>t.stu.name = <span class="hljs-string">&quot;å­¦ç”Ÿ1&quot;</span>;<br>t.stu.age = <span class="hljs-number">18</span>;<br>t.stu.score = <span class="hljs-number">80</span>;<br><span class="hljs-comment">//æˆ–è€…</span><br>t.stu = &#123; <span class="hljs-string">&quot;å¼ ä¸‰&quot;</span>,<span class="hljs-number">20</span>,<span class="hljs-number">100</span> &#125;;<br><br><span class="hljs-built_in">cout</span> &lt;&lt; t.stu.name &lt;&lt; <span class="hljs-built_in">endl</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="7-6-ç»“æ„ä½“åšå‡½æ•°å‚æ•°"><a href="#7-6-ç»“æ„ä½“åšå‡½æ•°å‚æ•°" class="headerlink" title="7.6 ç»“æ„ä½“åšå‡½æ•°å‚æ•°"></a>7.6 ç»“æ„ä½“åšå‡½æ•°å‚æ•°</h2><ol><li>å°†ç»“æ„ä½“ä½œä¸ºå‚æ•°ä¼ é€’åˆ°å‡½æ•°é‡Œï¼›</li><li>å€¼ä¼ é€’,ä¸ä¼šä¿®æ”¹åŸå¯¹è±¡å€¼ï¼›</li><li>åœ°å€ä¼ é€’ï¼Œä¼šæ”¹å˜åŸå¯¹è±¡å€¼ï¼›</li></ol><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;iostream&gt;</span></span><br>using namespace <span class="hljs-built_in">std</span>;<br><br><span class="hljs-comment">// å®šä¹‰å­¦ç”Ÿçš„ç»“æ„ä½“</span><br><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Student</span> &#123;</span><br><span class="hljs-built_in">string</span> name;<br><span class="hljs-type">int</span> age;<br><span class="hljs-type">double</span> score;<br>&#125;;<br><br><span class="hljs-comment">// å€¼ä¼ é€’,ä¸ä¼šä¿®æ”¹åŸå¯¹è±¡å€¼</span><br><span class="hljs-type">void</span> <span class="hljs-title function_">printStudent</span><span class="hljs-params">(<span class="hljs-keyword">struct</span> Student s)</span> &#123;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;1.æ‰“å°ä¿¡æ¯ï¼š&quot;</span> &lt;&lt; s.name &lt;&lt; <span class="hljs-string">&quot;\t&quot;</span> &lt;&lt; s.age &lt;&lt; <span class="hljs-string">&quot;\t&quot;</span> &lt;&lt; s.score &lt;&lt; <span class="hljs-built_in">endl</span>;<br>&#125;;<br><span class="hljs-comment">// åœ°å€ä¼ é€’ï¼Œä¼šæ”¹å˜åŸå¯¹è±¡å€¼</span><br><span class="hljs-type">void</span> <span class="hljs-title function_">printStudent</span><span class="hljs-params">(<span class="hljs-keyword">struct</span> Student *p)</span> &#123;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;2.æ‰“å°ä¿¡æ¯ï¼š&quot;</span> &lt;&lt; p-&gt;name &lt;&lt; <span class="hljs-string">&quot;\t&quot;</span> &lt;&lt; p-&gt;age &lt;&lt; <span class="hljs-string">&quot;\t&quot;</span> &lt;&lt; p-&gt;score &lt;&lt; <span class="hljs-built_in">endl</span>;<br>&#125;;<br><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> &#123;<br><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Student</span> <span class="hljs-title">s</span> =</span> &#123;<span class="hljs-string">&quot;å¼ ä¸‰&quot;</span>,<span class="hljs-number">18</span>,<span class="hljs-number">90</span>&#125;;<br>printStudent(s);<br>printStudent(&amp;s);<br><br>&#125;<br></code></pre></td></tr></table></figure><h2 id="7-7-ç»“æ„ä½“-const"><a href="#7-7-ç»“æ„ä½“-const" class="headerlink" title="7.7 ç»“æ„ä½“ const"></a>7.7 ç»“æ„ä½“ const</h2><p>åœ¨æŸäº›æ—¶å€™æˆ‘ä»¬éœ€è¦å°†ç»“æ„ä½“å˜é‡ä¼ å…¥åˆ°ä¸€ä¸ªå‡½æ•°å†…ï¼Œå¦‚æœä½¿ç”¨å€¼ä¼ é€’å°±ä¼šå ç”¨å¤§é‡çš„å†…å­˜ç©ºé—´ï¼Œå› ä¸ºæ¯è°ƒç”¨ä¸€æ¬¡å‡½æ•°ï¼Œè®¡ç®—æœºå°±ä¼šèµ‹å€¼å‡ºä¸€ä¸ªæ–°çš„ç»“æ„ä½“å˜é‡ï¼Œå¤§å°å’ŒåŸå˜é‡ç›¸åŒï¼Œæ‰€ä»¥åº”é‡‡ç”¨åœ°å€ä¼ é€’æ¥èŠ‚çœç©ºé—´ï¼Œå› ä¸ºæŒ‡é’ˆåªå ç”¨ 4 ä¸ªå­—èŠ‚ã€‚ä½†æ˜¯ä½¿ç”¨åœ°å€ä¼ é€’ä¼šå¸¦æ¥ä¸€ä¸ªéšæ‚£ï¼Œå³å¯ä»¥åœ¨å‡½æ•°ä½“å†…ä¿®æ”¹åŸç»“æ„ä½“å˜é‡çš„å€¼ï¼Œè¿™å¯¹æ•°æ®æ¥è¯´æ˜¯ä¸å®‰å…¨çš„ï¼Œæˆ‘ä»¬éœ€è¦ç”¨ const è¿›è¡Œä¿®é¥°ï¼Œä½¿ç»“æ„ä½“å˜é‡ä¸å¯æ›´æ”¹ã€‚</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;iostream&gt;</span></span><br>using namespace <span class="hljs-built_in">std</span>;<br><br><span class="hljs-comment">// å®šä¹‰å­¦ç”Ÿçš„ç»“æ„ä½“</span><br><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Student</span> &#123;</span><br><span class="hljs-built_in">string</span> name;<br><span class="hljs-type">int</span> age;<br><span class="hljs-type">double</span> score;<br>&#125;;<br><br><span class="hljs-comment">// åŠ ä¸Šconstä¿®é¥°ï¼Œå°±å¯ä»¥é¿å…åœ¨åœ°å€ä¼ é€’æ—¶ï¼Œå‡½æ•°ä½“å†…ä¿®æ”¹åŸå˜é‡çš„å±æ€§</span><br><span class="hljs-type">void</span> <span class="hljs-title function_">printStu</span><span class="hljs-params">(<span class="hljs-type">const</span> Student* p)</span> &#123;<br><br><span class="hljs-comment">//p-&gt;age = 20;//é”™è¯¯ï¼Œä¸èƒ½ä¿®æ”¹</span><br><span class="hljs-built_in">cout</span> &lt;&lt; p-&gt;name &lt;&lt; <span class="hljs-string">&quot;\t&quot;</span> &lt;&lt; p-&gt;age &lt;&lt; <span class="hljs-string">&quot;\t&quot;</span> &lt;&lt; p-&gt;score &lt;&lt; <span class="hljs-built_in">endl</span>;<br><br>&#125;<br><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> &#123;<br><span class="hljs-comment">//åˆ›å»ºç»“æ„ä½“å˜é‡</span><br>Student s = &#123; <span class="hljs-string">&quot;å¼ ä¸‰&quot;</span>,<span class="hljs-number">18</span>,<span class="hljs-number">90</span> &#125;;<br>printStu(&amp;s);<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="7-8-ç»“æ„ä½“æ¡ˆä¾‹-1"><a href="#7-8-ç»“æ„ä½“æ¡ˆä¾‹-1" class="headerlink" title="7.8 ç»“æ„ä½“æ¡ˆä¾‹ 1"></a>7.8 ç»“æ„ä½“æ¡ˆä¾‹ 1</h2><ol><li>æ³¨æ„å­—ç¬¦ä¸²å­—é¢é‡å’Œå­—ç¬¦ç›¸åŠ ï¼Œä½¿ç”¨+&#x3D;æ¯”è¾ƒå¥½ï¼›</li><li>éšæœºæ•°ç§å­ï¼›</li><li>åˆ¤æ–­æ•°æ®ç±»å‹<code>typeid(i).name();</code></li></ol><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;iostream&gt;</span></span><br>using namespace <span class="hljs-built_in">std</span>;<br><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;string&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;ctime&gt;</span></span><br><br><span class="hljs-comment">// å®šä¹‰å­¦ç”Ÿçš„ç»“æ„ä½“</span><br><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Student</span> &#123;</span><br><span class="hljs-built_in">string</span> name;<br><span class="hljs-type">int</span> score;<br>&#125;;<br><br><br><span class="hljs-comment">// è€å¸ˆçš„ç»“æ„ä½“</span><br><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Teacher</span> &#123;</span><br><span class="hljs-built_in">string</span> name;<br>Student stuArray[<span class="hljs-number">5</span>];<br>&#125;;<br><br><br><span class="hljs-comment">// ç»™è€å¸ˆå’Œå­¦ç”Ÿèµ‹å€¼å‡½æ•°</span><br><span class="hljs-type">void</span> <span class="hljs-title function_">allocateSpace</span><span class="hljs-params">(<span class="hljs-keyword">struct</span> Teacher teaArray[], <span class="hljs-type">int</span> len)</span> &#123;<br><span class="hljs-built_in">string</span> nameSpace = <span class="hljs-string">&quot;ABCDE&quot;</span>;<br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; len; i++) &#123;<br><span class="hljs-built_in">string</span> tname = <span class="hljs-string">&quot;Teacher_&quot;</span> ;<br>tname += nameSpace[i];<br>teaArray[i].name =  tname;<br><span class="hljs-comment">// å­¦ç”Ÿèµ‹å€¼</span><br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j= <span class="hljs-number">0</span>; j &lt; <span class="hljs-number">5</span>; j++) &#123;<br><span class="hljs-built_in">string</span> sname = <span class="hljs-string">&quot;Student_&quot;</span> ;<br>sname += +nameSpace[j];<br><span class="hljs-type">int</span> sscore = rand() % <span class="hljs-number">61</span> + <span class="hljs-number">40</span>;<span class="hljs-comment">//40~100</span><br>teaArray[i].stuArray[j].name = sname;<br>teaArray[i].stuArray[j].score = sscore;<br>&#125;<br>&#125;<br>&#125;<br><br><span class="hljs-type">void</span> <span class="hljs-title function_">printFor</span><span class="hljs-params">(<span class="hljs-keyword">struct</span> Teacher teaArray[], <span class="hljs-type">int</span> len)</span> &#123;<br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; len; i++) &#123;<br><span class="hljs-built_in">cout</span> &lt;&lt; teaArray[i].name &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">0</span>; j &lt; <span class="hljs-number">5</span>; j++) &#123;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;\t&quot;</span> &lt;&lt; teaArray[i].stuArray[j].name &lt;&lt; <span class="hljs-string">&quot;\t&quot;</span> &lt;&lt; teaArray[i].stuArray[j].score &lt;&lt; <span class="hljs-built_in">endl</span>;<br>&#125;<br>&#125;<br>&#125;<br><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> &#123;<br><br><span class="hljs-comment">// éšæœºæ•°ç§å­</span><br>srand((<span class="hljs-type">unsigned</span> <span class="hljs-type">int</span>)time(<span class="hljs-literal">NULL</span>));<br><br><span class="hljs-comment">// åˆ›å»º3åè€å¸ˆ</span><br><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Teacher</span> <span class="hljs-title">teaArray</span>[3];</span><br><br><span class="hljs-comment">// ç»™è€å¸ˆçš„å­¦ç”Ÿèµ‹å€¼</span><br><span class="hljs-type">int</span> len = <span class="hljs-keyword">sizeof</span>(teaArray) / <span class="hljs-keyword">sizeof</span>(teaArray[<span class="hljs-number">0</span>]);<br>allocateSpace(teaArray, len); <span class="hljs-comment">//æ•°ç»„æœ¬èº«å°±æ˜¯åœ°å€ä¼ é€’</span><br>printFor(teaArray, len);<br><br>&#125;<br></code></pre></td></tr></table></figure><h2 id="7-9-ç»“æ„ä½“æ¡ˆä¾‹-2"><a href="#7-9-ç»“æ„ä½“æ¡ˆä¾‹-2" class="headerlink" title="7.9 ç»“æ„ä½“æ¡ˆä¾‹ 2"></a>7.9 ç»“æ„ä½“æ¡ˆä¾‹ 2</h2><ol><li>å†’æ³¡æ’åºï¼›</li><li>ä¸´æ—¶å˜é‡ tempï¼Œç±»å‹ä¸º heroï¼›</li></ol><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;string&gt;</span></span><br>using namespace <span class="hljs-built_in">std</span>;<br><br><span class="hljs-comment">// è®¾è®¡ç»“æ„ä½“</span><br><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">hero</span> &#123;</span><br><span class="hljs-built_in">string</span> name;<br><span class="hljs-type">int</span> age;<br><span class="hljs-built_in">string</span> sex;<br>&#125;;<br><br><span class="hljs-comment">// å†’æ³¡æ’åºå‡½æ•°</span><br><span class="hljs-type">void</span> <span class="hljs-title function_">rink</span><span class="hljs-params">(<span class="hljs-keyword">struct</span> hero heroArray[],<span class="hljs-type">int</span> len)</span> &#123;<br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; len<span class="hljs-number">-1</span>; i++) &#123;<br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">0</span>; j &lt; len - i - <span class="hljs-number">1</span>; j++) &#123;<br><span class="hljs-keyword">if</span> (heroArray[j].age &gt; heroArray[j+<span class="hljs-number">1</span>].age) &#123;<br><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">hero</span> <span class="hljs-title">temp</span> =</span> heroArray[j];<br>heroArray[j] = heroArray[j+<span class="hljs-number">1</span>];<br>heroArray[j+<span class="hljs-number">1</span>] = temp;<br>&#125;<br>&#125;<br>&#125;<br>&#125;<br><br><span class="hljs-comment">// æ‰“å°è¾“å‡º</span><br><span class="hljs-type">void</span> <span class="hljs-title function_">printHero</span><span class="hljs-params">(<span class="hljs-keyword">struct</span> hero heroArray[], <span class="hljs-type">int</span> len)</span> &#123;<br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; len; i++) &#123;<br><span class="hljs-built_in">cout</span> &lt;&lt; heroArray[i].name &lt;&lt; <span class="hljs-string">&quot;\t&quot;</span> &lt;&lt; heroArray[i].age &lt;&lt; <span class="hljs-string">&quot;\t&quot;</span> &lt;&lt; heroArray[i].sex &lt;&lt; <span class="hljs-built_in">endl</span>;<br>&#125;<br><br>&#125;<br><br><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> &#123;<br><br><span class="hljs-comment">// åˆ›å»ºè‹±é›„</span><br><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">hero</span> <span class="hljs-title">heroArray</span>[5] =</span> &#123;<br>&#123;<span class="hljs-string">&quot;åˆ˜å¤‡&quot;</span>,<span class="hljs-number">23</span>,<span class="hljs-string">&quot;ç”·&quot;</span>&#125;,<br>&#123;<span class="hljs-string">&quot;å…³ç¾½&quot;</span>,<span class="hljs-number">22</span>,<span class="hljs-string">&quot;ç”·&quot;</span>&#125;,<br>&#123;<span class="hljs-string">&quot;å¼ é£&quot;</span>,<span class="hljs-number">20</span>,<span class="hljs-string">&quot;ç”·&quot;</span>&#125;,<br>&#123;<span class="hljs-string">&quot;èµµäº‘&quot;</span>,<span class="hljs-number">21</span>,<span class="hljs-string">&quot;ç”·&quot;</span>&#125;,<br>&#123;<span class="hljs-string">&quot;è²‚è‰&quot;</span>,<span class="hljs-number">19</span>,<span class="hljs-string">&quot;ç”·&quot;</span>&#125;,<br>&#125;;<br><br><span class="hljs-comment">// æ•°ç»„æ’åº</span><br><span class="hljs-type">int</span> len = <span class="hljs-keyword">sizeof</span>(heroArray) / <span class="hljs-keyword">sizeof</span>(heroArray[<span class="hljs-number">0</span>]);<br>rink(heroArray, len);<br><br><span class="hljs-comment">// æ‰“å°è¾“å‡º</span><br>printHero(heroArray, len);<br><br>system(<span class="hljs-string">&quot;pause&quot;</span>);<br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="7-10-ç®€å•é“¾è¡¨"><a href="#7-10-ç®€å•é“¾è¡¨" class="headerlink" title="7.10 ç®€å•é“¾è¡¨"></a>7.10 ç®€å•é“¾è¡¨</h2><p>é“¾è¡¨ï¼šéœ€è¦çš„æ—¶å€™å°±åˆ†é…ä¸€å—ç©ºé—´ï¼Œå†…å­˜æ˜¯åŠ¨æ€å˜åŒ–çš„ã€‚è€Œæ•°ç»„é•¿åº¦æ˜¯å›ºå®šä¸å˜çš„ã€‚</p><p><strong style="color:#00b050;">å®ç°</strong></p><ol><li>å®šä¹‰ä¸€ä¸ªè¶…å¥³ç»“æ„ä½“ï¼Œå«æœ‰ç¼–å·ã€å§“åã€ä¸‹ä¸€ä¸ªè¶…å¥³çš„æŒ‡é’ˆï¼›</li></ol><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-keyword">struct</span> <span class="hljs-title class_">SuperGril</span><br>&#123;<span class="hljs-comment">// å®šä¹‰ç¼–å·ã€å§“åå’Œä¸‹ä¸€ä¸ªè¶…å¥³çš„æŒ‡é’ˆ</span><br><span class="hljs-type">int</span> no;<br>string name;<br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">SuperGril</span>* next;<br>&#125;;<br></code></pre></td></tr></table></figure><ol start="2"><li><p>åˆå§‹åŒ–å¤´å·è¶…å¥³ headerã€å°¾éƒ¨è¶…å¥³ tail ã€ä¸´æ—¶è¶…å¥³ temp;<code>SuperGril* header = nullptr, * tail = nullptr, * temp = nullptr;</code></p></li><li><p>ä½¿ç”¨ä¸´æ—¶èŠ‚ç‚¹åˆ›å»ºè¶…å¥³ï¼Œå¹¶ç»™ header å’Œ tail èµ‹å€¼</p></li></ol><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">// åˆ†é…ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ï¼Œå¹¶èµ‹å€¼</span><br>temp = <span class="hljs-keyword">new</span> <span class="hljs-built_in">SuperGril</span>(&#123; <span class="hljs-number">1</span>,<span class="hljs-string">&quot;è¥¿æ–½&quot;</span>,<span class="hljs-literal">nullptr</span> &#125;);<br>header = tail = temp;<br><br>temp = <span class="hljs-keyword">new</span> <span class="hljs-built_in">SuperGril</span>(&#123; <span class="hljs-number">2</span>,<span class="hljs-string">&quot;å†°å†°&quot;</span>,<span class="hljs-literal">nullptr</span> &#125;);<br>tail-&gt;next = temp; <span class="hljs-comment">// ä¸Šä¸€ä¸ªèŠ‚ç‚¹çš„nextæŒ‡å‘æ–°èŠ‚ç‚¹</span><br>tail = temp; <span class="hljs-comment">// å°¾éƒ¨ä¸ºæ–°èŠ‚ç‚¹</span><br><br>temp = <span class="hljs-keyword">new</span> <span class="hljs-built_in">SuperGril</span>(&#123; <span class="hljs-number">3</span>,<span class="hljs-string">&quot;ä¸½è‹±&quot;</span>,<span class="hljs-literal">nullptr</span> &#125;);<br>tail-&gt;next = temp; <span class="hljs-comment">// ä¸Šä¸€ä¸ªèŠ‚ç‚¹çš„nextæŒ‡å‘æ–°èŠ‚ç‚¹</span><br>tail = temp; <span class="hljs-comment">// å°¾éƒ¨ä¸ºæ–°èŠ‚ç‚¹</span><br></code></pre></td></tr></table></figure><ol start="4"><li>éå†é“¾è¡¨</li></ol><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">// éå†é“¾è¡¨</span><br>temp = header;<br><span class="hljs-keyword">while</span> (temp!=<span class="hljs-literal">nullptr</span>)<br>&#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;ç¼–å·&quot;</span> &lt;&lt; temp-&gt;no &lt;&lt; <span class="hljs-string">&quot;\tå§“å&quot;</span> &lt;&lt;temp-&gt;name &lt;&lt; <span class="hljs-string">&quot;\tä¸‹ä¸€ä¸ªèŠ‚ç‚¹&quot;</span> &lt;&lt; temp-&gt;next &lt;&lt; endl;<br>temp = temp-&gt;next; <span class="hljs-comment">// å‘åæŸ¥æ‰¾</span><br>&#125;<br></code></pre></td></tr></table></figure><ol start="5"><li>é‡Šæ”¾é“¾è¡¨å†…å­˜</li></ol><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">// é‡Šæ”¾é“¾è¡¨å†…å­˜</span><br><span class="hljs-keyword">while</span> (header!=<span class="hljs-literal">nullptr</span>)<br>&#123;<br>temp = header;<br>header = header-&gt;next;<br><span class="hljs-keyword">delete</span> temp;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong style="color:#00b050;">å…¨éƒ¨ä»£ç </strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;string&gt;</span></span><br><span class="hljs-keyword">using</span> std::cout;<br><span class="hljs-keyword">using</span> std::string; <span class="hljs-keyword">using</span> std::endl;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">SuperGril</span><br>&#123;<span class="hljs-comment">// å®šä¹‰ç¼–å·ã€å§“åå’Œä¸‹ä¸€ä¸ªè¶…å¥³çš„æŒ‡é’ˆ</span><br><span class="hljs-type">int</span> no;<br>string name;<br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">SuperGril</span>* next;<br>&#125;;<br><br>SuperGril* header = <span class="hljs-literal">nullptr</span>, * tail = <span class="hljs-literal">nullptr</span>, * temp = <span class="hljs-literal">nullptr</span>;<br><br><span class="hljs-comment">// åˆ†é…ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ï¼Œå¹¶èµ‹å€¼</span><br>temp = <span class="hljs-keyword">new</span> <span class="hljs-built_in">SuperGril</span>(&#123; <span class="hljs-number">1</span>,<span class="hljs-string">&quot;è¥¿æ–½&quot;</span>,<span class="hljs-literal">nullptr</span> &#125;);<br>header = tail = temp;<br><br>temp = <span class="hljs-keyword">new</span> <span class="hljs-built_in">SuperGril</span>(&#123; <span class="hljs-number">2</span>,<span class="hljs-string">&quot;å†°å†°&quot;</span>,<span class="hljs-literal">nullptr</span> &#125;);<br>tail-&gt;next = temp; <span class="hljs-comment">// ä¸Šä¸€ä¸ªèŠ‚ç‚¹çš„nextæŒ‡å‘æ–°èŠ‚ç‚¹</span><br>tail = temp; <span class="hljs-comment">// å°¾éƒ¨ä¸ºæ–°èŠ‚ç‚¹</span><br><br>temp = <span class="hljs-keyword">new</span> <span class="hljs-built_in">SuperGril</span>(&#123; <span class="hljs-number">3</span>,<span class="hljs-string">&quot;ä¸½è‹±&quot;</span>,<span class="hljs-literal">nullptr</span> &#125;);<br>tail-&gt;next = temp; <span class="hljs-comment">// ä¸Šä¸€ä¸ªèŠ‚ç‚¹çš„nextæŒ‡å‘æ–°èŠ‚ç‚¹</span><br>tail = temp; <span class="hljs-comment">// å°¾éƒ¨ä¸ºæ–°èŠ‚ç‚¹</span><br><br><span class="hljs-comment">// ä¼ ç»Ÿèµ‹å€¼</span><br><span class="hljs-comment">//temp-&gt;no = 1;</span><br><span class="hljs-comment">//temp-&gt;name = &quot;è¥¿æ–½&quot;;</span><br><span class="hljs-comment">//temp-&gt;next = nullptr;</span><br><br><span class="hljs-comment">// c++11æ¨è</span><br><span class="hljs-comment">//*(temp) = &#123; 1,&quot;è¥¿æ–½&quot;,nullptr &#125;;</span><br><br><span class="hljs-comment">// éå†é“¾è¡¨</span><br>temp = header;<br><span class="hljs-keyword">while</span> (temp!=<span class="hljs-literal">nullptr</span>)<br>&#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;ç¼–å·&quot;</span> &lt;&lt; temp-&gt;no &lt;&lt; <span class="hljs-string">&quot;\tå§“å&quot;</span> &lt;&lt;temp-&gt;name &lt;&lt; <span class="hljs-string">&quot;\tä¸‹ä¸€ä¸ªèŠ‚ç‚¹&quot;</span> &lt;&lt; temp-&gt;next &lt;&lt; endl;<br>temp = temp-&gt;next; <span class="hljs-comment">// å‘åæŸ¥æ‰¾</span><br>&#125;<br><br><span class="hljs-comment">// é‡Šæ”¾é“¾è¡¨å†…å­˜</span><br><span class="hljs-keyword">while</span> (header!=<span class="hljs-literal">nullptr</span>)<br>&#123;<br>temp = header;<br>header = header-&gt;next;<br><span class="hljs-keyword">delete</span> temp;<br>&#125;<br><br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;é‡Šæ”¾å®Œæ¯•\n&quot;</span>);<br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h1 id="8ã€å…±åŒä½“"><a href="#8ã€å…±åŒä½“" class="headerlink" title="8ã€å…±åŒä½“"></a>8ã€å…±åŒä½“</h1><ol><li>å…±åŒä½“å ç”¨çš„å†…å­˜å¤§å°æ˜¯æˆå‘˜å ç”¨å†…å­˜æœ€å¤§çš„å¤§å°ï¼›ï¼ˆå†…å­˜å¯¹é½ï¼‰</li><li>å…¨éƒ¨æˆå‘˜ä½¿ç”¨ä¸€å—å†…å­˜ï¼›</li></ol><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-keyword">using</span> std::string; <span class="hljs-keyword">using</span> std::cout; <span class="hljs-keyword">using</span> std::endl;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-keyword">union</span> <span class="hljs-title class_">MyUnion</span><br>&#123;<br><span class="hljs-type">int</span> a;<br><span class="hljs-type">double</span> b;<br><span class="hljs-type">char</span> c[<span class="hljs-number">21</span>];<br>&#125;;<br>MyUnion data;<br><br><span class="hljs-comment">// å ç”¨å¤§å°</span><br>cout &lt;&lt; <span class="hljs-string">&quot;å†…å­˜å ç”¨å¤§å°=&quot;</span> &lt;&lt; <span class="hljs-built_in">sizeof</span>(data) &lt;&lt; endl; <span class="hljs-comment">//24</span><br><br>cout &lt;&lt; <span class="hljs-string">&quot;å†…å­˜åœ°å€data.a=&quot;</span> &lt;&lt; (<span class="hljs-type">void</span>*) &amp;data.a &lt;&lt; endl;<br>cout &lt;&lt; <span class="hljs-string">&quot;å†…å­˜åœ°å€data.b=&quot;</span> &lt;&lt; (<span class="hljs-type">void</span>*) &amp;data.b &lt;&lt; endl;<br>cout &lt;&lt; <span class="hljs-string">&quot;å†…å­˜åœ°å€data.c=&quot;</span> &lt;&lt; (<span class="hljs-type">void</span>*) &amp;data.c &lt;&lt; endl;<br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p><img src="http://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/image-20221023115211935.png" alt="image-20221023115211935"></p><h1 id="9ã€æšä¸¾"><a href="#9ã€æšä¸¾" class="headerlink" title="9ã€æšä¸¾"></a>9ã€æšä¸¾</h1><p><strong><u>åˆ›å»ºå¸¸é‡çš„ä¸€ç§æ–¹å¼</u></strong></p><p><strong style="color:#00b050;">åˆ›å»ºå¸¸é‡çš„æ–¹æ³•ï¼š</strong></p><ol><li>å®å¸¸é‡ï¼Œç”¨é¢„å¤„ç†æŒ‡ä»¤#define åˆ›å»º</li><li>ç”¨ const å…³é”®å­—åˆ›å»ºï¼›</li><li>æšä¸¾</li></ol><p><strong style="color:#00b050;">æ³¨æ„äº‹é¡¹ï¼š</strong></p><ol><li>æšä¸¾åˆ›å»ºçš„å˜é‡å–å€¼åªèƒ½åœ¨æšä¸¾èŒƒå›´ä¹‹å†…ï¼›</li><li>æšä¸¾çš„ä½œç”¨åŸŸä¸å˜é‡çš„ä½œç”¨åŸŸç›¸åŒï¼›</li><li>å¯ä»¥è®¾ç½®æšä¸¾é‡çš„å€¼</li><li>æ•´å‹å¼ºåˆ¶è½¬ä¸ºæšä¸¾é‡ï¼š<code>Colors cc = Colors(1);</code></li></ol><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-keyword">using</span> std::string; <span class="hljs-keyword">using</span> std::cout; <span class="hljs-keyword">using</span> std::endl;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-keyword">enum</span> <span class="hljs-title class_">Colors</span><br>&#123;<br>red=<span class="hljs-number">0</span>,yellow,blue,other<br>&#125;;<br><br><span class="hljs-comment">// åˆ›å»ºä¸€ä¸ªæšä¸¾å˜é‡ï¼Œåªèƒ½ä¸ºColorsä¸­çš„ä¸€ä¸ª</span><br>Colors color = red;<br><br><span class="hljs-keyword">switch</span> (color) <span class="hljs-comment">// coloræ˜¯æ•´æ•°ï¼Œå¯ä»¥ç”¨æ¥switch</span><br>&#123;<br><span class="hljs-keyword">case</span> red: <span class="hljs-comment">// redæ˜¯æ•´å‹å¸¸é‡ï¼Œå¯ç”¨æ¥case</span><br>cout &lt;&lt; <span class="hljs-string">&quot;çº¢è‰²&quot;</span> &lt;&lt; endl;<br><span class="hljs-keyword">break</span>;<br><span class="hljs-keyword">case</span> yellow:<br>cout &lt;&lt; <span class="hljs-string">&quot;é»„è‰²&quot;</span> &lt;&lt; endl;<br><span class="hljs-keyword">break</span>;<br><span class="hljs-keyword">case</span> blue:<br>cout &lt;&lt; <span class="hljs-string">&quot;è“è‰²&quot;</span> &lt;&lt; endl;<br><span class="hljs-keyword">break</span>;<br><span class="hljs-keyword">case</span> other:<br>cout &lt;&lt; <span class="hljs-string">&quot;çº¢è‰²&quot;</span> &lt;&lt; endl;<br><span class="hljs-keyword">break</span>;<br><span class="hljs-keyword">default</span>:<br>cout &lt;&lt; <span class="hljs-string">&quot;æœªçŸ¥&quot;</span> &lt;&lt; endl;<br><span class="hljs-keyword">break</span>;<br>&#125;<br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h1 id="10ã€æŒ‡é’ˆ"><a href="#10ã€æŒ‡é’ˆ" class="headerlink" title="10ã€æŒ‡é’ˆ"></a>10ã€æŒ‡é’ˆ</h1><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">double</span> dval;<br><span class="hljs-type">double</span>* pd = &amp;dval;<br><span class="hljs-type">double</span>* pd2 = pd;<br>*pd2 = <span class="hljs-number">2.0</span>;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;dvalæ˜¯&quot;</span>&lt;&lt;dval &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;dvalçš„åœ°å€æ˜¯&quot;</span>&lt;&lt;&amp;dval &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;*pdæ˜¯&quot;</span>&lt;&lt;*pd &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;pdçš„åœ°å€æ˜¯&quot;</span>&lt;&lt;&amp;pd &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;pdæœ¬èº«æ˜¯&quot;</span>&lt;&lt;pd &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;pd2æ˜¯&quot;</span>&lt;&lt;*pd2 &lt;&lt; <span class="hljs-built_in">endl</span>;<br></code></pre></td></tr></table></figure><p>dval æ˜¯ 2<br>dval çš„åœ°å€æ˜¯ 0000004D63EFF808<br>pd æ˜¯ 2<br>pd çš„åœ°å€æ˜¯ 0000004D63EFF828<br>pd æœ¬èº«æ˜¯ 0000004D63EFF808<br>pd2 æ˜¯ 2</p><h1 id="11ã€å‡½æ•°"><a href="#11ã€å‡½æ•°" class="headerlink" title="11ã€å‡½æ•°"></a>11ã€å‡½æ•°</h1><h2 id="11-1-å‡½æ•°é»˜è®¤å€¼"><a href="#11-1-å‡½æ•°é»˜è®¤å€¼" class="headerlink" title="11.1 å‡½æ•°é»˜è®¤å€¼"></a>11.1 å‡½æ•°é»˜è®¤å€¼</h2><ol><li>å¦‚æœä¸€ä¸ªå½¢å‚ä½ç½®å·²ç»æœ‰é»˜è®¤å€¼ï¼Œåˆ™åé¢çš„å½¢å‚éƒ½å¾—æœ‰é»˜è®¤å€¼ï¼›</li><li>å¦‚æœå‡½æ•°å£°æ˜ä¸­å½¢å‚å·²ç»æœ‰é»˜è®¤å€¼ï¼Œåœ¨å‡½æ•°å®šä¹‰æ—¶å°±ä¸èƒ½ç»™é»˜è®¤å€¼ï¼Œå¦åˆ™ä¼šæŠ¥é”™ï¼›</li></ol><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;iostream&gt;</span></span><br>using namespace <span class="hljs-built_in">std</span>;<br><span class="hljs-type">int</span> <span class="hljs-title function_">f1</span><span class="hljs-params">(<span class="hljs-type">int</span> a, <span class="hljs-type">int</span> b = <span class="hljs-number">20</span>, <span class="hljs-type">int</span> c = <span class="hljs-number">30</span>)</span><br>&#123;<br><span class="hljs-keyword">return</span> a + b + c;<br>&#125;<br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> &#123;<br>f1(<span class="hljs-number">10</span>); <span class="hljs-comment">//å¯ä»¥åªä¼ é€’ä¸€ä¸ªï¼Œå› ä¸ºåœ¨å‡½æ•°ä¸­bã€cå·²ç»ç»™è¿‡å€¼</span><br>f1(<span class="hljs-number">10</span>,<span class="hljs-number">60</span>); <span class="hljs-comment">//å¦‚æœç»™bä¼ äº†å€¼ï¼Œåˆ™ç”¨ä¼ å…¥çš„</span><br>&#125;<br></code></pre></td></tr></table></figure><p><strong>å£°æ˜å’Œå®šä¹‰</strong></p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;iostream&gt;</span></span><br>using namespace <span class="hljs-built_in">std</span>;<br><span class="hljs-type">int</span> <span class="hljs-title function_">f2</span><span class="hljs-params">(<span class="hljs-type">int</span> a = <span class="hljs-number">10</span>, <span class="hljs-type">int</span> b = <span class="hljs-number">10</span>)</span>;<br><span class="hljs-type">int</span> <span class="hljs-title function_">f2</span><span class="hljs-params">(<span class="hljs-type">int</span> a = <span class="hljs-number">10</span>,<span class="hljs-type">int</span> b = <span class="hljs-number">10</span>)</span><br>&#123;<br>&#125;<br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> &#123;<br>f2();<br>&#125;<br></code></pre></td></tr></table></figure><p>æŠ¥é”™ï¼šf2 é‡å®šä¹‰é»˜è®¤å‚æ•°</p><h2 id="11-2-å‡½æ•°å ä½å‚æ•°"><a href="#11-2-å‡½æ•°å ä½å‚æ•°" class="headerlink" title="11.2 å‡½æ•°å ä½å‚æ•°"></a>11.2 å‡½æ•°å ä½å‚æ•°</h2><ol><li>c++å‡½æ•°å½¢å‚åˆ—è¡¨å¯ä»¥æœ‰ç«™ä½å‚æ•°ï¼Œä½†è°ƒç”¨å‡½æ•°æ—¶å¿…é¡»è¡¥é½è¯¥ä½ç½®ï¼›</li><li>è¯­æ³•ï¼š<code>æ•°æ®ç±»å‹int å‡½æ•°åf(æ•°æ®ç±»å‹int)</code>ï¼›</li><li>å ä½å‚æ•°ä¹Ÿå¯ä»¥æœ‰é»˜è®¤å‚æ•°ï¼›</li></ol><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">void</span> <span class="hljs-title function_">f</span><span class="hljs-params">(<span class="hljs-type">int</span>)</span><br>&#123;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;ä½ å¥½&quot;</span> &lt;&lt; <span class="hljs-built_in">endl</span>;<br>&#125;<br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span><br>&#123;<br>f(<span class="hljs-number">10</span>);<br>&#125;<br></code></pre></td></tr></table></figure><p>é»˜è®¤å‚æ•°</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">void</span> <span class="hljs-title function_">f</span><span class="hljs-params">(<span class="hljs-type">int</span> = <span class="hljs-number">10</span>)</span><br>&#123;<br>  <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;ä½ å¥½&quot;</span> &lt;&lt; <span class="hljs-built_in">endl</span>;<br>&#125;<br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span><br>&#123;<br>f();<span class="hljs-comment">//è¿™é‡Œå°±å¯ä»¥ä¸ç”¨ä¼ </span><br>&#125;<br></code></pre></td></tr></table></figure><h2 id="11-3-å‡½æ•°çš„é‡è½½"><a href="#11-3-å‡½æ•°çš„é‡è½½" class="headerlink" title="11.3 å‡½æ•°çš„é‡è½½"></a>11.3 å‡½æ•°çš„é‡è½½</h2><blockquote><ul><li>åŒä¸€ä¸ªä½œç”¨åŸŸå†…ï¼›</li><li>å‡½æ•°åç›¸åŒï¼›</li><li>å‡½æ•°å‚æ•°<strong>ç±»å‹ä¸åŒ</strong>æˆ–è€…<strong>ä¸ªæ•°ä¸åŒ</strong>æˆ–è€…<strong>é¡ºåºä¸åŒ</strong>ï¼›</li></ul></blockquote><ol><li>å‡½æ•°åå¯ä»¥ç›¸åŒï¼Œæé«˜å¤ç”¨æ€§ï¼›</li><li>è¿”å›å€¼ä¸å¯ä»¥ä½œä¸ºé‡è½½çš„æ¡ä»¶ï¼›<code>void f()å’Œint f()</code>ï¼›</li></ol><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;iostream&gt;</span></span><br>using namespace <span class="hljs-built_in">std</span>;<br><span class="hljs-type">void</span> <span class="hljs-title function_">f</span><span class="hljs-params">()</span><br>&#123;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;f()è°ƒç”¨äº†ï¼&quot;</span> &lt;&lt; <span class="hljs-built_in">endl</span>;<br>&#125;<br><span class="hljs-type">void</span> <span class="hljs-title function_">f</span><span class="hljs-params">(<span class="hljs-type">int</span> a)</span><br>&#123;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;f(int a)è°ƒç”¨äº†ï¼&quot;</span> &lt;&lt; <span class="hljs-built_in">endl</span>;<br>&#125;<br><span class="hljs-type">void</span> <span class="hljs-title function_">f</span><span class="hljs-params">(<span class="hljs-type">int</span> a,<span class="hljs-type">int</span> b)</span><br>&#123;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;f(int a,int b)è°ƒç”¨äº†ï¼&quot;</span> &lt;&lt; <span class="hljs-built_in">endl</span>;<br>&#125;<br><span class="hljs-type">void</span> <span class="hljs-title function_">f</span><span class="hljs-params">(<span class="hljs-type">double</span> b)</span><br>&#123;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;f(double b)è°ƒç”¨äº†ï¼&quot;</span> &lt;&lt; <span class="hljs-built_in">endl</span>;<br>&#125;<br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span><br>&#123;<br>f();<br>f(<span class="hljs-number">10</span>);<br>f(<span class="hljs-number">10.0</span>);<br>f(<span class="hljs-number">10</span>,<span class="hljs-number">20</span>);<br>&#125;<br></code></pre></td></tr></table></figure><p><img src="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/Snipaste_2022-03-27_21-09-09.png#crop=0&crop=0&crop=1&crop=1&id=h6clW&originHeight=1016&originWidth=2489&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title="></p><h2 id="11-4-å‡½æ•°é‡è½½æ³¨æ„äº‹é¡¹"><a href="#11-4-å‡½æ•°é‡è½½æ³¨æ„äº‹é¡¹" class="headerlink" title="11.4 å‡½æ•°é‡è½½æ³¨æ„äº‹é¡¹"></a>11.4 å‡½æ•°é‡è½½æ³¨æ„äº‹é¡¹</h2><ol><li>å¼•ç”¨ä½œä¸ºé‡è½½çš„æ¡ä»¶ï¼›</li></ol><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;iostream&gt;</span></span><br>using namespace <span class="hljs-built_in">std</span>;<br><span class="hljs-type">void</span> <span class="hljs-title function_">f</span><span class="hljs-params">(<span class="hljs-type">int</span> &amp;a)</span> &#123;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;f(int &amp;a)è°ƒç”¨äº†ï¼&quot;</span> &lt;&lt; <span class="hljs-built_in">endl</span>;<br>&#125;<br><span class="hljs-type">void</span> <span class="hljs-title function_">f</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-type">int</span> &amp;a)</span> &#123;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;f(const int &amp;a)è°ƒç”¨äº†ï¼&quot;</span> &lt;&lt; <span class="hljs-built_in">endl</span>;<br>&#125;<br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> &#123;<br><span class="hljs-type">int</span> a = <span class="hljs-number">10</span>;<br>f(a); <span class="hljs-comment">// f(int &amp;a)è°ƒç”¨äº†ï¼</span><br>f(<span class="hljs-number">10</span>);<span class="hljs-comment">// f(const int &amp;a)è°ƒç”¨äº†ï¼</span><br>&#125;<br></code></pre></td></tr></table></figure><p><strong>å‡½æ•°é‡è½½é‡è§é»˜è®¤å‚æ•°</strong></p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;iostream&gt;</span></span><br>using namespace <span class="hljs-built_in">std</span>;<br><span class="hljs-type">void</span> <span class="hljs-title function_">f</span><span class="hljs-params">(<span class="hljs-type">int</span> &amp;a,<span class="hljs-type">int</span> &amp;b = <span class="hljs-number">10</span>)</span> &#123;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;f(int &amp;a ,int &amp;b = 10)è°ƒç”¨äº†ï¼&quot;</span> &lt;&lt; <span class="hljs-built_in">endl</span>;<br>&#125;<br><span class="hljs-type">void</span> <span class="hljs-title function_">f</span><span class="hljs-params">(<span class="hljs-type">int</span> &amp;a)</span> &#123;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;f(const int &amp;a)è°ƒç”¨äº†ï¼&quot;</span> &lt;&lt; <span class="hljs-built_in">endl</span>;<br>&#125;<br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> &#123;<br><span class="hljs-type">int</span> a = <span class="hljs-number">10</span>;<br>f(a); <span class="hljs-comment">// é”™è¯¯</span><br>&#125;<br></code></pre></td></tr></table></figure><h2 id="11-5-å†…è”å‡½æ•°"><a href="#11-5-å†…è”å‡½æ•°" class="headerlink" title="11.5 å†…è”å‡½æ•°"></a>11.5 å†…è”å‡½æ•°</h2><p>å‡½æ•°å£°æ˜ä¹‹åå®šä¹‰ï¼Œåœ¨ä¸»å‡½æ•°ä¸­è¢«å¤šæ¬¡è°ƒç”¨ï¼ŒåŸå§‹å†™æ³•ï¼šè¿™æ ·çš„å†™æ³•ä¼šä½¿ç¨‹åºåœ¨å‡½æ•°ä¹‹é—´æ¥å›è·³è½¬ï¼Œæ¶ˆè€—ä¸€å®šçš„æ‰§è¡Œé€Ÿåº¦ä»£ä»·ã€‚ä½¿ç”¨å†…è”å‡½æ•°çš„æ–¹æ³•å¯ä»¥å°† show å‡½æ•°æ”¾åœ¨ main å‡½æ•°é‡Œï¼Œé¿å…æ¥å›è·³è½¬ï¼›ä½†ä¼šå ç”¨ä¸€å®šçš„å†…å­˜ï¼›ä½¿ç”¨è¾ƒå°çš„å‡½æ•°ä½“</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-keyword">using</span> std::cout; <span class="hljs-keyword">using</span> std::endl; <span class="hljs-keyword">using</span> std::string;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">show</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-type">short</span> num, <span class="hljs-type">const</span> string message)</span></span>;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-built_in">show</span>(<span class="hljs-number">1</span>, <span class="hljs-string">&quot;æˆ‘æ˜¯å•¥å•¥é¸Ÿ&quot;</span>);<br><span class="hljs-built_in">show</span>(<span class="hljs-number">2</span>, <span class="hljs-string">&quot;æˆ‘æ˜¯å•¥å•¥é¸Ÿ&quot;</span>);<br><span class="hljs-built_in">show</span>(<span class="hljs-number">3</span>, <span class="hljs-string">&quot;æˆ‘æ˜¯å•¥å•¥é¸Ÿ&quot;</span>);<br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">show</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-type">short</span> num, <span class="hljs-type">const</span> string message)</span></span><br><span class="hljs-function"></span>&#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;äº²çˆ±çš„&quot;</span> &lt;&lt; num &lt;&lt; <span class="hljs-string">&quot;å·ï¼Œ&quot;</span> &lt;&lt; message &lt;&lt; endl;<br>&#125;<br><br></code></pre></td></tr></table></figure><p>å†…è”å‡½æ•°ï¼šç›¸å½“äºæŠŠå‡½æ•°åµŒå…¥è¿›å»</p><ol><li>å†…è”å‡½æ•°ä¸èƒ½é€’å½’</li><li>å‡½æ•°ä½“å¤ªå¤§çš„å‡½æ•°ï¼Œç¼–è¯‘å™¨ä¸ä¼šå°†å…¶ä½œä¸ºå†…è”å‡½æ•°</li></ol><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-function"><span class="hljs-keyword">inline</span> <span class="hljs-type">void</span> <span class="hljs-title">show</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-type">short</span> num, <span class="hljs-type">const</span> string message)</span></span>;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-built_in">show</span>(<span class="hljs-number">1</span>, <span class="hljs-string">&quot;æˆ‘æ˜¯å•¥å•¥é¸Ÿ&quot;</span>);<br><span class="hljs-comment">//&#123;</span><br><span class="hljs-comment">//short num = 1;</span><br><span class="hljs-comment">//string message = &quot;æˆ‘æ˜¯å•¥å•¥é¸Ÿ&quot;;</span><br><span class="hljs-comment">//cout &lt;&lt; &quot;äº²çˆ±çš„&quot; &lt;&lt; num &lt;&lt; &quot;å·ï¼Œ&quot; &lt;&lt; message &lt;&lt; endl;</span><br><span class="hljs-comment">//&#125;</span><br><span class="hljs-built_in">show</span>(<span class="hljs-number">2</span>, <span class="hljs-string">&quot;æˆ‘æ˜¯å•¥å•¥é¸Ÿ&quot;</span>);<br><span class="hljs-comment">//&#123;</span><br><span class="hljs-comment">//short num = 1;</span><br><span class="hljs-comment">//string message = &quot;æˆ‘æ˜¯å•¥å•¥é¸Ÿ&quot;;</span><br><span class="hljs-comment">//cout &lt;&lt; &quot;äº²çˆ±çš„&quot; &lt;&lt; num &lt;&lt; &quot;å·ï¼Œ&quot; &lt;&lt; message &lt;&lt; endl;</span><br><span class="hljs-comment">//&#125;</span><br><span class="hljs-built_in">show</span>(<span class="hljs-number">3</span>, <span class="hljs-string">&quot;æˆ‘æ˜¯å•¥å•¥é¸Ÿ&quot;</span>);<br><span class="hljs-comment">//&#123;</span><br><span class="hljs-comment">//short num = 1;</span><br><span class="hljs-comment">//string message = &quot;æˆ‘æ˜¯å•¥å•¥é¸Ÿ&quot;;</span><br><span class="hljs-comment">//cout &lt;&lt; &quot;äº²çˆ±çš„&quot; &lt;&lt; num &lt;&lt; &quot;å·ï¼Œ&quot; &lt;&lt; message &lt;&lt; endl;</span><br><span class="hljs-comment">//&#125;</span><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><span class="hljs-function"><span class="hljs-keyword">inline</span> <span class="hljs-type">void</span> <span class="hljs-title">show</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-type">short</span> num, <span class="hljs-type">const</span> string message)</span></span><br><span class="hljs-function"></span>&#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;äº²çˆ±çš„&quot;</span> &lt;&lt; num &lt;&lt; <span class="hljs-string">&quot;å·ï¼Œ&quot;</span> &lt;&lt; message &lt;&lt; endl;<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>ç¼–ç¨‹</category>
      
      <category>C++</category>
      
    </categories>
    
    
    <tags>
      
      <tag>C++</tag>
      
    </tags>
    
  </entry>
  
  
  
  
</search>
