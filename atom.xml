<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>å¤§ç™½çš„ä¸ªäººåšå®¢</title>
  
  
  <link href="http://example.com/atom.xml" rel="self"/>
  
  <link href="http://example.com/"/>
  <updated>2025-02-08T11:39:14.900Z</updated>
  <id>http://example.com/</id>
  
  <author>
    <name>DB</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Rustå­¦ä¹ ç¬”è®°</title>
    <link href="http://example.com/2025/02/08/037%20Rust%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    <id>http://example.com/2025/02/08/037%20Rust%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/</id>
    <published>2025-02-08T07:43:00.000Z</published>
    <updated>2025-02-08T11:39:14.900Z</updated>
    
    <content type="html"><![CDATA[<div class="note note-success">            <p>æœ¬æ–‡æœ€æ–°æ›´æ–°äº 2025/02/08 æ™šä¸Š</p>          </div><h1 id="å®‰è£…ä¸é…ç½®">1ã€å®‰è£…ä¸é…ç½®</h1><h2 id="å®‰è£…">1.1 å®‰è£…</h2><p><ahref="https://www.rust-lang.org/zh-CN/learn/get-started">å®˜ç½‘ä¸‹è½½</a></p><figure><imgsrc="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/image-20241028185911269.png"alt="image-20241028185911269" /><figcaption aria-hidden="true">image-20241028185911269</figcaption></figure><p>åŒå‡»æ‰“å¼€ä¼šå¼¹å‡ºå‘½ä»¤è¡Œçª—å£ï¼Œç›´æ¥å›è½¦å³å¯ã€‚</p><p>æŸ¥çœ‹æ˜¯å¦å®‰è£…æˆåŠŸ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">rustup --version<br></code></pre></td></tr></table></figure><p>æŸ¥çœ‹rustç‰ˆæœ¬ç¯å¢ƒ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">rustup show<br></code></pre></td></tr></table></figure><p>å®‰è£…ç”Ÿäº§ç‰ˆæœ¬</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">rustup install nightly<br></code></pre></td></tr></table></figure><p>åˆ‡æ¢ç‰ˆæœ¬ç¯å¢ƒ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">rustup default nightly<br>or<br>rustup default stable<br></code></pre></td></tr></table></figure><h2 id="ç¼–è¯‘å‘½ä»¤">1.2 ç¼–è¯‘å‘½ä»¤</h2><p>æ–‡ä»¶ç¼–è¯‘</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">rustc è¢«ç¼–è¯‘æ–‡ä»¶å -o è¾“å‡ºæ–‡ä»¶å<br>rustc main.rs -o hello<br></code></pre></td></tr></table></figure><h1 id="åŒ…ç®¡ç†">2ã€åŒ…ç®¡ç†</h1><h2 id="åŒ…ç®¡ç†å·¥å…·cargo">2.1 åŒ…ç®¡ç†å·¥å…·<code>Cargo</code></h2><p><strong><u>åˆ›å»ºé¡¹ç›®</u></strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">cargo new project_name<br>cargo new --lib project_lib_name<br></code></pre></td></tr></table></figure><p><strong><u>æ„å»ºé¡¹ç›®</u></strong></p><p>ä¼šå‡ºç°ä¸€ä¸ªåä¸º<code>target</code>æ–‡ä»¶å¤¹</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">cargo build<br>cargo build --release  è¿™ä¸ªæ€§èƒ½è¾ƒå¥½<br></code></pre></td></tr></table></figure><figure><imgsrc="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/image-20241028191914203.png"alt="image-20241028191914203" /><figcaption aria-hidden="true">image-20241028191914203</figcaption></figure><p><strong><u>æ£€æµ‹</u></strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">cargo check<br></code></pre></td></tr></table></figure><p><strong><u>è¿è¡Œ/æµ‹è¯•</u></strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">cargo run<br>cargo <span class="hljs-built_in">test</span><br></code></pre></td></tr></table></figure><p><strong><u>é¡¹ç›®ç»“æ„</u></strong></p><figure><imgsrc="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/image-20241028190911111.png"alt="image-20241028190911111" /><figcaption aria-hidden="true">image-20241028190911111</figcaption></figure><h2 id="cargo.tomlæ–‡ä»¶">2.2 Cargo.tomlæ–‡ä»¶</h2><ul><li>package<ul><li>è®¾ç½®ç‰ˆæœ¬å</li><li>ç‰ˆæœ¬ç­‰</li></ul></li><li>dependencies<ul><li>è®¾ç½®ä¾èµ–</li><li>[build-dependencies]åˆ—å‡ºäº†åœ¨æ„å»ºé¡¹ç›®æ—¶éœ€è¦çš„ä¾èµ–é¡¹</li><li>[dev-dependencies]åˆ—å‡ºäº†åªåœ¨å¼€å‘æ—¶éœ€è¦çš„ä¾èµ–é¡¹</li></ul></li></ul><h2 id="åŠ è½½åº“">2.3 åŠ è½½åº“</h2><p>å¡«å†™ä¾èµ–é¡¹åä¿å­˜ä¼šè‡ªåŠ¨åŠ è½½ä¾èµ–é¡¹</p><figure><imgsrc="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/image-20241028192529489.png"alt="image-20241028192529489" /><figcaption aria-hidden="true">image-20241028192529489</figcaption></figure><p>æ¨èä½¿ç”¨<code>cargo-edit</code></p><p>å®‰è£…<code>cargo-edit</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">cargo install cargo-edit<br></code></pre></td></tr></table></figure><p>æ·»åŠ åº“</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">cargo add dependency_name<br></code></pre></td></tr></table></figure><p>å®‰è£…æŒ‡å®šç‰ˆæœ¬</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">cargo add dependency_name@1.2.3<br></code></pre></td></tr></table></figure><p>æ·»åŠ å¼€å‘æ—¶ç”¨çš„ä¾èµ–åº“</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">cargo add --dev dev_dependency_name<br></code></pre></td></tr></table></figure><p>æ·»åŠ æ„å»ºæ—¶ç”¨çš„ä¾èµ–åº“</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">cargo add --build build_dependency_name<br></code></pre></td></tr></table></figure><p>åˆ é™¤åº“</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">cargo <span class="hljs-built_in">rm</span> dependency_name<br></code></pre></td></tr></table></figure><h2 id="è®¾ç½®å›½å†…æº">2.4 è®¾ç½®å›½å†…æº</h2><p>æ¨èä½¿ç”¨<code>rsproxy</code></p><p>åœ¨<code>C:\Users\23984\.cargo\.config</code></p><p>ä½†æ˜¯æˆ‘æ²¡æœ‰æ‰¾åˆ°</p><h1 id="åŸºæœ¬ç±»å‹">3ã€åŸºæœ¬ç±»å‹</h1><h2 id="å˜é‡ä¸ä¸å¯å˜æ€§">3.1 å˜é‡ä¸ä¸å¯å˜æ€§</h2><ol type="1"><li>ä½¿ç”¨<code>let</code>å£°æ˜å˜é‡</li><li>åç½®ç±»å‹å®šä¹‰</li><li>å˜é‡ä½¿ç”¨è›‡å½¢å‘½åæ³•ï¼Œæšä¸¾å’Œç»“æ„ä½“å‘½åä½¿ç”¨å¸•æ–¯å¡å‘½åæ³•</li><li>å¼ºåˆ¶ç±»å‹è½¬æ¢<code>Casting a Value to a Different Type</code></li><li>ä½¿ç”¨<code>mut</code>å…³é”®è¯å°†å˜é‡ç½®ä¸ºå¯å˜</li><li></li></ol><figure><imgsrc="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/image-20241028194646626.png"alt="image-20241028194646626" /><figcaption aria-hidden="true">image-20241028194646626</figcaption></figure><figure><imgsrc="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/image-20241028194723176.png"alt="image-20241028194723176" /><figcaption aria-hidden="true">image-20241028194723176</figcaption></figure><h2 id="å¸¸é‡ä¸é™æ€å˜é‡">3.2 å¸¸é‡ä¸é™æ€å˜é‡</h2><p><strong><u>å¸¸é‡</u></strong></p><ol type="1"><li>å¸¸é‡çš„å€¼åœ¨ç¼–è¯‘æ—¶å·²çŸ¥ï¼Œå¿…é¡»æŒ‡å®šç±»å‹ä¸å€¼</li><li>ä¸Cä¸åŒï¼ŒRustçš„constå¸¸é‡å€¼è¢«ç›´æ¥åµŒå…¥åˆ°ç”Ÿæˆçš„åº•å±‚æœºå™¨ä»£ç ä¸­ï¼Œè€Œä¸æ˜¯ç®€å•å­—ç¬¦æ›¿æ¢</li><li>å¸¸é‡åä¸é™æ€å˜é‡åå¿…é¡»å…¨éƒ¨å¤§å†™ï¼Œå•è¯ä¹‹é—´åŠ ä¸‹åˆ’çº¿</li><li>å¸¸æ¥é‚£ä¸ªçš„ä½œç”¨åŸŸæ˜¯å—çº§ä½œç”¨åŸŸï¼Œåªåœ¨å£°æ˜ä»–ä»¬çš„ä½œç”¨åŸŸå†…å¯è§</li></ol><p><strong><u>staticé™æ€å˜é‡</u></strong></p><ol type="1"><li>åœ¨è¿è¡Œæ—¶åˆ†é…å†…å­˜</li><li>å¹¶ä¸æ˜¯ä¸å¯å˜çš„ï¼Œå¯ä½¿ç”¨unsafeä¿®æ”¹</li><li>é™æ€å˜é‡çš„ç”Ÿå‘½å‘¨æœŸä¸ºæ•´ä¸ªç¨‹åºçš„è¿è¡Œæ—¶é—´</li></ol><figure><imgsrc="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/image-20241028200046092.png"alt="image-20241028200046092" /><figcaption aria-hidden="true">image-20241028200046092</figcaption></figure><h2 id="åŸºæœ¬æ•°æ®ç±»å‹">3.3 åŸºæœ¬æ•°æ®ç±»å‹</h2><ul><li><code>Integer types</code> ï¼š é»˜è®¤æ¨æ–­ä¸º<code>i32</code><ul><li>i8ã€i16ã€i32ã€i64ã€i128</li></ul></li><li><code>Unsigned Integer types</code><ul><li>u8ã€u16ã€u32ã€u64ã€u128</li></ul></li><li>platform-specific integer typeï¼ˆç”±å¹³å°å†³å®šï¼‰<ul><li>usize</li><li>isize</li></ul></li><li>Float Types<ul><li>f32ä¸f64</li><li>å°½é‡ç”¨f64</li></ul></li><li>Boolean Values<ul><li>true</li><li>false</li></ul></li><li>Character Types<ul><li>Rustæ”¯æŒUnicodeå­—ç¬¦</li><li>è¡¨ç¤ºcharç±»å‹ä½¿ç”¨å•å¼•å·</li></ul></li></ul><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;&#125;&quot;</span>,<span class="hljs-type">u32</span>::MAX);<br><span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;&#125;&quot;</span>,<span class="hljs-type">u32</span>::MIN);<br><span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;&#125;&quot;</span>,<span class="hljs-type">usize</span>::MAX);<br><span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;&#125;&quot;</span>,<span class="hljs-type">usize</span>::MIN);<br><span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;isize is &#123;&#125; bytes&quot;</span>,std::mem::size_of::&lt;<span class="hljs-type">isize</span>&gt;());<br></code></pre></td></tr></table></figure><figure><imgsrc="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/image-20241028200813404.png"alt="image-20241028200813404" /><figcaption aria-hidden="true">image-20241028200813404</figcaption></figure><figure><imgsrc="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/image-20241028200822258.png"alt="image-20241028200822258" /><figcaption aria-hidden="true">image-20241028200822258</figcaption></figure><p>è¯¥2.4äº†</p><p>https://www.bilibili.com/video/BV15y421h7j7?spm_id_from=333.788.videopod.episodes&amp;vd_source=33b50a4dd201d7564e6e63d321809ce9&amp;p=7</p><h2 id="å…ƒç¥–å’Œæ•°ç»„">3.4 å…ƒç¥–å’Œæ•°ç»„</h2><p>ç›¸åŒç‚¹ï¼š</p><ul><li>éƒ½æ˜¯å¤åˆç±»å‹Compound Typesï¼Œè€ŒVecå’ŒMapéƒ½æ˜¯é›†åˆç±»å‹CollectionTypes</li><li>å…ƒç»„å’Œæ•°ç»„é•¿åº¦éƒ½æ˜¯å›ºå®šçš„</li></ul><p>ä¸åŒç‚¹ï¼š</p><ul><li>Tuplesï¼šä¸åŒç±»å‹çš„æ•°æ®ç±»å‹</li><li>Arraysï¼šåŒä¸€ç±»å‹çš„æ•°æ®ç±»å‹</li></ul><p><u><strong>æ•°ç»„ï¼š</strong></u></p><ul><li><p>åˆ›å»ºæ–¹å¼</p><ul><li><p><code>[a,b,c]</code></p></li><li><p><code>[value;size]</code></p></li></ul></li><li><p>è·å–å…ƒç´ <code>arr[index]</code></p></li><li><p>è·å–é•¿åº¦<code>arr.len()</code></p></li></ul><p><strong><u>å…ƒç»„ï¼š</u></strong></p><ul><li>è·å–æ•°æ®ï¼štup.index</li><li>æ²¡æœ‰len()</li><li>é»˜è®¤è¿”å›å€¼<code>Emoty Tuple()</code></li></ul><blockquote><ul><li>å…ƒç»„å’Œæ•°ç»„éƒ½æ˜¯å¯ä»¥ç›´æ¥æ‰“å°çš„ï¼›<code>println!("&#123;:?&#125;",arr);</code></li><li>èµ‹å€¼é»˜è®¤éƒ½æ˜¯<code>copy</code>æ“ä½œï¼›</li></ul></blockquote><p>stringèµ‹å€¼æ—¶æ˜¯<code>move</code>æ“ä½œï¼Œä¼šè½¬ç§»æ‰€æœ‰æƒï¼Œä¸èƒ½å†æ‰“å°ã€‚</p><figure><imgsrc="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/image-20241029191648931.png"alt="image-20241029191648931" /><figcaption aria-hidden="true">image-20241029191648931</figcaption></figure><h1 id="ownershipä¸ç»“æ„ä½“æšä¸¾">4ã€Ownershipä¸ç»“æ„ä½“ã€æšä¸¾</h1><h2 id="rustçš„å†…å­˜ç®¡ç†æ¨¡å‹">4.1 Rustçš„å†…å­˜ç®¡ç†æ¨¡å‹</h2><figure><imgsrc="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/image-20241029191949573.png"alt="image-20241029191949573" /><figcaption aria-hidden="true">image-20241029191949573</figcaption></figure><figure><imgsrc="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/image-20241029192441011.png"alt="image-20241029192441011" /><figcaption aria-hidden="true">image-20241029192441011</figcaption></figure><p><strong><u>1ã€æ‰€æœ‰æƒç³»ç»Ÿ</u></strong></p><ul><li>æ¯ä¸ªå€¼éƒ½æœ‰ä¸€ä¸ªä¸ä¹‹å…³è”çš„å˜é‡ï¼Œè¯¥å˜é‡æ˜¯è¯¥å€¼çš„æ‰€æœ‰è€…</li><li>åŒä¸€æ—¶é—´åªèƒ½æœ‰ä¸€ä¸ªæ‰€æœ‰è€…</li><li>å½“æ‰€æœ‰è€…ç¦»å¼€ä½œç”¨åŸŸæ—¶ï¼Œå®ƒæ‹¥æœ‰çš„å€¼å°†è¢«ä¸¢å¼ƒ</li></ul><p><strong><u>2ã€RAIIåŸåˆ™</u></strong></p><p>èµ„æºè·å–å³åˆå§‹åŒ–åŸåˆ™ã€‚å½“å¯¹è±¡è¢«åˆ›å»ºæ—¶ï¼Œå®ƒä¼šè·å–å¿…è¦çš„èµ„æºï¼Œå¹¶åœ¨ç”Ÿå‘½å‘¨æœŸç»“æŸæ—¶é‡Šæ”¾è¿™äº›èµ„æºã€‚</p><blockquote><p>https://blog.csdn.net/CrystalLawson/article/details/138190719</p></blockquote>]]></content>
    
    
    <summary type="html">RuståŸºç¡€</summary>
    
    
    
    <category term="ç¼–ç¨‹" scheme="http://example.com/categories/%E7%BC%96%E7%A8%8B/"/>
    
    <category term="Rust" scheme="http://example.com/categories/%E7%BC%96%E7%A8%8B/Rust/"/>
    
    
    <category term="å­¦ä¹ ç¬”è®°" scheme="http://example.com/tags/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    
    <category term="Rust" scheme="http://example.com/tags/Rust/"/>
    
  </entry>
  
  <entry>
    <title>æ·±åº¦å­¦ä¹ åŸºç¡€</title>
    <link href="http://example.com/2025/02/08/036%20%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E5%85%A5%E9%97%A8%EF%BC%88%E5%90%B4%E6%81%A9%E8%BE%BE%EF%BC%89/"/>
    <id>http://example.com/2025/02/08/036%20%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E5%85%A5%E9%97%A8%EF%BC%88%E5%90%B4%E6%81%A9%E8%BE%BE%EF%BC%89/</id>
    <published>2025-02-08T07:11:00.000Z</published>
    <updated>2025-02-08T11:39:07.393Z</updated>
    
    <content type="html"><![CDATA[<div class="note note-success">            <p>æœ¬æ–‡æœ€æ–°æ›´æ–°äº 2025/02/08 æ™šä¸Š</p>          </div><span class="label label-primary">æ¢¯åº¦ä¸‹é™</span><span class="label label-info">çº¿æ€§å›å½’</span><span class="label label-warning">å­¦ä¹ ç‡</span><hr /><a class="btn" href="https://github.com/kaieye/2022-Machine-Learning-Specialization"  title="Githubèµ„æ–™" target="_blank">Githubèµ„æ–™</a><h2 id="æœºå™¨å­¦ä¹ åˆ†ç±»">1ã€æœºå™¨å­¦ä¹ åˆ†ç±»</h2><p>åˆ†ä¸ºç›‘ç£å­¦ä¹ å’Œæ— ç›‘ç£å­¦ä¹ </p><h3 id="ç›‘ç£å­¦ä¹ ">1.1 ç›‘ç£å­¦ä¹ </h3><ul><li>å®šä¹‰ï¼šåœ¨ç»™å®šçš„æ•°æ®é›†ä¸­å­¦ä¹ å‡ºä¸€ä¸ªå‡½æ•°ï¼Œå½“è¾“å…¥æ–°çš„xæ—¶ï¼Œèƒ½å¤Ÿé¢„æµ‹è¾“å‡ºç»“æœyã€‚</li><li>ä¸¤ç§ä¸»è¦ç±»å‹ï¼šå›å½’å’Œåˆ†ç±»</li><li>å­¦ä¹ æŠ€æœ¯ï¼šé€»è¾‘å›å½’ã€çº¿æ€§å›å½’ã€å†³ç­–æ ‘å’Œç¥ç»ç½‘ç»œã€‚</li></ul><h3 id="æ— ç›‘ç£å­¦ä¹ ">1.2 æ— ç›‘ç£å­¦ä¹ </h3><ul><li>æ— ç›‘ç£å­¦ä¹ ç®—æ³•ä¼šä½¿ç”¨æœªæ ‡è®°çš„æ•°æ®è¿›è¡Œè®­ç»ƒã€‚</li><li>æ— ç›‘ç£å­¦ä¹ å¯ç”¨äºå°†æ–°é—»æ–‡ç« åˆ†ç±»</li><li>å­¦ä¹ æŠ€æœ¯ï¼šé›†ç¾¤ã€å…³è”è§„åˆ™å­¦ä¹ ã€æ¦‚ç‡å¯†åº¦å’Œé™ç»´</li></ul><h3 id="åŒºåˆ«">1.3 åŒºåˆ«</h3><ul><li>ç›‘ç£å­¦ä¹ æ˜¯ä¸€ç§ç›®çš„æ˜ç¡®çš„è®­ç»ƒæ–¹å¼ï¼Œä½ çŸ¥é“å¾—åˆ°çš„æ˜¯ä»€ä¹ˆï¼›è€Œ<strong>æ— ç›‘ç£å­¦ä¹ åˆ™æ˜¯æ²¡æœ‰æ˜ç¡®ç›®çš„çš„è®­ç»ƒæ–¹å¼ï¼Œä½ æ— æ³•æå‰çŸ¥é“ç»“æœæ˜¯ä»€ä¹ˆ</strong>ã€‚</li><li>ç›‘ç£å­¦ä¹ ç”±äºç›®æ ‡æ˜ç¡®ï¼Œæ‰€ä»¥å¯ä»¥è¡¡é‡æ•ˆæœï¼›è€Œ<strong>æ— ç›‘ç£å­¦ä¹ å‡ ä¹æ— æ³•é‡åŒ–æ•ˆæœå¦‚ä½•</strong>ã€‚</li></ul><div class="note note-info">            <ol type="1"><li><ahref="https://aws.amazon.com/cn/compare/the-difference-between-machine-learning-supervised-and-unsupervised/">æœ‰ç›‘ç£å­¦ä¹ å’Œæ— ç›‘ç£å­¦ä¹ æœ‰ä»€ä¹ˆåŒºåˆ«</a></li><li><ahref="https://easyai.tech/ai-definition/unsupervised-learning/">æ— ç›‘ç£å­¦ä¹ â€“ Unsupervised learning | UL</a></li></ol>          </div><h2 id="çº¿æ€§å›å½’">2ã€çº¿æ€§å›å½’</h2><h3 id="å®šä¹‰">2.1 å®šä¹‰</h3><div style="width: 60%; margin: auto"><p><img src="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/202409161210625.png"></p></div><p>ä»»ä½•é¢„æµ‹æ•°å­—ä¹‹é—´çš„ç›‘ç£å­¦ä¹ æ¨¡å‹éƒ½å¯è¢«ç§°ä½œå›å½’é—®é¢˜ã€‚çº¿æ€§å›å½’æ—¶å›å½’æ¨¡å‹ä¸­çš„ä¸€ä¸ªç”¨ä¾‹ã€‚æ¨¡å‹å¯ä»¥æœ‰æ— é™å¯èƒ½çš„è¾“å‡ºã€‚</p><p>Training : Data used to train the model</p><ul><li>x : è¾“å…¥</li><li>y : è¾“å‡º</li><li>m : è®­ç»ƒé›†çš„æ•°é‡</li><li>(x,y) : å•ä¸ªè®­ç»ƒæ ·æœ¬</li><li>$ (x<sup>{i},y</sup>{i}) $ : ç¬¬iä¸ªè®­ç»ƒæ ·æœ¬fs</li><li><span class="math inline">\(\hat{y}\)</span> : é¢„æµ‹å€¼</li><li>f : å‡½æ•°æ¨¡å‹</li><li><span class="math inline">\(\hat{y}-y\)</span> : error</li></ul><blockquote><p>å¦ä¸€ç§æœºå™¨å­¦ä¹ ç±»åˆ«æ˜¯åˆ†ç±»ï¼Œåˆ†ç±»é—®é¢˜æ—¶é¢„æµ‹ç±»åˆ«æˆ–è€…ç¦»æ•£ç±»åˆ«ï¼Œå¦‚é¢„æµ‹å›¾ç‰‡æ˜¯çŒ«è¿˜æ˜¯ç‹—ã€‚åœ¨åˆ†ç±»é—®é¢˜ä¸­ï¼Œåªæœ‰å°‘é‡å¯èƒ½çš„è¾“å‡ºã€‚</p></blockquote><h3 id="æŸå¤±å‡½æ•°">2.2 æŸå¤±å‡½æ•°</h3><div style="width: 60%; margin: auto"><p><img src="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/202409161303796.png"></p></div><p>æ¨¡å‹ <span class="math display">\[f_{w,b}(x)=wx+b\]</span> å‚æ•°ä¸ºwå’Œb <span class="math display">\[J(w,b)=\frac{1}{2m}\sum_{i=1}^{m}\bigl(f_{w,b}\bigl(x^{(i)}\bigr)-y^{(i)}\bigr)^{2}\]</span></p><blockquote><p><span class="math inline">\(J(w,b)\)</span>æœ€å°åŒ–</p></blockquote><p>ä¸ºæ–¹ä¾¿ä¸¾ä¾‹ï¼Œå‡è®¾åªæœ‰ä¸€ä¸ªå‚æ•°wã€‚å¦‚å›¾æ‰€ç¤ºï¼Œå½“å‚æ•°wä¸º1æ—¶ï¼ŒJ(w)æ—¶æ˜¯æœ€å°çš„</p><div style="width: 60%; margin: auto"><p><img src="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/202409161301562.png"></p></div><p>å¦‚æœå‚æ•°æœ‰wå’Œbåˆ™</p><div style="width: 60%; margin: auto"><p><img src="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/202409161303421.png"></p></div><p>æˆ–è€…</p><div style="width: 60%; margin: auto"><p><img src="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/202409161307927.png"></p></div><p>å®Œæ•´å¯¹åº”å…³ç³»</p><div style="width: 60%; margin: auto"><p><img src="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/202409161309467.png"></p></div><h2 id="æ¢¯åº¦ä¸‹é™">3ã€æ¢¯åº¦ä¸‹é™</h2><p>æœ‰æ—¶æˆ‘ä»¬çš„æŸå¤±å€¼Jå¹¶ä¸æ˜¯è§„åˆ™çš„ï¼Œå¦‚å›¾æ‰€ç¤ºï¼Œå­˜åœ¨è¯¸å¤šå°å³°å’Œä½è°·ã€‚æœºå™¨å­¦ä¹ çš„ç›®æ ‡å°±æ˜¯æ‰¾åˆ°æœ€ä½ç‚¹ï¼Œå¦‚ä½•å¿«é€Ÿæ‰¾åˆ°æœ€ä½ç‚¹è‡³å…³é‡è¦ã€‚</p><div style="width: 60%; margin: auto"><p><img src="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/202409161313907.png"></p></div><p>å‡è®¾ä½ ç«™åœ¨ä¸€ä¸ªå±±å¡ä¸Šï¼Œå¦‚ä½•æ‰¾åˆ°æœ€å¿«çš„ä¸‹å¡è·¯çº¿ï¼Ÿå³æœå“ªä¸ªæ–¹å‘è¿ˆå‡ºä¸€æ­¥ï¼Ÿæ¯èµ°ä¸€æ­¥éƒ½è¦å†æ¬¡ç¡®è®¤ä¸‹ä¸€æ­¥å¾€å“ªè¿ˆã€‚</p><blockquote><p>å®ç°æ¢¯åº¦ä¸‹é™</p></blockquote><p><span class="math display">\[w=w-\alpha\frac\partial{\partial w}J(w,b)\]</span></p><p><span class="math display">\[b=b-\alpha\frac\partial{\partial b}J(w,b)\]</span></p><p>å­¦ä¹ ç‡<spanclass="math inline">\(\alpha\)</span>å†³å®šä¸‹å¡çš„æ­¥æ•°å¤§å°</p><blockquote><p>å¯¹äºæŸä¸ªç‰¹å®šæ­¥çš„ä¸¤ä¸ªé‡(w,b)çš„æ›´æ–°ï¼Œ<spanclass="math inline">\(\frac\partial{\partialw}J(w,b)\)</span>è¦ä¸€è‡´ã€‚</p></blockquote><p><span class="math display">\[tmp_w = w-\alpha\frac\partial{\partial w}J(w,b)\]</span></p><p><span class="math display">\[tmp_b = b-\alpha\frac\partial{\partial b}J(w,b)\]</span></p><p><span class="math display">\[w = tmp_w\]</span></p><p><span class="math display">\[b = tmp_b\]</span></p><p><strong>ç›´è§‚ç†è§£æ¢¯åº¦ä¸‹é™</strong></p><div style="width: 60%; margin: auto"><p><img src="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/20240918185034.png"></p></div><h3 id="å­¦ä¹ ç‡">3.1 å­¦ä¹ ç‡</h3><p>å­¦ä¹ ç‡çš„å€¼è‡³å…³é‡è¦ï¼Œå¤ªå°å’Œå¤ªå¤§ä¼šäº§ç”Ÿä»€ä¹ˆå½±å“å‘¢ï¼Ÿ</p><ul><li>å¤ªå°å­¦ä¹ å¾ˆæ…¢</li><li>å¤ªå¤§å¯èƒ½ä¼šç¦»æœ€å°å€¼è¶Šæ¥è¶Šè¿œï¼Œå¯¼è‡´å‘æ•£</li></ul><div style="width: 60%; margin: auto"><p><img src="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/20240918185505.png"></p></div><div style="width: 60%; margin: auto"><p><img src="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/20240918185512.png"></p></div><p>å›ºå®šçš„å­¦ä¹ ç‡ï¼Œä¸‹é™çš„æ­¥é•¿ä¼šè¶Šæ¥è¶Šå°ï¼Œå› ä¸ºå¯¼æ•°åœ¨å˜å°</p><div style="width: 60%; margin: auto"><p><img src="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/20240918185832.png"></p></div><h3 id="çº¿æ€§å›å½’ä¸­çš„æ¢¯åº¦ä¸‹é™">3.2 çº¿æ€§å›å½’ä¸­çš„æ¢¯åº¦ä¸‹é™</h3><p><span class="math display">\[f_{w,b}(x)=wx+b\]</span></p><p><span class="math display">\[J(w,b)=\frac{1}{2m}\sum_{i=1}^{m}(f_{w,b}(x^{(i)})-y^{(i)})^{2}\]</span></p><p><span class="math display">\[w=w-\alpha\frac{\partial}{\partial w}J(w,b)\]</span></p><p><span class="math display">\[b=b-\alpha\frac{\partial}{\partial b}J(w,b)\]</span></p><p>è€Œ</p><p><span class="math display">\[\frac{\partial}{\partial w}J(w,b) =\frac{1}{m}\sum_{i=1}^{m}(f_{w,b}\big(x^{(i)}\big)-y^{(i)})x^{(i)}\]</span></p><p><span class="math display">\[\frac{\partial}{\partial w}J(w,b) =\frac{1}{m}\sum_{i=1}^{m}(f_{w,b}\big(x^{(i)}\big)-y^{(i)})\]</span></p><p>åˆ™</p><p><span class="math display">\[w=w-\alpha\frac{1}{m}\sum_{i=1}^{m}(f_{w,b}(x^{(i)})-y^{(i)}) x^{(i)}\]</span></p><p><span class="math display">\[b=b-\alpha\frac{1}{m}\sum_{i=1}^{m}(f_{w,b}(x^{(i)})-y^{(i)})\]</span></p><blockquote><p>æ¢¯åº¦ä¸‹é™åªèƒ½æ‰¾åˆ°å±€éƒ¨æœ€å°å€¼ï¼Œè€Œä¸èƒ½æ‰¾åˆ°å…¨å±€æœ€å°å€¼ã€‚å¯¹äºå‡¸å‡½æ•°åªæœ‰ä¸€ä¸ªæœ€å°å€¼ï¼Œæ¢¯åº¦ä¸‹é™æ˜¯é€‚ç”¨çš„</p></blockquote><h2 id="å¤šå…ƒçº¿æ€§å›å½’">4ã€å¤šå…ƒçº¿æ€§å›å½’</h2><p>å¤šå…ƒçº¿æ€§å›å½’æ¨¡å‹ä¸­æœ‰å¤šä¸ªç‰¹å¾å€¼ã€‚æ¯”å¦‚æˆ¿é—´çš„ä»·æ ¼Yä¸æ­¢ä¸é¢ç§¯X1æœ‰å…³ï¼Œè¿˜ä¸åœ°æ®µX2ã€æˆ¿é—´æ•°X3ç­‰æœ‰å…³ã€‚æ­¤æ—¶çš„Xå®é™…ä¸ºä¸€ä¸ªå‘é‡[X1,X2,X3]ã€‚æ­¤æ—¶æ¨¡å‹å¯ä»¥å®šä¹‰ä¸º</p><p><span class="math display">\[f_{\overrightarrow{w},b}(\overrightarrow{X})=w_{1}X_{1}+w_{2}X_{2}+w_{3}X_{3}+b\]</span></p><p><span class="math display">\[\overrightarrow{w} = [X1,X2,X3]\]</span></p><p><span class="math display">\[f_{\overrightarrow{w},b}(\overrightarrow{X})=\overrightarrow{w}\cdot\overrightarrow{X}+ b\]</span></p><p><strong>å‘é‡åŒ–</strong></p><p><spanclass="math display">\[f=w[0]*x[0]+w[1]*x[1]+w[2]*x[2]+b\]</span>ä»£ç è¡¨ç¤º</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs python">f = <span class="hljs-number">0</span><br><span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">0</span>,n):<br>  f = f + w[j] * x[j]<br>f = f + b<br><br>// ä¹Ÿå¯ä»¥ä½¿ç”¨numpyï¼Œè¿™ç§æ–¹å¼è®¡ç®—æ•ˆç‡é«˜ï¼Œå› ä¸ºnumpyå¯ä»¥å¹¶è¡Œè®¡ç®—<br>f = np.dot(w,x) + b<br></code></pre></td></tr></table></figure><p><strong>å‘é‡ä¸­çš„æ¢¯åº¦ç®—æ³•</strong></p><a class="btn" href="https://www.bilibili.com/video/BV1Bq421A74G?p=24&vd_source=33b50a4dd201d7564e6e63d321809ce9"  title="è§†é¢‘è®²è§£" target="_blank">è§†é¢‘è®²è§£</a><p>å¤šä¸ªç‰¹å¾å€¼</p><p><span class="math display">\[\begin{align*} \text{repeat}&amp;\text{ until convergence:} \; \lbrace\newline\;&amp; w_j = w_j - Â \alpha \frac{\partial J(\mathbf{w},b)}{\partial w_j}\tag{5} Â \; &amp; \text{for j = 0..n-1}\newline&amp;b\ \ = b - Â \alpha \frac{\partial J(\mathbf{w},b)}{\partial b}Â \newline \rbrace\end{align*}\]</span></p><p><span class="math display">\[\frac{\partial J(\mathbf{w},b)}{\partialw_j}=\frac{1}{m}\sum_{i=0}^{m-1}(f_{\mathbf{w},b}(\mathbf{x}^{(i)})-y^{(i)})x_j^{(i)}\]</span></p><p><span class="math display">\[\frac{\partial J(\mathbf{w},b)}{\partialb}=\frac{1}{m}\sum_{i=0}^{m-1}(f_{\mathbf{w},b}(\mathbf{x}^{(i)})-y^{(i)})\]</span></p><h3 id="æ¢¯åº¦ä¸‹é™ç‰¹å¾æ”¾ç¼©">4.1 æ¢¯åº¦ä¸‹é™:ç‰¹å¾æ”¾ç¼©</h3><p>å¦‚æœä¸¤ä¸ªç‰¹å¾å€¼åœ¨é‡çº§ä¸Šç›¸å·®è¾ƒå¤§ï¼Œå¦‚æˆ¿é—´æ•°å’Œé¢ç§¯ï¼Œæˆ¿é—´æ•°ä¸€èˆ¬åœ¨1<sub>5ï¼Œè€Œé¢ç§¯åœ¨100</sub>150ï¼Œè¿™æ—¶ç»˜åˆ¶å‡ºçš„w1å’Œw2çš„J(w,b)å‘ˆç°æ¤­åœ†å½¢ï¼Œåœ¨æ¢¯åº¦ä¸‹é™æ—¶ä¼šæ¥å›åå¼¹ã€‚æœ€æœ‰åˆ©çš„æ–¹å¼æ˜¯å°†ç‰¹å¾å€¼è¿›è¡Œæ”¾ç¼©ï¼Œä½¿å¾—ä¸¤ä¸ªç‰¹å¾å€¼åœ¨ç›¸åŒé‡çº§ã€‚</p><figure><imgsrc="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/20240924084546.png"alt="image.png|500" /><figcaption aria-hidden="true">image.png|500</figcaption></figure><h3 id="å¦‚ä½•ç¼©æ”¾">4.2 å¦‚ä½•ç¼©æ”¾</h3><p><strong>æœ€å€¼å½’ä¸€åŒ–</strong></p><p>é™¤ä»¥ç‰¹å¾å€¼å–å€¼çš„æœ€å¤§å€¼ï¼Œæ•°æ®ä¼šæ˜ å°„åˆ°0~1ä¹‹é—´ã€‚ <spanclass="math display">\[x_{scale}=\frac{x-x_{min}}{x_{max}-x_{min}}\]</span>æœ€å€¼å½’ä¸€åŒ–åªé€‚ç”¨äºæœ‰æ˜æ˜¾è¾¹é—´çš„æƒ…å†µã€‚</p><p><strong>å‡å€¼å½’ä¸€åŒ–</strong></p><p><span class="math display">\[x_{scale}=\frac{x-\mu}S\]</span>å…¶ä¸­<span class="math inline">\(x\)</span>ä¸ºè¦å½’ä¸€åŒ–çš„å€¼ï¼Œ<spanclass="math inline">\(x_{scale}\)</span>ä¸ºå½’ä¸€åŒ–ä¹‹åçš„å€¼ã€‚<spanclass="math inline">\(\mu\)</span>Â ä¸ºæ ·æœ¬çš„å¹³å‡å€¼ï¼Œ<spanclass="math inline">\(S\)</span>ä¸ºæ ·æœ¬çš„æ ‡å‡†å·®ã€‚</p><p><strong>å‡å€¼æ–¹å·®å½’ä¸€åŒ–</strong></p><p><span class="math display">\[Y_i=\sigma\cdot X_i+\mu \]</span>å…¶ä¸­ï¼ŒXä¸ºæ ‡å‡†æ­£æ€åˆ†å¸ƒä¸­çš„å…ƒç´ ï¼Œ<spanclass="math inline">\(\mu\)</span>ä¸ºå¹³å‡å€¼ï¼Œ<spanclass="math inline">\(\sigma\)</span>ä¸ºæ ‡å‡†å·®ã€‚</p><h3 id="å­¦ä¹ æ›²çº¿">4.3 å­¦ä¹ æ›²çº¿</h3><p>å¯ä»¥åˆ¤æ–­ä½•æ—¶åœæ­¢è®­ç»ƒç‰¹å®šæ¨¡æ‹Ÿ</p><figure><imgsrc="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/20240927140525.png"alt="image.png|500" /><figcaption aria-hidden="true">image.png|500</figcaption></figure><h3 id="å­¦ä¹ ç‡é€‰æ‹©">4.4 å­¦ä¹ ç‡é€‰æ‹©</h3><p>ä¸€ä¸ªå°çš„å­¦ä¹ ç‡ï¼ŒJåº”è¯¥æ˜¯æŒç»­å‡å°çš„ã€‚åœ¨é€‰æ‹©å­¦ä¹ ç‡æ—¶ï¼Œå¯ä»å°çš„å¼€å§‹ï¼Œæ¯æ¬¡å¢åŠ 10å€æ”¹å˜ï¼Œå¦‚0.001ã€0.01ã€0.1ã€1ã€10...</p>]]></content>
    
    
    <summary type="html">è·Ÿç€å´æ©è¾¾å­¦ä¹ æ·±åº¦å­¦ä¹ åŸºç¡€</summary>
    
    
    
    <category term="ç¼–ç¨‹" scheme="http://example.com/categories/%E7%BC%96%E7%A8%8B/"/>
    
    <category term="å¤§æ¨¡å‹" scheme="http://example.com/categories/%E7%BC%96%E7%A8%8B/%E5%A4%A7%E6%A8%A1%E5%9E%8B/"/>
    
    
    <category term="æ·±åº¦å­¦ä¹ " scheme="http://example.com/tags/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/"/>
    
    <category term="å´æ©è¾¾" scheme="http://example.com/tags/%E5%90%B4%E6%81%A9%E8%BE%BE/"/>
    
  </entry>
  
  <entry>
    <title>AIç”Ÿæˆä»£ç </title>
    <link href="http://example.com/2025/02/08/035%20AI%E9%97%AE%E7%AD%94%E5%BD%A2%E5%BC%8F%E7%94%9F%E6%88%90%E4%BB%A3%E7%A0%81/"/>
    <id>http://example.com/2025/02/08/035%20AI%E9%97%AE%E7%AD%94%E5%BD%A2%E5%BC%8F%E7%94%9F%E6%88%90%E4%BB%A3%E7%A0%81/</id>
    <published>2025-02-08T07:06:00.000Z</published>
    <updated>2025-02-08T11:39:20.848Z</updated>
    
    <content type="html"><![CDATA[<div class="note note-success">            <p>æœ¬æ–‡æœ€æ–°æ›´æ–°äº 2025/02/08 æ™šä¸Š</p>          </div><h2 id="aié—®ç­”å½¢å¼ç”Ÿæˆä»£ç ">AIé—®ç­”å½¢å¼ç”Ÿæˆä»£ç </h2><p>ä»Šå¤©æ— æ„é—´åœ¨bç«™çœ‹åˆ°ä¸€ä½upä¸»ç”¨AIå†™ä»£ç çš„è¿‡ç¨‹ï¼Œæ— æ¯”æƒŠè®¶ï¼Œä¸éœ€è¦ä¼šå‰ç«¯ï¼Œå°±èƒ½ä½¿ç”¨é—®ç­”çš„å½¢å¼ç”Ÿæˆå¥½çœ‹çš„å‰ç«¯é¡µé¢ã€‚æˆ‘ä¹Ÿäº²è‡ªä½“éªŒäº†ä¸€ä¸‹ã€‚</p><p>https://v0.dev/chat/</p><p>è¿™æ˜¯æˆ‘ä½¿ç”¨è¿™ä¸ªç½‘ç«™ç”Ÿæˆçš„å‰ç«¯é¡µé¢ï¼Œä½†æ˜¯æ¯å¤©æœ‰é™åˆ¶æ¬¡æ•°ï¼Œ<u>ä¸€å®šè¦è°¨æ…ä½¿ç”¨ï¼Œæƒ³å¥½äº†é—®é¢˜å†é—®ã€‚</u></p><h2 id="é¢„è§ˆ">é¢„è§ˆ</h2><p>https://v0.dev/chat/GvO3hYBppbW</p><h2 id="é—®ç­”ç”Ÿæˆ">é—®ç­”ç”Ÿæˆ</h2><p>æœ‰æ ·å­¦æ ·ï¼Œé¦–å…ˆç»™ä»–ç”Ÿæˆç½‘ç«™çš„ç›®çš„åŠç±»å‹ã€‚</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-tag">I</span> want <span class="hljs-selector-tag">to</span> make an app for university applicants. <span class="hljs-selector-tag">To</span> learn about major. <span class="hljs-selector-tag">I</span> want <span class="hljs-selector-tag">to</span> <span class="hljs-attribute">display</span> <span class="hljs-selector-tag">a</span> list of major, and their coresponging subject, and comparisons between majors. Now generate the major list page.<br></code></pre></td></tr></table></figure><p><imgsrc="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/image-20241123143611587.png"alt="image-20241123143611587" />â€‹</p><p>ä½†æ˜¾ç¤ºçš„å†…å®¹è¿‡äºå¤šï¼Œè€Œä¸æ˜¯è‡ªå·±æƒ³è¦çš„ï¼Œæˆ‘æƒ³è¦åœ¨ä¸»é¡µé¢èƒ½å‘ˆç°æ›´å¤šçš„ä¸“ä¸š</p><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mipsasm"><span class="hljs-keyword">but </span>make it more concise, <span class="hljs-keyword">because </span>there are <span class="hljs-keyword">bundreds </span>of majors i want to <span class="hljs-keyword">display </span>in the home page<br></code></pre></td></tr></table></figure><p><imgsrc="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/image-20241123143748042.png"alt="image-20241123143748042" />â€‹</p><p>å®ƒè¿˜è´´å¿ƒçš„åŠ ä¸Šäº†æœç´¢åŠŸèƒ½ï¼Œä½†æ˜¯æˆ‘æƒ³ç€ç¾åŒ–ä¸€ä¸‹ï¼Œæ·»åŠ ä¸€ä¸ªä¸»é¢˜é¢œè‰²</p><figure class="highlight openscad"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs openscad"><span class="hljs-keyword">use</span> clean <span class="hljs-built_in">color</span> themes<br></code></pre></td></tr></table></figure><p>ä½†æ˜¯å•è¯æ‰“é”™äº†ï¼Œ<code>clear</code>å†™æˆäº†<code>clean</code>ï¼Œå®ƒæŠŠæ‰€æœ‰é¢œè‰²åˆ é™¤äº†ã€‚å½“æ—¶æˆ‘æ²¡æ„è¯†åˆ°ï¼Œåªæ˜¯è®©å®ƒåœ¨æœç´¢æ å³ä¾§æ·»åŠ ä¸€ä¸ªç­›é€‰æŒ‰é’®ï¼Œå¯ä»¥ç­›é€‰åˆ†ç±»ã€‚</p><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mipsasm"><span class="hljs-keyword">add </span>a category <span class="hljs-keyword">button </span><span class="hljs-built_in">at</span> search <span class="hljs-keyword">box </span>right, I can choose <span class="hljs-keyword">different </span>category<br></code></pre></td></tr></table></figure><p><imgsrc="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/image-20241123144043521.png"alt="image-20241123144043521" />â€‹</p><p>è¿˜æ˜¯ä¸ç”˜å¿ƒï¼ŒåŠ ç‚¹é¢œè‰²ä¸»é¢˜å§</p><figure class="highlight openscad"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs openscad"><span class="hljs-keyword">use</span> gradient <span class="hljs-built_in">color</span> theme<br></code></pre></td></tr></table></figure><p><imgsrc="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/image-20241123144129571.png"alt="image-20241123144129571" />â€‹</p><p>ä½†è¿™ä¸ªç´«è‰²ç³»ä¸æ˜¯æˆ‘æƒ³è¦çš„ï¼Œæƒ³è¦ä¸ªè“è‰²ç³»çš„ã€‚</p><figure class="highlight mel"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mel">use gradient <span class="hljs-keyword">color</span> theme <span class="hljs-keyword">about</span> blue<br></code></pre></td></tr></table></figure><p><imgsrc="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/image-20241123144236324.png"alt="image-20241123144236324" />â€‹</p><p>ç”Ÿæˆä¸€ä¸ªè¯¦æƒ…é¡µé¢</p><figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs verilog"><span class="hljs-keyword">generate</span> a <span class="hljs-keyword">new</span> page <span class="hljs-keyword">for</span> major detail, <span class="hljs-keyword">this</span> page should contain subjects related to <span class="hljs-number">10</span> majors.<br></code></pre></td></tr></table></figure><p><imgsrc="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/image-20241123144410492.png"alt="image-20241123144410492" />â€‹</p><p>è¿™ä¸ªé¡µé¢æœ‰äº›ç®€å•ï¼Œå¢åŠ ä¸€ä¸‹é—®ç­”åŠŸèƒ½</p><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs applescript">detail page should have comment <span class="hljs-keyword">and</span> question / answer seciotn <span class="hljs-keyword">below</span><br></code></pre></td></tr></table></figure><p><imgsrc="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/image-20241123144451374.png"alt="image-20241123144451374" />â€‹</p><p>ä½†æ˜¯æ¨èçš„ä¸“ä¸šé‡Œé¢æ¨èçš„æ˜¯å¤§åˆ†ç±»ï¼Œæƒ³æ”¹æˆå¤§åˆ†ç±»ä¸­çš„å°åˆ†ç±»</p><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs livecodeserver">The recommended major is <span class="hljs-keyword">the</span> minor major <span class="hljs-keyword">in</span> <span class="hljs-keyword">the</span> larger category <span class="hljs-keyword">in</span> <span class="hljs-keyword">the</span> detail page<br></code></pre></td></tr></table></figure><p><imgsrc="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/image-20241123144604904.png"alt="image-20241123144604904" />â€‹</p><p>ç”Ÿæˆä¸“ä¸šå¯¹æ¯”é¡µé¢</p><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mipsasm">generate a new page about major <span class="hljs-built_in">compare</span>. Side-<span class="hljs-keyword">by-side </span><span class="hljs-built_in">compare</span> <span class="hljs-number">2</span> major majors interm of suject to study, related <span class="hljs-keyword">jobs, </span><span class="hljs-keyword">and </span>more. <span class="hljs-keyword">be </span>creative.<br></code></pre></td></tr></table></figure><p><imgsrc="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/image-20241123144639352.png"alt="image-20241123144639352" />â€‹</p><p><imgsrc="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/image-20241123144650053.png"alt="image-20241123144650053" />â€‹</p><p>è¿˜æƒ³ä¼˜åŒ–ä¸€ä¸‹ï¼Œä½†æ˜¯ä»Šæ—¥çš„ç”Ÿæˆæ¬¡æ•°ç”¨å°½äº†ã€‚æ€»ä¹‹è¿™ä¸ªç½‘ç«™å¯¹æˆ‘çš„å†²å‡»è¿˜æ˜¯æ¯”è¾ƒå¤§çš„ã€‚ä¸€æ—¶é—´è®©æˆ‘æ„Ÿè§‰è‡ªå·±ä¹‹å‰å­¦çš„ä¸œè¥¿éƒ½ç™½è´¹äº†ï¼Œè‡ªå·±ä¸€å¤©å†™çš„ç½‘ç«™ï¼Œå®ƒä½¿ç”¨å‡ åˆ†é’Ÿå°±èƒ½æå®šï¼Œè€Œä¸”è¿˜ç¾è§‚ã€‚ä¸å¾—ä¸æƒŠå¹ç›®å‰AIå‘å±•çš„é€Ÿåº¦ï¼Œè‡ªå·±è¿˜æ˜¯è¦æŒæ¡ä¸€äº›æ ¸å¿ƒæŠ€èƒ½ï¼Œä¸ç„¶å…ä¸äº†è¢«æ·˜æ±°ã€‚</p><h2 id="å…¨éƒ¨é¡µé¢">å…¨éƒ¨é¡µé¢</h2><p><imgsrc="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/image-20241123143233687.png"alt="image-20241123143233687" />â€‹</p><p><imgsrc="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/image-20241123143249198.png"alt="image-20241123143249198" />â€‹</p><p><imgsrc="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/image-20241123143259159.png"alt="image-20241123143259159" />â€‹</p><p><imgsrc="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/image-20241123143337907.png"alt="image-20241123143337907" />â€‹</p><p><imgsrc="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/image-20241123143346607.png"alt="image-20241123143346607" />â€‹</p>]]></content>
    
    
    <summary type="html">ä½¿ç”¨v0.dev.chatä»¥é—®ç­”å½¢å¼ç”Ÿæˆä»£ç æµ‹è¯•</summary>
    
    
    
    <category term="æŠ€æœ¯" scheme="http://example.com/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
    <category term="AIä»£ç ç”Ÿæˆ" scheme="http://example.com/tags/AI%E4%BB%A3%E7%A0%81%E7%94%9F%E6%88%90/"/>
    
    <category term="å¤§æ¨¡å‹" scheme="http://example.com/tags/%E5%A4%A7%E6%A8%A1%E5%9E%8B/"/>
    
    <category term="v0.chat" scheme="http://example.com/tags/v0-chat/"/>
    
  </entry>
  
  <entry>
    <title>åœ¨powershellä¸Šç¦æ­¢è¿è¡Œè„šæœ¬</title>
    <link href="http://example.com/2025/02/08/034%20Powershell%E9%99%90%E5%88%B6/"/>
    <id>http://example.com/2025/02/08/034%20Powershell%E9%99%90%E5%88%B6/</id>
    <published>2025-02-08T06:33:00.000Z</published>
    <updated>2025-02-08T11:39:29.438Z</updated>
    
    <content type="html"><![CDATA[<div class="note note-success">            <p>æœ¬æ–‡æœ€æ–°æ›´æ–°äº 2025/02/08 ä¸‹åˆ</p>          </div><p>åœ¨ä½¿ç”¨<code>tabby</code>è¿è¡Œ<code>PowerShell</code>æ—¶ï¼Œè¾“å…¥å‘½ä»¤è¡Œ<code>hexo s</code>å‡ºç°å¦‚ä¸‹æŠ¥é”™</p><figure><imgsrc="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/picgo/image-20250208144105189.png"alt="image-20250208144105189" /><figcaption aria-hidden="true">image-20250208144105189</figcaption></figure><p><strong>åˆ†æåŸå› </strong></p><p><code>PowerShell</code>æ‰§è¡Œç­–ç•¥æ˜¯<code>Restricted</code>ã€‚<code>Restricted</code> æ‰§è¡Œç­–ç•¥ä¸å…è®¸ä»»ä½•è„šæœ¬è¿è¡Œã€‚</p><p>æŸ¥çœ‹æ‰§è¡Œç­–ç•¥<code>get-executionpolicy</code></p><figure><imgsrc="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/picgo/image-20250208143829255.png"alt="image-20250208143829255" /><figcaption aria-hidden="true">image-20250208143829255</figcaption></figure><p><strong>è§£å†³æ–¹æ³•</strong></p><p>ç®¡ç†å‘˜èº«ä»½æ‰“å¼€<code>PowerShell</code> è¾“å…¥<code>set-executionpolicy remotesigned</code>æ›´æ”¹æ‰§è¡Œç­–ç•¥</p><figure><imgsrc="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/picgo/image-20250208143928799.png"alt="image-20250208143928799" /><figcaption aria-hidden="true">image-20250208143928799</figcaption></figure>]]></content>
    
    
    <summary type="html">è§£å†³åœ¨powershellç¦æ­¢è¿è¡Œè„šæœ¬é—®é¢˜</summary>
    
    
    
    <category term="æŠ€æœ¯" scheme="http://example.com/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
    <category term="powershell" scheme="http://example.com/tags/powershell/"/>
    
  </entry>
  
  <entry>
    <title>The Spalart-Allmaras Turbulence Model</title>
    <link href="http://example.com/2024/07/30/033%20%E6%B9%8D%E6%B5%81%E6%A8%A1%E5%9E%8B%E4%B9%8BSpalart-Allmaras/"/>
    <id>http://example.com/2024/07/30/033%20%E6%B9%8D%E6%B5%81%E6%A8%A1%E5%9E%8B%E4%B9%8BSpalart-Allmaras/</id>
    <published>2024-07-30T11:26:00.000Z</published>
    <updated>2025-02-08T06:47:20.944Z</updated>
    
    <content type="html"><![CDATA[<h1 id="å†å²å‘å±•">1ã€å†å²å‘å±•</h1><p>æµä½“åŠ¨åŠ›å­¦ä¸­æè¿°æµä½“åœ¨å¤–åŠ›ä½œç”¨ä¸‹æµåŠ¨çš„ä¸»è¦æ§åˆ¶æ–¹ç¨‹æ˜¯<strong>çº³ç»´-æ–¯æ‰˜å…‹æ–¯æ–¹ç¨‹</strong>ã€‚è¿™äº›æ–¹ç¨‹çš„å¼ºå¤§ä¹‹å¤„åœ¨äºå®ƒä»¬èƒ½å¤Ÿæè¿°ä½œç”¨åœ¨æµä½“ä¸Šçš„ä»»ä½•åŠ›çš„å½±å“ä»¥åŠç”±æ­¤äº§ç”Ÿçš„æµåŠ¨è¡Œä¸ºã€‚ç„¶è€Œï¼Œ<em>å®ƒä»¬ä¸èƒ½é’ˆå¯¹æ¯ä¸ªç³»ç»Ÿæˆ–æµé‡æƒ…å†µä»¥å°é—­å½¢å¼æ±‚è§£ã€‚</em></p><p>ç”±äºæœ€æ—© 1973 å¹´æå‡ºçš„ ke æ¨¡å‹æ— æ³•å‡†ç¡®é¢„æµ‹é€†å‹åŠ›æ¢¯åº¦ adverse pressuregradient ä¸‹çš„è¾¹ç•Œå±‚è¿åŠ¨ï¼ŒSpalart-Allmaras Modelï¼ˆ1994ï¼‰ã€ï¼ˆ1998ï¼‰ä»¥åŠï¼ˆ1994ï¼‰åˆ†åˆ«è¢«æå‡ºã€‚</p><p>åœ¨ç‰©ç†å­¦ä¸­ï¼ŒSpalart-Allmarasæ¨¡å‹æ˜¯ä¸€ç§å•æ–¹ç¨‹æ¨¡å‹ï¼Œå¯æ±‚è§£è¿åŠ¨æ¶¡æµæ¹æµç²˜åº¦çš„æ¨¡æ‹Ÿè¾“è¿æ–¹ç¨‹ã€‚åœ¨å…¶åŸå§‹å½¢å¼ä¸­ï¼Œè¯¥æ¨¡å‹å®é™…ä¸Šæ˜¯ä¸€ä¸ªä½é›·è¯ºæ•°æ¨¡å‹ï¼Œéœ€è¦æ­£ç¡®è§£æè¾¹ç•Œå±‚çš„ç²˜åº¦å½±å“åŒºåŸŸï¼ˆy+~1ä¸ªç½‘æ ¼ï¼‰ã€‚å®ƒæ²¡æœ‰é’ˆå¯¹ä¸€èˆ¬å·¥ä¸šæµåŠ¨è¿›è¡Œæ ‡å®šï¼Œå¯¹äºä¸€äº›è‡ªç”±å‰ªåˆ‡æµï¼Œå°¤å…¶æ˜¯å¹³é¢å’Œåœ†å½¢å°„æµï¼Œç¡®å®ä¼šäº§ç”Ÿè¾ƒå¤§çš„è¯¯å·®ã€‚æ­¤å¤–ï¼Œä¸èƒ½ä¾é å®ƒæ¥é¢„æµ‹å‡åŒ€ã€å„å‘åŒæ€§æ¹æµçš„è¡°å‡ã€‚</p><h1 id="åŸºæœ¬å½¢å¼">2ã€åŸºæœ¬å½¢å¼</h1><p><spanclass="math display">\[\tau_{ij}=2\mu_t\left(S_{ij}-\frac{1}{3}\frac{\partialu_k}{\partial x_k}\delta_{ij}\right)-\frac{2}{3}\rhok\delta_{ij}\]</span></p><p>Spalart-Allmaras æ¹æµæ¨¡å‹éµå¾ªä¸€ä¸ªæè¿°è¿åŠ¨ç²˜åº¦ç±»å˜é‡ï¼ˆç§°ä¸ºSpalart-Allmaras å˜é‡ï¼‰çš„åŠ¨æ€æ–¹ç¨‹ï¼š</p><p><span class="math display">\[\frac{\partial\bar{v}}{\partialt}+u_{j}\frac{\partial\bar{v}}{\partialx_{j}}=C_{b,1}(1-f_{t,2})\hat{S}\bar{v}-[c_{w,1}f_{w}-\frac{c_{b,1}}{\kappa^{2}}f_{t,2}](\frac{\bar{v}}{d})^{2}+\frac{1}{\sigma}[\frac{\partial}{\partialx_{j}}((v+\bar{v})\frac{\partial\bar{v}}{\partialx_{j}})+c_{b,2}\frac{\partial\bar{v}}{\partialx_{i}}\frac{\partial\bar{v}}{\partial x_{i}}]\]</span></p><p>è¯¥æ–¹ç¨‹çš„ç›®æ ‡æ˜¯ç¡®å®šæ¹æµæ¶¡æµç²˜åº¦ï¼Œå…¶ç”±ä»¥ä¸‹å…¬å¼ç¡®å®šï¼š</p><p><imgsrc="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/20240730194639.png" /></p><p>åœ¨è¿™äº›æ–¹ç¨‹ä¸­ï¼Œåˆ†å­è¿åŠ¨ç²˜åº¦ä¸º ğœˆ = Î¼/â´ï¼Œæµä½“å¯†åº¦ä¸º â´ï¼ŒÎ¼æ˜¯æµä½“çš„åˆ†å­åŠ¨åŠ›ç²˜åº¦ã€‚æ¨¡å‹ä¸­çš„å…¶ä»–å‚æ•°ä»¥åœºç‚¹åˆ°æœ€è¿‘å£ dçš„è·ç¦»å’Œæ¶¡åº¦å¤§å°ç»™å‡º</p><p><imgsrc="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/20240730194722.png" /></p><p><imgsrc="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/20240730194738.png" /></p><p>ä»¥ä¸‹å®šä¹‰ï¼š</p><p><imgsrc="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/20240730194758.png" /></p><p>ä»ä¸Šé¢çš„å®šä¹‰ä¸­å¯ä»¥çœ‹å‡ºå‡ ä¸ªå¸¸é‡ã€‚è¿™äº›å¸¸é‡å®šä¹‰å¦‚ä¸‹ï¼š</p><p><imgsrc="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/20240730194819.png" /></p><p>ç”±äºæ‰€è€ƒè™‘çš„ç³»ç»Ÿä»¥å¢™ä¸ºç•Œï¼Œå› æ­¤æ²¿ç€å¢™çš„è¡¨é¢æœ‰ä¸€ä¸ªå›ºå®šè¾¹ç•Œæ¡ä»¶ã€‚å…¶ä»–è¾¹ç•Œæ¡ä»¶å¯èƒ½ä¼šæ–½åŠ åœ¨ç³»ç»Ÿçš„å…¶ä»–åœ°æ–¹ï¼Œå°½ç®¡è¿™äº›è¾¹ç•Œæ¡ä»¶æ˜¯å¦ä¼šå¹²æ‰°è§£å†³è¿œç¦»å£æœ¬èº«çš„æ¶¡æµå¯èƒ½å€¼å¾—æ€€ç–‘ã€‚æœ€åï¼Œæˆ‘ä»¬å¯¹è¿œåœºSpalart-Allmaras å˜é‡æœ‰ä»¥ä¸‹æ¡ä»¶ï¼š</p><p><imgsrc="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/20240730194845.png" /></p><p>ä¼˜ç‚¹ï¼š</p><ol type="1"><li>é™ç»´å¯ä»¥é™ä½é—®é¢˜çš„å¤æ‚æ€§å’Œæ•´ä½“æ¨¡æ‹Ÿæ—¶é—´ã€‚</li><li>æ— éœ€ä½¿ç”¨æ²¿æ¹æµçš„å‰ªåˆ‡å±‚çš„å±€éƒ¨åšåº¦æ¥è®¡ç®—é•¿åº¦å°ºåº¦ã€‚</li><li>å¯¹äºå…·æœ‰<strong>ä»»æ„å‹åŠ›æ¢¯åº¦</strong>çš„è¾¹ç•Œå±‚æµå¾ˆæœ‰ç”¨ã€‚</li><li>ç¨³å¥ï¼›å¯¹äºä½é›·è¯ºæ•° k - Îµæ¨¡å‹ä¸æ”¶æ•›ç”šè‡³å‘æ•£çš„ç›¸å¯¹ç²—ç³™çš„ç½‘æ ¼ï¼Œå®ƒå¯ä»¥ç»™å‡ºåˆç†çš„ç»“æœ</li></ol><p>ç¼ºç‚¹ï¼š</p><ol type="1"><li>ä¸é€‚ç”¨äºæ¶‰åŠå–·å°„çŠ¶è‡ªç”±å‰ªåˆ‡åŒºåŸŸçš„åº”ç”¨</li><li></li></ol><h1 id="ç”¨é€”">3ã€ç”¨é€”</h1><h1 id="æ³¨æ„äº‹é¡¹">4ã€æ³¨æ„äº‹é¡¹</h1><p>å‚è€ƒï¼š</p><ol type="1"><li>https://resources.system-analysis.cadence.com/blog/msa2024-what-is-the-spalart-allmaras-turbulence-model</li><li>https://www.cfd-online.com/Wiki/Spalart-Allmaras_model</li><li>https://www.youtube.com/watch?v=Xivc0EIGFQw</li><li>https://zhuanlan.zhihu.com/p/408434524</li></ol>]]></content>
    
    
    <summary type="html">ä»‹ç»The Spalart-Allmaras Turbulence Modelçš„å†å²åŠå…¬å¼</summary>
    
    
    
    <category term="æ¨¡æ‹Ÿ" scheme="http://example.com/categories/%E6%A8%A1%E6%8B%9F/"/>
    
    <category term="Fluent" scheme="http://example.com/categories/%E6%A8%A1%E6%8B%9F/Fluent/"/>
    
    
    <category term="Fluent" scheme="http://example.com/tags/Fluent/"/>
    
    <category term="æ¨¡æ‹Ÿ" scheme="http://example.com/tags/%E6%A8%A1%E6%8B%9F/"/>
    
    <category term="å­¦ä¹ ç¬”è®°" scheme="http://example.com/tags/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    
    <category term="æ¹æµæ¨¡å‹" scheme="http://example.com/tags/%E6%B9%8D%E6%B5%81%E6%A8%A1%E5%9E%8B/"/>
    
  </entry>
  
  <entry>
    <title>Pythonè‡ªåŠ¨æ‰§è¡Œfluent</title>
    <link href="http://example.com/2024/07/30/032%20Python%E8%87%AA%E5%8A%A8%E6%89%A7%E8%A1%8Cfluent/"/>
    <id>http://example.com/2024/07/30/032%20Python%E8%87%AA%E5%8A%A8%E6%89%A7%E8%A1%8Cfluent/</id>
    <published>2024-07-30T10:53:00.000Z</published>
    <updated>2025-02-08T06:47:20.944Z</updated>
    
    <content type="html"><![CDATA[<h1 id="tui-å‘½ä»¤">TUI å‘½ä»¤</h1><p>TUI å‘½ä»¤åŒ…æ‹¬ Fluent ä¸­çš„å…¨éƒ¨è®¾ç½®ï¼Œè§ä¸Šä¸€ç¯‡ Fluent TUI å‘½ä»¤ã€‚</p><p>æœ€é‡è¦çš„æ˜¯è¦åŒ…å«æ¨å‡ºç¨‹åºå‘½ä»¤ï¼Œå³<code>exit ok</code></p><p>å…¨éƒ¨ TUI å‘½ä»¤å¦‚ä¸‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br></pre></td><td class="code"><pre><code class="hljs tui">; 1ã€è¯»å–ç½‘æ ¼æ–‡ä»¶<br>rc fluent.msh<br>mesh/check<br>mesh/quality<br><br><br>display mesh-outline<br><br>; 2ã€å‹¾é€‰ç¬æ€<br>/define/models/unsteady-2nd-order yes<br><br>; 3ã€è®¾ç½®é‡åŠ›åŠ é€Ÿåº¦<br>/define/operating-conditions/gravity yes 0 -9.81 0<br><br>; 4ã€å¼€å¯èƒ½é‡æ–¹ç¨‹<br>/define/models/energy y y y<br><br>; 5ã€æ¹æµæ¨¡å‹<br>/define/models/viscous/spalart-allmaras y<br><br>; 6ã€æ–°å¢æ··åˆæ°”ä½“<br>/define/models/species/species-transport y hydrogen-air<br>/define/materials/change-create hydrogen-air hydrogen-air y 2 h2 air 0 0 n n n n n n<br><br>; 7ã€ç®¡é“ææ–™åŠåœŸå£¤ææ–™<br>/define/materials/copy/solid/steel<br>/define/materials/change-create aluminum soil y constant 2650 y constant 789 y constant 2.9 y<br><br>; 8ã€è®¾ç½®è¾¹ç•Œæ¡ä»¶<br>/define/boundary-conditions/fluid solid fluid no no no no no  0 no 0 no 0 no  0 no 0 no 0 no no no no yes no no 1 no 0 no 0 no  0 no 1 no 0 yes no 245000000000 no 245000000000 no 245000000000 no no 502000 no 502000 no 502000 0 0 no 0.43 constant 1 yes no no no<br><br>/define/boundary-conditions/zone-type inlet pressure-inlet<br>/define/boundary-conditions/set/pressure-inlet inlet () p0 no 400000 q<br>/define/boundary-conditions/set/pressure-inlet inlet () supersonic/initial-gauge-pressure no 400000 q<br>/define/boundary-conditions/set/pressure-inlet inlet () ke-spec no no no yes q<br>/define/boundary-conditions/set/pressure-inlet inlet () turb-hydraulic-diam 0.01 q<br>/define/boundary-conditions/set/pressure-inlet inlet () t0 no 288.15 q<br>/define/boundary-conditions/set/pressure-inlet inlet () species-in-mole-fractions yes q<br>/define/boundary-conditions/set/pressure-inlet inlet () mf no 1 q<br><br>/define/boundary-conditions/set/pressure-outlet outlet_x1 outlet_x2 outlet_y1 outlet_z1 outlet_z2 () t0 no 288.15 q<br><br>/define/boundary-conditions wall pipe 0 no 0 yes steel no no 0 no no no no no 0 no 0.5 yes no 1<br>/define/boundary-conditions wall ground 0 no 0 yes soil no no 0 no no no no no 0 no 0.5 yes no 1<br><br>; 9ã€åˆ›å»ºå¹¶è®¾ç½®ç›‘æµ‹ç‚¹å’Œé¢<br>surf point-surf point-1 0 0.4 0 q<br>surf point-surf point-2 0 0.5 0 q<br>surf point-surf point-3 2 0.4 0 q<br><br>/solve/report-definitions add report1 surface-vertexavg field molef-h2 surface-names point-1 () q<br><br>/surface/plane plane1 0 0 0 0 1 0 0 0 1<br><br>; 10ã€åˆå§‹åŒ–<br>/solve/initialize/set-defaults/ temperature 288.15<br>/solve/initialize/set-defaults/ pressure 0<br>/solve/initialize/set-defaults/ species-0 0<br><br>/solve/initialize initialize-flow ok<br>; æ˜¾ç¤ºä¸€ä¸‹contour<br>;/display/contour molef-h2 0 1<br><br><br>; 11ã€è®¾ç½®ä¿å­˜æ ¼å¼åŠé¢‘ç‡<br>; è®¾ç½®æ•°æ®ä¿å­˜å†…å®¹<br>/file/data-file-options molef-h2 molef-air absolute-pressure air h2 velocity-magnitude mesh-x-velocity mesh-y-velocity mesh-z-velocity pressure density total-pressure total-temperature  x-velocity y-velocity z-velocity viscosity-eff viscosity-lam viscosity-ratio viscosity-turb vorticity-mag q<br>; ä¿å­˜tecplotæ–‡ä»¶<br>/file/transient-export/tecplot  C:/Users/23984/Desktop/tui_test/tecplot1 ground inlet outlet_x1 outlet_x2 outlet_y1 outlet_z1 outlet_z2 pipe () molef-h2 molef-air absolute-pressure air h2 velocity-magnitude mesh-x-velocity mesh-y-velocity mesh-z-velocity pressure density total-pressure total-temperature  x-velocity y-velocity z-velocity viscosity-eff viscosity-lam viscosity-ratio viscosity-turb vorticity-mag q tecplot1 10 time-step<br><br>; 12ã€åˆ›å»ºcontourå¹¶ä¿å­˜åŠ¨ç”»<br>/display/objects/create contour &quot;contour-1&quot; filled yes field molef-h2 surfaces-list plane1 () q<br>/solve/animate/objects/create &quot;animation-1&quot; animate-on contour-1 storage-dir C:\Users\23984\Desktop\tui_test frequency-of &quot;Time Step&quot; q<br><br>; 13ã€è®¾ç½®è¿­ä»£å‚æ•°<br>/solve/set/max-iterations-per-time-step 50<br>/solve/set/time-step 1<br>/solve/set/number-of-time-steps 1000<br>/file/write-case/setting1.cas<br><br>; 14ã€å¼€å§‹è®¡ç®—<br>/solve/dual-time-iterate 1 2<br><br>exit ok<br></code></pre></td></tr></table></figure><h1 id="python-ä»£ç ">Python ä»£ç </h1><p>å«æ³¨é‡Š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> os<br><span class="hljs-keyword">import</span> subprocess<br><span class="hljs-keyword">import</span> time<br><br><span class="hljs-comment"># è·å–pythonæ–‡ä»¶è¿è¡Œçš„ç›®å½•æ–‡ä»¶å¤¹</span><br>path, filename = os.path.split(os.path.abspath(__file__))<br><br><span class="hljs-comment"># å®šä¹‰fluent.exeçš„ç›®å½•</span><br>fluent_path = <span class="hljs-string">&quot;D:\\ANSYS18\\ANSYS Inc\\v180\\fluent\\ntbin\\win64&quot;</span><br><br><span class="hljs-comment"># å®šä¹‰è¦è¿è¡Œçš„å‘½ä»¤</span><br>command_list = []<br>command_list.append(<span class="hljs-string">f&#x27;&quot;<span class="hljs-subst">&#123;fluent_path&#125;</span>\\fluent.exe&quot; 3ddp -t4 -i jou1.jou&#x27;</span>)<br>command_list.append(<span class="hljs-string">f&#x27;&quot;<span class="hljs-subst">&#123;fluent_path&#125;</span>\\fluent.exe&quot; 3ddp -t4 -i jou2.jou&#x27;</span>)<br><br>time.sleep(<span class="hljs-number">1</span>)<br><br><span class="hljs-comment"># å®šä¹‰fluentç¨‹åºå¾ªç¯</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">run_fluent</span>(<span class="hljs-params">command,path</span>):<br>    process = subprocess.Popen(command, stdout=subprocess.PIPE, stderr=subprocess.PIPE, cwd=path, shell=<span class="hljs-literal">True</span>, universal_newlines=<span class="hljs-literal">True</span>)<br>    <span class="hljs-comment"># æŒç»­ç›‘æ§è¾“å‡ºï¼Œå¦‚æœæ£€æµ‹åˆ°ç¨‹åºç»“æŸå°±å¾€ä¸‹æ‰§è¡Œ</span><br>    <span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:<br>        output = process.stdout.readline()<br>        <span class="hljs-keyword">if</span> output == <span class="hljs-string">&#x27;&#x27;</span> <span class="hljs-keyword">and</span> process.poll() <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> <span class="hljs-literal">None</span>:<br>            <span class="hljs-keyword">break</span><br>        <span class="hljs-keyword">if</span> output:<br>            <span class="hljs-built_in">print</span>(output.strip())<br>    rc = process.poll()<br><br>count = <span class="hljs-number">10</span><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">0</span>,count):<br>  <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;å¼€å§‹å¾ªç¯ç¬¬<span class="hljs-subst">&#123;i&#125;</span>ä¸ª&quot;</span>)<br>  run_fluent(command_list[i],path)<br>  <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;ç¬¬<span class="hljs-subst">&#123;i&#125;</span>ä¸ªå¾ªç¯ç»“æŸ&quot;</span>)<br><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;ç¨‹åºç»“æŸ&quot;</span>)<br></code></pre></td></tr></table></figure><blockquote><p>è¿™é‡Œå¦‚æœæƒ³ä½¿ç”¨ pythonç®—ä¸€äº›å˜é‡ï¼Œç„¶åä¼ å…¥ç¨‹åºä¸­è‡ªåŠ¨æ‰§è¡Œï¼Œè¿™é‡Œæä¾›ä¸€ç§æ–¹æ³•ï¼Œå°±æ˜¯ä¿®æ”¹ tuiæ–‡ä»¶ï¼ˆ.jouï¼‰å†…çš„å†…å®¹ã€‚</p></blockquote>]]></content>
    
    
    <summary type="html">åŸºäºpythonçš„subprocessçº¿ç¨‹åº“å’ŒTUIå‘½ä»¤è‡ªåŠ¨è¿è¡Œfluentç®—ä¾‹</summary>
    
    
    
    <category term="æ¨¡æ‹Ÿ" scheme="http://example.com/categories/%E6%A8%A1%E6%8B%9F/"/>
    
    <category term="Fluent" scheme="http://example.com/categories/%E6%A8%A1%E6%8B%9F/Fluent/"/>
    
    
    <category term="Fluent" scheme="http://example.com/tags/Fluent/"/>
    
    <category term="æ¨¡æ‹Ÿ" scheme="http://example.com/tags/%E6%A8%A1%E6%8B%9F/"/>
    
    <category term="Python" scheme="http://example.com/tags/Python/"/>
    
    <category term="å­¦ä¹ ç¬”è®°" scheme="http://example.com/tags/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    
    <category term="TUI" scheme="http://example.com/tags/TUI/"/>
    
    <category term="è‡ªåŠ¨åŒ–" scheme="http://example.com/tags/%E8%87%AA%E5%8A%A8%E5%8C%96/"/>
    
  </entry>
  
  <entry>
    <title>TUIå‘½ä»¤</title>
    <link href="http://example.com/2024/07/27/031%20Fleunt%20Tui%E5%91%BD%E4%BB%A4/"/>
    <id>http://example.com/2024/07/27/031%20Fleunt%20Tui%E5%91%BD%E4%BB%A4/</id>
    <published>2024-07-27T13:29:00.000Z</published>
    <updated>2025-02-08T06:47:20.944Z</updated>
    
    <content type="html"><![CDATA[<h1 id="tui-å‘½ä»¤åŸºæœ¬è®¤è¯†">1ã€TUI å‘½ä»¤åŸºæœ¬è®¤è¯†</h1><p>Fluent ä¸­çš„ Tui å‘½ä»¤èƒ½ä½¿ Fluentè‡ªåŠ¨åŒ–æ“ä½œï¼ŒåŒ…æ‹¬æ–‡ä»¶è®¾ç½®ã€æ¡ˆä¾‹è¯»å–ã€å‚æ•°è®¾ç½®ç­‰åŠŸèƒ½ã€‚</p><h1 id="åŸºæœ¬æ“ä½œ">2ã€åŸºæœ¬æ“ä½œ</h1><p>åœ¨ Fluent ä¸­çš„å‘½ä»¤è¡Œå¯è¿›è¡Œ tui å‘½ä»¤æ“ä½œ</p><ul><li>å›è½¦å¯æŸ¥çœ‹å‘½ä»¤æç¤ºï¼›</li><li>qï¼šè¿”å›ä¸Šä¸€çº§</li></ul><p><imgsrc="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/20240727213342.png" /></p><h1 id="æ¡ˆä¾‹">3ã€æ¡ˆä¾‹</h1><p>æ¡ˆä¾‹ä¸­åŒ…å«æ³¨é‡Š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><code class="hljs jou">; 1ã€è¯»å–ç½‘æ ¼æ–‡ä»¶<br>rc fluent.msh<br>mesh/check<br>mesh/quality<br><br><br>display mesh-outline<br><br>; 2ã€å‹¾é€‰ç¬æ€<br>/define/models/unsteady-2nd-order yes<br><br>; 3ã€è®¾ç½®é‡åŠ›åŠ é€Ÿåº¦<br>/define/operating-conditions/gravity yes 0 -9.81 0<br><br>; 4ã€å¼€å¯èƒ½é‡æ–¹ç¨‹<br>/define/models/energy y y y<br><br>; 5ã€æ¹æµæ¨¡å‹<br>/define/models/viscous/spalart-allmaras y<br><br>; 6ã€æ–°å¢æ··åˆæ°”ä½“<br>/define/models/species/species-transport y hydrogen-air<br>/define/materials/change-create hydrogen-air hydrogen-air y 2 h2 air 0 0 n n n n n n<br><br>; 7ã€ç®¡é“ææ–™åŠåœŸå£¤ææ–™<br>/define/materials/copy/solid/steel<br>/define/materials/change-create aluminum soil y constant 2650 y constant 789 y constant 2.9 y<br><br>; 8ã€è®¾ç½®è¾¹ç•Œæ¡ä»¶<br>/define/boundary-conditions/fluid solid fluid no no no no no  0 no 0 no 0 no  0 no 0 no 0 no no no no yes no no 1 no 0 no 0 no  0 no 1 no 0 yes no 245000000000 no 245000000000 no 245000000000 no no 502000 no 502000 no 502000 0 0 no 0.43 constant 1 yes no no no<br><br>/define/boundary-conditions/zone-type inlet pressure-inlet<br>/define/boundary-conditions/set/pressure-inlet inlet () p0 no 400000 q<br>/define/boundary-conditions/set/pressure-inlet inlet () supersonic/initial-gauge-pressure no 400000 q<br>/define/boundary-conditions/set/pressure-inlet inlet () ke-spec no no no yes q<br>/define/boundary-conditions/set/pressure-inlet inlet () turb-hydraulic-diam 0.01 q<br>/define/boundary-conditions/set/pressure-inlet inlet () t0 no 288.15 q<br>/define/boundary-conditions/set/pressure-inlet inlet () species-in-mole-fractions yes q<br>/define/boundary-conditions/set/pressure-inlet inlet () mf no 1 q<br><br>/define/boundary-conditions/set/pressure-outlet outlet_x1 outlet_x2 outlet_y1 outlet_z1 outlet_z2 () t0 no 288.15 q<br><br>/define/boundary-conditions wall pipe 0 no 0 yes steel no no 0 no no no no no 0 no 0.5 yes no 1<br>/define/boundary-conditions wall ground 0 no 0 yes soil no no 0 no no no no no 0 no 0.5 yes no 1<br><br>; 9ã€åˆ›å»ºå¹¶è®¾ç½®ç›‘æµ‹ç‚¹å’Œé¢<br>surf point-surf point-1 0 0.4 0 q<br>surf point-surf point-2 0 0.5 0 q<br>surf point-surf point-3 2 0.4 0 q<br><br>/solve/report-definitions add report1 surface-vertexavg field molef-h2 surface-names point-1 () q<br><br>/surface/plane plane1 0 0 0 0 1 0 0 0 1<br><br>; 10ã€åˆå§‹åŒ–<br>/solve/initialize/set-defaults/ temperature 288.15<br>/solve/initialize/set-defaults/ pressure 0<br>/solve/initialize/set-defaults/ species-0 0<br><br>/solve/initialize initialize-flow ok<br>; æ˜¾ç¤ºä¸€ä¸‹contour<br>;/display/contour molef-h2 0 1<br><br><br>; 11ã€è®¾ç½®ä¿å­˜æ ¼å¼åŠé¢‘ç‡<br>; è®¾ç½®æ•°æ®ä¿å­˜å†…å®¹<br>/file/data-file-options molef-h2 molef-air absolute-pressure air h2 velocity-magnitude mesh-x-velocity mesh-y-velocity mesh-z-velocity pressure density total-pressure total-temperature  x-velocity y-velocity z-velocity viscosity-eff viscosity-lam viscosity-ratio viscosity-turb vorticity-mag q<br>; ä¿å­˜tecplotæ–‡ä»¶<br>/file/transient-export/tecplot  C:/Users/23984/Desktop/tui_test/tecplot1 ground inlet outlet_x1 outlet_x2 outlet_y1 outlet_z1 outlet_z2 pipe () molef-h2 molef-air absolute-pressure air h2 velocity-magnitude mesh-x-velocity mesh-y-velocity mesh-z-velocity pressure density total-pressure total-temperature  x-velocity y-velocity z-velocity viscosity-eff viscosity-lam viscosity-ratio viscosity-turb vorticity-mag q tecplot1 10 time-step<br><br>; 12ã€åˆ›å»ºcontourå¹¶ä¿å­˜åŠ¨ç”»<br>/display/objects/create contour &quot;contour-1&quot; filled yes field molef-h2 surfaces-list plane1 () q<br>/solve/animate/objects/create &quot;animation-1&quot; animate-on contour-1 storage-dir C:\Users\23984\Desktop\tui_test frequency-of &quot;Time Step&quot; q<br><br>; 13ã€è®¾ç½®è¿­ä»£å‚æ•°<br>/solve/set/max-iterations-per-time-step 50<br>/solve/set/time-step 1<br>/solve/set/number-of-time-steps 1000<br>/file/write-case/setting.cas<br><br>; 14ã€å¼€å§‹è®¡ç®—<br>/solve/dual-time-iterate 1000 20<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">å­¦ä¹ Fluentçš„TUIå‘½ä»¤åŸºç¡€çŸ¥è¯†ä»¥åŠå¦‚ä½•è‡ªå·±å†™TUI</summary>
    
    
    
    <category term="æ¨¡æ‹Ÿ" scheme="http://example.com/categories/%E6%A8%A1%E6%8B%9F/"/>
    
    <category term="Fluent" scheme="http://example.com/categories/%E6%A8%A1%E6%8B%9F/Fluent/"/>
    
    
    <category term="Fluent" scheme="http://example.com/tags/Fluent/"/>
    
    <category term="æ¨¡æ‹Ÿ" scheme="http://example.com/tags/%E6%A8%A1%E6%8B%9F/"/>
    
    <category term="å­¦ä¹ ç¬”è®°" scheme="http://example.com/tags/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    
    <category term="TUI" scheme="http://example.com/tags/TUI/"/>
    
  </entry>
  
  <entry>
    <title>åº“æœ—æ•°</title>
    <link href="http://example.com/2024/07/26/030%20%E5%BA%93%E6%9C%97%E6%95%B0/"/>
    <id>http://example.com/2024/07/26/030%20%E5%BA%93%E6%9C%97%E6%95%B0/</id>
    <published>2024-07-26T11:34:00.000Z</published>
    <updated>2025-02-08T06:47:20.943Z</updated>
    
    <content type="html"><![CDATA[<h1 id="æ—¶é—´æ­¥é•¿çš„ç¡®å®š">æ—¶é—´æ­¥é•¿çš„ç¡®å®š</h1><p>https://blog.csdn.net/staywithmoon/article/details/124253642</p><p>https://blog.csdn.net/weixin_45560646/article/details/126922667</p><p>https://www.youtube.com/watch?v=WBWY46ynRk0</p><h2 id="åº“æœ—æ•°">1ã€åº“æœ—æ•°</h2><h3 id="åŸºæœ¬æ¦‚å¿µ">1.1 åŸºæœ¬æ¦‚å¿µ</h3><p>åº“æœ—æ•°æ˜¯ç”¨æ¥è¡¡é‡æ•°å€¼è®¡ç®—ç¨³å®šæ€§çš„ä¸€ä¸ªç‰©ç†é‡ï¼Œä¹Ÿè¢«ç§°ä¸º<code>CFL</code>æ•°ã€<code>CFL</code>å‡†åˆ™ã€‚</p><p><span class="math display">\[Courant=\frac{u\Delta t}{\Deltax}\]</span></p><p>u ä¸ºæµä½“é€Ÿåº¦ï¼›Î”t ä¸ºæ—¶é—´æ­¥é•¿ï¼›Î”x ä¸ºç½‘æ ¼å°ºå¯¸ï¼›</p><blockquote><p><code>u*Î”t</code>è¡¨ç¤ºæµä½“åœ¨ Î”tæ—¶é—´å†…æµåŠ¨çš„è·ç¦»ï¼Œé™¤ä»¥ç½‘æ ¼å°ºå¯¸ï¼Œåˆ™è¡¨ç¤ºæµä½“åœ¨ä¸€ä¸ªæ—¶é—´æ­¥é•¿å†…æµè¿‡äº†å¤šå°‘ä¸ªç½‘æ ¼ã€‚</p></blockquote><p>ä¸€èˆ¬å–å€¼åœ¨<strong>1~10</strong>ä¹‹é—´æ¯”è¾ƒåˆé€‚ï¼Œå½“ç„¶è¦æ ¹æ®å®é™…æƒ…å†µï¼Œå¦‚æ”¶æ•›æ€§æ¯”è¾ƒå·®ï¼Œå¯é€‚å½“é™ä½è¿™ä¸ªæ•°å€¼ã€‚æ”¶æ•›æ€§æ¯”è¾ƒå¥½ï¼Œæ”¶æ•›é€Ÿåº¦æ…¢ï¼Œå¯é€‚å½“å¢åŠ åº“æœ—æ•°ã€‚Fluentå¸®åŠ©æ–‡æ¡£è®¤ä¸ºå¯¹äºå¤§å¤šæ•°é—®é¢˜ï¼Œåº“æœ—æ•°è®¾ç½®ä¸º 1 èƒ½å¤Ÿæ»¡è¶³è¦æ±‚ã€‚</p><p>å®é™…ä¸Šï¼ŒFluent å¾ˆå¤šæ¡ˆä¾‹çš„åº“æœ—æ•°éƒ½æ˜¯50ï¼Œè¿™ä¸»è¦æ˜¯é€‰æ‹©äº†éšå¼ç®—æ³•çš„åŸå› </p><h3 id="åº“æœ—æ•°çš„è®¾ç½®">1.2 <strong>åº“æœ—æ•°çš„è®¾ç½®</strong></h3><ul><li>æ˜¾ç¤ºæ ¼å¼ Explicit Formulationï¼šé»˜è®¤æ˜¯ 1ï¼Œå¯¹äº 2ç»´é—®é¢˜å¯é€‚å½“å¢åŠ åº“æœ—æ•°ï¼Œä½†ä¸è¦è¶…è¿‡2.0ã€‚å¦‚æœè®¾ç½®æ²¡æœ‰é—®é¢˜ï¼Œä½†æ˜¯è®¡ç®—å‘æ•£äº†ï¼Œæˆ–è€…æ®‹å·®ä¸Šå‡å¾—éå¸¸å¿«ï¼Œå°±å¿…é¡»é™ä½Courant numberï¼Œå¯èƒ½éœ€è¦é™ä½åˆ° 0.5ï¼Œç”šè‡³0.1ã€‚ä½†å¦‚æœæ”¶æ•›æ€§å¾ˆå¥½ï¼Œå°±å¯ä»¥å¢åŠ  Courant numberã€‚</li><li>éšå¼æ ¼å¼ Implicit Formulationï¼šé»˜è®¤åº“æœ—æ•°ä¸º 5.0ã€‚é€šå¸¸å¯ä»¥ å¢åŠ åˆ°10ã€20ã€100 ç”šè‡³æ›´é«˜ã€‚ä¸æ˜¾ç¤ºä¸€æ ·å¯æ ¹æ®æ”¶æ•›æƒ…å†µè¿›è¡Œæ›´æ”¹ã€‚</li></ul><blockquote><p>å¯¹äºéšå¼éå®šå¸¸æ ¼å¼ï¼šå¯¹äºä¸å¯å‹æµåŠ¨ï¼Œåœ¨æ¯ä¸ªæ—¶é—´æ­¥å†…ï¼Œä¸å¯å‹è§£å¿…é¡»è¿­ä»£ç›´è‡³æ”¶æ•›ã€‚</p><p>å¯¹äºæ˜¾å¼éå®šå¸¸æ ¼å¼ï¼šæ¯ä¸€ä¸ªè¿­ä»£å°±æ˜¯ä¸€ä¸ªæ—¶é—´æ­¥</p></blockquote><p>æ¯ä¸ªæ—¶é—´æ­¥å†…ç»“æœæ²¡æœ‰å¾—åˆ°æ”¶æ•›ï¼Œåˆ™å¾ˆæœ‰å¯èƒ½ä½ æ‰€å¾—åˆ°çš„ç»“æœæ˜¯ä¸çœŸå®çš„</p><h3 id="åº“æœ—æ•°æ¨è">1.3 åº“æœ—æ•°æ¨è</h3><ul><li>Large Eddy Simulation(0.5-1)</li><li>Free Surface Flows(&lt;1)</li><li>Compressible Flows(depends on speed of sound)</li><li>Turbomachinery(&lt;80)</li><li>Explicit Time Stepping(&lt;1)</li></ul>]]></content>
    
    
    <summary type="html">åº“æœ—æ•°åŸºæœ¬ä»‹ç»åŠæ¨èå€¼</summary>
    
    
    
    <category term="æ¨¡æ‹Ÿ" scheme="http://example.com/categories/%E6%A8%A1%E6%8B%9F/"/>
    
    <category term="Fluent" scheme="http://example.com/categories/%E6%A8%A1%E6%8B%9F/Fluent/"/>
    
    
    <category term="Fluent" scheme="http://example.com/tags/Fluent/"/>
    
    <category term="æ¨¡æ‹Ÿ" scheme="http://example.com/tags/%E6%A8%A1%E6%8B%9F/"/>
    
    <category term="å­¦ä¹ ç¬”è®°" scheme="http://example.com/tags/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    
    <category term="åº“æœ—æ•°" scheme="http://example.com/tags/%E5%BA%93%E6%9C%97%E6%95%B0/"/>
    
  </entry>
  
  <entry>
    <title>DPMé¢—ç²’æ¨¡å‹</title>
    <link href="http://example.com/2024/07/26/029%20Fluent%20DPM%E6%A8%A1%E5%9E%8B/"/>
    <id>http://example.com/2024/07/26/029%20Fluent%20DPM%E6%A8%A1%E5%9E%8B/</id>
    <published>2024-07-26T11:33:00.000Z</published>
    <updated>2025-02-08T06:47:20.943Z</updated>
    
    <content type="html"><![CDATA[<h1 id="å­¦ä¹ ç¬”è®°">1 å­¦ä¹ ç¬”è®°</h1><h2 id="fluent-é¢—ç²’æµ">0ã€Fluent é¢—ç²’æµ</h2><p>Fluent æœ‰ 3 ç§é¢—ç²’æ¨¡æ‹Ÿæ–¹æ³•</p><ol type="1"><li>æ¬§æ‹‰é¢—ç²’æµï¼ˆåŒæµä½“æ¨¡å‹ï¼‰ï¼šæŠŠé¢—ç²’å½“åšè¿ç»­ä»‹è´¨å¤„ç†ï¼Œä¼˜ç‚¹æ˜¯è®¡ç®—é‡å°ï¼Œä½†éœ€è¦æ›´å¤šçš„ç›¸äº’ä½œç”¨æ¨¡å‹ï¼Œæ¯”å¦‚é˜»åŠ›ç­‰ï¼Œå¤šç”¨äºæµåŒ–åºŠã€‚</li><li>DPM æ¨¡å‹ï¼ˆç¦»æ•£ç›¸æ¨¡å‹ï¼‰ï¼šDPMæ¨¡å‹ä¹‹é—´ä¸è€ƒè™‘ç¢°æ’ä¹Ÿä¸è€ƒè™‘ä½“ç§¯ç©ºé—´ï¼Œé€‚ç”¨äºæµä½“å ä¸»å¯¼ä½œç”¨çš„ï¼Œé¢—ç²’å æ¯”ä¸è¶…è¿‡10%ã€‚æ¨¡æ‹Ÿä¸€èˆ¬ç°å°˜ã€æ°”æº¶èƒ¶ç­‰å°é¢—ç²’çš„è¿åŠ¨ï¼Œä¹Ÿç»å¸¸é…åˆåŒ–å­¦ååº”ã€‚</li><li>DDPM æ¨¡å‹ï¼ˆç¨ å¯†ç¦»æ•£ç›¸æ¨¡å‹ï¼‰ï¼šDDPM æ˜¯ Dense Discrete Phase Modelçš„ç¼©å†™ï¼Œæ˜¯ä¸“é—¨ç”¨æ¥æ¨¡æ‹Ÿä¾‹å¦‚æµåŒ–åºŠè¿™ç§ç¨ å¯†é¢—ç²’æµçš„æ¨¡å‹ï¼Œå¯ä»¥ç†è§£ä¸ºç®€åŒ–äº†çš„DEMã€‚ä»–å’Œ DPMçš„åŒºåˆ«å°±æ˜¯è€ƒè™‘äº†<strong>ä½“ç§¯åˆ†æ•°</strong>ï¼Œæ˜¯æœ‰å­”éš™ç‡çš„ï¼Œåå¤„ç†ä¸­èƒ½å¤ŸæŸ¥çœ‹é¢—ç²’æ‰€å çš„ä½“ç§¯åˆ†æ•°ï¼Œåœ¨ç›¸é—´ç›¸äº’ä½œç”¨åŠ›ä¹Ÿå¯ä»¥è€ƒè™‘é¢—ç²’ä¹‹é—´çš„ç¢°æ’ï¼Œä½†æ˜¯å¯¹äºç¢°æ’çš„è®¡ç®—æ˜¯è¿›è¡Œäº†æ¨¡åŒ–çš„ï¼Œä¸æ˜¯ç”¨è½¯çƒæ¨¡å‹è®¡ç®—çœŸå®çš„ç¢°æ’è¿‡ç¨‹ï¼Œé¢—ç²’é—´çš„ç¢°æ’äº§ç”Ÿçš„åŠ›æ˜¯æ ¹æ®KTGF ä¸‹é¢—ç²’çš„ stress tensori è®¡ç®—å¾—åˆ°ã€‚</li><li>DEM ç¦»æ•£å…ƒæ¨¡å‹ï¼šå¯è€ƒè™‘é¢—ç²’çš„çœŸå®ç¢°æ’ï¼Œå¯é‡‡ç”¨å¼¹æ€§ å¼¹æ€§é˜»å°¼ èµ«å…¹èµ«å…¹é˜»å°¼ç¢°æ’æ¨¡å‹ï¼Œä¸€èˆ¬ DDPM+DEM ä¸€èµ·ä½¿ç”¨</li></ol><h2 id="è€¦åˆ">1ã€è€¦åˆ</h2><ol type="1"><li>å•å‘è€¦åˆ</li><li>åŒå‘è€¦åˆ</li></ol><h3 id="å•å‘è€¦åˆ">1.1 å•å‘è€¦åˆ</h3><p>å•å‘è€¦åˆï¼šç¦»æ•£ç›¸å¯¹è¿ç»­ç›¸å½±å“å¾ˆå°æ— éœ€è®¾ç½®ç›¸é—´è€¦åˆ.</p><p>å•å‘è€¦åˆé—®é¢˜ï¼šåªè¦åœ¨åŠ å…¥ç¦»æ•£ç›¸ç²’å­å‰è®¡ç®—è¿ç»­ç›¸æµåœºç›´è‡³æ”¶æ•›ï¼Œç„¶åæ‰“å¼€ç¦»æ•£ç›¸æ¨¡å‹ï¼ŒåŠ å…¥ç¦»æ•£ç›¸ç²’å­ï¼Œæ— éœ€è¿­ä»£è®¡ç®—å› ä¸ºå·²ç»è®¡ç®—æ”¶æ•›æµåœºç¨³å®šäº†.</p><p>è¿ç»­ç›¸ï¼ˆä¹Ÿå°±æ˜¯æµåœºï¼‰è®¡ç®—å¯ä»¥æ˜¯ steadyï¼ˆå®šå¸¸/ç¨³æ€æµåœºï¼‰ä¹Ÿå¯ä»¥æ˜¯unsteadyï¼ˆéå®šå¸¸/ç¬æ€/transientï¼‰ã€‚è¿™ä¸¤ç§è¿ç»­ç›¸çš„æµåœºä¸­ç¦»æ•£ç›¸è®¡ç®—éƒ½å¯ä»¥ç”¨éè€¦åˆç²’å­è®¡ç®—ã€‚</p><p>å•ç›¸è€¦åˆè®¡ç®—ä¸è€ƒè™‘ç¦»æ•£ç›¸å¯¹è¿ç»­ç›¸çš„å½±å“ï¼Œç¦»æ•£ç›¸çš„åŠ¨é‡ã€è´¨é‡ã€æ¸©åº¦ç­‰ä¿¡æ¯ä¸ä¼šåé¦ˆç»™æµåœºï¼Œå› ä¸ºæµåœºäº‹å…ˆå·²ç»è®¡ç®—æ”¶æ•›äº†ï¼Œä¸èƒ½å˜äº†ï¼Œå½“å¼€DPM æ—¶å€™ï¼Œå°±æ˜¯é€šè¿‡æµåœºçš„ä¿¡æ¯è®¡ç®— DPM äº†ï¼Œç®€å•è¯´æ˜¯æµåœºäº§ç”Ÿ DPMåœºçš„æ¦‚å¿µã€‚</p><h3 id="åŒå‘è€¦åˆ">1.2 åŒå‘è€¦åˆ</h3><p>è€¦åˆè®¡ç®—çš„æ­¥éª¤ï¼š</p><ol type="1"><li>æ±‚è§£è¿ç»­ç›¸æµåœºï¼ˆåœ¨å¼•å…¥ç¦»æ•£ç›¸ä¹‹å‰ï¼‰ï¼‰</li><li>é€šè¿‡è®¡ç®—æ¯ä¸ªç¦»æ•£ç›¸æ³¨å…¥çš„ç²’å­è½¨è¿¹æ¥å¼•å…¥ç¦»æ•£ç›¸ã€‚</li><li>ä½¿ç”¨å…ˆå‰ç²’å­è®¡ç®—æœŸé—´ç¡®å®šçš„åŠ¨é‡ã€çƒ­é‡å’Œè´¨é‡çš„ç›¸é—´äº¤æ¢ï¼Œé‡æ–°è®¡ç®—è¿ç»­ç›¸æµã€‚</li><li>é‡æ–°è®¡ç®—ä¿®æ”¹çš„è¿ç»­ç›¸æµåœºä¸­çš„ç¦»æ•£ç›¸è½¨è¿¹ã€‚</li><li>é‡å¤å‰ä¸¤ä¸ªæ­¥éª¤ï¼Œç›´åˆ°è·å¾—æ”¶æ•›è§£ï¼Œå…¶ä¸­è¿ç»­ç›¸æµåœºå’Œç¦»æ•£ç›¸é¢—ç²’è½¨è¿¹åœ¨æ¯æ¬¡é™„åŠ è®¡ç®—ä¸­éƒ½ä¿æŒä¸å˜ã€‚</li></ol><h2 id="dpm-è¾¹ç•Œæ¡ä»¶">2ã€DPM è¾¹ç•Œæ¡ä»¶</h2><ol type="1"><li>escape é€ƒé€¸ï¼šé¢—ç²’ç¦»å¼€æµä½“åŸŸ</li><li>trapï¼šè¢«æ•è·å¸æ”¶</li><li>reflectï¼šåå¼¹ï¼Œä¸€èˆ¬ç”¨äºå£é¢ä¸Šï¼Œéœ€è¦æŒ‡å®šåå°„ç³»æ•°</li><li>wall jetï¼šå£é¢å°„æµï¼Œé¢—ç²’è§¦ç¢°å£é¢åä¼šåˆ†æˆæ›´å°çš„é¢—ç²’ç»§ç»­æµåŠ¨</li><li>wall filmï¼šéœ€è¦æ‰“å¼€å£é¢æ¶²è†œæ¨¡å‹ï¼Œä¸ wall jet ç›¸ä¼¼</li><li>reinjectï¼šå½“é¢—ç²’è¾¾åˆ°æŸä¸ªè®¡ç®—åŸŸè¾¹ç•Œæ—¶ï¼Œå°†ç²’å­é‡æ–°å¼•å…¥åŸŸã€‚</li></ol><figure><imgsrc="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/202308291658664.png"alt="image-20230829165815567" /><figcaption aria-hidden="true">image-20230829165815567</figcaption></figure><h2 id="ç²’å­æ–¹å‘">3ã€ç²’å­æ–¹å‘</h2><p>Inject Using Face NormalDirectionï¼šå¼€å¯è¿™ä¸ªé€‰é¡¹åï¼Œç²’å­åœ¨å…¥å°„æ—¶çš„é€Ÿåº¦æ–¹å‘å°†ä¸é¢æ³•å‘ä¸€è‡´ï¼Œè¿™æ ·å°±æ— éœ€å®šä¹‰é¢—ç²’åœ¨xã€yã€z ä¸‰ä¸ªæ–¹å‘çš„é€Ÿåº¦åˆ†é‡ï¼Œåªéœ€è¦å®šä¹‰é€Ÿåº¦å€¼ï¼› <imgsrc="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/202309020913147.png"alt="image.png" /></p><h2 id="ç²’å­å°„å…¥ç±»å‹">4ã€ç²’å­å°„å…¥ç±»å‹</h2><p>https://zhuanlan.zhihu.com/p/532180420 <imgsrc="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/202309020914955.png"alt="image.png" /></p><h2 id="é¢—ç²’ç¢°æ’">5ã€é¢—ç²’ç¢°æ’</h2><p>https://zhuanlan.zhihu.com/p/621078742</p><h2 id="é¢—ç²’å…¶ä»–ä½œç”¨">6ã€é¢—ç²’å…¶ä»–ä½œç”¨</h2><h1 id="æ¡ˆä¾‹é¢—ç²’æ…æ‹Œ">2 æ¡ˆä¾‹ï¼šé¢—ç²’æ…æ‹Œ</h1><h2 id="é‡åŠ›é¡¹">1ã€é‡åŠ›é¡¹</h2><h2 id="ç¦»æ•£ç›¸æ¨¡å‹">2ã€ç¦»æ•£ç›¸æ¨¡å‹</h2><p>æ‰“å¼€ã€äº¤äº’ã€‘-ã€ä¸è¿ç»­ç›¸çš„äº¤äº’ã€‘</p><ul><li>æ¯æ¬¡æµåŠ¨è¿­ä»£æ›´æ–° DPM æºé¡¹ï¼šæ„æ€æ˜¯æ¯ 10ä¸ªæµåŠ¨è¿­ä»£æ›´æ–°ä¸€ä¸‹é¢—ç²’çš„æ•°é‡å˜åŒ–ï¼Œè¿™ä¸ªéƒ½ç»™ä»–å‹¾é€‰ä¸Šï¼Œé¢—ç²’ç ´ç¢ï¼Œè¢«å£é¢æ•è·ï¼Œæ›´æ”¹è´¨é‡æµé‡éƒ½ä¼šä½¿æ•°é‡å‘ç”Ÿå˜åŒ–ã€‚</li><li>DPM è¿­ä»£é—´éš”ï¼šè¿ç»­ç›¸æ¯æ¬¡è¿­ä»£ 10æ­¥ï¼Œå¼€å§‹è¿›è¡Œç¦»æ•£ç›¸çš„è®¡ç®—ã€‚ï¼ˆä¸æ”¶æ•›å¯è°ƒå°ï¼‰</li><li>é¢—ç²’æ—¶æ—¶é—´æ­¥å¤§å°ï¼šå¦‚ä¸º 0.001s ä»£è¡¨é¢—ç²’ç›¸æ¯ 0.001sè¿½è¸ªä¸€æ¬¡ï¼Œä½†æ˜¯ï¼Œåœ¨å¼€å§‹è®¡ç®—é˜¶æ®µï¼Œç²’å­ä¸€è¾¹é‡Šæ”¾ä¸€è¾¹è¿½è¸ªï¼Œé‡Šæ”¾å®Œæˆåä¹Ÿåœ¨è¿½è¸ªã€‚ï¼ˆä¸æ”¶æ•›å¯è°ƒå°ï¼‰</li><li>æœ€å¤§æ­¥æ•°å’Œæ­¥é•¿å› å­ï¼šMax number of steps å’Œ Specify LengthScaleï¼Œæ¯ä¸€æ¬¡è½¨è¿¹è·Ÿè¸ªçš„æœ€å¤§ç§¯åˆ†æ—¶é—´æ­¥æ•°å’Œç§¯åˆ†é•¿åº¦æ ‡å°ºï¼Œéƒ½æ˜¯ä¸ºäº†ç¡®å®šç§¯åˆ†æ—¶é—´æ­¥é•¿âˆ†tã€‚é€‰æ‹© Specify Length Scaleé€‰é¡¹ä»¥ç¡®å®šç§¯åˆ†æ—¶é—´æ­¥é•¿æ—¶ï¼Œç§¯åˆ†æ—¶é—´æ­¥é•¿çº¦ç­‰äºæ‰€ç»™çš„é•¿åº¦å°ºåº¦ï¼ˆLengthScaleï¼‰é™¤ä»¥é¢—ç²’ç›¸å¯¹äºè¿ç»­ç›¸çš„é€Ÿåº¦å¤§å°ã€‚è€Œç§¯åˆ†æ­¥æ•°çº¦ç­‰äºé¢—ç²’æ—¶é—´æ­¥é•¿ï¼ˆParticleTime Step Sizeï¼‰é™¤ä»¥ç§¯åˆ†æ—¶é—´æ­¥é•¿ï¼Œä½†ä»¥ Max Number of Stepsä¸ºé™ï¼ˆå› æ­¤ï¼šç§¯åˆ†æ—¶é—´æ­¥é•¿ âˆ†t&lt;é¢—ç²’æ—¶é—´æ­¥é•¿ Particle Time StepSizeâˆ†tpï¼‰ã€‚æ‰€ä»¥ï¼Œå¦‚ Max Number of Stepsä¸å¤Ÿå¤§ï¼Œåˆ™æœªåˆ°é¢—ç²’æ—¶é—´æ­¥é•¿å°±ç»“æŸä¸€ä¸ªé¢—ç²’æ—¶é—´æ­¥ï¼Œå¹¶è½¬å…¥ä¸‹ä¸€ä¸ªé¢—ç²’æ—¶é—´æ­¥ï¼Œå› è€Œé¢—ç²’ç»ˆäº†çŠ¶æ€æŠ¥å‘Šä¸ºincompleteã€‚</li></ul><figure><imgsrc="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/202308291040314.png"alt="image-20230829104022213" /><figcaption aria-hidden="true">image-20230829104022213</figcaption></figure><p>è®¾ç½®å–·å°„æº</p><figure><imgsrc="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/202308291041115.png"alt="image-20230829104130041" /><figcaption aria-hidden="true">image-20230829104130041</figcaption></figure><h2 id="è¿½è¸ªé¢—ç²’è½¨è¿¹">3ã€è¿½è¸ªé¢—ç²’è½¨è¿¹</h2><p>åˆ›å»ºé¢—ç²’è½¨è¿¹</p><figure><imgsrc="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/202308291541393.png"alt="image-20230829154138243" /><figcaption aria-hidden="true">image-20230829154138243</figcaption></figure><p>åˆ›å»ºé¢—ç²’åœºæ™¯å¹¶ä¿å­˜</p><figure><imgsrc="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/202308291542031.png"alt="image-20230829154239921" /><figcaption aria-hidden="true">image-20230829154239921</figcaption></figure><p>åˆ›å»ºè§£å†³æ–¹æ¡ˆåŠ¨ç”»</p><figure><imgsrc="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/202308291543657.png"alt="image-20230829154309557" /><figcaption aria-hidden="true">image-20230829154309557</figcaption></figure><h2 id="å¯¼å‡ºé¢—ç²’æ•°æ®">4ã€å¯¼å‡ºé¢—ç²’æ•°æ®</h2><figure><imgsrc="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/202308291543784.png"alt="image-20230829154336663" /><figcaption aria-hidden="true">image-20230829154336663</figcaption></figure><h1 id="å–·å¤´æ¨¡æ‹Ÿ">3 å–·å¤´æ¨¡æ‹Ÿ</h1><h2 id="ç¢³é…¸æ°¢é’ æ€§è´¨">ç¢³é…¸æ°¢é’ æ€§è´¨</h2><p>å¯†åº¦ï¼š2.16 g/mL ç›´å¾„ï¼šåœ¨ 0.1-10mm ä¹‹é—´</p><h2 id="section">20230829</h2><p>ä½¿ç”¨ä¹‹å‰çš„ç½‘æ ¼ï¼Œåªæœ‰å–·å˜´å’ŒåœºåŸŸï¼Œå‡ºå£ 5MPa å’Œå‡ºå£ 2MPa éƒ½å‘æ•£ã€‚æƒ³åˆ°æ˜¨å¤©å°è¯•çš„å°†å‡ºå£éƒ½æ”¹ä¸ºå‹åŠ›å‡ºå£ï¼ˆåŒ…æ‹¬è®¡ç®—åŸŸçš„edgeï¼‰è®¡ç®—è¾ƒå¥½ï¼Œä»Šå¤©å†è¯•ä¸€ä¸‹ï¼Œä½†è¿˜æ˜¯å‘æ•£ã€‚ä½¿ç”¨æ˜¨å¤©çš„è®¾ç½®å†è·‘ä¸€è¾¹ï¼Œåªä¸è¿‡åŠ å…¥ç¦»æ•£ç›¸ã€‚ä½†æ˜¯æ˜¨å¤©åŠ å…¥äº† VOFæ¨¡å‹ï¼Œç°åœ¨å…³é—­äº†ã€‚ <strong>æˆåŠŸè®¾ç½®</strong> 1ã€ç¬æ€ 2ã€èƒ½é‡ 3ã€æ ‡å‡†k-eï¼Œæ ‡å‡†å£é¢ 4ã€ç¦»æ•£ç›¸æ¨¡å‹ï¼š <imgsrc="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/202308291913883.png"alt="image.png" /> ç›´å¾„ 0.0001ï¼Œæ¸©åº¦ 300Kï¼Œåœæ­¢æ—¶é—´ 1e-5ï¼Œæ€»æµé‡ 100000<imgsrc="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/202308291913817.png"alt="image.png" /> 5ã€ææ–™ <imgsrc="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/202308291914553.png"alt="image.png" /> 6ã€è¾¹ç•Œæ¡ä»¶ <imgsrc="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/202308291915645.png"alt="image.png" /> å‹åŠ›è¿›å£ï¼ˆecapseï¼‰ <imgsrc="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/202308291916777.png"alt="image.png" /> å‹åŠ›å‡ºå£ edgeï¼ˆreflectï¼‰ <imgsrc="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/202308291916237.png"alt="image.png" /> <imgsrc="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/202308291917062.png"alt="image.png" /> 7ã€æ–¹æ³• PISO æ–¹æ³• <imgsrc="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/202308291917948.png"alt="image.png" /> 8ã€æ®‹å·® 1e-06 9ã€æ­¥é•¿ æ—¶é—´æ­¥é•¿ 0.01 æ—¶é—´æ­¥æ•° 100</p><h2 id="section-1">20230905</h2><p>æˆªæ­¢ä»Šæ—¥ï¼Œåœ¨é›ªç ”å¸ˆå§ç”µè„‘ä¸Šå·²ç»æ¨¡æ‹Ÿå®Œæˆæ¸æ‰©å–·å¤´ 2MPa å’Œ5MPaï¼Œåœ¨è‡ªå·±ç”µè„‘ä¸Šæ¸æ‰©å–·å¤´ï¼ˆå¸¦å­”ï¼‰2MPaï¼Œæ­¥é•¿ 1e-6ï¼Œå…± 1000æ­¥ã€‚ä½†æ˜¯æ¨¡æ‹Ÿå‡ºçš„ç²’å­é€Ÿåº¦å¤ªå¤§ï¼Œç°åœ¨æƒ³è¦ä½¿ç”¨ udfæ”¹å˜å‹åŠ›è¾¹ç•Œæ¡ä»¶ï¼Œå‘ˆç°ä¸€ä¸ªé€’å‡çš„è¶‹åŠ¿ï¼Œæ°”ä½“ä½¿ç”¨çœŸå®æ°”ä½“çŠ¶æ€æ–¹ç¨‹è¿›è¡Œæ¨¡æ‹Ÿï¼Œå¯†åº¦åŸºæ±‚è§£å™¨ã€‚</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&quot;udf.h&quot;</span></span><br>DEFINE_PROFILE(inlet_x,thread,index)<br>&#123;<br>real y,v0,h0;<br>real x[ND_ND];<br><span class="hljs-type">face_t</span> f;<br>real flow_time = CURRENT_TIME;  <span class="hljs-comment">// è·å–å½“å‰æ¨¡æ‹Ÿçš„æ—¶é—´</span><br>begin_f_loop(f,thread)<br>&#123;<br><span class="hljs-keyword">if</span>(flow_time &gt;=<span class="hljs-number">0</span> &amp;&amp; flow_time &lt;= <span class="hljs-number">0.05</span> )<br>F_PROFILE(f,thread,index) = <span class="hljs-number">2000000</span> - <span class="hljs-number">40000000</span> * flow_time;<br><span class="hljs-keyword">else</span><br>F_PROFILE(f,thread,index) = <span class="hljs-number">0</span>;<br>&#125;<br>end_f_loop(f,thread)<br>&#125;<br></code></pre></td></tr></table></figure><p>ä¸ºäº†èƒ½ä½¿ç²’å­å–·å‡ºååˆ†æ•£å‡åŒ€ï¼Œå…±è®¾è®¡ 6ç§å–·å¤´ç»“æ„ï¼Œåˆ†åˆ«ä¸ºæ¸æ‰©å–·å¤´ã€æ¸æ‰©å–·å¤´ï¼ˆå¸¦å­”ï¼‰ã€æ‹‰æ³•å°”å–·å¤´ã€æ‹‰æ³•å°”å–·å¤´ï¼ˆå¸¦å­”ï¼‰ã€è˜‘è‡å–·å¤´å’Œè˜‘è‡å–·å¤´ï¼ˆå¸¦å­”ï¼‰ã€‚å–·å˜´å°ºå¯¸ï¼š</p><p>å–·å˜´ç½‘æ ¼ï¼š</p><h3 id="ç©ºæ°”">ç©ºæ°”</h3><p>ä½¿ç”¨é«˜å‹ç©ºæ°”ä½œä¸ºé©±åŠ¨æ°”å……å…¥å–·ç²‰ç½ä¸­ï¼Œç©ºæ°”æºå¸¦ç²’å­ä»¥ 2MPa å’Œ 5MPaçš„å‹åŠ›å–·å‡ºã€‚å‹åŠ›ä»¥ 40MPa/s é€Ÿåº¦è¡°å‡ï¼Œåœ¨ 50ms æ—¶è¡°å‡ä¸º 0ã€‚ä½¿ç”¨ç†æƒ³æ°”ä½“ï¼Œå¯†åº¦å˜åŒ–ã€‚</p><h3 id="ç²’å­">ç²’å­</h3><p>æŠ‘çˆ†å‰‚ç²’å­é€‰ç”¨ NaHCO3 ç²’å­ï¼Œå¯†åº¦ä¸º 2.16g/cmÂ³ï¼Œæ¯”çƒ­ä¸º 2170J/(kg K)ç²’å­çš„ç›´å¾„åˆ†å¸ƒåœ¨ 1~100um èŒƒå›´å†…ï¼Œå¹³å‡ç›´å¾„ä¸º 50umï¼Œå…± 10 ç§ç²’å­å¤§å°ã€‚ç²’å­æ€»è´¨é‡ 100gï¼Œåœ¨ 50ms å†…å–·å®Œã€‚å³äº§ç”Ÿé€Ÿç‡ä¸º 2kg/sã€‚ï¼ˆå‡è®¾é˜€é—¨ 50msæ‰“å¼€ï¼‰ ç²’å­é€Ÿåº¦ä¸º 0.1m/s ä»å£é¢å‡ºæ¥ åŒå‘è€¦åˆï¼Œè€ƒè™‘ç²’å­çš„ç¢°æ’</p><h3 id="æ±‚è§£å™¨è®¾ç½®">æ±‚è§£å™¨è®¾ç½®ï¼š</h3><p>å› å–·å‡ºé€Ÿåº¦è¾ƒå¤§ï¼Œæ±‚è§£å™¨é€‰ç”¨å¯†åº¦åŸºã€‚</p>]]></content>
    
    
    <summary type="html">å¯¹Fluentä¸­çš„DPMæ¨¡å‹åŸºæœ¬ä»‹ç»ï¼Œæ¨¡æ‹Ÿå›ºä½“é¢—ç²’é€šè¿‡å–·å¤´å–·å‡ºçš„æ•ˆæœ</summary>
    
    
    
    <category term="æ¨¡æ‹Ÿ" scheme="http://example.com/categories/%E6%A8%A1%E6%8B%9F/"/>
    
    <category term="Fluent" scheme="http://example.com/categories/%E6%A8%A1%E6%8B%9F/Fluent/"/>
    
    
    <category term="Fluent" scheme="http://example.com/tags/Fluent/"/>
    
    <category term="æ¨¡æ‹Ÿ" scheme="http://example.com/tags/%E6%A8%A1%E6%8B%9F/"/>
    
    <category term="å­¦ä¹ ç¬”è®°" scheme="http://example.com/tags/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    
    <category term="DPM" scheme="http://example.com/tags/DPM/"/>
    
  </entry>
  
  <entry>
    <title>æ·±åº¦å­¦ä¹ å…¥é—¨</title>
    <link href="http://example.com/2024/06/30/028%20%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E5%85%A5%E9%97%A8/"/>
    <id>http://example.com/2024/06/30/028%20%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E5%85%A5%E9%97%A8/</id>
    <published>2024-06-30T14:45:00.000Z</published>
    <updated>2025-02-08T07:10:13.931Z</updated>
    
    <content type="html"><![CDATA[<h1 id="åŸºæœ¬é…ç½®">åŸºæœ¬é…ç½®</h1><p><ahref="https://github.com/baiqinglun/pytorch_learning.git">github</a></p><p><ahref="https://www.bilibili.com/video/BV1Z8411R7PH/?spm_id_from=333.788&amp;vd_source=33b50a4dd201d7564e6e63d321809ce9">å­¦ä¹ è§†é¢‘åœ°å€</a></p><h2 id="ç¯å¢ƒé…ç½®">ç¯å¢ƒé…ç½®</h2><ol type="1"><li>åœ¨ anacondaä¸­æ–°å»ºè™šæ‹Ÿç¯å¢ƒ<code>conda create -n Pytorch python=3.9</code></li><li>æ¿€æ´»è™šæ‹Ÿç¯å¢ƒå¹¶å®‰è£… numpyã€matplotlibã€pandas åº“</li><li>åœ¨ç»ˆç«¯å‘½ä»¤è¡Œè¾“å…¥ï¼š<code>nvidia-smi</code>æŸ¥çœ‹ CUNDA ç‰ˆæœ¬ï¼Œåœ¨å®‰è£…pytorch æ—¶éœ€è¦æ³¨æ„ç‰ˆæœ¬ï¼šCONDA &gt; conda</li></ol><p><imgsrc="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/202406301747100.png" /></p><h2 id="æ›´æ”¹-jupyter-é»˜è®¤æ‰“å¼€ç›®å½•">æ›´æ”¹ jupyter é»˜è®¤æ‰“å¼€ç›®å½•</h2><ol type="1"><li>é¦–å…ˆä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ç”Ÿæˆ jupyteré…ç½®æ–‡ä»¶ï¼Œç”Ÿæˆçš„æ–‡ä»¶ä¸€èˆ¬åœ¨<code>C:\Users\ç”¨æˆ·å\.jupyter</code>æ–‡ä»¶å¤¹å†…</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">jupyter notebook --generate-config<br></code></pre></td></tr></table></figure><ol start="2" type="1"><li><p>æŸ¥æ‰¾è¯¥æ–‡ä»¶ä¸­çš„<code>c.NotebookApp.notebook_dir</code>æ›´æ”¹ä¸º<code>c.NotebookApp.notebook_dir = 'F:\Jupyter'</code>å¹¶ä¿å­˜ï¼Œæ­¤æ—¶é»˜è®¤è·¯å¾„å°±æ›´æ”¹ä¸º<code>'F:\Jupyter'</code></p></li><li><p>ä¿®æ”¹ jupyterå¿«æ·æ–¹å¼çš„æ‰“å¼€æ–¹å¼ï¼Œåˆ é™¤åé¢çš„ç¯å¢ƒå˜é‡ï¼Œè‡³æ­¤ä¿®æ”¹æˆåŠŸã€‚</p></li></ol><p><imgsrc="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/202406301822505.png" /></p><h2 id="å°†-conda-è™šæ‹Ÿç¯å¢ƒå…³è”è‡³-jupyter">å°† conda è™šæ‹Ÿç¯å¢ƒå…³è”è‡³jupyter</h2><p>å®‰è£… ipykernel</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">conda activate pytorch<br>pip install ipykernel<br></code></pre></td></tr></table></figure><p>å¯¼å…¥</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">python -m ipykernel install --user --name=pytorch<br></code></pre></td></tr></table></figure><p><imgsrc="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/202406301827885.png" /></p><h2 id="æµ‹è¯•-conda-æ˜¯å¦å¯ç”¨">æµ‹è¯• conda æ˜¯å¦å¯ç”¨</h2><p><imgsrc="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/202406301828813.png" /></p><h1 id="dnn-åŸºæœ¬åŸç†">2ã€DNN åŸºæœ¬åŸç†</h1><p>ä¸»è¦å¯åˆ†ä¸ºä»¥ä¸‹ 4 ä¸ªæ­¥éª¤ï¼š</p><ol type="1"><li>åˆ’åˆ†æ•°æ®é›†</li><li>è®­ç»ƒç½‘ç»œ</li><li>æµ‹è¯•ç½‘ç»œ</li><li>ä½¿ç”¨ç½‘ç»œ</li></ol><h2 id="åˆ’åˆ†æ•°æ®é›†">2.1 åˆ’åˆ†æ•°æ®é›†</h2><p><imgsrc="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/202406301841002.png" /></p><figure><imgsrc="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/202406301841606.png"alt="ç¥ç»ç½‘ç»œçš„ç»“æ„" /><figcaption aria-hidden="true">ç¥ç»ç½‘ç»œçš„ç»“æ„</figcaption></figure><p>è€ƒè™‘åˆ° Python åˆ—è¡¨ã€NumPy æ•°ç»„ä»¥åŠ PyTorchå¼ é‡éƒ½æ˜¯ä»ç´¢å¼•[0]å¼€å§‹ï¼Œå†åŠ ä¹‹è¾“å…¥å±‚æ²¡æœ‰å†…éƒ¨å‚æ•°ï¼ˆæƒé‡ Ï‰ ä¸åç½®bï¼‰ï¼Œæ‰€ä»¥ä¹ æƒ¯å°†è¾“å…¥å±‚ç§°ä¹‹ä¸ºç¬¬ 0 å±‚ã€‚</p><h2 id="è®­ç»ƒç½‘ç»œ">2.2 è®­ç»ƒç½‘ç»œ</h2><p>ç¥ç»ç½‘ç»œçš„è®­ç»ƒè¿‡ç¨‹ï¼Œå°±æ˜¯ç»è¿‡å¾ˆå¤šæ¬¡å‰å‘ä¼ æ’­ä¸åå‘ä¼ æ’­çš„è½®å›ï¼Œæœ€ç»ˆä¸æ–­è°ƒæ•´å…¶å†…éƒ¨å‚æ•°ï¼ˆæƒé‡Ï‰ ä¸åç½® bï¼‰ï¼Œä»¥æ‹Ÿåˆä»»æ„å¤æ‚å‡½æ•°çš„è¿‡ç¨‹ã€‚å†…éƒ¨å‚æ•°ä¸€å¼€å§‹æ˜¯éšæœºçš„ï¼ˆå¦‚Xavier åˆå§‹å€¼ã€He åˆå§‹å€¼ï¼‰ï¼Œæœ€ç»ˆä¼šä¸æ–­ä¼˜åŒ–åˆ°æœ€ä½³ã€‚</p><p>ä¹ æƒ¯æŠŠå†…éƒ¨å‚æ•°ç§°ä¸ºå‚æ•°ï¼Œå¤–éƒ¨å‚æ•°ç§°ä¸ºè¶…å‚æ•°ã€‚</p><p>ï¼ˆ1ï¼‰å‰å‘ä¼ æ’­</p><p>å°†å•ä¸ªæ ·æœ¬çš„ 3ä¸ªè¾“å…¥ç‰¹å¾é€å…¥ç¥ç»ç½‘ç»œçš„è¾“å…¥å±‚åï¼Œç¥ç»ç½‘ç»œä¼šé€å±‚è®¡ç®—åˆ°è¾“å‡ºå±‚ï¼Œæœ€ç»ˆå¾—åˆ°ç¥ç»ç½‘ç»œé¢„æµ‹çš„3 ä¸ªè¾“å‡ºç‰¹å¾ã€‚</p><p>è¯¥ç¥ç»å…ƒèŠ‚ç‚¹çš„è®¡ç®—è¿‡ç¨‹ä¸º<spanclass="math inline">\(y=\omega_1x_1+\omega_2x_2+\omega_3x_3+b\)</span>ã€‚ä½ å¯ä»¥ç†è§£ä¸ºï¼Œæ¯ä¸€æ ¹çº¿å°±æ˜¯ä¸€ä¸ªæƒé‡ Ï‰ï¼Œæ¯ä¸€ä¸ªç¥ç»å…ƒèŠ‚ç‚¹ä¹Ÿéƒ½æœ‰å®ƒè‡ªå·±çš„åç½®bã€‚å½“ç„¶ï¼Œæ¯ä¸ªç¥ç»å…ƒèŠ‚ç‚¹åœ¨è®¡ç®—å®Œåï¼Œç”±äºè¿™ä¸ªæ–¹ç¨‹æ˜¯çº¿æ€§çš„ï¼Œå› æ­¤å¿…é¡»åœ¨å¤–é¢å¥—ä¸€ä¸ªéçº¿æ€§çš„å‡½æ•°ï¼š<spanclass="math inline">\(y=\sigma\left(\omega_1x_1+\omega_2x_2+\omega_3x_3+b\right)\)</span>ï¼ŒÏƒ è¢«ç§°ä¸ºæ¿€æ´»å‡½æ•°ã€‚<strong>å¦‚æœä½ ä¸å¥—éçº¿æ€§å‡½æ•°ï¼Œé‚£ä¹ˆå³ä½¿ 10å±‚çš„ç½‘ç»œï¼Œä¹Ÿå¯ä»¥ç”¨ 1 å±‚å°±æ‹Ÿåˆå‡ºåŒæ ·çš„æ–¹ç¨‹ã€‚</strong></p><p>ï¼ˆ2ï¼‰åå‘ä¼ æ’­</p><p>ç»è¿‡å‰å‘ä¼ æ’­ï¼Œç½‘ç»œä¼šæ ¹æ®å½“å‰çš„å†…éƒ¨å‚æ•°è®¡ç®—å‡ºè¾“å‡ºç‰¹å¾çš„é¢„æµ‹å€¼ã€‚ä¸ºè®¡ç®—é¢„æµ‹å€¼ä¸çœŸå®å€¼ä¹‹é—´çš„å·®è·ï¼Œéœ€è¦ä¸€ä¸ªæŸå¤±å‡½æ•°ã€‚</p><p>æŸå¤±å‡½æ•°è®¡ç®—å¥½åï¼Œé€å±‚é€€å›æ±‚æ¢¯åº¦ã€‚å³çœ‹æ¯ä¸€ä¸ªå†…éƒ¨å‚æ•°æ˜¯å˜å¤§è¿˜æ˜¯å˜å°ï¼Œæ‰ä¼šä½¿å¾—æŸå¤±å‡½æ•°å˜å°ã€‚è¿™æ ·å°±è¾¾åˆ°äº†ä¼˜åŒ–å†…éƒ¨å‚æ•°çš„ç›®çš„ã€‚</p><p>å…³é”®å‚æ•°ï¼šå¤–éƒ¨å‚æ•°å«å­¦ä¹ ç‡ã€‚å­¦ä¹ ç‡è¶Šå¤§ï¼Œå†…éƒ¨å‚æ•°çš„ä¼˜åŒ–è¶Šå¿«ï¼Œä½†è¿‡å¤§çš„å­¦ä¹ ç‡å¯èƒ½ä¼šä½¿æŸå¤±å‡½æ•°è¶Šè¿‡æœ€ä½ç‚¹ï¼Œå¹¶åœ¨è°·åº•åå¤æ¨ªè·³ã€‚</p><p>ï¼ˆ3ï¼‰batch_size</p><p>å‰å‘ä¼ æ’­ä¸åå‘ä¼ æ’­ä¸€æ¬¡æ—¶ï¼Œæœ‰ä¸‰ç§æƒ…å†µï¼š</p><ul><li>æ‰¹é‡æ¢¯åº¦ä¸‹é™ï¼ˆBatch GradientDescentï¼ŒBGDï¼‰ï¼ŒæŠŠæ‰€æœ‰æ ·æœ¬ä¸€æ¬¡æ€§è¾“å…¥è¿›ç½‘ç»œï¼Œè¿™ç§æ–¹å¼è®¡ç®—é‡å¼€é”€å¾ˆå¤§ï¼Œé€Ÿåº¦ä¹Ÿå¾ˆæ…¢ã€‚</li><li>éšæœºæ¢¯åº¦ä¸‹é™ï¼ˆStochastic GradientDescentï¼ŒSGDï¼‰ï¼Œæ¯æ¬¡åªæŠŠä¸€ä¸ªæ ·æœ¬è¾“å…¥è¿›ç½‘ç»œï¼Œæ¯è®¡ç®—ä¸€ä¸ªæ ·æœ¬å°±æ›´æ–°å‚æ•°ã€‚è¿™ç§æ–¹å¼è™½ç„¶é€Ÿåº¦æ¯”è¾ƒå¿«ï¼Œä½†æ˜¯æ”¶æ•›æ€§èƒ½å·®ï¼Œå¯èƒ½ä¼šåœ¨æœ€ä¼˜ç‚¹é™„è¿‘éœ‡è¡ï¼Œä¸¤æ¬¡å‚æ•°çš„æ›´æ–°ä¹Ÿæœ‰å¯èƒ½æŠµæ¶ˆã€‚</li><li>å°æ‰¹é‡æ¢¯åº¦ä¸‹é™ï¼ˆMini-Batch GradientDecentï¼ŒMBGDï¼‰æ˜¯ä¸ºäº†ä¸­å’Œä¸Šé¢äºŒè€…è€Œç”Ÿï¼Œè¿™ç§åŠæ³•æŠŠæ ·æœ¬åˆ’åˆ†ä¸ºè‹¥å¹²ä¸ªæ‰¹ï¼ŒæŒ‰æ‰¹æ¥æ›´æ–°å‚æ•°ã€‚</li></ul><blockquote><p>PyTorch åªæ”¯æŒæ‰¹é‡ä¸å°æ‰¹é‡</p></blockquote><p>ï¼ˆ4ï¼‰epochs</p><p>1 ä¸ª epoch å°±æ˜¯æŒ‡å…¨éƒ¨æ ·æœ¬è¿›è¡Œ 1 æ¬¡å‰å‘ä¼ æ’­ä¸åå‘ä¼ æ’­ã€‚</p><p>å‡è®¾æœ‰ 10240 ä¸ªè®­ç»ƒæ ·æœ¬ï¼Œbatch_size æ˜¯ 1024ï¼Œepochs æ˜¯ 5ã€‚é‚£ä¹ˆï¼š</p><ul><li>å…¨éƒ¨æ ·æœ¬å°†è¿›è¡Œ 5 æ¬¡å‰å‘ä¼ æ’­ä¸åå‘ä¼ æ’­ï¼›</li><li>1 ä¸ª epochï¼Œå°†å‘ç”Ÿ 10 æ¬¡ï¼ˆ10240x1024ï¼‰å‰å‘ä¼ æ’­ä¸åå‘ä¼ æ’­ï¼›</li><li>ä¸€å…±å‘ç”Ÿ 50 æ¬¡ï¼ˆ10ï‚´5ï¼‰å‰å‘ä¼ æ’­å’Œåå‘ä¼ æ’­ã€‚</li></ul><h2 id="æµ‹è¯•ç½‘ç»œ">2.3 æµ‹è¯•ç½‘ç»œ</h2><p>ç›®çš„ï¼šé˜²æ­¢è¿‡æ‹Ÿåˆã€‚è¿‡æ‹Ÿåˆï¼šç½‘ç»œä¼˜åŒ–å¥½çš„å†…éƒ¨å‚æ•°æ”¯é˜Ÿæœ¬è®­ç»ƒæ ·æœ¬æœ‰æ•ˆã€‚</p><p>æµ‹è¯•é›†æ—¶ï¼Œåªéœ€è¦ä¸€æ¬¡å‰å‘ä¼ æ’­ã€‚</p><p><imgsrc="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/202406301948453.png" /></p><h2 id="ä½¿ç”¨ç½‘ç»œ">2.4 ä½¿ç”¨ç½‘ç»œ</h2><p>ç›´æ¥å°†æ ·æœ¬è¿›è¡Œ 1 æ¬¡å‰å‘ä¼ æ’­ã€‚</p><h1 id="dnn-çš„å®ç°">3ã€DNN çš„å®ç°</h1><h2 id="åˆ¶ä½œæ•°æ®é›†">3.1 åˆ¶ä½œæ•°æ®é›†</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> torch<br><span class="hljs-keyword">import</span> torch.nn <span class="hljs-keyword">as</span> nn<br><span class="hljs-keyword">import</span> matplotlib.pyplot <span class="hljs-keyword">as</span> plt<br><br><span class="hljs-comment"># å±•ç¤ºé«˜æ¸…å›¾</span><br><span class="hljs-keyword">from</span> matplotlib_inline <span class="hljs-keyword">import</span> backend_inline<br>backend_inline.set_matplotlib_formats(<span class="hljs-string">&#x27;svg&#x27;</span>)<br><br>X1 = torch.rand(<span class="hljs-number">10000</span>,<span class="hljs-number">1</span>) <span class="hljs-comment"># è¾“å…¥ç‰¹å¾1</span><br>X2 = torch.rand(<span class="hljs-number">10000</span>,<span class="hljs-number">1</span>) <span class="hljs-comment"># è¾“å…¥ç‰¹å¾2</span><br>X3 = torch.rand(<span class="hljs-number">10000</span>,<span class="hljs-number">1</span>) <span class="hljs-comment"># è¾“å…¥ç‰¹å¾3</span><br><br>Y1 = ( (X1+X2+X3)&lt;<span class="hljs-number">1</span> ).<span class="hljs-built_in">float</span>() <span class="hljs-comment"># è¾“å‡ºç‰¹å¾1</span><br>Y2 = ( (<span class="hljs-number">1</span>&lt;(X1+X2+X3)) &amp; ((X1+X2+X3)&lt;<span class="hljs-number">2</span>) ).<span class="hljs-built_in">float</span>() <span class="hljs-comment"># è¾“å‡ºç‰¹å¾2</span><br>Y3 = ( (X1+X2+X3)&gt;<span class="hljs-number">2</span> ).<span class="hljs-built_in">float</span>() <span class="hljs-comment"># è¾“å‡ºç‰¹å¾3</span><br>Data = torch.cat([X1,X2,X3,Y1,Y2,Y3],axis=<span class="hljs-number">1</span>) <span class="hljs-comment"># æ•´åˆæ•°æ®é›†</span><br>Data = Data.to(<span class="hljs-string">&#x27;cuda:0&#x27;</span>) <span class="hljs-comment"># æŠŠæ•°æ®é›†æ¬åˆ°GPU ä¸Š</span><br><br><span class="hljs-comment"># åˆ’åˆ†è®­ç»ƒé›†ä¸æµ‹è¯•é›†</span><br>train_size = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">len</span>(Data) * <span class="hljs-number">0.7</span>) <span class="hljs-comment"># è®­ç»ƒé›†çš„æ ·æœ¬æ•°é‡</span><br>test_size = <span class="hljs-built_in">len</span>(Data) - train_size <span class="hljs-comment"># æµ‹è¯•é›†çš„æ ·æœ¬æ•°é‡</span><br>Data = Data[torch.randperm( Data.size(<span class="hljs-number">0</span>)) , : ] <span class="hljs-comment"># æ‰“ä¹±æ ·æœ¬çš„é¡ºåº</span><br>train_Data = Data[ : train_size , : ] <span class="hljs-comment"># è®­ç»ƒé›†æ ·æœ¬</span><br>test_Data = Data[ train_size : , : ] <span class="hljs-comment"># æµ‹è¯•é›†æ ·æœ¬</span><br>train_Data.shape, test_Data.shape<br></code></pre></td></tr></table></figure><h2 id="æ­å»ºç¥ç»ç½‘ç»œ">3.2 æ­å»ºç¥ç»ç½‘ç»œ</h2><p>é€šå¸¸ä»¥ nn.Moduleä½œä¸ºçˆ¶ç±»ï¼Œè‡ªå·±çš„ç¥ç»ç½‘ç»œå¯ç›´æ¥ç»§æ‰¿çˆ¶ç±»çš„æ–¹æ³•å’Œå±æ€§ã€‚</p><p>åœ¨å®šä¹‰ç¥ç»ç½‘ç»œæ—¶é€šå¸¸éœ€è¦åŒ…å« 2ä¸ªæ–¹æ³•ï¼Œ<code>__init__</code>å’Œ<code>forward</code></p><ul><li><code>__init__</code>ï¼šç”¨äºæ„å»ºè‡ªå·±çš„ç¥ç»ç½‘ç»œ</li><li><code>forward</code>ï¼šç”¨äºè¾“å…¥æ•°æ®è¿›è¡Œå‘å‰ä¼ æ’­</li></ul><p><strong>ï¼ˆ1ï¼‰æ­å»ºç¥ç»ç½‘ç»œç»“æ„</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">DNN</span>(nn.Module):<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-string">&#x27;&#x27;&#x27; æ­å»ºç¥ç»ç½‘ç»œå„å±‚ &#x27;&#x27;&#x27;</span><br>        <span class="hljs-built_in">super</span>(DNN,self).__init__()<br>        self.net = nn.Sequential( <span class="hljs-comment"># æŒ‰é¡ºåºæ­å»ºå„å±‚</span><br>            nn.Linear(<span class="hljs-number">3</span>, <span class="hljs-number">5</span>), nn.ReLU(), <span class="hljs-comment"># ç¬¬1 å±‚ï¼šå…¨è¿æ¥å±‚</span><br>            nn.Linear(<span class="hljs-number">5</span>, <span class="hljs-number">5</span>), nn.ReLU(), <span class="hljs-comment"># ç¬¬2 å±‚ï¼šå…¨è¿æ¥å±‚</span><br>            nn.Linear(<span class="hljs-number">5</span>, <span class="hljs-number">5</span>), nn.ReLU(), <span class="hljs-comment"># ç¬¬3 å±‚ï¼šå…¨è¿æ¥å±‚</span><br>            nn.Linear(<span class="hljs-number">5</span>, <span class="hljs-number">3</span>) <span class="hljs-comment"># ç¬¬4 å±‚ï¼šå…¨è¿æ¥å±‚</span><br>        )<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">forward</span>(<span class="hljs-params">self, x</span>):<br>        <span class="hljs-string">&#x27;&#x27;&#x27; å‰å‘ä¼ æ’­ &#x27;&#x27;&#x27;</span><br>        y = self.net(x) <span class="hljs-comment"># x å³è¾“å…¥æ•°æ®</span><br>        <span class="hljs-keyword">return</span> y <span class="hljs-comment"># y å³è¾“å‡ºæ•°æ®</span><br></code></pre></td></tr></table></figure><p><strong>ä»£ç è§£æ</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">nn.Linear(<span class="hljs-number">3</span>, <span class="hljs-number">5</span>), nn.ReLU()<br></code></pre></td></tr></table></figure><ul><li>è¡¨ç¤ºä¸€ä¸ªéšè—å±‚ï¼Œç¬¬ä¸€ä¸ªéšè—å±‚ä¸ºçº¿æ€§å±‚ï¼Œæœå˜ä¼šç»™ä½ ä¸€ä¸ªç¥ç»å…ƒèŠ‚ç‚¹æ•°æ˜¯3ï¼Œè¿™å±‚èŠ‚ç‚¹æ•°æ˜¯ 5</li><li>åé¢çš„<code>nn.ReLU()</code>è¡¨ç¤ºä¸€ä¸ªæ¿€æ´»å‡½æ•°</li></ul><p><strong>ä»£ç è§£æ</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python">nn.Linear(<span class="hljs-number">3</span>, <span class="hljs-number">5</span>), nn.ReLU(), <span class="hljs-comment"># ç¬¬1 å±‚ï¼šå…¨è¿æ¥å±‚</span><br>nn.Linear(<span class="hljs-number">5</span>, <span class="hljs-number">5</span>), nn.ReLU(), <span class="hljs-comment"># ç¬¬2 å±‚ï¼šå…¨è¿æ¥å±‚</span><br>nn.Linear(<span class="hljs-number">5</span>, <span class="hljs-number">5</span>), nn.ReLU(), <span class="hljs-comment"># ç¬¬3 å±‚ï¼šå…¨è¿æ¥å±‚</span><br>nn.Linear(<span class="hljs-number">5</span>, <span class="hljs-number">3</span>) <span class="hljs-comment"># ç¬¬4 å±‚ï¼šå…¨è¿æ¥å±‚</span><br></code></pre></td></tr></table></figure><p>ç¬¬äºŒå±‚çš„ç¬¬ä¸€ä¸ªæ•°è¦å’Œç¬¬ä¸€å±‚çš„ç¬¬äºŒä¸ªæ•°å¯¹åº”</p><p><strong>ï¼ˆ2ï¼‰åˆ›å»ºç¥ç»ç½‘ç»œ</strong></p><p>åˆ›å»º model å®ä¾‹ï¼Œå¹¶å°†å…¶è½¬ç§»æ‰ gpu ä¸Š</p><p><imgsrc="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/202406302117031.png" /></p><ul><li>æ¯ä¸ªéšè—å±‚éƒ½æœ‰ä¸€ä¸ªæ¿€æ´»å‡½æ•°ã€‚</li><li>å„å±‚çš„ç¥ç»å…ƒèŠ‚ç‚¹æ•°ä½ 3 5 5 5 3</li></ul><blockquote><p>è¾“å…¥å±‚çš„ç¥ç»å…ƒæ•°é‡å¿…é¡»ä¸æ¯ä¸ªæ ·æœ¬çš„è¾“å…¥ç‰¹å¾æ•°é‡ä¸€è‡´ï¼Œè¾“å‡ºå±‚çš„ç¥ç»æ•°é‡å¿…é¡»ä¸æ¯ä¸ªæ ·æœ¬çš„è¾“å‡ºç‰¹å¾æ•°é‡ä¸€è‡´ã€‚</p></blockquote><h2 id="ç½‘ç»œçš„å†…éƒ¨å‚æ•°">3.3 ç½‘ç»œçš„å†…éƒ¨å‚æ•°</h2><p>æƒé‡ä¸åç½®</p><p>æŸ¥çœ‹ç½‘ç»œå†…éƒ¨å‚æ•°</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">for</span> name,param <span class="hljs-keyword">in</span> model.named_parameters():<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;å‚æ•°:<span class="hljs-subst">&#123;name&#125;</span>\nå½¢çŠ¶:<span class="hljs-subst">&#123;param.shape&#125;</span>\næ•°å€¼:<span class="hljs-subst">&#123;param&#125;</span>&quot;</span>)<br></code></pre></td></tr></table></figure><p><imgsrc="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/202406302123628.png" /></p><ul><li>net.0.weight æƒé‡å½¢çŠ¶ä¸º[5,3]ï¼Œ5 è¡¨ç¤ºè‡ªå·±çš„èŠ‚ç‚¹æ•°ï¼Œ3è¡¨ç¤ºå‰ä¸€å±‚çš„èŠ‚ç‚¹æ•°</li><li><code>device='cuda:0'</code>è¡¨ç¤ºåœ¨ gpu ä¸Š</li><li><code>requires_grad=True</code>è¡¨ç¤ºæ‰“å¼€æ¢¯åº¦è®¡ç®—åŠŸèƒ½</li></ul><h2 id="ç½‘ç»œå¤–éƒ¨å‚æ•°">3.4 ç½‘ç»œå¤–éƒ¨å‚æ•°</h2><p>åˆå«è¶…å‚æ•°ã€‚</p><ul><li>æ­å»ºç½‘ç»œæ—¶çš„è¶…å‚æ•°ï¼šç½‘ç»œçš„å±‚æ•°ã€å„éšè—å±‚èŠ‚ç‚¹æ•°ã€å„èŠ‚ç‚¹æ¿€æ´»å‡½æ•°ã€å†…éƒ¨å‚æ•°çš„åˆå§‹å€¼ç­‰ã€‚</li><li>è®­ç»ƒç½‘ç»œæ—¶çš„è¶…å‚æ•°ï¼šæŸå¤±å‡½æ•°ã€å­¦ä¹ ç‡ã€ä¼˜åŒ–ç®—æ³•ã€batch_sizeã€epochsç­‰ã€‚</li></ul><p><strong>ï¼ˆ1ï¼‰æ¿€æ´»å‡½æ•°</strong></p><p>å¼•å…¥éçº¿æ€§å› ç´ ï¼Œä»è€Œä½¿ç¥ç»ç½‘ç»œèƒ½å¤Ÿå­¦ä¹ å’Œè¡¨è¾¾æ›´åŠ å¤æ‚çš„å‡½æ•°å…³ç³»ã€‚</p><p><ahref="https://pytorch.org/docs/2.3/nn.html#non-linear-activations-weighted-sum-nonlinearity">å®˜ç½‘</a></p><p>https://cloud.tencent.com/developer/article/1797190</p><p><strong>ï¼ˆ2ï¼‰æŸå¤±å‡½æ•°</strong></p><p>è®¡ç®—ç¥ç»ç½‘ç»œæ¯æ¬¡è¿­ä»£çš„å‰å‘è®¡ç®—ç»“æœä¸çœŸå®å€¼çš„å·®è·ï¼Œä»è€ŒæŒ‡å¯¼ä¸‹ä¸€æ­¥çš„è®­ç»ƒå‘æ­£ç¡®çš„æ–¹å‘è¿›è¡Œã€‚</p><p><a href="https://pytorch.org/docs/2.3/optim.html">å®˜ç½‘</a></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># æŸå¤±å‡½æ•°çš„é€‰æ‹©</span><br>loss_fn = nn.MSELoss()<br><br><span class="hljs-comment"># ä¼˜åŒ–ç®—æ³•çš„é€‰æ‹©</span><br>learning_rate = <span class="hljs-number">0.01</span> <span class="hljs-comment"># è®¾ç½®å­¦ä¹ ç‡</span><br>optimizer = torch.optim.SGD(model.parameters(), lr=learning_rate)<br></code></pre></td></tr></table></figure><h2 id="è®­ç»ƒç½‘è·¯">3.5 è®­ç»ƒç½‘è·¯</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># è®­ç»ƒç½‘ç»œ</span><br>epochs = <span class="hljs-number">1000</span><br>losses = [] <span class="hljs-comment"># è®°å½•æŸå¤±å‡½æ•°å˜åŒ–çš„åˆ—è¡¨</span><br><span class="hljs-comment"># ç»™è®­ç»ƒé›†åˆ’åˆ†è¾“å…¥ä¸è¾“å‡º</span><br>X = train_Data[ : , :<span class="hljs-number">3</span> ] <span class="hljs-comment"># å‰3 åˆ—ä¸ºè¾“å…¥ç‰¹å¾</span><br>Y = train_Data[ : , -<span class="hljs-number">3</span>: ] <span class="hljs-comment"># å3 åˆ—ä¸ºè¾“å‡ºç‰¹å¾</span><br><span class="hljs-keyword">for</span> epoch <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(epochs):<br>    Pred = model(X) <span class="hljs-comment"># ä¸€æ¬¡å‰å‘ä¼ æ’­ï¼ˆæ‰¹é‡ï¼‰</span><br>    loss = loss_fn(Pred, Y) <span class="hljs-comment"># è®¡ç®—æŸå¤±å‡½æ•°</span><br>    losses.append(loss.item()) <span class="hljs-comment"># è®°å½•æŸå¤±å‡½æ•°çš„å˜åŒ–</span><br>    optimizer.zero_grad() <span class="hljs-comment"># æ¸…ç†ä¸Šä¸€è½®æ»ç•™çš„æ¢¯åº¦</span><br>    loss.backward() <span class="hljs-comment"># ä¸€æ¬¡åå‘ä¼ æ’­</span><br>    optimizer.step() <span class="hljs-comment"># ä¼˜åŒ–å†…éƒ¨å‚æ•°</span><br>Fig = plt.figure()<br>plt.plot(<span class="hljs-built_in">range</span>(epochs), losses)<br>plt.ylabel(<span class="hljs-string">&#x27;loss&#x27;</span>), plt.xlabel(<span class="hljs-string">&#x27;epoch&#x27;</span>)<br>plt.show()<br></code></pre></td></tr></table></figure><p><imgsrc="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/202406302139653.png" /></p><h2 id="æµ‹è¯•ç¥ç½‘ç»œ">3.6 æµ‹è¯•ç¥ç½‘ç»œ</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># æµ‹è¯•ç½‘ç»œ</span><br><span class="hljs-comment"># ç»™æµ‹è¯•é›†åˆ’åˆ†è¾“å…¥ä¸è¾“å‡º</span><br>X = test_Data[:, :<span class="hljs-number">3</span>] <span class="hljs-comment"># å‰3 åˆ—ä¸ºè¾“å…¥ç‰¹å¾</span><br>Y = test_Data[:, -<span class="hljs-number">3</span>:] <span class="hljs-comment"># å3 åˆ—ä¸ºè¾“å‡ºç‰¹å¾</span><br><span class="hljs-keyword">with</span> torch.no_grad(): <span class="hljs-comment"># è¯¥å±€éƒ¨å…³é—­æ¢¯åº¦è®¡ç®—åŠŸèƒ½</span><br>    Pred = model(X) <span class="hljs-comment"># ä¸€æ¬¡å‰å‘ä¼ æ’­ï¼ˆæ‰¹é‡ï¼‰</span><br>    Pred[:,torch.argmax(Pred, axis=<span class="hljs-number">1</span>)] = <span class="hljs-number">1</span><br>    Pred[Pred!=<span class="hljs-number">1</span>] = <span class="hljs-number">0</span><br>    correct = torch.<span class="hljs-built_in">sum</span>( (Pred == Y).<span class="hljs-built_in">all</span>(<span class="hljs-number">1</span>) ) <span class="hljs-comment"># é¢„æµ‹æ­£ç¡®çš„æ ·æœ¬</span><br>    total = Y.size(<span class="hljs-number">0</span>) <span class="hljs-comment"># å…¨éƒ¨çš„æ ·æœ¬æ•°é‡</span><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&#x27;æµ‹è¯•é›†ç²¾å‡†åº¦: <span class="hljs-subst">&#123;<span class="hljs-number">100</span>*correct/total&#125;</span> %&#x27;</span>)<br></code></pre></td></tr></table></figure><h2 id="ä¿å­˜ä¸å¯¼å…¥ç½‘ç»œ">3.7 ä¿å­˜ä¸å¯¼å…¥ç½‘ç»œ</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># ä¿å­˜ç½‘ç»œ</span><br>torch.save(model,<span class="hljs-string">&#x27;model.pth&#x27;</span>)<br><br><span class="hljs-comment"># å¯¼å…¥ç½‘ç»œ</span><br>new_model =torch.load(<span class="hljs-string">&#x27;model.pth&#x27;</span>)<br><br><span class="hljs-comment"># æµ‹è¯•æ–°ç½‘ç»œ</span><br><span class="hljs-comment"># ç»™æµ‹è¯•é›†åˆ’åˆ†è¾“å…¥ä¸è¾“å‡º</span><br>X = test_Data[:, :<span class="hljs-number">3</span>] <span class="hljs-comment"># å‰3 åˆ—ä¸ºè¾“å…¥ç‰¹å¾</span><br>Y = test_Data[:, -<span class="hljs-number">3</span>:] <span class="hljs-comment"># å3 åˆ—ä¸ºè¾“å‡ºç‰¹å¾</span><br><span class="hljs-keyword">with</span> torch.no_grad(): <span class="hljs-comment"># è¯¥å±€éƒ¨å…³é—­æ¢¯åº¦è®¡ç®—åŠŸèƒ½</span><br>    Pred = new_model(X) <span class="hljs-comment"># ç”¨æ–°æ¨¡å‹è¿›è¡Œä¸€æ¬¡å‰å‘ä¼ æ’­</span><br>    Pred[:,torch.argmax(Pred, axis=<span class="hljs-number">1</span>)] = <span class="hljs-number">1</span><br>    Pred[Pred!=<span class="hljs-number">1</span>] = <span class="hljs-number">0</span><br>    correct = torch.<span class="hljs-built_in">sum</span>( (Pred == Y).<span class="hljs-built_in">all</span>(<span class="hljs-number">1</span>) ) <span class="hljs-comment"># é¢„æµ‹æ­£ç¡®çš„æ ·æœ¬</span><br>    total = Y.size(<span class="hljs-number">0</span>) <span class="hljs-comment"># å…¨éƒ¨çš„æ ·æœ¬æ•°é‡</span><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&#x27;æµ‹è¯•é›†ç²¾å‡†åº¦: <span class="hljs-subst">&#123;<span class="hljs-number">100</span>*correct/total&#125;</span> %&#x27;</span>)<br></code></pre></td></tr></table></figure><h1 id="æ‰¹é‡æ¢¯åº¦ä¸‹é™æ¡ˆä¾‹ä»£ç ">4ã€æ‰¹é‡æ¢¯åº¦ä¸‹é™æ¡ˆä¾‹ä»£ç </h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np<br><span class="hljs-keyword">import</span> pandas <span class="hljs-keyword">as</span> pd<br><span class="hljs-keyword">import</span> torch<br><span class="hljs-keyword">import</span> torch.nn <span class="hljs-keyword">as</span> nn<br><span class="hljs-keyword">import</span> matplotlib.pyplot <span class="hljs-keyword">as</span> plt<br><br><span class="hljs-comment"># å±•ç¤ºé«˜æ¸…å›¾</span><br><span class="hljs-keyword">from</span> matplotlib_inline <span class="hljs-keyword">import</span> backend_inline<br>backend_inline.set_matplotlib_formats(<span class="hljs-string">&#x27;svg&#x27;</span>)<br><br><span class="hljs-comment"># å‡†å¤‡æ•°æ®é›†</span><br>df = pd.read_csv(<span class="hljs-string">&#x27;Data.csv&#x27;</span>, index_col=<span class="hljs-number">0</span>) <span class="hljs-comment"># å¯¼å…¥æ•°æ®</span><br>arr = df.values <span class="hljs-comment"># Pandas å¯¹è±¡é€€åŒ–ä¸ºNumPy æ•°ç»„</span><br>arr = arr.astype(np.float32) <span class="hljs-comment"># è½¬ä¸ºfloat32 ç±»å‹æ•°ç»„</span><br>ts = torch.tensor(arr) <span class="hljs-comment"># æ•°ç»„è½¬ä¸ºå¼ é‡</span><br>ts = ts.to(<span class="hljs-string">&#x27;cuda&#x27;</span>) <span class="hljs-comment"># æŠŠè®­ç»ƒé›†æ¬åˆ°cuda ä¸Š</span><br><br><span class="hljs-comment"># åˆ’åˆ†è®­ç»ƒé›†ä¸æµ‹è¯•é›†</span><br>train_size = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">len</span>(ts) * <span class="hljs-number">0.7</span>) <span class="hljs-comment"># è®­ç»ƒé›†çš„æ ·æœ¬æ•°é‡</span><br>test_size = <span class="hljs-built_in">len</span>(ts) - train_size <span class="hljs-comment"># æµ‹è¯•é›†çš„æ ·æœ¬æ•°é‡</span><br>ts = ts[ torch.randperm( ts.size(<span class="hljs-number">0</span>) ) , : ] <span class="hljs-comment"># æ‰“ä¹±æ ·æœ¬çš„é¡ºåº</span><br>train_Data = ts[ : train_size , : ] <span class="hljs-comment"># è®­ç»ƒé›†æ ·æœ¬</span><br>test_Data = ts[ train_size : , : ] <span class="hljs-comment"># æµ‹è¯•é›†æ ·æœ¬</span><br><br><span class="hljs-comment"># åˆ›å»ºç¥ç»ç½‘ç»œ</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">DNN</span>(nn.Module):<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-string">&#x27;&#x27;&#x27; æ­å»ºç¥ç»ç½‘ç»œå„å±‚ &#x27;&#x27;&#x27;</span><br>        <span class="hljs-built_in">super</span>(DNN,self).__init__()<br>        self.net = nn.Sequential( <span class="hljs-comment"># æŒ‰é¡ºåºæ­å»ºå„å±‚</span><br>        nn.Linear(<span class="hljs-number">8</span>, <span class="hljs-number">32</span>), nn.Sigmoid(), <span class="hljs-comment"># ç¬¬1 å±‚ï¼šå…¨è¿æ¥å±‚</span><br>        nn.Linear(<span class="hljs-number">32</span>, <span class="hljs-number">8</span>), nn.Sigmoid(), <span class="hljs-comment"># ç¬¬2 å±‚ï¼šå…¨è¿æ¥å±‚</span><br>        nn.Linear(<span class="hljs-number">8</span>, <span class="hljs-number">4</span>), nn.Sigmoid(), <span class="hljs-comment"># ç¬¬3 å±‚ï¼šå…¨è¿æ¥å±‚</span><br>        nn.Linear(<span class="hljs-number">4</span>, <span class="hljs-number">1</span>), nn.Sigmoid() <span class="hljs-comment"># ç¬¬4 å±‚ï¼šå…¨è¿æ¥å±‚</span><br>        )<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">forward</span>(<span class="hljs-params">self, x</span>):<br>        <span class="hljs-string">&#x27;&#x27;&#x27; å‰å‘ä¼ æ’­ &#x27;&#x27;&#x27;</span><br>        y = self.net(x) <span class="hljs-comment"># x å³è¾“å…¥æ•°æ®</span><br>        <span class="hljs-keyword">return</span> y <span class="hljs-comment"># y å³è¾“å‡ºæ•°æ®</span><br><br>model = DNN().to(<span class="hljs-string">&#x27;cuda:0&#x27;</span>) <span class="hljs-comment"># åˆ›å»ºå­ç±»çš„å®ä¾‹ï¼Œå¹¶æ¬åˆ°GPU ä¸Š</span><br><br><span class="hljs-comment"># æŸå¤±å‡½æ•°çš„é€‰æ‹©</span><br>loss_fn = nn.BCELoss(reduction=<span class="hljs-string">&#x27;mean&#x27;</span>)<br><br><span class="hljs-comment"># ä¼˜åŒ–ç®—æ³•çš„é€‰æ‹©</span><br>learning_rate = <span class="hljs-number">0.005</span> <span class="hljs-comment"># è®¾ç½®å­¦ä¹ ç‡</span><br>optimizer = torch.optim.Adam(model.parameters(), lr=learning_rate)<br><br><span class="hljs-comment"># è®­ç»ƒç½‘ç»œ</span><br>epochs = <span class="hljs-number">5000</span><br>losses = [] <span class="hljs-comment"># è®°å½•æŸå¤±å‡½æ•°å˜åŒ–çš„åˆ—è¡¨</span><br><span class="hljs-comment"># ç»™è®­ç»ƒé›†åˆ’åˆ†è¾“å…¥ä¸è¾“å‡º</span><br>X = train_Data[ : , : -<span class="hljs-number">1</span> ] <span class="hljs-comment"># å‰8 åˆ—ä¸ºè¾“å…¥ç‰¹å¾</span><br>Y = train_Data[ : , -<span class="hljs-number">1</span> ].reshape((-<span class="hljs-number">1</span>,<span class="hljs-number">1</span>)) <span class="hljs-comment"># å1 åˆ—ä¸ºè¾“å‡ºç‰¹å¾</span><br><span class="hljs-comment"># æ­¤å¤„çš„.reshape((-1,1))å°†ä¸€é˜¶å¼ é‡å‡çº§ä¸ºäºŒé˜¶å¼ é‡</span><br><span class="hljs-keyword">for</span> epoch <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(epochs):<br>    Pred = model(X) <span class="hljs-comment"># ä¸€æ¬¡å‰å‘ä¼ æ’­ï¼ˆæ‰¹é‡ï¼‰</span><br>    loss = loss_fn(Pred, Y) <span class="hljs-comment"># è®¡ç®—æŸå¤±å‡½æ•°</span><br>    losses.append(loss.item()) <span class="hljs-comment"># è®°å½•æŸå¤±å‡½æ•°çš„å˜åŒ–</span><br>    optimizer.zero_grad() <span class="hljs-comment"># æ¸…ç†ä¸Šä¸€è½®æ»ç•™çš„æ¢¯åº¦</span><br>    loss.backward() <span class="hljs-comment"># ä¸€æ¬¡åå‘ä¼ æ’­</span><br>    optimizer.step() <span class="hljs-comment"># ä¼˜åŒ–å†…éƒ¨å‚æ•°</span><br>Fig = plt.figure()<br>plt.plot(<span class="hljs-built_in">range</span>(epochs), losses)<br>plt.ylabel(<span class="hljs-string">&#x27;loss&#x27;</span>)<br>plt.xlabel(<span class="hljs-string">&#x27;epoch&#x27;</span>)<br>plt.show()<br><br><span class="hljs-comment"># æµ‹è¯•ç½‘ç»œ</span><br><span class="hljs-comment"># ç»™æµ‹è¯•é›†åˆ’åˆ†è¾“å…¥ä¸è¾“å‡º</span><br>X = test_Data[ : , : -<span class="hljs-number">1</span> ] <span class="hljs-comment"># å‰8 åˆ—ä¸ºè¾“å…¥ç‰¹å¾</span><br>Y = test_Data[ : , -<span class="hljs-number">1</span> ].reshape((-<span class="hljs-number">1</span>,<span class="hljs-number">1</span>)) <span class="hljs-comment"># å1 åˆ—ä¸ºè¾“å‡ºç‰¹å¾</span><br><span class="hljs-keyword">with</span> torch.no_grad(): <span class="hljs-comment"># è¯¥å±€éƒ¨å…³é—­æ¢¯åº¦è®¡ç®—åŠŸèƒ½</span><br>    Pred = model(X) <span class="hljs-comment"># ä¸€æ¬¡å‰å‘ä¼ æ’­ï¼ˆæ‰¹é‡ï¼‰</span><br>    Pred[Pred&gt;=<span class="hljs-number">0.5</span>] = <span class="hljs-number">1</span><br>    Pred[Pred&lt;<span class="hljs-number">0.5</span>] = <span class="hljs-number">0</span><br>    correct = torch.<span class="hljs-built_in">sum</span>( (Pred == Y).<span class="hljs-built_in">all</span>(<span class="hljs-number">1</span>) ) <span class="hljs-comment"># é¢„æµ‹æ­£ç¡®çš„æ ·æœ¬</span><br>    total = Y.size(<span class="hljs-number">0</span>) <span class="hljs-comment"># å…¨éƒ¨çš„æ ·æœ¬æ•°é‡</span><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&#x27;æµ‹è¯•é›†ç²¾å‡†åº¦: <span class="hljs-subst">&#123;<span class="hljs-number">100</span>*correct/total&#125;</span> %&#x27;</span>)<br></code></pre></td></tr></table></figure><h1 id="å°æ‰¹é‡æ¢¯åº¦ä¸‹é™">5ã€å°æ‰¹é‡æ¢¯åº¦ä¸‹é™</h1><p>åœ¨ä½¿ç”¨å°æ‰¹é‡æ¢¯åº¦ä¸‹é™æ—¶ï¼Œå¿…é¡»ä½¿ç”¨ 3 ä¸ª PyTorchå†…ç½®çš„å®ç”¨å·¥å…·ï¼ˆutilsï¼‰ï¼š</p><ul><li>DataSet ç”¨äºå°è£…æ•°æ®é›†ï¼›</li><li>DataLoader ç”¨äºåŠ è½½æ•°æ®ä¸åŒçš„æ‰¹æ¬¡ï¼›</li><li>random_split ç”¨äºåˆ’åˆ†è®­ç»ƒé›†ä¸æµ‹è¯•é›†</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np<br><span class="hljs-keyword">import</span> pandas <span class="hljs-keyword">as</span> pd<br><span class="hljs-keyword">import</span> torch<br><span class="hljs-keyword">import</span> torch.nn <span class="hljs-keyword">as</span> nn<br><span class="hljs-keyword">from</span> torch.utils.data <span class="hljs-keyword">import</span> Dataset<br><span class="hljs-keyword">from</span> torch.utils.data <span class="hljs-keyword">import</span> DataLoader<br><span class="hljs-keyword">from</span> torch.utils.data <span class="hljs-keyword">import</span> random_split<br><span class="hljs-keyword">import</span> matplotlib.pyplot <span class="hljs-keyword">as</span> plt<br>%matplotlib inline<br><br><span class="hljs-comment"># å±•ç¤ºé«˜æ¸…å›¾</span><br><span class="hljs-keyword">from</span> matplotlib_inline <span class="hljs-keyword">import</span> backend_inline<br>backend_inline.set_matplotlib_formats(<span class="hljs-string">&#x27;svg&#x27;</span>)<br><br><span class="hljs-comment"># åˆ¶ä½œæ•°æ®é›†</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyData</span>(<span class="hljs-title class_ inherited__">Dataset</span>): <span class="hljs-comment"># ç»§æ‰¿Dataset ç±»</span><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, filepath</span>):<br>        df = pd.read_csv(filepath, index_col=<span class="hljs-number">0</span>) <span class="hljs-comment"># å¯¼å…¥æ•°æ®</span><br>        arr = df.values <span class="hljs-comment"># å¯¹è±¡é€€åŒ–ä¸ºæ•°ç»„</span><br>        arr = arr.astype(np.float32) <span class="hljs-comment"># è½¬ä¸ºfloat32 ç±»å‹æ•°ç»„</span><br>        ts = torch.tensor(arr) <span class="hljs-comment"># æ•°ç»„è½¬ä¸ºå¼ é‡</span><br>        ts = ts.to(<span class="hljs-string">&#x27;cuda&#x27;</span>) <span class="hljs-comment"># æŠŠè®­ç»ƒé›†æ¬åˆ°cuda ä¸Š</span><br>        self.X = ts[ : , : -<span class="hljs-number">1</span> ] <span class="hljs-comment"># å‰8 åˆ—ä¸ºè¾“å…¥ç‰¹å¾</span><br>        self.Y = ts[ : , -<span class="hljs-number">1</span> ].reshape((-<span class="hljs-number">1</span>,<span class="hljs-number">1</span>)) <span class="hljs-comment"># å1 åˆ—ä¸ºè¾“å‡ºç‰¹å¾</span><br>        self.<span class="hljs-built_in">len</span> = ts.shape[<span class="hljs-number">0</span>] <span class="hljs-comment"># æ ·æœ¬çš„æ€»æ•°</span><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__getitem__</span>(<span class="hljs-params">self, index</span>):<br>        <span class="hljs-keyword">return</span> self.X[index], self.Y[index]<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__len__</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-keyword">return</span> self.<span class="hljs-built_in">len</span><br><br><span class="hljs-comment"># åˆ’åˆ†è®­ç»ƒé›†ä¸æµ‹è¯•é›†</span><br>Data = MyData(<span class="hljs-string">&#x27;Data.csv&#x27;</span>)<br>train_size = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">len</span>(Data) * <span class="hljs-number">0.7</span>) <span class="hljs-comment"># è®­ç»ƒé›†çš„æ ·æœ¬æ•°é‡</span><br>test_size = <span class="hljs-built_in">len</span>(Data) - train_size <span class="hljs-comment"># æµ‹è¯•é›†çš„æ ·æœ¬æ•°é‡</span><br>train_Data, test_Data = random_split(Data, [train_size, test_size])<br><br><span class="hljs-comment"># æ‰¹æ¬¡åŠ è½½å™¨</span><br>train_loader = DataLoader(dataset=train_Data, shuffle=<span class="hljs-literal">True</span>, batch_size=<span class="hljs-number">128</span>) <span class="hljs-comment"># shuffleæ´—ç‰Œ</span><br>test_loader = DataLoader(dataset=test_Data, shuffle=<span class="hljs-literal">False</span>, batch_size=<span class="hljs-number">64</span>) <span class="hljs-comment"># æµ‹è¯•é›†å°±ä¸éœ€è¦æ´—ç‰Œäº†</span><br><br><span class="hljs-comment"># æ­å»ºç¥ç»ç½‘ç»œ</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">DNN</span>(nn.Module):<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-string">&#x27;&#x27;&#x27; æ­å»ºç¥ç»ç½‘ç»œå„å±‚ &#x27;&#x27;&#x27;</span><br>        <span class="hljs-built_in">super</span>(DNN,self).__init__()<br>        self.net = nn.Sequential( <span class="hljs-comment"># æŒ‰é¡ºåºæ­å»ºå„å±‚</span><br>        nn.Linear(<span class="hljs-number">8</span>, <span class="hljs-number">32</span>), nn.Sigmoid(), <span class="hljs-comment"># ç¬¬1 å±‚ï¼šå…¨è¿æ¥å±‚</span><br>        nn.Linear(<span class="hljs-number">32</span>, <span class="hljs-number">8</span>), nn.Sigmoid(), <span class="hljs-comment"># ç¬¬2 å±‚ï¼šå…¨è¿æ¥å±‚</span><br>        nn.Linear(<span class="hljs-number">8</span>, <span class="hljs-number">4</span>), nn.Sigmoid(), <span class="hljs-comment"># ç¬¬3 å±‚ï¼šå…¨è¿æ¥å±‚</span><br>        nn.Linear(<span class="hljs-number">4</span>, <span class="hljs-number">1</span>), nn.Sigmoid() <span class="hljs-comment"># ç¬¬4 å±‚ï¼šå…¨è¿æ¥å±‚</span><br>        )<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">forward</span>(<span class="hljs-params">self, x</span>):<br>        <span class="hljs-string">&#x27;&#x27;&#x27; å‰å‘ä¼ æ’­ &#x27;&#x27;&#x27;</span><br>        y = self.net(x) <span class="hljs-comment"># x å³è¾“å…¥æ•°æ®</span><br>        <span class="hljs-keyword">return</span> y <span class="hljs-comment"># y å³è¾“å‡ºæ•°æ®</span><br><br>model = DNN().to(<span class="hljs-string">&#x27;cuda:0&#x27;</span>) <span class="hljs-comment"># åˆ›å»ºå­ç±»çš„å®ä¾‹ï¼Œå¹¶æ¬åˆ°GPU ä¸Š</span><br>model <span class="hljs-comment"># æŸ¥çœ‹è¯¥å®ä¾‹çš„å„å±‚</span><br><br><span class="hljs-comment"># ä¼˜åŒ–ç®—æ³•çš„é€‰æ‹©</span><br>learning_rate = <span class="hljs-number">0.005</span> <span class="hljs-comment"># è®¾ç½®å­¦ä¹ ç‡</span><br>optimizer = torch.optim.Adam(model.parameters(), lr=learning_rate)<br><br><span class="hljs-comment"># è®­ç»ƒç½‘ç»œ</span><br>epochs = <span class="hljs-number">500</span><br>losses = [] <span class="hljs-comment"># è®°å½•æŸå¤±å‡½æ•°å˜åŒ–çš„åˆ—è¡¨</span><br><span class="hljs-keyword">for</span> epoch <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(epochs):<br>    <span class="hljs-keyword">for</span> (x, y) <span class="hljs-keyword">in</span> train_loader: <span class="hljs-comment"># è·å–å°æ‰¹æ¬¡çš„x ä¸y</span><br>        Pred = model(x) <span class="hljs-comment"># ä¸€æ¬¡å‰å‘ä¼ æ’­ï¼ˆå°æ‰¹é‡ï¼‰</span><br>        loss = loss_fn(Pred, y) <span class="hljs-comment"># è®¡ç®—æŸå¤±å‡½æ•°</span><br>        losses.append(loss.item()) <span class="hljs-comment"># è®°å½•æŸå¤±å‡½æ•°çš„å˜åŒ–</span><br>        optimizer.zero_grad() <span class="hljs-comment"># æ¸…ç†ä¸Šä¸€è½®æ»ç•™çš„æ¢¯åº¦</span><br>        loss.backward() <span class="hljs-comment"># ä¸€æ¬¡åå‘ä¼ æ’­</span><br>        optimizer.step() <span class="hljs-comment"># ä¼˜åŒ–å†…éƒ¨å‚æ•°</span><br>Fig = plt.figure()<br>plt.plot(<span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(losses)), losses)<br>plt.show()<br><br><span class="hljs-comment"># æµ‹è¯•ç½‘ç»œ</span><br>correct = <span class="hljs-number">0</span><br>total = <span class="hljs-number">0</span><br><span class="hljs-keyword">with</span> torch.no_grad(): <span class="hljs-comment"># è¯¥å±€éƒ¨å…³é—­æ¢¯åº¦è®¡ç®—åŠŸèƒ½</span><br>    <span class="hljs-keyword">for</span> (x, y) <span class="hljs-keyword">in</span> test_loader: <span class="hljs-comment"># è·å–å°æ‰¹æ¬¡çš„x ä¸y</span><br>        Pred = model(x) <span class="hljs-comment"># ä¸€æ¬¡å‰å‘ä¼ æ’­ï¼ˆå°æ‰¹é‡ï¼‰</span><br>        Pred[Pred&gt;=<span class="hljs-number">0.5</span>] = <span class="hljs-number">1</span><br>        Pred[Pred&lt;<span class="hljs-number">0.5</span>] = <span class="hljs-number">0</span><br>        correct += torch.<span class="hljs-built_in">sum</span>( (Pred == y).<span class="hljs-built_in">all</span>(<span class="hljs-number">1</span>) )<br>        total += y.size(<span class="hljs-number">0</span>)<br><span class="hljs-built_in">print</span>(<span class="hljs-string">f&#x27;æµ‹è¯•é›†ç²¾å‡†åº¦: <span class="hljs-subst">&#123;<span class="hljs-number">100</span>*correct/total&#125;</span> %&#x27;</span>)<br></code></pre></td></tr></table></figure><p>å°æ‰¹é‡æ—¶é’ˆå¯¹å±€éƒ¨è¿›è¡Œå‘å‰å‘åï¼Œæ‰€ä»¥å‡ºæ¥çš„æŸå¤±å‡½æ•°ä¸æ˜¯æ¢¯åº¦ä¸‹é™çš„ã€‚</p><p><imgsrc="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/202406302207424.png" /></p><h1 id="æ‰‹å†™æ•°å­—è¯†åˆ«">6ã€æ‰‹å†™æ•°å­—è¯†åˆ«</h1><p>æ‰‹å†™æ•°å­—è¯†åˆ«æ•°æ®é›†ï¼ˆMNISTï¼‰æ˜¯æœºå™¨å­¦ä¹ é¢†åŸŸçš„æ ‡å‡†æ•°æ®é›†</p><p><imgsrc="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/202406302208601.png" /></p><ul><li>è¾“å…¥ï¼šä¸€å‰¯å›¾åƒ</li><li>è¾“å‡ºï¼šä¸€ä¸ªä¸å›¾åƒä¸­å¯¹åº”çš„æ•°å­—ï¼ˆ0 è‡³ 9ä¹‹é—´çš„ä¸€ä¸ªæ•´æ•°ï¼Œä¸æ˜¯ç‹¬çƒ­ç¼–ç ï¼‰</li></ul><blockquote><p>æˆ‘ä»¬ä¸ç”¨æ‰‹åŠ¨å°†è¾“å‡ºè½¬æ¢ä¸ºç‹¬çƒ­ç¼–ç ï¼ŒPyTorchä¼šåœ¨æ•´ä¸ªè¿‡ç¨‹ä¸­è‡ªåŠ¨å°†æ•°æ®é›†çš„è¾“å‡ºè½¬æ¢ä¸ºç‹¬çƒ­ç¼–ç .åªæœ‰åœ¨æœ€åæµ‹è¯•ç½‘ç»œæ—¶ï¼Œæˆ‘ä»¬å¯¹æ¯”æµ‹è¯•é›†çš„é¢„æµ‹è¾“å‡ºä¸çœŸå®è¾“å‡ºæ—¶ï¼Œæ‰éœ€è¦æ³¨æ„ä¸€ä¸‹ã€‚</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> torch<br><span class="hljs-keyword">import</span> torch.nn <span class="hljs-keyword">as</span> nn<br><span class="hljs-keyword">from</span> torch.utils.data <span class="hljs-keyword">import</span> DataLoader<br><span class="hljs-keyword">from</span> torchvision <span class="hljs-keyword">import</span> transforms <span class="hljs-comment"># éœ€è¦ä½¿ç”¨pip installå®‰è£…ä¸€ä¸‹</span><br><span class="hljs-keyword">from</span> torchvision <span class="hljs-keyword">import</span> datasets<br><span class="hljs-keyword">import</span> matplotlib.pyplot <span class="hljs-keyword">as</span> plt<br>%matplotlib inline<br></code></pre></td></tr></table></figure><p>ä¸‹è½½æ—¶éœ€è¦å¼€å¯å…¨å±€ä»£ç†</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># åˆ¶ä½œæ•°æ®é›†</span><br><span class="hljs-comment"># æ•°æ®é›†è½¬æ¢å‚æ•°</span><br>transform = transforms.Compose([<br>    transforms.ToTensor(),<br>    transforms.Normalize(<span class="hljs-number">0.1307</span>, <span class="hljs-number">0.3081</span>)<br>])<br><br><span class="hljs-comment"># ä¸‹è½½è®­ç»ƒé›†ä¸æµ‹è¯•é›†</span><br>train_Data = datasets.MNIST(<br>    root = <span class="hljs-string">&#x27;F:\Jupyter\pytorch\dataset\mnist&#x27;</span>, <span class="hljs-comment"># ä¸‹è½½è·¯å¾„</span><br>    train = <span class="hljs-literal">True</span>, <span class="hljs-comment"># æ˜¯train é›†</span><br>    download = <span class="hljs-literal">True</span>, <span class="hljs-comment"># å¦‚æœè¯¥è·¯å¾„æ²¡æœ‰è¯¥æ•°æ®é›†ï¼Œå°±ä¸‹è½½</span><br>    transform = transform <span class="hljs-comment"># æ•°æ®é›†è½¬æ¢å‚æ•°</span><br>)<br><br>test_Data = datasets.MNIST(<br>    root = <span class="hljs-string">&#x27;F:\Jupyter\pytorch\dataset\mnist&#x27;</span>, <span class="hljs-comment"># ä¸‹è½½è·¯å¾„</span><br>    train = <span class="hljs-literal">False</span>, <span class="hljs-comment"># æ˜¯test é›†</span><br>    download = <span class="hljs-literal">True</span>, <span class="hljs-comment"># å¦‚æœè¯¥è·¯å¾„æ²¡æœ‰è¯¥æ•°æ®é›†ï¼Œå°±ä¸‹è½½</span><br>    transform = transform <span class="hljs-comment"># æ•°æ®é›†è½¬æ¢å‚æ•°</span><br>)<br><br><span class="hljs-comment"># æ‰¹æ¬¡åŠ è½½å™¨</span><br>train_loader = DataLoader(train_Data, shuffle=<span class="hljs-literal">True</span>, batch_size=<span class="hljs-number">64</span>)<br>test_loader = DataLoader(test_Data, shuffle=<span class="hljs-literal">False</span>, batch_size=<span class="hljs-number">64</span>)<br><br><span class="hljs-string">&#x27;&#x27;&#x27;</span><br><span class="hljs-string">æ¯ä¸ªæ ·æœ¬çš„è¾“å…¥éƒ½æ˜¯å½¢çŠ¶ä¸º28ï‚´28çš„äºŒç»´æ•°ç»„ï¼Œé‚£ä¹ˆå¯¹äº DNN æ¥è¯´ï¼Œè¾“å…¥å±‚çš„ç¥ç»å…ƒèŠ‚ç‚¹å°±è¦æœ‰28x28 = 784ä¸ªï¼›è¾“å‡ºå±‚ä½¿ç”¨ç‹¬çƒ­ç¼–ç ï¼Œéœ€è¦ 10 ä¸ªèŠ‚ç‚¹ã€‚</span><br><span class="hljs-string">&#x27;&#x27;&#x27;</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">DNN</span>(nn.Module):<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-string">&#x27;&#x27;&#x27; æ­å»ºç¥ç»ç½‘ç»œå„å±‚ &#x27;&#x27;&#x27;</span><br>        <span class="hljs-built_in">super</span>(DNN,self).__init__()<br>        self.net = nn.Sequential( <span class="hljs-comment"># æŒ‰é¡ºåºæ­å»ºå„å±‚</span><br>        nn.Flatten(), <span class="hljs-comment"># æŠŠå›¾åƒé“ºå¹³æˆä¸€ç»´</span><br>        nn.Linear(<span class="hljs-number">784</span>, <span class="hljs-number">512</span>), nn.ReLU(), <span class="hljs-comment"># ç¬¬1 å±‚ï¼šå…¨è¿æ¥å±‚</span><br>        nn.Linear(<span class="hljs-number">512</span>, <span class="hljs-number">256</span>), nn.ReLU(), <span class="hljs-comment"># ç¬¬2 å±‚ï¼šå…¨è¿æ¥å±‚</span><br>        nn.Linear(<span class="hljs-number">256</span>, <span class="hljs-number">128</span>), nn.ReLU(), <span class="hljs-comment"># ç¬¬3 å±‚ï¼šå…¨è¿æ¥å±‚</span><br>        nn.Linear(<span class="hljs-number">128</span>, <span class="hljs-number">64</span>), nn.ReLU(), <span class="hljs-comment"># ç¬¬4 å±‚ï¼šå…¨è¿æ¥å±‚</span><br>        nn.Linear(<span class="hljs-number">64</span>, <span class="hljs-number">10</span>) <span class="hljs-comment"># ç¬¬5 å±‚ï¼šå…¨è¿æ¥å±‚</span><br>    )<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">forward</span>(<span class="hljs-params">self, x</span>):<br>        <span class="hljs-string">&#x27;&#x27;&#x27; å‰å‘ä¼ æ’­ &#x27;&#x27;&#x27;</span><br>        y = self.net(x) <span class="hljs-comment"># x å³è¾“å…¥æ•°æ®</span><br>        <span class="hljs-keyword">return</span> y <span class="hljs-comment"># y å³è¾“å‡ºæ•°æ®</span><br><br>model = DNN().to(<span class="hljs-string">&#x27;cuda:0&#x27;</span>) <span class="hljs-comment"># åˆ›å»ºå­ç±»çš„å®ä¾‹ï¼Œå¹¶æ¬åˆ°GPU ä¸Š</span><br>model <span class="hljs-comment"># æŸ¥çœ‹è¯¥å®ä¾‹çš„å„å±‚</span><br><br><span class="hljs-comment"># æŸå¤±å‡½æ•°çš„é€‰æ‹©</span><br>loss_fn = nn.CrossEntropyLoss() <span class="hljs-comment"># è‡ªå¸¦softmax æ¿€æ´»å‡½æ•°</span><br><br><span class="hljs-comment"># ä¼˜åŒ–ç®—æ³•çš„é€‰æ‹©</span><br>learning_rate = <span class="hljs-number">0.01</span> <span class="hljs-comment"># è®¾ç½®å­¦ä¹ ç‡</span><br>optimizer = torch.optim.SGD(<br>    model.parameters(),<br>    lr = learning_rate,<br>    momentum = <span class="hljs-number">0.5</span><br>)<br><br><span class="hljs-comment"># è®­ç»ƒç½‘ç»œ</span><br>epochs = <span class="hljs-number">5</span><br>losses = [] <span class="hljs-comment"># è®°å½•æŸå¤±å‡½æ•°å˜åŒ–çš„åˆ—è¡¨</span><br><span class="hljs-keyword">for</span> epoch <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(epochs):<br>    <span class="hljs-keyword">for</span> (x, y) <span class="hljs-keyword">in</span> train_loader: <span class="hljs-comment"># è·å–å°æ‰¹æ¬¡çš„x ä¸y</span><br>        x, y = x.to(<span class="hljs-string">&#x27;cuda:0&#x27;</span>), y.to(<span class="hljs-string">&#x27;cuda:0&#x27;</span>)<br>        Pred = model(x) <span class="hljs-comment"># ä¸€æ¬¡å‰å‘ä¼ æ’­ï¼ˆå°æ‰¹é‡ï¼‰</span><br>        loss = loss_fn(Pred, y) <span class="hljs-comment"># è®¡ç®—æŸå¤±å‡½æ•°</span><br>        losses.append(loss.item()) <span class="hljs-comment"># è®°å½•æŸå¤±å‡½æ•°çš„å˜åŒ–</span><br>        optimizer.zero_grad() <span class="hljs-comment"># æ¸…ç†ä¸Šä¸€è½®æ»ç•™çš„æ¢¯åº¦</span><br>        loss.backward() <span class="hljs-comment"># ä¸€æ¬¡åå‘ä¼ æ’­</span><br>        optimizer.step() <span class="hljs-comment"># ä¼˜åŒ–å†…éƒ¨å‚æ•°</span><br>Fig = plt.figure()<br>plt.plot(<span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(losses)), losses)<br>plt.show()<br><br><span class="hljs-comment"># æµ‹è¯•ç½‘ç»œ</span><br>correct = <span class="hljs-number">0</span><br>total = <span class="hljs-number">0</span><br><span class="hljs-keyword">with</span> torch.no_grad(): <span class="hljs-comment"># è¯¥å±€éƒ¨å…³é—­æ¢¯åº¦è®¡ç®—åŠŸèƒ½</span><br>    <span class="hljs-keyword">for</span> (x, y) <span class="hljs-keyword">in</span> test_loader: <span class="hljs-comment"># è·å–å°æ‰¹æ¬¡çš„x ä¸y</span><br>        x, y = x.to(<span class="hljs-string">&#x27;cuda:0&#x27;</span>), y.to(<span class="hljs-string">&#x27;cuda:0&#x27;</span>)<br>        Pred = model(x) <span class="hljs-comment"># ä¸€æ¬¡å‰å‘ä¼ æ’­ï¼ˆå°æ‰¹é‡ï¼‰</span><br>        _, predicted = torch.<span class="hljs-built_in">max</span>(Pred.data, dim=<span class="hljs-number">1</span>)<br>        correct += torch.<span class="hljs-built_in">sum</span>( (predicted == y) )<br>        total += y.size(<span class="hljs-number">0</span>)<br><span class="hljs-built_in">print</span>(<span class="hljs-string">f&#x27;æµ‹è¯•é›†ç²¾å‡†åº¦: <span class="hljs-subst">&#123;<span class="hljs-number">100</span>*correct/total&#125;</span> %&#x27;</span>)<br></code></pre></td></tr></table></figure><p><imgsrc="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/202406302232034.png" /></p><p>æµ‹è¯•é›†ç²¾å‡†åº¦: 97.06999969482422 %</p>]]></content>
    
    
    <summary type="html">åŸºäºpytorchçš„æ·±åº¦å­¦ä¹ ç¬”è®°ï¼ŒåŒ…æ‹¬ç¯å¢ƒé…ç½®ã€DNNçš„å®ç°åŸç†ä»¥åŠæ‰¹é‡æ¢¯åº¦ä¸‹é™æ¡ˆä¾‹ã€å°æ‰¹é‡æ¢¯åº¦ä¸‹é™æ¡ˆä¾‹å’Œæ‰‹å†™æ•°å­—è¯†åˆ«æ¡ˆä¾‹</summary>
    
    
    
    <category term="ç¼–ç¨‹" scheme="http://example.com/categories/%E7%BC%96%E7%A8%8B/"/>
    
    <category term="å¤§æ¨¡å‹" scheme="http://example.com/categories/%E7%BC%96%E7%A8%8B/%E5%A4%A7%E6%A8%A1%E5%9E%8B/"/>
    
    
    <category term="ç¼–ç¨‹" scheme="http://example.com/tags/%E7%BC%96%E7%A8%8B/"/>
    
    <category term="å­¦ä¹ ç¬”è®°" scheme="http://example.com/tags/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    
    <category term="python" scheme="http://example.com/tags/python/"/>
    
    <category term="æ·±åº¦å­¦ä¹ " scheme="http://example.com/tags/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/"/>
    
    <category term="pytorch" scheme="http://example.com/tags/pytorch/"/>
    
  </entry>
  
  <entry>
    <title>Nestå­¦ä¹ ç¬”è®°</title>
    <link href="http://example.com/2024/06/29/024%20Nest%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    <id>http://example.com/2024/06/29/024%20Nest%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/</id>
    <published>2024-06-29T12:40:00.000Z</published>
    <updated>2025-02-08T06:47:20.942Z</updated>
    
    <content type="html"><![CDATA[<h1 id="ä¸€èµ·æ­¥">ä¸€ã€èµ·æ­¥</h1><h2 id="é¡¹ç›®åˆ›å»º">1.1 é¡¹ç›®åˆ›å»º</h2><p>å®‰è£…è„šæ‰‹æ¶</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ npm i -g @nestjs/cli<br></code></pre></td></tr></table></figure><p>åˆ›å»ºæ–°é¡¹ç›®</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ nest new project-name<br></code></pre></td></tr></table></figure><h2 id="é¡¹ç›®æ–‡ä»¶">1.2 é¡¹ç›®æ–‡ä»¶</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs bash">src<br> â”œâ”€â”€ app.controller.spec.ts<br> â”œâ”€â”€ app.controller.ts<br> â”œâ”€â”€ app.module.ts<br> â”œâ”€â”€ app.service.ts<br> â””â”€â”€ main.ts<br></code></pre></td></tr></table></figure><p>å«ä¹‰</p><table><thead><tr><th>æ–‡ä»¶å</th><th>å«ä¹‰</th></tr></thead><tbody><tr><td>app.controller.ts</td><td>å¸¦æœ‰å•ä¸ªè·¯ç”±çš„åŸºæœ¬æ§åˆ¶å™¨ç¤ºä¾‹ã€‚</td></tr><tr><td>app.controller.spec.ts</td><td>å¯¹äºåŸºæœ¬æ§åˆ¶å™¨çš„å•å…ƒæµ‹è¯•æ ·ä¾‹</td></tr><tr><td>app.module.ts</td><td>åº”ç”¨ç¨‹åºçš„æ ¹æ¨¡å—ã€‚</td></tr><tr><td>app.service.ts</td><td>å¸¦æœ‰å•ä¸ªæ–¹æ³•çš„åŸºæœ¬æœåŠ¡</td></tr><tr><td>main.ts</td><td>åº”ç”¨ç¨‹åºå…¥å£æ–‡ä»¶ã€‚å®ƒä½¿ç”¨ <code>NestFactory</code> ç”¨æ¥åˆ›å»º Neståº”ç”¨å®ä¾‹ã€‚</td></tr></tbody></table><h2 id="å¯åŠ¨é¡¹ç›®">1.3 å¯åŠ¨é¡¹ç›®</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">cd</span> demo1<br>yarn run start<br></code></pre></td></tr></table></figure><figure><imgsrc="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/image-20230113144220518.png"alt="image-20230113144220518" /><figcaption aria-hidden="true">image-20230113144220518</figcaption></figure><p>çƒ­å¯åŠ¨é¡¹ç›®ï¼ˆå®æ—¶æ›´æ–°ï¼‰ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">yarn start:dev<br></code></pre></td></tr></table></figure><h2 id="ä¸»æ–‡ä»¶">1.4 ä¸»æ–‡ä»¶</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// main.ts</span><br><span class="hljs-keyword">import</span> &#123; <span class="hljs-title class_">NestFactory</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;@nestjs/core&quot;</span>;<br><span class="hljs-keyword">import</span> &#123; <span class="hljs-title class_">AppModule</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./app.module&quot;</span>;<br><br><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">bootstrap</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">const</span> app = <span class="hljs-keyword">await</span> <span class="hljs-title class_">NestFactory</span>.<span class="hljs-title function_">create</span>(<span class="hljs-title class_">AppModule</span>);<br>  <span class="hljs-keyword">await</span> app.<span class="hljs-title function_">listen</span>(<span class="hljs-number">3000</span>);<br>&#125;<br><span class="hljs-title function_">bootstrap</span>();<br></code></pre></td></tr></table></figure><p>è¦åˆ›å»ºä¸€ä¸ª Nest åº”ç”¨å®ä¾‹ï¼Œæˆ‘ä»¬ä½¿ç”¨äº† <code>NestFactory</code>æ ¸å¿ƒç±»ã€‚<code>NestFactory</code>æš´éœ²äº†ä¸€äº›é™æ€æ–¹æ³•ç”¨äºåˆ›å»ºåº”ç”¨å®ä¾‹ã€‚</p><p><code>create()</code> æ–¹æ³•è¿”å›ä¸€ä¸ªå®ç° <code>INestApplication</code>æ¥å£çš„å¯¹è±¡ã€‚è¯¥å¯¹è±¡æä¾›äº†ä¸€ç»„å¯ç”¨çš„æ–¹æ³•ï¼Œæˆ‘ä»¬ä¼šåœ¨åé¢çš„ç« èŠ‚ä¸­å¯¹è¿™äº›æ–¹æ³•è¿›è¡Œè¯¦ç»†æè¿°ã€‚åœ¨ä¸Šé¢çš„ <code>main.ts</code> ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬åªæ˜¯å¯åŠ¨ HTTPæœåŠ¡ï¼Œè®©åº”ç”¨ç¨‹åºç­‰å¾… HTTP è¯·æ±‚ã€‚</p><h2 id="åˆ›å»º-moudle">1.5 åˆ›å»º Moudle</h2><h3 id="æ‰‹åŠ¨åˆ›å»º">1.5.1 æ‰‹åŠ¨åˆ›å»º</h3><p>src/auth/auth.moudle.ts</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">import</span> &#123; <span class="hljs-title class_">Module</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;@nestjs/common&quot;</span>;<br><br><span class="hljs-meta">@Module</span>(&#123;&#125;)<br><span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AuthModule</span> &#123;&#125;<br></code></pre></td></tr></table></figure><p>å¯¼å…¥åˆ° app ä¸­</p><p>src/app.module.ts</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">import</span> &#123; <span class="hljs-title class_">Module</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;@nestjs/common&quot;</span>;<br><span class="hljs-keyword">import</span> &#123; <span class="hljs-title class_">AuthModule</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./auth/auth.module&quot;</span>;<br><br><span class="hljs-meta">@Module</span>(&#123;<br>  <span class="hljs-attr">imports</span>: [<span class="hljs-title class_">AuthModule</span>],<br>&#125;)<br><span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AppModule</span> &#123;&#125;<br></code></pre></td></tr></table></figure><h3 id="å‘½ä»¤è¡Œåˆ›å»º">1.5.2 å‘½ä»¤è¡Œåˆ›å»º</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs base">nest g module user<br></code></pre></td></tr></table></figure><figure><imgsrc="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/image-20230113165522565.png"alt="image-20230113165522565" /><figcaption aria-hidden="true">image-20230113165522565</figcaption></figure><h2 id="åˆ›å»ºå®Œæ•´æ¨¡å—">1.6 åˆ›å»ºå®Œæ•´æ¨¡å—</h2><figure><imgsrc="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/image-20230113170716951.png"alt="image-20230113170716951" /><figcaption aria-hidden="true">image-20230113170716951</figcaption></figure><p>controller å…³æ³¨äºè¯·æ±‚çš„é€»è¾‘</p><p>service å…³æ³¨å…·ä½“å®ç°</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// src/auth/auth.module.ts</span><br><br><span class="hljs-keyword">import</span> &#123; <span class="hljs-title class_">Module</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;@nestjs/common&quot;</span>;<br><span class="hljs-keyword">import</span> &#123; <span class="hljs-title class_">AuthContriller</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./auth.controller&quot;</span>;<br><span class="hljs-keyword">import</span> &#123; <span class="hljs-title class_">AuthService</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./auth.service&quot;</span>;<br><br><span class="hljs-meta">@Module</span>(&#123;<br>  <span class="hljs-attr">controllers</span>: [<span class="hljs-title class_">AuthContriller</span>],<br>  <span class="hljs-attr">providers</span>: [<span class="hljs-title class_">AuthService</span>],<br>&#125;)<br><span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AuthModule</span> &#123;&#125;<br></code></pre></td></tr></table></figure><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// src/auth/auth.controller.ts</span><br><br><span class="hljs-keyword">import</span> &#123; <span class="hljs-title class_">Controller</span>, <span class="hljs-title class_">Post</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;@nestjs/common&quot;</span>;<br><span class="hljs-keyword">import</span> &#123; <span class="hljs-title class_">AuthService</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./auth.service&quot;</span>;<br><br><span class="hljs-meta">@Controller</span>(<span class="hljs-string">&quot;auth&quot;</span>)<br><span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AuthContriller</span> &#123;<br>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"><span class="hljs-keyword">private</span> authService: AuthService</span>) &#123;&#125;<br><br>  <span class="hljs-comment">// Post auth/signup</span><br>  <span class="hljs-meta">@Post</span>(<span class="hljs-string">&quot;signup&quot;</span>)<br>  <span class="hljs-title function_">signup</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">authService</span>.<span class="hljs-title function_">signup</span>();<br>  &#125;<br><br>  <span class="hljs-comment">// Post auth/signin</span><br>  <span class="hljs-meta">@Post</span>(<span class="hljs-string">&quot;signin&quot;</span>)<br>  <span class="hljs-title function_">signin</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">authService</span>.<span class="hljs-title function_">signin</span>();<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// src/auth/auth.service.ts</span><br><br><span class="hljs-keyword">import</span> &#123; <span class="hljs-title class_">Injectable</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;@nestjs/common&quot;</span>;<br><br><span class="hljs-meta">@Injectable</span>()<br><span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AuthService</span> &#123;<br>  <span class="hljs-title function_">signup</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">return</span> &#123; <span class="hljs-attr">msg</span>: <span class="hljs-string">&quot;This is a signup page!&quot;</span> &#125;;<br>  &#125;<br><br>  <span class="hljs-title function_">signin</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">return</span> &#123; <span class="hljs-attr">msg</span>: <span class="hljs-string">&quot;This is a signin page!&quot;</span> &#125;;<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h1 id="äºŒåŸºæœ¬æ¦‚å¿µ">äºŒã€åŸºæœ¬æ¦‚å¿µ</h1><h2 id="æ§åˆ¶å™¨">2.1 æ§åˆ¶å™¨</h2><figure><imgsrc="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/image-20230113144733598.png"alt="image-20230113144733598" /><figcaption aria-hidden="true">image-20230113144733598</figcaption></figure><p>ç›®çš„ï¼šæ¥å—åº”ç”¨çš„ç‰¹å®šè¯·æ±‚ï¼›</p><p>æ§åˆ¶å™¨ä¸è·¯ç”±ï¼šé€šå¸¸ä¸€ä¸ªæ§åˆ¶å™¨å«å¤šä¸ªè¯·æ±‚ï¼Œä¸åŒçš„è·¯ç”±æ‰§è¡Œä¸åŒçš„æ“çºµï¼›</p><p>åˆ›å»ºæ§åˆ¶å™¨ï¼šä½¿ç”¨ç±»å’Œ<code>è£…é¥°å™¨</code>ï¼›</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ nest g controller cats<br></code></pre></td></tr></table></figure><h3 id="è·¯ç”±">2.1.1 è·¯ç”±</h3><p>åœ¨ä¸‹é¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ <code>@Controller()</code>è£…é¥°å™¨å®šä¹‰ä¸€ä¸ªåŸºæœ¬çš„æ§åˆ¶å™¨ã€‚</p><p>å¯é€‰ è·¯ç”±è·¯å¾„å‰ç¼€è®¾ç½®ä¸º <code>custom</code>ã€‚åœ¨<code>@Controller()</code>è£…é¥°å™¨ä¸­ä½¿ç”¨è·¯å¾„å‰ç¼€å¯ä»¥ä½¿æˆ‘ä»¬è½»æ¾åœ°å¯¹ä¸€ç»„ç›¸å…³çš„è·¯ç”±è¿›è¡Œåˆ†ç»„ï¼Œå¹¶æœ€å¤§ç¨‹åº¦åœ°å‡å°‘é‡å¤ä»£ç ã€‚</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// app.controller.ts</span><br><span class="hljs-keyword">import</span> &#123; <span class="hljs-title class_">Controller</span>, <span class="hljs-title class_">Get</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;@nestjs/common&quot;</span>;<br><span class="hljs-keyword">import</span> &#123; <span class="hljs-title class_">AppService</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./app.service&quot;</span>;<br><br><span class="hljs-meta">@Controller</span>(<span class="hljs-string">&quot;/custom&quot;</span>)<br><span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AppController</span> &#123;<br>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"><span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> appService: AppService</span>) &#123;&#125;<br><br>  <span class="hljs-meta">@Get</span>(<span class="hljs-string">&quot;/eye&quot;</span>)<br>  <span class="hljs-title function_">getEye</span>(): <span class="hljs-built_in">string</span> &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;æˆ‘æ˜¯çœ¼ç›&quot;</span>;<br>  &#125;<br><br>  <span class="hljs-meta">@Get</span>(<span class="hljs-string">&quot;/mouse&quot;</span>)<br>  <span class="hljs-title function_">getMouse</span>(): <span class="hljs-built_in">string</span> &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;æˆ‘æ˜¯å˜´å·´&quot;</span>;<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>è¯·æ±‚</p><figure><imgsrc="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/image-20230113145438467.png"alt="image-20230113145438467" /><figcaption aria-hidden="true">image-20230113145438467</figcaption></figure><figure><imgsrc="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/image-20230113145600949.png"alt="image-20230113145600949" /><figcaption aria-hidden="true">image-20230113145600949</figcaption></figure><blockquote><p>è¿™é‡Œæ¡ˆä¾‹æ¥è¯´åº”è¯¥è¿”å›çŠ¶æ€ç åŠ æ•°æ®ï¼Œè€Œç½‘é¡µä¸­ç›´æ¥æ˜¾ç¤ºäº†æ•°æ®ï¼ŒåŸå› æ˜¯ nestæœ‰ä¸¤ç§æ“ä½œå“åº”ã€‚</p><p>æ ‡å‡†ï¼šä½¿ç”¨è¿™ä¸ªå†…ç½®æ–¹æ³•ï¼Œå½“è¯·æ±‚å¤„ç†ç¨‹åºè¿”å›ä¸€ä¸ª<code>JavaScript</code> å¯¹è±¡æˆ–æ•°ç»„æ—¶ï¼Œå®ƒå°†è‡ªåŠ¨åºåˆ—åŒ–ä¸º<code>JSON</code>ã€‚ä½†æ˜¯ï¼Œå½“å®ƒè¿”å›ä¸€ä¸ª <code>JavaScript</code>åŸºæœ¬ç±»å‹ï¼ˆä¾‹å¦‚<code>stringã€numberã€boolean</code>ï¼‰æ—¶ï¼Œ Nestå°†åªå‘é€å€¼ï¼Œè€Œä¸å°è¯•åºåˆ—åŒ–å®ƒã€‚è¿™ä½¿å“åº”å¤„ç†å˜å¾—ç®€å•ï¼šåªéœ€è¦è¿”å›å€¼ï¼Œå…¶ä½™çš„ç”±Nest è´Ÿè´£ã€‚</p><p>ç±»åº“ç‰¹æœ‰ï¼šæˆ‘ä»¬å¯ä»¥åœ¨å‡½æ•°ç­¾åå¤„é€šè¿‡ <code>@Res()</code>æ³¨å…¥ç±»åº“ç‰¹å®šçš„å“åº”å¯¹è±¡ï¼ˆä¾‹å¦‚ï¼Œ<code>Express</code>ï¼‰ã€‚ä½¿ç”¨æ­¤æ–¹æ³•ï¼Œä½ å°±èƒ½ä½¿ç”¨ç”±è¯¥å“åº”å¯¹è±¡æš´éœ²çš„åŸç”Ÿå“åº”å¤„ç†å‡½æ•°ã€‚ä¾‹å¦‚ï¼Œä½¿ç”¨<code>Express</code>ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨<code>response.status(200).send()</code> æ„å»ºå“åº”</p></blockquote><p>ç±»åº“ç‰¹æœ‰</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-meta">@Get</span>(<span class="hljs-string">&#x27;head&#x27;</span>)<br><span class="hljs-title function_">getHead</span>(<span class="hljs-params"><span class="hljs-meta">@Res</span>() res</span>) &#123;<br>    res.<span class="hljs-title function_">status</span>(<span class="hljs-title class_">HttpStatus</span>.<span class="hljs-property">OK</span>).<span class="hljs-title function_">send</span>();<br>&#125;<br></code></pre></td></tr></table></figure><p>è€Œä¸”ï¼Œåœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­ï¼Œä½ å¤±å»ä¸ä¾èµ–äº Nest æ ‡å‡†å“åº”å¤„ç†çš„ NeståŠŸèƒ½ï¼ˆä¾‹å¦‚ï¼Œæ‹¦æˆªå™¨ï¼ˆInterceptorsï¼‰ å’Œ<code>@HttpCode()</code>/<code>@Header()</code>è£…é¥°å™¨ï¼‰çš„å…¼å®¹æ€§ã€‚è¦è§£å†³æ­¤é—®é¢˜ï¼Œå¯ä»¥å°† <code>passthrough</code>é€‰é¡¹è®¾ç½®ä¸º <code>true</code>ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-meta">@Get</span>(<span class="hljs-string">&#x27;head&#x27;</span>)<br><span class="hljs-title function_">getHead</span>(<span class="hljs-params"><span class="hljs-meta">@Res</span>(&#123;passthrough:<span class="hljs-literal">true</span>&#125;) res</span>) &#123;<br>    res.<span class="hljs-title function_">status</span>(<span class="hljs-title class_">HttpStatus</span>.<span class="hljs-property">OK</span>)<br>    <span class="hljs-keyword">return</span> []<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="request">2.1.2 <ahref="https://docs.nestjs.cn/9/controllers?id=request">Request</a></h3><p>è®¿é—®è¯·æ±‚ç»†èŠ‚ã€‚</p><p>éœ€è¦å¼•å…¥<code>Req</code>å’Œ<code>import &#123;Request&#125; from 'express';</code></p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">import</span> &#123; <span class="hljs-title class_">Controller</span>, <span class="hljs-title class_">Get</span>, <span class="hljs-title class_">Req</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;@nestjs/common&quot;</span>;<br><span class="hljs-keyword">import</span> &#123; <span class="hljs-title class_">AppService</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./app.service&quot;</span>;<br><span class="hljs-keyword">import</span> &#123; <span class="hljs-title class_">Request</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;express&quot;</span>;<br><br><span class="hljs-meta">@Controller</span>(<span class="hljs-string">&quot;/custom&quot;</span>)<br><span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AppController</span> &#123;<br>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"><span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> appService: AppService</span>) &#123;&#125;<br><br>  <span class="hljs-meta">@Get</span>(<span class="hljs-string">&quot;/eye&quot;</span>)<br>  <span class="hljs-title function_">getEye</span>(<span class="hljs-meta">@Req</span>() <span class="hljs-attr">request</span>: <span class="hljs-title class_">Request</span>): <span class="hljs-built_in">string</span> &#123;<br>    <span class="hljs-comment">// è¿™é‡Œçš„Requestè¡¨ç¤ºç±»å‹</span><br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(request);<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;æˆ‘æ˜¯çœ¼ç›&quot;</span>;<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><blockquote><p><code>Request</code> å¯¹è±¡ä»£è¡¨ <code>HTTP</code>è¯·æ±‚ï¼Œå¹¶å…·æœ‰æŸ¥è¯¢å­—ç¬¦ä¸²ï¼Œè¯·æ±‚å‚æ•°å‚æ•°ï¼ŒHTTP æ ‡å¤´ï¼ˆHTTP headerï¼‰ å’Œæ­£æ–‡ï¼ˆHTTP bodyï¼‰çš„å±æ€§ï¼ˆåœ¨<ahref="https://expressjs.com/en/api.html#req">è¿™é‡Œ</a>é˜…è¯»æ›´å¤šï¼‰ã€‚åœ¨å¤šæ•°æƒ…å†µä¸‹ï¼Œä¸å¿…æ‰‹åŠ¨è·å–å®ƒä»¬ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸“ç”¨çš„è£…é¥°å™¨ï¼Œæ¯”å¦‚å¼€ç®±å³ç”¨çš„ <code>@Body()</code> æˆ–<code>@Query()</code> ã€‚ ä¸‹é¢æ˜¯ Nestæä¾›çš„è£…é¥°å™¨åŠå…¶ä»£è¡¨çš„åº•å±‚å¹³å°ç‰¹å®šå¯¹è±¡çš„å¯¹ç…§åˆ—è¡¨ã€‚</p></blockquote><p>å¤šä¸ªè£…é¥°å™¨</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-meta">@Get</span>(<span class="hljs-string">&#x27;/eye&#x27;</span>)<br><span class="hljs-title function_">getEye</span>(<span class="hljs-meta">@Req</span>() <span class="hljs-attr">request</span>:<span class="hljs-title class_">Request</span>,<span class="hljs-meta">@Ip</span>() ip,<span class="hljs-meta">@HostParam</span>() host): <span class="hljs-built_in">string</span> &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(request.<span class="hljs-property">ip</span>);<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(ip);<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(host);<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;æˆ‘æ˜¯çœ¼ç›&#x27;</span><br>&#125;<br></code></pre></td></tr></table></figure><h3 id="post">2.1.3 Post</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-meta">@Post</span>(<span class="hljs-string">&#x27;/foot&#x27;</span>)<br><span class="hljs-title function_">getFoot</span>():<span class="hljs-built_in">string</span>&#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;æˆ‘æ˜¯è„š&#x27;</span><br>&#125;<br></code></pre></td></tr></table></figure><figure><imgsrc="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/image-20230113153133595.png"alt="image-20230113153133595" /><figcaption aria-hidden="true">image-20230113153133595</figcaption></figure><blockquote><p>Nest ä¸ºæ‰€æœ‰æ ‡å‡†çš„ HTTPæ–¹æ³•æä¾›äº†ç›¸åº”çš„è£…é¥°å™¨ï¼š<code>@Put()</code>ã€<code>@Delete()</code>ã€<code>@Patch()</code>ã€<code>@Options()</code>ã€ä»¥åŠ<code>@Head()</code>ã€‚æ­¤å¤–ï¼Œ<code>@All()</code>åˆ™ç”¨äºå®šä¹‰ä¸€ä¸ªç”¨äºå¤„ç†æ‰€æœ‰ HTTP è¯·æ±‚æ–¹æ³•çš„å¤„ç†ç¨‹åºã€‚</p></blockquote><h3 id="è·¯ç”±é€šé…ç¬¦">2.1.4 è·¯ç”±é€šé…ç¬¦</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-meta">@Get</span>(<span class="hljs-string">&#x27;hand*s&#x27;</span>)<br><span class="hljs-title function_">getHead</span>():<span class="hljs-built_in">string</span>&#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;æˆ‘æ˜¯æ‰‹&#x27;</span><br>&#125;<br></code></pre></td></tr></table></figure><figure><imgsrc="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/image-20230113154504739.png"alt="image-20230113154504739" /><figcaption aria-hidden="true">image-20230113154504739</figcaption></figure><blockquote><p>è·¯ç”±è·¯å¾„ <code>'ab*cd'</code> å°†åŒ¹é… <code>abcd</code>ã€<code>ab_cd</code> ã€<code>abecd</code> ç­‰ã€‚å­—ç¬¦ <code>?</code>ã€<code>+</code> ã€ <code>*</code> ä»¥åŠ <code>()</code>æ˜¯å®ƒä»¬çš„æ­£åˆ™è¡¨è¾¾å¼å¯¹åº”é¡¹çš„å­é›†ã€‚è¿å­—ç¬¦ï¼ˆ<code>-</code>ï¼‰å’Œç‚¹ï¼ˆ<code>.</code>ï¼‰æŒ‰å­—ç¬¦ä¸²è·¯å¾„é€å­—è§£æã€‚</p></blockquote><h3 id="çŠ¶æ€ç ">2.1.5 çŠ¶æ€ç </h3><p>çŠ¶æ€ç é»˜è®¤æ˜¯ 200ï¼ˆpost ä¸º201ï¼‰ï¼Œå¯é€šè¿‡<code>@HttpCode()</code>æ›´æ”¹çŠ¶æ€ç </p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-meta">@Post</span>(<span class="hljs-string">&#x27;foot&#x27;</span>)<br><span class="hljs-meta">@HttpCode</span>(<span class="hljs-number">204</span>)<br><span class="hljs-title function_">getFoot</span>():<span class="hljs-built_in">string</span>&#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;æˆ‘æ˜¯è„š&#x27;</span><br>&#125;<br></code></pre></td></tr></table></figure><h3 id="headers">2.1.6 <ahref="https://docs.nestjs.cn/9/controllers?id=headers">Headers</a></h3><p>æŒ‡å®šè‡ªå®šä¹‰å“åº”å¤´ï¼Œå¯ä»¥ä½¿ç”¨ <code>@header()</code>è£…é¥°å™¨æˆ–ç±»åº“ç‰¹æœ‰çš„å“åº”å¯¹è±¡</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-meta">@Post</span>()<br><span class="hljs-meta">@Header</span>(<span class="hljs-string">&#x27;Cache-Control&#x27;</span>, <span class="hljs-string">&#x27;none&#x27;</span>)<br><span class="hljs-title function_">create</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;This action adds a new cat&#x27;</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="é‡å®šå‘">2.1.7 é‡å®šå‘</h3><p>è¦å°†å“åº”é‡å®šå‘åˆ°ç‰¹å®šçš„ <code>URL</code>ï¼Œå¯ä»¥ä½¿ç”¨<code>@Redirect()</code> è£…é¥°å™¨æˆ–ç‰¹å®šäºåº“çš„å“åº”å¯¹è±¡</p><p><code>@Redirect()</code>è£…é¥°å™¨æœ‰ä¸¤ä¸ªå¯é€‰å‚æ•°ï¼Œ<code>url</code>å’Œ<code>statusCode</code>ã€‚ å¦‚æœçœç•¥ï¼Œåˆ™ <code>statusCode</code> é»˜è®¤ä¸º<code>302</code></p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-meta">@Get</span>()<br><span class="hljs-meta">@Redirect</span>(<span class="hljs-string">&#x27;https://nestjs.com&#x27;</span>, <span class="hljs-number">301</span>)<br></code></pre></td></tr></table></figure><h3 id="è·¯ç”±å‚æ•°">2.1.8 è·¯ç”±å‚æ•°</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-meta">@Get</span>(<span class="hljs-string">&#x27;mouse/:id&#x27;</span>)<br><span class="hljs-title function_">getMouseId</span>(<span class="hljs-meta">@Param</span>() params): <span class="hljs-built_in">string</span> &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">`æˆ‘æ˜¯å˜´å·´<span class="hljs-subst">$&#123;params.id&#125;</span>`</span><br>&#125;<br></code></pre></td></tr></table></figure><figure><imgsrc="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/image-20230113155638965.png"alt="image-20230113155638965" /><figcaption aria-hidden="true">image-20230113155638965</figcaption></figure><p>æˆ–è€…å†™æˆ</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-meta">@Get</span>(<span class="hljs-string">&#x27;mouse/:id&#x27;</span>)<br><span class="hljs-title function_">getMouseId</span>(<span class="hljs-meta">@Param</span>(<span class="hljs-string">&#x27;id&#x27;</span>) id): <span class="hljs-built_in">string</span> &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">`æˆ‘æ˜¯å˜´å·´<span class="hljs-subst">$&#123;id&#125;</span>`</span><br>&#125;<br></code></pre></td></tr></table></figure><h3 id="å­åŸŸè·¯ç”±">2.1.9 <ahref="https://docs.nestjs.cn/9/controllers?id=å­åŸŸè·¯ç”±">å­åŸŸè·¯ç”±</a></h3><p><code>@Controller</code> è£…é¥°å™¨å¯ä»¥æ¥å—ä¸€ä¸ª <code>host</code>é€‰é¡¹ï¼Œä»¥è¦æ±‚ä¼ å…¥è¯·æ±‚çš„ <code>HTTP</code> ä¸»æœºåŒ¹é…æŸä¸ªç‰¹å®šå€¼</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-meta">@Controller</span>(&#123; <span class="hljs-attr">host</span>: <span class="hljs-string">&quot;admin.example.com&quot;</span> &#125;)<br><span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AdminController</span> &#123;<br>  <span class="hljs-meta">@Get</span>()<br>  <span class="hljs-title function_">index</span>(): <span class="hljs-built_in">string</span> &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;Admin page&quot;</span>;<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="å¼‚æ­¥æ€§">2.1.10 å¼‚æ­¥æ€§</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">/* cats.controller.ts */</span><br><br><span class="hljs-meta">@Get</span>()<br><span class="hljs-keyword">async</span> <span class="hljs-title function_">findAll</span>(): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">any</span>[]&gt; &#123;<br>  <span class="hljs-keyword">return</span> [];<br>&#125;<br><br></code></pre></td></tr></table></figure><h3 id="è¯·æ±‚è´Ÿè½½">2.1.11 è¯·æ±‚è´Ÿè½½</h3><p>é¦–å…ˆï¼ˆå¦‚æœæ‚¨ä½¿ç”¨ TypeScriptï¼‰ï¼Œæˆ‘ä»¬éœ€è¦ç¡®å®š<code>DTO</code>ï¼ˆæ•°æ®ä¼ è¾“å¯¹è±¡ï¼‰æ¨¡å¼ã€‚<code>DTO</code>æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå®ƒå®šä¹‰äº†å¦‚ä½•é€šè¿‡ç½‘ç»œå‘é€æ•°æ®ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡ä½¿ç”¨<strong>TypeScript</strong> æ¥å£ï¼ˆInterfaceï¼‰æˆ–ç®€å•çš„ç±»ï¼ˆClassï¼‰æ¥å®šä¹‰DTO æ¨¡å¼ã€‚æœ‰è¶£çš„æ˜¯ï¼Œæˆ‘ä»¬åœ¨è¿™é‡Œæ¨èä½¿ç”¨<strong>ç±»</strong>ã€‚</p><figure><imgsrc="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/image-20230113193701850.png"alt="image-20230113193701850" /><figcaption aria-hidden="true">image-20230113193701850</figcaption></figure><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">/*</span><br><span class="hljs-comment">  create-auto.dto.ts</span><br><span class="hljs-comment">*/</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CreateAuthDto</span> &#123;<br>  <span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span>;<br>  <span class="hljs-attr">age</span>: <span class="hljs-built_in">number</span>;<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">/* auto.controller.ts */</span><br><br><span class="hljs-meta">@Get</span>(<span class="hljs-string">&#x27;getUser/:id&#x27;</span>)<br><span class="hljs-title function_">getUser</span>(<span class="hljs-params"></span><br><span class="hljs-params">    <span class="hljs-meta">@Body</span>() body:CreateAuthDto,</span><br><span class="hljs-params">    <span class="hljs-meta">@Param</span>() params:&#123;id:<span class="hljs-built_in">number</span>&#125;</span><br><span class="hljs-params"></span>)&#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">authService</span>.<span class="hljs-title function_">getUser</span>(body,params);<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">/* auto.service.ts */</span><br><br><span class="hljs-title function_">getUser</span>(<span class="hljs-params"></span><br><span class="hljs-params">    body:CreateAuthDto,</span><br><span class="hljs-params">    params:&#123;id:<span class="hljs-built_in">number</span>&#125;</span><br><span class="hljs-params"></span>)&#123;<br>    <span class="hljs-keyword">return</span> &#123;<span class="hljs-attr">msg</span>:body,params&#125;<br>&#125;<br></code></pre></td></tr></table></figure><h1 id="å…­ç®¡é“">å…­ã€ç®¡é“</h1><h2 id="åº”ç”¨åœºæ™¯">6.1 åº”ç”¨åœºæ™¯</h2><p>ç®¡é“æœ‰ä¸¤ä¸ªå…¸å‹çš„åº”ç”¨åœºæ™¯:</p><ul><li><strong>è½¬æ¢</strong>ï¼šç®¡é“å°†è¾“å…¥æ•°æ®è½¬æ¢ä¸ºæ‰€éœ€çš„æ•°æ®è¾“å‡º(ä¾‹å¦‚ï¼Œå°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºæ•´æ•°)</li><li><strong>éªŒè¯</strong>ï¼šå¯¹è¾“å…¥æ•°æ®è¿›è¡ŒéªŒè¯ï¼Œå¦‚æœéªŒè¯æˆåŠŸç»§ç»­ä¼ é€’;éªŒè¯å¤±è´¥åˆ™æŠ›å‡ºå¼‚å¸¸</li></ul><h2 id="å†…ç½®ç®¡é“">6.2 å†…ç½®ç®¡é“</h2><p><code>Nest</code> è‡ªå¸¦ä¹ä¸ªå¼€ç®±å³ç”¨çš„ç®¡é“ï¼Œå³</p><ul><li><code>ValidationPipe</code></li><li><code>ParseIntPipe</code></li><li><code>ParseFloatPipe</code></li><li><code>ParseBoolPipe</code></li><li><code>ParseArrayPipe</code></li><li><code>ParseUUIDPipe</code></li><li><code>ParseEnumPipe</code></li><li><code>DefaultValuePipe</code></li><li><code>ParseFilePipe</code></li></ul><p>ä»–ä»¬ä» <code>@nestjs/common</code> åŒ…ä¸­å¯¼å‡ºã€‚</p><h2 id="ç»‘å®šç®¡é“">6.3 ç»‘å®šç®¡é“</h2><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">/* auth.controller.ts */</span><br><br><span class="hljs-meta">@Get</span>(<span class="hljs-string">&#x27;searchUser/:useId&#x27;</span>)<br><span class="hljs-title function_">searchUser</span>(<span class="hljs-params"><span class="hljs-meta">@Param</span>(<span class="hljs-string">&#x27;useId&#x27;</span>,ParseIntPipe) id:<span class="hljs-built_in">number</span></span>)&#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">authService</span>.<span class="hljs-title function_">searchUser</span>(id);<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">/* auth.service.ts */</span><br><br><span class="hljs-title function_">searchUser</span>(<span class="hljs-params">id:<span class="hljs-built_in">number</span></span>)&#123;<br>    <span class="hljs-keyword">return</span> &#123;<span class="hljs-attr">msg</span>:id&#125;<br>&#125;<br></code></pre></td></tr></table></figure><blockquote><p>è¿™é‡Œç»‘å®šçš„ç®¡é“æ˜¯ä¸€ä¸ªç±»è€Œä¸æ˜¯ä¸€ä¸ªå®ä¾‹å¯¹è±¡ï¼Œå¦‚æœè¦æ”¹å˜å†…ç½®ç®¡é“çš„è¡Œä¸ºï¼Œåœ¨ç»‘å®šæ—¶é€šè¿‡new æ–°å»ºä¸€ä¸ªå®ä¾‹å¯¹è±¡å¹¶ç»‘å®š</p></blockquote><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-meta">@Get</span>(<span class="hljs-string">&#x27;searchUser/:useId&#x27;</span>)<br><span class="hljs-title function_">searchUser</span>(<span class="hljs-params"><span class="hljs-meta">@Param</span>(<span class="hljs-string">&#x27;useId&#x27;</span>,<span class="hljs-keyword">new</span> ParseIntPipe(&#123; errorHttpStatusCode: HttpStatus.NOT_ACCEPTABLE &#125;)) id:<span class="hljs-built_in">number</span></span>)&#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">authService</span>.<span class="hljs-title function_">searchUser</span>(id);<br>&#125;<br></code></pre></td></tr></table></figure><blockquote><p>ä¸”ä¼šå°† string è½¬æ¢ä¸º int</p></blockquote><p>æˆåŠŸ</p><figure><imgsrc="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/image-20230113195136018.png"alt="image-20230113195136018" /><figcaption aria-hidden="true">image-20230113195136018</figcaption></figure><p>å¤±è´¥</p><figure><imgsrc="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/image-20230113195219407.png"alt="image-20230113195219407" /><figcaption aria-hidden="true">image-20230113195219407</figcaption></figure><h1 id="ä¸ƒæŠ€æœ¯">ä¸ƒã€æŠ€æœ¯</h1><h2 id="éªŒè¯">7.1<ahref="https://docs.nestjs.cn/9/techniques?id=%e9%aa%8c%e8%af%81">éªŒè¯</a></h2><h3 id="å…¨å±€ä½¿ç”¨">7.1.1 å…¨å±€ä½¿ç”¨</h3><p>å®‰è£…ä¾èµ–</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ npm i --save class-validator class-transformer<br></code></pre></td></tr></table></figure><p>æ³¨å…¥å…¨å±€éªŒè¯ç®¡é“</p><p><code>app.useGlobalPipes(new ValidationPipe())</code></p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">/* main.ts */</span><br><br><span class="hljs-keyword">import</span> &#123; <span class="hljs-title class_">ValidationPipe</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;@nestjs/common&quot;</span>;<br><span class="hljs-keyword">import</span> &#123; <span class="hljs-title class_">NestApplication</span>, <span class="hljs-title class_">NestFactory</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;@nestjs/core&quot;</span>;<br><span class="hljs-keyword">import</span> &#123; <span class="hljs-title class_">AppModule</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./app.module&quot;</span>;<br><br><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">bootstrap</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">const</span> app = <span class="hljs-keyword">await</span> <span class="hljs-title class_">NestFactory</span>.<span class="hljs-title function_">create</span>(<span class="hljs-title class_">AppModule</span>);<br>  app.<span class="hljs-title function_">useGlobalPipes</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">ValidationPipe</span>());<br>  <span class="hljs-keyword">await</span> app.<span class="hljs-title function_">listen</span>(<span class="hljs-number">3000</span>);<br>&#125;<br><span class="hljs-title function_">bootstrap</span>();<br></code></pre></td></tr></table></figure><p>Dto</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">import</span> &#123; <span class="hljs-title class_">IsEmail</span>, <span class="hljs-title class_">IsNotEmpty</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;class-validator&quot;</span>;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UpdateAuthDto</span> &#123;<br>  <span class="hljs-meta">@IsEmail</span>()<br>  <span class="hljs-attr">email</span>: <span class="hljs-built_in">string</span>; <span class="hljs-comment">// emailéªŒè¯</span><br><br>  <span class="hljs-meta">@IsNotEmpty</span>()<br>  <span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span>; <span class="hljs-comment">// ä¸ä¸ºç©ºéªŒè¯</span><br>&#125;<br></code></pre></td></tr></table></figure><p>ä½¿ç”¨éªŒè¯</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">/* auth.controller.ts */</span><br><br><span class="hljs-meta">@Get</span>(<span class="hljs-string">&#x27;updateUser&#x27;</span>)<br><span class="hljs-title function_">updateUser</span>(<span class="hljs-params"><span class="hljs-meta">@Body</span>() body:UpdateAuthDto</span>)&#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">authService</span>.<span class="hljs-title function_">updateUser</span>(body);<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">/* auth.service.ts */</span><br><br><span class="hljs-title function_">updateUser</span>(<span class="hljs-params">body:UpdateAuthDto</span>)&#123;<br>    <span class="hljs-keyword">return</span> &#123;<span class="hljs-attr">msg</span>:body&#125;;<br>&#125;<br></code></pre></td></tr></table></figure><p>å¤±è´¥</p><figure><imgsrc="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/image-20230113211331532.png"alt="image-20230113211331532" /><figcaption aria-hidden="true">image-20230113211331532</figcaption></figure><p>æˆåŠŸ</p><figure><imgsrc="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/image-20230113211258694.png"alt="image-20230113211258694" /><figcaption aria-hidden="true">image-20230113211258694</figcaption></figure><h3 id="å‰¥ç¦»å±æ€§">7.1.2 å‰¥ç¦»å±æ€§</h3><blockquote><p>æœ‰æ—¶æˆ‘ä»¬ä¸å¤„ç† tokenè¿™ä¸ªå­—æ®µï¼Œè€Œå‰ç«¯åœ¨è¯·æ±‚æ—¶å‘é€äº†è¿™ä¸ªå­—æ®µï¼Œè¿™æ˜¯å¯ä»¥ä½¿ç”¨å‰¥ç¦»å±æ€§ï¼Œå°†ä¸æ¥å—ç”¨ä¸åˆ°çš„å±æ€§</p></blockquote><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs typescript">app.<span class="hljs-title function_">useGlobalPipes</span>(<br>  <span class="hljs-keyword">new</span> <span class="hljs-title class_">ValidationPipe</span>(&#123;<br>    <span class="hljs-attr">whitelist</span>: <span class="hljs-literal">true</span>,<br>  &#125;)<br>);<br></code></pre></td></tr></table></figure><p>ä½¿ç”¨å</p><figure><imgsrc="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/image-20230113212050272.png"alt="image-20230113212050272" /><figcaption aria-hidden="true">image-20230113212050272</figcaption></figure><h3 id="ä½¿ç”¨ç®¡é“è½¬æ¢">7.1.3 ä½¿ç”¨ç®¡é“è½¬æ¢</h3><p>å¦‚æˆ‘ä»¬åœ¨å‘é€ get è¯·æ±‚æ—¶ï¼Œæºå¸¦ body ä¸­æœ‰ ageï¼Œä½†æ˜¯å‘é€åˆ°åç«¯ age å˜æˆstringï¼Œæˆ‘ä»¬éœ€è¦å°† string å˜æˆ intï¼Œåªéœ€è¦ä½¿ç”¨ 6.3 å³å¯ã€‚</p><h2 id="ä½¿ç”¨-mongo-æ•°æ®åº“">7.2 ä½¿ç”¨ Mongo æ•°æ®åº“</h2><h3 id="åŸºæœ¬æ­¥éª¤">7.2.1 åŸºæœ¬æ­¥éª¤</h3><p>å®‰è£…ç›¸å…³ä¾èµ–</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">yarn add --save @nestjs/mongoose mongoose<br></code></pre></td></tr></table></figure><p>è¿æ¥æ•°æ®åº“</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">/* app.module.ts */</span><br><br><span class="hljs-keyword">import</span> &#123; <span class="hljs-title class_">Module</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;@nestjs/common&quot;</span>;<br><span class="hljs-keyword">import</span> &#123; <span class="hljs-title class_">MongooseModule</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;@nestjs/mongoose&quot;</span>;<br><span class="hljs-keyword">import</span> &#123; <span class="hljs-title class_">AuthModule</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./auth/auth.module&quot;</span>;<br><br><span class="hljs-meta">@Module</span>(&#123;<br>  <span class="hljs-attr">imports</span>: [<br>    <span class="hljs-title class_">AuthModule</span>,<br>    <span class="hljs-title class_">MongooseModule</span>.<span class="hljs-title function_">forRoot</span>(<span class="hljs-string">&quot;mongodb://127.0.0.1:27017/musicians&quot;</span>),<br>  ],<br>&#125;)<br><span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AppModule</span> &#123;&#125;<br></code></pre></td></tr></table></figure><blockquote><p>è¡¨ç¤ºè¿æ¥ musicians æ•°æ®åº“</p></blockquote><p>åˆ›å»ºä¸€ä¸ªæ¨¡å‹</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">/* src/auth/schema/users.schema.ts */</span><br><br><span class="hljs-keyword">import</span> * <span class="hljs-keyword">as</span> mongoose <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;mongoose&quot;</span>;<br><span class="hljs-keyword">const</span> <span class="hljs-title class_">Schema</span> = mongoose.<span class="hljs-property">Schema</span>;<br><span class="hljs-keyword">const</span> d = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>();<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title class_">UserSchema</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Schema</span>(&#123;<br>  <span class="hljs-attr">username</span>: &#123; <span class="hljs-attr">type</span>: <span class="hljs-title class_">String</span> &#125;,<br>  <span class="hljs-attr">password</span>: &#123; <span class="hljs-attr">type</span>: <span class="hljs-title class_">String</span> &#125;,<br>  <span class="hljs-attr">mobile</span>: &#123; <span class="hljs-attr">type</span>: <span class="hljs-title class_">String</span> &#125;,<br>  <span class="hljs-attr">email</span>: &#123; <span class="hljs-attr">type</span>: <span class="hljs-title class_">String</span> &#125;,<br>  <span class="hljs-attr">status</span>: &#123; <span class="hljs-attr">type</span>: <span class="hljs-title class_">String</span> &#125;,<br>  <span class="hljs-attr">role_id</span>: &#123; <span class="hljs-attr">type</span>: <span class="hljs-title class_">String</span> &#125;,<br>  <span class="hljs-attr">add_time</span>: &#123; <span class="hljs-attr">type</span>: <span class="hljs-title class_">Number</span>, <span class="hljs-attr">default</span>: d.<span class="hljs-title function_">getTime</span>() &#125;,<br>  <span class="hljs-attr">is_supper</span>: &#123; <span class="hljs-attr">type</span>: <span class="hljs-title class_">Number</span> &#125;,<br>&#125;);<br></code></pre></td></tr></table></figure><p>å¼•å…¥æ¨¡å‹</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">import</span> &#123; <span class="hljs-title class_">Module</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;@nestjs/common&quot;</span>;<br><span class="hljs-keyword">import</span> &#123; <span class="hljs-title class_">AuthContriller</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./auth.controller&quot;</span>;<br><span class="hljs-keyword">import</span> &#123; <span class="hljs-title class_">AuthService</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./auth.service&quot;</span>;<br><span class="hljs-keyword">import</span> &#123; <span class="hljs-title class_">MongooseModule</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;@nestjs/mongoose&quot;</span>;<br><span class="hljs-keyword">import</span> &#123; <span class="hljs-title class_">UserSchema</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./schema/users.schema&quot;</span>;<br><br><span class="hljs-meta">@Module</span>(&#123;<br>  <span class="hljs-attr">imports</span>: [<br>    <span class="hljs-title class_">MongooseModule</span>.<span class="hljs-title function_">forFeature</span>([<br>      &#123;<br>        <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;User&quot;</span>,<br>        <span class="hljs-attr">schema</span>: <span class="hljs-title class_">UserSchema</span>,<br>        <span class="hljs-attr">collection</span>: <span class="hljs-string">&quot;test&quot;</span>,<br>      &#125;,<br>    ]),<br>  ],<br>  <span class="hljs-attr">controllers</span>: [<span class="hljs-title class_">AuthContriller</span>],<br>  <span class="hljs-attr">providers</span>: [<span class="hljs-title class_">AuthService</span>],<br>&#125;)<br><span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AuthModule</span> &#123;&#125;<br></code></pre></td></tr></table></figure><p>æ¨¡å‹çš„åç§°ä¸º Userï¼Œé›†åˆ test</p><p>ä½¿ç”¨æ¨¡å‹</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">import</span> &#123; <span class="hljs-title class_">Injectable</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;@nestjs/common&quot;</span>;<br><span class="hljs-keyword">import</span> &#123; <span class="hljs-title class_">InjectModel</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;@nestjs/mongoose&quot;</span>;<br><br><span class="hljs-meta">@Injectable</span>()<br><span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AuthService</span> &#123;<br>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"><span class="hljs-meta">@InjectModel</span>(<span class="hljs-string">&quot;User&quot;</span>) <span class="hljs-keyword">private</span> userModel</span>) &#123;&#125;<br>  <span class="hljs-keyword">async</span> <span class="hljs-title function_">signup</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">let</span> result = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">userModel</span>.<span class="hljs-title function_">find</span>().<span class="hljs-title function_">exec</span>();<br>    <span class="hljs-keyword">return</span> &#123; <span class="hljs-attr">msg</span>: result &#125;;<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><blockquote><p>ä¾èµ–æ³¨å…¥åˆ›å»º userModel å±æ€§</p></blockquote><p>åˆ›å»ºæˆåŠŸ</p><figure><imgsrc="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/image-20230114213520674.png"alt="image-20230114213520674" /><figcaption aria-hidden="true">image-20230114213520674</figcaption></figure><h3 id="crud">7.2.2 CRUD</h3><p>åˆ›å»ºç”¨æˆ·</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">/* auth.controller.ts */</span><br><span class="hljs-meta">@Post</span>(<span class="hljs-string">&#x27;addUser&#x27;</span>)<br><span class="hljs-title function_">addUser</span>(<span class="hljs-params"><span class="hljs-meta">@Body</span>() body:<span class="hljs-built_in">any</span></span>)&#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">authService</span>.<span class="hljs-title function_">addUser</span>(body);<br>&#125;<br><br><br><span class="hljs-comment">/* auth.service.ts */</span><br><span class="hljs-keyword">async</span> <span class="hljs-title function_">addUser</span>(<span class="hljs-params">body:<span class="hljs-built_in">any</span></span>)&#123;<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">userModel</span>.<span class="hljs-title function_">create</span>(body);<br>    <span class="hljs-keyword">return</span> body;<br>&#125;<br></code></pre></td></tr></table></figure><figure><imgsrc="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/image-20230114214717752.png"alt="image-20230114214717752" /><figcaption aria-hidden="true">image-20230114214717752</figcaption></figure><p>æŸ¥è¯¢æ‰€æœ‰ç”¨æˆ·</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">async</span> <span class="hljs-title function_">findAll</span>(<span class="hljs-params"></span>)&#123;<br>    <span class="hljs-keyword">let</span> result = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">userModel</span>.<span class="hljs-title function_">find</span>().<span class="hljs-title function_">exec</span>();<br>    <span class="hljs-keyword">return</span> &#123;<span class="hljs-attr">msg</span>:result&#125;;<br>&#125;<br></code></pre></td></tr></table></figure><p>æŸ¥æ‰¾å•ä¸ªç”¨æˆ·</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">async</span> <span class="hljs-title function_">findOne</span>(<span class="hljs-attr">_id</span>: <span class="hljs-built_in">string</span>): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-title class_">User</span>&gt; &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">userModel</span>.<span class="hljs-title function_">findById</span>(_id);<br>&#125;<br></code></pre></td></tr></table></figure><p>ç¼–è¾‘å•ä¸ªç”¨æˆ·</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">async</span> <span class="hljs-title function_">editOne</span>(<span class="hljs-attr">_id</span>: <span class="hljs-built_in">string</span>, <span class="hljs-attr">body</span>: <span class="hljs-title class_">EditUserDTO</span>): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">void</span>&gt; &#123;<br>    <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">userModel</span>.<span class="hljs-title function_">findByIdAndUpdate</span>(_id, body);<br>&#125;<br></code></pre></td></tr></table></figure><p>åˆ é™¤ç”¨æˆ·</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">async</span> <span class="hljs-title function_">deleteOne</span>(<span class="hljs-attr">_id</span>: <span class="hljs-built_in">string</span>): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">void</span>&gt; &#123;<br>    <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">userModel</span>.<span class="hljs-title function_">findByIdAndDelete</span>(_id);<br>&#125;<br></code></pre></td></tr></table></figure><h1 id="é™„ä»¶">é™„ä»¶</h1><h2 id="è£…é¥°å™¨">è£…é¥°å™¨</h2><table><thead><tr><th>è£…é¥°å™¨</th><th>å«ä¹‰</th></tr></thead><tbody><tr><td><span class="citation"data-cites="Controller">@Controller</span>()</td><td>å®šä¹‰ä¸€ä¸ªåŸºæœ¬æ§åˆ¶å™¨</td></tr><tr><td><span class="citation" data-cites="Get">@Get</span>()</td><td>å®šä¹‰ä¸€ä¸ª get æ¥å£</td></tr><tr><td><span class="citation" data-cites="Post">@Post</span>()</td><td>å®šä¹‰ä¸€ä¸ª post æ¥å£</td></tr><tr><td><span class="citation" data-cites="Put">@Put</span>()</td><td>å®šä¹‰ä¸€ä¸ª put æ¥å£</td></tr><tr><td><span class="citation" data-cites="Delete">@Delete</span>()</td><td>å®šä¹‰ä¸€ä¸ª delete æ¥å£</td></tr><tr><td><span class="citation" data-cites="Patch">@Patch</span>()</td><td>å®šä¹‰ä¸€ä¸ª patch æ¥å£</td></tr><tr><td><span class="citation" data-cites="Options">@Options</span>()</td><td>å®šä¹‰ä¸€ä¸ª option æ¥å£</td></tr><tr><td><span class="citation" data-cites="All">@All</span>()</td><td>å®šä¹‰ä¸€ä¸ªå¤„ç†æ‰€æœ‰ HTTP è¯·æ±‚çš„æ¥å£</td></tr><tr><td><span class="citation" data-cites="Request">@Request</span>()ï¼Œ<spanclass="citation" data-cites="Req">@Req</span>()</td><td>å¯¹åº” reqï¼ŒNest å°†è¯·æ±‚å¯¹è±¡æ³¨å…¥å¤„ç†åˆ°</td></tr><tr><td><span class="citation"data-cites="Response">@Response</span>()ï¼Œ<span class="citation"data-cites="Res">@Res</span>()*</td><td>å¯¹åº” res</td></tr><tr><td><span class="citation" data-cites="Next">@Next</span>()</td><td>å¯¹åº” next</td></tr><tr><td><span class="citation" data-cites="Session">@Session</span>()</td><td>å¯¹åº” req.session</td></tr><tr><td><span class="citation" data-cites="Param">@Param</span>(key?:string)</td><td>å¯¹åº” req.params<code>/</code>req.params[key] get</td></tr><tr><td><span class="citation" data-cites="Body">@Body</span>(key?:string)</td><td>å¯¹åº” req.body<code>/</code>req.body[key] post</td></tr><tr><td><span class="citation" data-cites="Query">@Query</span>(key?:string)</td><td>å¯¹åº” req.query<code>/</code>req.query[key]</td></tr><tr><td><span class="citation" data-cites="Headers">@Headers</span>(name?:string)</td><td>å¯¹åº” req.headers<code>/</code>req.headers[name]</td></tr><tr><td><span class="citation" data-cites="Ip">@Ip</span>()</td><td>å¯¹åº” req.ip</td></tr><tr><td><span class="citation"data-cites="HostParam">@HostParam</span>()</td><td>å¯¹åº” req.hosts</td></tr><tr><td><span class="citation" data-cites="HttpCode">@HttpCode</span>()</td><td>æ›´æ”¹çŠ¶æ€ç </td></tr><tr><td><span class="citation" data-cites="Header">@Header</span>()</td><td>æ›´æ”¹è¯·æ±‚å¤´</td></tr><tr><td><span class="citation" data-cites="Module">@Module</span>()</td><td>å®šä¹‰æ¨¡å—</td></tr></tbody></table>]]></content>
    
    
    <summary type="html">Nestå­¦ä¹ ç¬”è®°ï¼ŒåŒ…æ‹¬åŸºæœ¬æ¦‚å¿µã€æ§åˆ¶å™¨ã€ç®¡é“ç­‰</summary>
    
    
    
    <category term="ç¼–ç¨‹" scheme="http://example.com/categories/%E7%BC%96%E7%A8%8B/"/>
    
    <category term="åç«¯" scheme="http://example.com/categories/%E7%BC%96%E7%A8%8B/%E5%90%8E%E7%AB%AF/"/>
    
    <category term="Nest" scheme="http://example.com/categories/%E7%BC%96%E7%A8%8B/%E5%90%8E%E7%AB%AF/Nest/"/>
    
    
    <category term="ç¼–ç¨‹" scheme="http://example.com/tags/%E7%BC%96%E7%A8%8B/"/>
    
    <category term="åç«¯" scheme="http://example.com/tags/%E5%90%8E%E7%AB%AF/"/>
    
    <category term="Nest" scheme="http://example.com/tags/Nest/"/>
    
  </entry>
  
  <entry>
    <title>ICEMå¸¸é‡é—®é¢˜</title>
    <link href="http://example.com/2024/06/29/025%20ICEM%E5%B8%B8%E9%81%87%E5%88%B0%E9%97%AE%E9%A2%98/"/>
    <id>http://example.com/2024/06/29/025%20ICEM%E5%B8%B8%E9%81%87%E5%88%B0%E9%97%AE%E9%A2%98/</id>
    <published>2024-06-29T12:40:00.000Z</published>
    <updated>2025-02-08T06:47:20.942Z</updated>
    
    <content type="html"><![CDATA[<h2 id="d-ç½‘æ ¼ä¸é—­åˆ">2D ç½‘æ ¼ä¸é—­åˆ</h2><blockquote><p>Mesh has uncovered edges. ANSYS Fluent needs a complete boundary(lines in 2D) or it will give a variety of errors and not read in themesh! If this was 2D Hexa, perhaps your edges are not associated withperimeter curves</p></blockquote><p>åŸå› æ˜¯çº¿å’Œçº¿ä¹‹é—´å¯èƒ½æ²¡æœ‰å…³è”</p><figure><imgsrc="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/202302161539612.png"alt="image.png" /><figcaption aria-hidden="true">image.png</figcaption></figure>]]></content>
    
    
    <summary type="html">åœ¨ä½¿ç”¨ICEMåˆ’åˆ†ç½‘æ ¼æ—¶å¸¸é‡åˆ°çš„é—®é¢˜</summary>
    
    
    
    <category term="æ¨¡æ‹Ÿ" scheme="http://example.com/categories/%E6%A8%A1%E6%8B%9F/"/>
    
    <category term="ICEM" scheme="http://example.com/categories/%E6%A8%A1%E6%8B%9F/ICEM/"/>
    
    
    <category term="æ¨¡æ‹Ÿ" scheme="http://example.com/tags/%E6%A8%A1%E6%8B%9F/"/>
    
    <category term="ICEM" scheme="http://example.com/tags/ICEM/"/>
    
  </entry>
  
  <entry>
    <title>Pythonè°ƒç”¨REFPROP</title>
    <link href="http://example.com/2024/06/29/023%20Python%E8%B0%83%E7%94%A8REFPROP/"/>
    <id>http://example.com/2024/06/29/023%20Python%E8%B0%83%E7%94%A8REFPROP/</id>
    <published>2024-06-29T12:30:00.000Z</published>
    <updated>2025-02-08T06:47:20.941Z</updated>
    
    <content type="html"><![CDATA[<h1 id="python-è°ƒç”¨-refprop">python è°ƒç”¨ REFPROP</h1><h2 id="å®‰è£…è°ƒè¯•">1ã€å®‰è£…è°ƒè¯•</h2><ol type="1"><li>å®‰è£… refprop10</li><li>å®‰è£… python åº“<code>pip install ctREFPROP</code></li></ol><p>æµ‹è¯•ä½¿ç”¨</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> os, numpy <span class="hljs-keyword">as</span> np<br><span class="hljs-keyword">from</span> ctREFPROP.ctREFPROP <span class="hljs-keyword">import</span> REFPROPFunctionLibrary<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">NBP</span>():<br>    RP = REFPROPFunctionLibrary(os.environ[<span class="hljs-string">&#x27;RPPREFIX&#x27;</span>])<br>    RP.SETPATHdll(os.environ[<span class="hljs-string">&#x27;RPPREFIX&#x27;</span>])<br>    <span class="hljs-built_in">print</span>(RP.RPVersion())<br>    MOLAR_BASE_SI = RP.GETENUMdll(<span class="hljs-number">0</span>,<span class="hljs-string">&quot;MOLAR BASE SI&quot;</span>).iEnum<br><br>    r = RP.REFPROPdll(<span class="hljs-string">&quot;PROPANE&quot;</span>,<span class="hljs-string">&quot;PQ&quot;</span>,<span class="hljs-string">&quot;T&quot;</span>,MOLAR_BASE_SI, <span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">101325</span>, <span class="hljs-number">0</span>, [<span class="hljs-number">1.0</span>])<br>    <span class="hljs-built_in">print</span>(r.ierr, r.herr, r.Output[<span class="hljs-number">0</span>])<br><br><span class="hljs-keyword">if</span> __name__==<span class="hljs-string">&#x27;__main__&#x27;</span>:<br>    <span class="hljs-comment"># è·¯å¾„</span><br>    os.environ[<span class="hljs-string">&#x27;RPPREFIX&#x27;</span>] = <span class="hljs-string">r&#x27;D:/REFPROP10&#x27;</span><br><br>    NBP()<br><br>&gt;&gt;<br><span class="hljs-number">10.0</span><br><span class="hljs-number">0</span>  <span class="hljs-number">231.0362479100902</span><br></code></pre></td></tr></table></figure><h2 id="åŸºæœ¬è¯­æ³•">2ã€åŸºæœ¬è¯­æ³•</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> os, numpy <span class="hljs-keyword">as</span> np<br><span class="hljs-keyword">from</span> ctREFPROP.ctREFPROP <span class="hljs-keyword">import</span> REFPROPFunctionLibrary<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">calculate_properties</span>():<br>    <span class="hljs-comment"># åˆå§‹åŒ–REFPROP</span><br>    RP = REFPROPFunctionLibrary(os.environ[<span class="hljs-string">&#x27;RPPREFIX&#x27;</span>])<br>    RP.SETPATHdll(os.environ[<span class="hljs-string">&#x27;RPPREFIX&#x27;</span>])<br><br>    <span class="hljs-comment"># å°†å•ä½è®¾ç½®ä¸ºå›½é™…å•ä½åˆ¶ï¼ˆæ‘©å°”åŸºå‡†ï¼‰</span><br>    MOLAR_BASE_SI = RP.GETENUMdll(<span class="hljs-number">0</span>, <span class="hljs-string">&quot;MASS BASE SI&quot;</span>).iEnum<br><br>    <span class="hljs-comment"># æŒ‡å®šç‰©è´¨ï¼ˆæ°¢ï¼‰ã€è®¡ç®—ç±»å‹ï¼ˆHä¸ºç„“å€¼ï¼ŒDä¸ºå¯†åº¦ï¼ŒSä¸ºç†µå€¼ï¼‰</span><br>    substance = <span class="hljs-string">&quot;HYDROGEN&quot;</span><br><br>    <span class="hljs-comment"># æŒ‡å®šè¾“å…¥æ¡ä»¶ï¼ˆæ¸©åº¦ã€å‹åŠ›ï¼‰</span><br>    temperature = <span class="hljs-number">298.15</span>  <span class="hljs-comment"># å•ä½ï¼šK</span><br>    pressure = <span class="hljs-number">101325</span>  <span class="hljs-comment"># å•ä½ï¼šPa</span><br><br>    <span class="hljs-comment"># è°ƒç”¨REFPROPdllè®¡ç®—æ€§è´¨</span><br>    H_result = RP.REFPROPdll(substance, <span class="hljs-string">&quot;PT&quot;</span>,<span class="hljs-string">&quot;H&quot;</span>,  MOLAR_BASE_SI, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, pressure, temperature, [<span class="hljs-number">1.0</span>]) <span class="hljs-comment"># J/kg</span><br>    D_result = RP.REFPROPdll(substance, <span class="hljs-string">&quot;PT&quot;</span>,<span class="hljs-string">&quot;D&quot;</span>,  MOLAR_BASE_SI, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, pressure, temperature, [<span class="hljs-number">1.0</span>]) <span class="hljs-comment"># kg/m3</span><br>    S_result = RP.REFPROPdll(substance, <span class="hljs-string">&quot;PT&quot;</span>,<span class="hljs-string">&quot;S&quot;</span>,  MOLAR_BASE_SI, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, pressure, temperature, [<span class="hljs-number">1.0</span>]) <span class="hljs-comment"># J/(kgÂ·K)</span><br>    <span class="hljs-comment"># æ£€æŸ¥æ˜¯å¦æœ‰é”™è¯¯</span><br>    <span class="hljs-keyword">if</span> H_result.ierr == <span class="hljs-number">0</span> <span class="hljs-keyword">and</span> D_result.ierr == <span class="hljs-number">0</span> <span class="hljs-keyword">and</span> S_result.ierr == <span class="hljs-number">0</span>:<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;è®¡ç®—å¾—åˆ°çš„H=:&quot;</span>,H_result.Output[<span class="hljs-number">0</span>])<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;è®¡ç®—å¾—åˆ°çš„D=:&quot;</span>,D_result.Output[<span class="hljs-number">0</span>])<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;è®¡ç®—å¾—åˆ°çš„S=:&quot;</span>,S_result.Output[<span class="hljs-number">0</span>])<br>    <span class="hljs-keyword">else</span>:<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;é”™è¯¯: <span class="hljs-subst">&#123;H_result.herr&#125;</span>&quot;</span>)<br><br><span class="hljs-keyword">if</span> __name__==<span class="hljs-string">&#x27;__main__&#x27;</span>:<br>    <span class="hljs-comment"># è·¯å¾„</span><br>    os.environ[<span class="hljs-string">&#x27;RPPREFIX&#x27;</span>] = <span class="hljs-string">r&#x27;D:/REFPROP10&#x27;</span><br><br>    calculate_properties()<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">å°†REFPROPå°è£…ä¸ºpythonåº“æ–¹ä¾¿è°ƒç”¨ç‰©æ€§å‚æ•°</summary>
    
    
    
    <category term="ç¼–ç¨‹" scheme="http://example.com/categories/%E7%BC%96%E7%A8%8B/"/>
    
    <category term="Python" scheme="http://example.com/categories/%E7%BC%96%E7%A8%8B/Python/"/>
    
    
    <category term="Python" scheme="http://example.com/tags/Python/"/>
    
    <category term="ç¼–ç¨‹" scheme="http://example.com/tags/%E7%BC%96%E7%A8%8B/"/>
    
    <category term="REFPROP" scheme="http://example.com/tags/REFPROP/"/>
    
  </entry>
  
  <entry>
    <title>React Nativeå¸¸é‡é—®é¢˜</title>
    <link href="http://example.com/2024/06/29/022%20React%20Native%E5%B8%B8%E9%81%87%E9%97%AE%E9%A2%98/"/>
    <id>http://example.com/2024/06/29/022%20React%20Native%E5%B8%B8%E9%81%87%E9%97%AE%E9%A2%98/</id>
    <published>2024-06-29T12:20:00.000Z</published>
    <updated>2025-02-08T06:47:20.941Z</updated>
    
    <content type="html"><![CDATA[<h2id="textinputèšç„¦å¼¹èµ·é”®ç›˜">1ã€<code>TextInput</code>èšç„¦å¼¹èµ·é”®ç›˜</h2><p>ä½¿ç”¨ä»¥ä¸‹æ–¹å¼å¹¶ä¸èƒ½ç›´æ¥å¼¹èµ·é”®ç›˜ï¼ŒåŸå› å°šä¸æ¸…æ¥šï¼Œå¯èƒ½æ˜¯ç”±äº<code>setModalVisible</code>çš„å¼‚æ­¥æ€§å¯¼è‡´çš„</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs tsx"><span class="hljs-keyword">const</span> <span class="hljs-title function_">toggleModal</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"></span>) =&gt; &#123;<br>  <span class="hljs-keyword">await</span> <span class="hljs-title function_">setModalVisible</span>(!isModalVisible);<br>  <span class="hljs-keyword">if</span> (!isModalVisible) &#123;<br>    inputRef?.<span class="hljs-property">current</span>?.<span class="hljs-title function_">focus</span>();<br>  &#125;<br>&#125;;<br></code></pre></td></tr></table></figure><p>å¯ä»¥å˜åŒ–ä¸€ä¸‹æ€è·¯ï¼Œèšç„¦â€”â€”&gt;å¤±å»ç„¦ç‚¹â€”â€”&gt;èšç„¦ï¼Œèšç„¦ 10msä¹‹åå¤±å»ç„¦ç‚¹ï¼Œå¤±å»ç„¦ç‚¹è§¦å‘<code>onBlur</code>å‡½æ•°åå†èšç„¦</p><p>ä»£ç å¦‚ä¸‹</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs tsx"><span class="hljs-keyword">const</span> <span class="hljs-title function_">toggleModal</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"></span>) =&gt; &#123;<br>  <span class="hljs-keyword">await</span> <span class="hljs-title function_">setModalVisible</span>(!isModalVisible);<br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(inputRef);<br>  <span class="hljs-keyword">if</span> (!isModalVisible) &#123;<br>    inputRef?.<span class="hljs-property">current</span>?.<span class="hljs-title function_">focus</span>();<br>    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>      <span class="hljs-title class_">Keyboard</span>.<span class="hljs-title function_">dismiss</span>();<br>    &#125;, <span class="hljs-number">10</span>);<br>  &#125;<br>&#125;;<br><br><span class="hljs-comment">// è¾“å…¥æ¡†</span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">TextInputonBlur</span></span></span><br><span class="hljs-tag"><span class="language-xml">  <span class="hljs-attr">onBlur</span>=<span class="hljs-string">&#123;()</span> =&gt;</span> &#123;</span><br><span class="language-xml">    inputRef?.current?.focus();</span><br><span class="language-xml">  &#125;&#125;</span><br><span class="language-xml">/&gt;</span>;<br></code></pre></td></tr></table></figure><blockquote><p>è¿™é‡Œä¸€å®šè¦ä½¿ç”¨<code>async</code>å’Œ<code>await</code></p></blockquote><h2 id="userefè·å–ç»„ä»¶å®ä¾‹">2ã€<code>useRef</code>è·å–ç»„ä»¶å®ä¾‹</h2><p>ä½¿ç”¨é’©å­<code>useRef</code>è·å–ç»„ä»¶</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs tsx"><span class="hljs-comment">// åˆ›å»ºuseRefå®ä¾‹</span><br><span class="hljs-keyword">const</span> <span class="hljs-attr">textInput</span>: <span class="hljs-built_in">any</span> = <span class="hljs-title function_">useRef</span>(<span class="hljs-literal">null</span>);<br><br><span class="hljs-comment">// æŒ‚åœ¨</span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">TextInput</span></span></span><br><span class="hljs-tag"><span class="language-xml">  <span class="hljs-attr">ref</span>=<span class="hljs-string">&#123;textInput&#125;</span></span></span><br><span class="hljs-tag"><span class="language-xml">  <span class="hljs-attr">value</span>=<span class="hljs-string">&#123;searchText&#125;</span></span></span><br><span class="hljs-tag"><span class="language-xml">  <span class="hljs-attr">onChangeText</span>=<span class="hljs-string">&#123;(text)</span> =&gt;</span> setSearchText(text)&#125;</span><br><span class="language-xml">/&gt;</span>;<br><br><span class="hljs-comment">// è·å–ç»„ä»¶å®ä¾‹</span><br>textInput?.<span class="hljs-property">current</span>?.<span class="hljs-title function_">value</span>();<br></code></pre></td></tr></table></figure><h2 id="çˆ¶ç»„ä»¶è°ƒç”¨å­ç»„ä»¶æ–¹æ³•å¹¶ä¼ å€¼">3ã€çˆ¶ç»„ä»¶è°ƒç”¨å­ç»„ä»¶æ–¹æ³•å¹¶ä¼ å€¼</h2><ol type="1"><li>çˆ¶å­é—´æŒ‚åœ¨å­ç»„ä»¶</li></ol><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs tsx"><span class="hljs-keyword">const</span> <span class="hljs-attr">notionModalRef</span>:<span class="hljs-built_in">any</span> = <span class="hljs-title function_">useRef</span>(<span class="hljs-literal">null</span>)<br><br>&lt;<span class="hljs-title class_">CreateNotionModal</span> props=&#123;&#123;toggleModal,isModalVisible,id&#125;&#125; ref=&#123;notionModalRef&#125;/&gt;<br></code></pre></td></tr></table></figure><p>å…¶ä¸­<code>props</code>ç”¨äºä¼ é€’å¯¹è±¡å€¼ï¼Œ<code>ref</code>ç”¨äºä¼ é€’ç»„ä»¶</p><ol start="2" type="1"><li>è·å–ç»„ä»¶ä»¥åŠæ•°æ®</li></ol><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><code class="hljs tsx"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">forwardRef</span>(<span class="hljs-function">(<span class="hljs-params">&#123; props &#125;: <span class="hljs-built_in">any</span>, ref: <span class="hljs-built_in">any</span></span>) =&gt;</span> &#123;<br>  <span class="hljs-keyword">const</span> &#123; notionModalRef &#125; = ref;<br>  <span class="hljs-keyword">const</span> &#123; toggleModal, isModalVisible, id &#125; = props;<br><br>  <span class="hljs-comment">// å­ç»„ä»¶å‘çˆ¶ç»„ä»¶æš´éœ²æ–¹æ³•</span><br>  <span class="hljs-title function_">useImperativeHandle</span>(notionModalRef, <span class="hljs-function">() =&gt;</span> (&#123;<br>    inputOnFocus,<br>  &#125;));<br><br>  <span class="hljs-comment">// åˆ‡æ¢æ¨¡æ€æ¡†</span><br>  <span class="hljs-keyword">const</span> <span class="hljs-title function_">inputOnFocus</span> = (<span class="hljs-params"></span>) =&gt; &#123;&#125;;<br><br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">View</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&#123;styles.centeredView&#125;</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">View</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&#123;styles.modalView&#125;</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">TextInput</span></span></span><br><span class="hljs-tag"><span class="language-xml">          <span class="hljs-attr">multiline</span>=<span class="hljs-string">&#123;true&#125;</span></span></span><br><span class="hljs-tag"><span class="language-xml">          <span class="hljs-attr">style</span>=<span class="hljs-string">&#123;styles.input&#125;</span></span></span><br><span class="hljs-tag"><span class="language-xml">          <span class="hljs-attr">maxLength</span>=<span class="hljs-string">&#123;1000&#125;</span></span></span><br><span class="hljs-tag"><span class="language-xml">          <span class="hljs-attr">autoFocus</span>=<span class="hljs-string">&#123;true&#125;</span></span></span><br><span class="hljs-tag"><span class="language-xml">          <span class="hljs-attr">value</span>=<span class="hljs-string">&#123;textInput&#125;</span></span></span><br><span class="hljs-tag"><span class="language-xml">          <span class="hljs-attr">ref</span>=<span class="hljs-string">&#123;inputRef&#125;</span></span></span><br><span class="hljs-tag"><span class="language-xml">          <span class="hljs-attr">onBlur</span>=<span class="hljs-string">&#123;()</span> =&gt;</span> &#123;</span><br><span class="language-xml">            inputRef?.current?.focus();</span><br><span class="language-xml">          &#125;&#125;</span><br><span class="language-xml">          onChangeText=&#123;(text) =&gt; setTextInput(text)&#125;</span><br><span class="language-xml">        /&gt;</span><br><span class="language-xml"></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">View</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&#123;styles.modalBtn&#125;</span>&gt;</span></span><br><span class="language-xml">          <span class="hljs-tag">&lt;<span class="hljs-name">Pressable</span></span></span><br><span class="hljs-tag"><span class="language-xml">            <span class="hljs-attr">onPress</span>=<span class="hljs-string">&#123;()</span> =&gt;</span> &#123;</span><br><span class="language-xml">              toggleModal();</span><br><span class="language-xml">            &#125;&#125;</span><br><span class="language-xml">          &gt;</span><br><span class="language-xml">            &#123;/* <span class="hljs-tag">&lt;<span class="hljs-name">Pressable</span> <span class="hljs-attr">onPress</span>=<span class="hljs-string">&#123;()</span>=&gt;</span>&#123;&#125; &#125;&gt; */&#125;</span><br><span class="language-xml">            &#123;(&#123; pressed &#125;) =&gt; <span class="hljs-tag">&lt;<span class="hljs-name">Text</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&#123;styles.cancel&#125;</span>&gt;</span>å–æ¶ˆ<span class="hljs-tag">&lt;/<span class="hljs-name">Text</span>&gt;</span>&#125;</span><br><span class="language-xml">          <span class="hljs-tag">&lt;/<span class="hljs-name">Pressable</span>&gt;</span></span><br><span class="language-xml">          <span class="hljs-tag">&lt;<span class="hljs-name">Pressable</span></span></span><br><span class="hljs-tag"><span class="language-xml">            <span class="hljs-attr">onPress</span>=<span class="hljs-string">&#123;async</span> () =&gt;</span> &#123;</span><br><span class="language-xml">              setTextInput(await pasteFromClipboard(textInput));</span><br><span class="language-xml">            &#125;&#125;</span><br><span class="language-xml">          &gt;</span><br><span class="language-xml">            &#123;(&#123; pressed &#125;) =&gt; (</span><br><span class="language-xml">              <span class="hljs-tag">&lt;<span class="hljs-name">Ionicons</span></span></span><br><span class="hljs-tag"><span class="language-xml">                <span class="hljs-attr">color</span>=<span class="hljs-string">&#123;Colors.light.tint&#125;</span></span></span><br><span class="hljs-tag"><span class="language-xml">                <span class="hljs-attr">name</span>=<span class="hljs-string">&#x27;clipboard-outline&#x27;</span></span></span><br><span class="hljs-tag"><span class="language-xml">                <span class="hljs-attr">size</span>=<span class="hljs-string">&#123;30&#125;</span></span></span><br><span class="hljs-tag"><span class="language-xml">                <span class="hljs-attr">style</span>=<span class="hljs-string">&#123;&#123;</span> <span class="hljs-attr">marginRight:</span> <span class="hljs-attr">15</span>, <span class="hljs-attr">opacity:</span> <span class="hljs-attr">pressed</span> ? <span class="hljs-attr">0.5</span> <span class="hljs-attr">:</span> <span class="hljs-attr">1</span> &#125;&#125;</span></span><br><span class="hljs-tag"><span class="language-xml">              /&gt;</span></span><br><span class="language-xml">            )&#125;</span><br><span class="language-xml">          <span class="hljs-tag">&lt;/<span class="hljs-name">Pressable</span>&gt;</span></span><br><span class="language-xml">          <span class="hljs-tag">&lt;<span class="hljs-name">Pressable</span> <span class="hljs-attr">onPress</span>=<span class="hljs-string">&#123;create&#125;</span>&gt;</span></span><br><span class="language-xml">            &#123;(&#123; pressed &#125;) =&gt; (</span><br><span class="language-xml">              <span class="hljs-tag">&lt;<span class="hljs-name">Ionicons</span></span></span><br><span class="hljs-tag"><span class="language-xml">                <span class="hljs-attr">color</span>=<span class="hljs-string">&#123;Colors.light.tint&#125;</span></span></span><br><span class="hljs-tag"><span class="language-xml">                <span class="hljs-attr">name</span>=<span class="hljs-string">&#x27;send-outline&#x27;</span></span></span><br><span class="hljs-tag"><span class="language-xml">                <span class="hljs-attr">size</span>=<span class="hljs-string">&#123;30&#125;</span></span></span><br><span class="hljs-tag"><span class="language-xml">                <span class="hljs-attr">style</span>=<span class="hljs-string">&#123;&#123;</span> <span class="hljs-attr">marginRight:</span> <span class="hljs-attr">15</span>, <span class="hljs-attr">opacity:</span> <span class="hljs-attr">pressed</span> ? <span class="hljs-attr">0.5</span> <span class="hljs-attr">:</span> <span class="hljs-attr">1</span> &#125;&#125;</span></span><br><span class="hljs-tag"><span class="language-xml">              /&gt;</span></span><br><span class="language-xml">            )&#125;</span><br><span class="language-xml">          <span class="hljs-tag">&lt;/<span class="hljs-name">Pressable</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">View</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">View</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">View</span>&gt;</span></span><br><span class="language-xml">  );</span><br><span class="language-xml">&#125;);</span><br></code></pre></td></tr></table></figure><ol start="3" type="1"><li>ä½¿ç”¨</li></ol><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs tsx">notionModalRef?.<span class="hljs-property">current</span>?.<span class="hljs-title function_">inputOnFocus</span>();<br></code></pre></td></tr></table></figure><blockquote><p>æˆ‘è¿™é‡Œç”¨åˆ°äº†<code>useState</code>çš„æ•°æ®ï¼Œæ³¨æ„çŠ¶æ€å˜åŒ–ï¼Œå³ç»„ä»¶æ˜¯å¦æ˜¾ç¤ºä¸<code>notionModalRef?.current?.inputOnFocus()</code>çš„å…³ç³»</p></blockquote><h2 id="expo-æŠ½å±‰æ‰“å¼€ä¸å…³é—­">4ã€expo æŠ½å±‰æ‰“å¼€ä¸å…³é—­</h2><p>è¯•äº†å¾ˆå¤šç§æ–¹æ³•ï¼Œéƒ½æ˜¯æ˜¾ç¤º<code>closeDrawer</code>æœªå®šä¹‰</p><p>å¯ä»¥ä½¿ç”¨<code>@react-navigation/native</code>ä¸­çš„<code>DrawerActions</code>å’Œ<code>useNavigation</code>ç»„åˆå®ç°æŠ½å±‰æ‰“å¼€ä¸å…³é—­</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs tsx"><span class="hljs-keyword">import</span> &#123; <span class="hljs-title class_">DrawerActions</span>, useNavigation &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;@react-navigation/native&quot;</span>;<br><br><span class="hljs-keyword">const</span> <span class="hljs-title function_">CustomDrawer</span> = (<span class="hljs-params"></span>) =&gt; &#123;<br>  <span class="hljs-keyword">const</span> navigation = <span class="hljs-title function_">useNavigation</span>();<br>  <span class="hljs-keyword">const</span> <span class="hljs-title function_">tagRename</span> = (<span class="hljs-params"></span>) =&gt; &#123;<br>    navigation.<span class="hljs-title function_">dispatch</span>(<span class="hljs-title class_">DrawerActions</span>.<span class="hljs-title function_">closeDrawer</span>());<br>  &#125;;<br>&#125;;<br></code></pre></td></tr></table></figure><h2 id="å…¨å±€æ•°æ®å‚¨å­˜">5ã€å…¨å±€æ•°æ®å‚¨å­˜</h2><p>ä½¿ç”¨<code>useContext</code>å­˜å‚¨å…¨å±€å˜é‡ã€‚</p><ol type="1"><li>é¦–å…ˆåˆ›å»º<code>context</code>å®ä¾‹ï¼Œå¯¹å¤–æš´éœ²ä¸€ä¸ªæ•°æ®å¯¹è±¡ï¼Œé‡Œé¢å¯åŒ…å«æ•°å€¼ã€å‡½æ•°ç­‰</li></ol><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs tsx"><span class="hljs-keyword">type</span> <span class="hljs-title class_">SqliteType</span> = &#123;<br>  <span class="hljs-attr">db</span>: <span class="hljs-title class_">SQLite</span>.<span class="hljs-property">SQLiteDatabase</span> | <span class="hljs-literal">null</span> | <span class="hljs-built_in">any</span>;<br>  <span class="hljs-attr">openDb</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">void</span>;<br>  <span class="hljs-attr">getDbFile</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">void</span>;<br>  <span class="hljs-attr">exeSql</span>: <span class="hljs-function">(<span class="hljs-params"><span class="hljs-keyword">type</span>: <span class="hljs-built_in">string</span>, data: <span class="hljs-built_in">any</span>[]</span>) =&gt;</span> <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">any</span>&gt;;<br>&#125;;<br><br><span class="hljs-keyword">const</span> <span class="hljs-title class_">SqliteContext</span> = createContext&lt;<span class="hljs-title class_">SqliteType</span>&gt;(&#123;<br>  <span class="hljs-attr">db</span>: <span class="hljs-literal">null</span>,<br>  <span class="hljs-attr">openDb</span>: <span class="hljs-function">() =&gt;</span> &#123;&#125;,<br>  <span class="hljs-attr">getDbFile</span>: <span class="hljs-function">() =&gt;</span> &#123;&#125;,<br>  <span class="hljs-attr">exeSql</span>: <span class="hljs-keyword">async</span> () =&gt; &#123;&#125;,<br>&#125;);<br></code></pre></td></tr></table></figure><ol start="2" type="1"><li>åˆ›å»ºæä¾›è€…</li></ol><blockquote><p>è¿™é‡Œä½¿ç”¨<code>useRef</code>åˆ›å»ºæ•°æ®ï¼Œä½¿ç”¨<code>useState</code>åœ¨å¼‚æ­¥å‡½æ•°ä¸­ä¼šå‡ºç°é—®é¢˜</p></blockquote><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs tsx"><span class="hljs-keyword">const</span> <span class="hljs-title function_">SqliteProvider</span> = (<span class="hljs-params">&#123;children&#125;:PropsWithChildren</span>) =&gt; &#123;<br>    <span class="hljs-keyword">const</span> db = useRef&lt;<span class="hljs-literal">null</span>|<span class="hljs-title class_">SQLite</span>.<span class="hljs-property">SQLiteDatabase</span>&gt;(<span class="hljs-literal">null</span>)<br><br>    <span class="hljs-comment">// æ‰“å¼€æ•°æ®åº“</span><br>    <span class="hljs-keyword">const</span> <span class="hljs-title function_">openDb</span> = (<span class="hljs-params"></span>) =&gt; &#123;<br><br>    &#125;<br><br>    <span class="hljs-comment">// è·å–è¿œç¨‹dbæ•°æ®</span><br>    <span class="hljs-keyword">const</span> <span class="hljs-title function_">getDbFile</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"></span>) =&gt; &#123;<br><br>    &#125;<br><br>    <span class="hljs-comment">// æ‰§è¡Œè¯­å¥</span><br>    <span class="hljs-keyword">const</span> <span class="hljs-title function_">exeSql</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"><span class="hljs-keyword">type</span>:<span class="hljs-built_in">string</span>,data:<span class="hljs-built_in">any</span>[]</span>) =&gt; &#123;<br><br>      &#125;<br><br>    ...<br>&#125;<br></code></pre></td></tr></table></figure><ol start="3" type="1"><li>å¯¹å¤–æš´éœ²çš„æ•°æ®</li></ol><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs tsx"><span class="hljs-keyword">const</span> <span class="hljs-title function_">SqliteProvider</span> = (<span class="hljs-params">&#123;children&#125;:PropsWithChildren</span>) =&gt; &#123;<br>    ...<br><br>    <span class="hljs-keyword">return</span> (<br>        <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">SqliteContext.Provider</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&#123;&#123;db,openDb,getDbFile,exeSql&#125;&#125;</span>&gt;</span></span><br><span class="language-xml">            &#123;children&#125;</span><br><span class="language-xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">SqliteContext.Provider</span>&gt;</span></span><br>    )<br>&#125;<br></code></pre></td></tr></table></figure><ol start="4" type="1"><li>å¯¼å‡ºæä¾›è€…åŠ<code>useContext(SqliteContext)</code>å®ä¾‹</li></ol><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs tsx"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">SqliteProvider</span>;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">useSqlite</span> = (<span class="hljs-params"></span>) =&gt; <span class="hljs-title function_">useContext</span>(<span class="hljs-title class_">SqliteContext</span>);<br></code></pre></td></tr></table></figure><ol start="5" type="1"><li>ç›‘å¬ç»„ä»¶</li></ol><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs tsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">RootLayoutNav</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">SqliteProvider</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">Stack</span> <span class="hljs-attr">screenOptions</span>=<span class="hljs-string">&#123;&#123;</span> <span class="hljs-attr">headerShown:</span> <span class="hljs-attr">false</span> &#125;&#125;&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">Stack.Screen</span></span></span><br><span class="hljs-tag"><span class="language-xml">          <span class="hljs-attr">name</span>=<span class="hljs-string">&#x27;(drawer)&#x27;</span></span></span><br><span class="hljs-tag"><span class="language-xml">          <span class="hljs-attr">options</span>=<span class="hljs-string">&#123;&#123;</span> <span class="hljs-attr">headerShown:</span> <span class="hljs-attr">false</span> &#125;&#125;</span></span><br><span class="hljs-tag"><span class="language-xml">        /&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">Stack</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">SqliteProvider</span>&gt;</span></span><br>  );<br>&#125;<br></code></pre></td></tr></table></figure><ol start="6" type="1"><li>ä½¿ç”¨</li></ol><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs tsx"><span class="hljs-keyword">const</span> &#123; exeSql, getDbFile &#125; = <span class="hljs-title function_">useSqlite</span>();<br></code></pre></td></tr></table></figure><h2 id="sqliteå®ç°å¢åˆ æ”¹æŸ¥">6ã€<code>sqlite</code>å®ç°å¢åˆ æ”¹æŸ¥</h2><p>è¿™é‡Œä½¿ç”¨<code>execAsync</code>å¼‚æ­¥å‡½æ•°è·å–æ•°æ®</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs tsx"><span class="hljs-comment">// æ‰§è¡Œè¯­å¥</span><br><span class="hljs-keyword">const</span> <span class="hljs-title function_">exeSql</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"><span class="hljs-keyword">type</span>: <span class="hljs-built_in">string</span>, data: <span class="hljs-built_in">any</span>[]</span>) =&gt; &#123;<br>  <span class="hljs-keyword">try</span> &#123;<br>    <span class="hljs-keyword">if</span> (db.<span class="hljs-property">current</span> == <span class="hljs-literal">null</span>) &#123;<br>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;æ•°æ®åº“ä¸å­˜åœ¨&quot;</span>);<br>      <span class="hljs-title function_">openDb</span>();<br>    &#125;<br>    <span class="hljs-keyword">const</span> readOnly = <span class="hljs-literal">false</span>;<br>    <span class="hljs-keyword">return</span> db?.<span class="hljs-property">current</span><br>      ?.<span class="hljs-title function_">execAsync</span>([&#123; <span class="hljs-attr">sql</span>: sqls[<span class="hljs-keyword">type</span>], <span class="hljs-attr">args</span>: data &#125;], readOnly)<br>      .<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">result: <span class="hljs-built_in">any</span></span>) =&gt;</span> &#123;<br>        <span class="hljs-keyword">const</span> data = result[<span class="hljs-number">0</span>]?.<span class="hljs-property">rows</span>;<br>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;æ‰§è¡Œç»“æœ&quot;</span>, result[<span class="hljs-number">0</span>]?.<span class="hljs-property">rows</span>);<br>        <span class="hljs-keyword">return</span> data;<br>      &#125;);<br>  &#125; <span class="hljs-keyword">catch</span> (error) &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">&quot;An error occurred:&quot;</span>, error);<br>    <span class="hljs-keyword">throw</span> error;<br>  &#125;<br>&#125;;<br></code></pre></td></tr></table></figure><p>ä½¿ç”¨</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs tsx"><span class="hljs-title function_">exeSql</span>(<span class="hljs-string">&quot;searchAllTags&quot;</span>, []).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">res</span>) =&gt;</span> &#123;<br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(res);<br>&#125;);<br></code></pre></td></tr></table></figure><blockquote><p>è¿™é‡Œå°è£…ä¸€äº›<code>sql</code>è¯­å¥</p></blockquote><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs tsx"><span class="hljs-keyword">const</span> <span class="hljs-attr">sqls</span>: <span class="hljs-built_in">any</span> = &#123;<br>  <span class="hljs-attr">searchAllNotions</span>: <span class="hljs-string">&quot;SELECT * FROM NOTIONS&quot;</span>,<br>  <span class="hljs-attr">insertNotion</span>:<br>    <span class="hljs-string">&quot;INSERT INTO NOTIONS (id,content,tag,create_time,update_time) VALUES (?, ?, ?, ?,?)&quot;</span>,<br>  <span class="hljs-attr">updateNotionById</span>:<br>    <span class="hljs-string">&quot;UPDATE notions SET content = ?,update_time = ? WHERE id = ?&quot;</span>,<br>  <span class="hljs-attr">searchNotionById</span>: <span class="hljs-string">&quot;SELECT content FROM notions WHERE id = ?&quot;</span>,<br>  <span class="hljs-attr">searchTagNameById</span>: <span class="hljs-string">&quot;SELECT name FROM tags WHERE id = ?&quot;</span>,<br>  <span class="hljs-attr">searchTagIdByName</span>: <span class="hljs-string">&quot;SELECT id FROM tags WHERE name = ?&quot;</span>,<br>  <span class="hljs-attr">searchChildrenTagsById</span>: <span class="hljs-string">&quot;SELECT name FROM tags WHERE father = ?&quot;</span>,<br>  <span class="hljs-attr">searchAllTags</span>: <span class="hljs-string">&quot;SELECT * FROM TAGS&quot;</span>,<br>&#125;;<br></code></pre></td></tr></table></figure><h2 id="dayjsç®€å•ä½¿ç”¨">7ã€<code>dayjs</code>ç®€å•ä½¿ç”¨</h2><p>å¯¼å…¥åº“</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs tsx"><span class="hljs-keyword">import</span> dayjs <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;dayjs&quot;</span>;<br></code></pre></td></tr></table></figure><p>ç”Ÿæˆæ—¶é—´ï¼ˆæ¯«ç§’ï¼‰</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs tsx"><span class="hljs-title function_">dayjs</span>().<span class="hljs-title function_">valueOf</span>();<br></code></pre></td></tr></table></figure><p>ç”Ÿæˆæ—¶é—´</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs tsx"><span class="hljs-title function_">dayjs</span>().<span class="hljs-title function_">subtract</span>(<span class="hljs-number">1</span>, <span class="hljs-string">&quot;hour&quot;</span>).<span class="hljs-title function_">toISOString</span>();<br></code></pre></td></tr></table></figure><p>è®¡ç®—å¼€å§‹åˆ°ç°åœ¨çš„å¤©æ•°</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs tsx"><span class="hljs-keyword">import</span> dayjs <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;dayjs&quot;</span>;<br><span class="hljs-keyword">import</span> relativeTime <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;dayjs/plugin/relativeTime&quot;</span>;<br><br>dayjs.<span class="hljs-title function_">extend</span>(relativeTime);<br><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">dayjs</span>(created_at).<span class="hljs-title function_">fromNow</span>());<br></code></pre></td></tr></table></figure><h2 id="è·å–é¡µé¢ç®¡çº¿åˆ—è¡¨">8ã€è·å–é¡µé¢ç®¡çº¿åˆ—è¡¨</h2><p>å½“å‰é¡µé¢å¤„äºçš„ç®¡çº¿ä½ç½®</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs tsx"><span class="hljs-keyword">const</span> segments = <span class="hljs-title function_">useSegments</span>() &gt; [<span class="hljs-string">&quot;(user)&quot;</span>, <span class="hljs-string">&quot;film&quot;</span>];<br></code></pre></td></tr></table></figure><h2 id="vscode-é…ç½®-prettier">9ã€vscode é…ç½® prettier</h2><p><ahref="https://marketplace.visualstudio.com/items?itemName=esbenp.prettier-vscode">prettier</a></p><p>å®‰è£…ä¾èµ–</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">npm i -D prettier eslint-config-prettier eslint-plugin-prettier<br></code></pre></td></tr></table></figure><p>ä¿®æ”¹ vscode è®¾ç½®</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-attr">&quot;editor.defaultFormatter&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;esbenp.prettier-vscode&quot;</span><span class="hljs-punctuation">,</span><br><span class="hljs-attr">&quot;files.autoSave&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;onFocusChange&quot;</span><span class="hljs-punctuation">,</span><br><span class="hljs-attr">&quot;editor.formatOnSave&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span> <span class="hljs-comment">// ä¿å­˜æ—¶è‡ªåŠ¨æ ¼å¼åŒ–</span><br><span class="hljs-attr">&quot;editor.formatOnType&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span><br><span class="hljs-attr">&quot;[typescript]&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br><span class="hljs-attr">&quot;editor.defaultFormatter&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;esbenp.prettier-vscode&quot;</span><br><span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br><span class="hljs-attr">&quot;prettier.useEditorConfig&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span> <span class="hljs-comment">// ä¸€å®šè¦å–æ¶ˆï¼Œå¦åˆ™ä¼šä½¿ç”¨vscodeå·¥ä½œåŒºè®¾ç½®ï¼Œè€Œä¸ä¼šä½¿ç”¨.prettierrc.js</span><br></code></pre></td></tr></table></figure><p>åœ¨é¡µé¢ä¸‹æ–°å¢æ–‡ä»¶<code>.prettierrc.js</code>ï¼Œä»¥ä¸‹æ˜¯æˆ‘çš„é»˜è®¤é…ç½®</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@see</span> https://prettier.io/docs/en/options.html#print-width</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@author</span> <span class="hljs-variable">lcm</span></span><br><span class="hljs-comment"> */</span><br><span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = &#123;<br>  <span class="hljs-comment">/**</span><br><span class="hljs-comment">   * æ¢è¡Œå®½åº¦ï¼Œå½“ä»£ç å®½åº¦è¾¾åˆ°å¤šå°‘æ—¶æ¢è¡Œ</span><br><span class="hljs-comment">   */</span><br>  <span class="hljs-attr">printWidth</span>: <span class="hljs-number">80</span>,<br>  <span class="hljs-comment">/**</span><br><span class="hljs-comment">   * ç¼©è¿›çš„ç©ºæ ¼æ•°é‡</span><br><span class="hljs-comment">   * <span class="hljs-doctag">@default</span> 2</span><br><span class="hljs-comment">   * <span class="hljs-doctag">@type</span> &#123;<span class="hljs-type">number</span>&#125;</span><br><span class="hljs-comment">   */</span><br>  <span class="hljs-attr">tabWidth</span>: <span class="hljs-number">2</span>,<br>  <span class="hljs-comment">/**</span><br><span class="hljs-comment">   * æ˜¯å¦ä½¿ç”¨åˆ¶è¡¨ç¬¦ä»£æ›¿ç©ºæ ¼</span><br><span class="hljs-comment">   * <span class="hljs-doctag">@default</span> <span class="hljs-variable">false</span></span><br><span class="hljs-comment">   * <span class="hljs-doctag">@type</span> &#123;<span class="hljs-type">boolean</span>&#125;</span><br><span class="hljs-comment">   */</span><br>  <span class="hljs-attr">useTabs</span>: <span class="hljs-literal">false</span>,<br>  <span class="hljs-comment">/**</span><br><span class="hljs-comment">   * æ˜¯å¦åœ¨ä»£ç å—ç»“å°¾åŠ ä¸Šåˆ†å·</span><br><span class="hljs-comment">   * <span class="hljs-doctag">@default</span> <span class="hljs-variable">true</span></span><br><span class="hljs-comment">   * <span class="hljs-doctag">@type</span> &#123;<span class="hljs-type">boolean</span>&#125;</span><br><span class="hljs-comment">   */</span><br>  <span class="hljs-attr">semi</span>: <span class="hljs-literal">true</span>,<br>  <span class="hljs-comment">/**</span><br><span class="hljs-comment">   * æ˜¯å¦ä½¿ç”¨å•å¼•å·æ›¿ä»£åŒå¼•å·</span><br><span class="hljs-comment">   * <span class="hljs-doctag">@default</span> <span class="hljs-variable">false</span></span><br><span class="hljs-comment">   * <span class="hljs-doctag">@type</span> &#123;<span class="hljs-type">boolean</span>&#125;</span><br><span class="hljs-comment">   */</span><br>  <span class="hljs-attr">singleQuote</span>: <span class="hljs-literal">false</span>,<br>  <span class="hljs-comment">/**</span><br><span class="hljs-comment">   * å¯¹è±¡å±æ€§çš„å¼•å·å¤„ç†</span><br><span class="hljs-comment">   * <span class="hljs-doctag">@default</span> &quot;as-needed&quot;</span><br><span class="hljs-comment">   * <span class="hljs-doctag">@type</span> &#123;<span class="hljs-type">&quot;as-needed&quot;|&quot;consistent&quot;|&quot;preserve&quot;</span>&#125;</span><br><span class="hljs-comment">   */</span><br>  <span class="hljs-attr">quoteProps</span>: <span class="hljs-string">&quot;as-needed&quot;</span>,<br>  <span class="hljs-comment">/**</span><br><span class="hljs-comment">   * jsxä¸­æ˜¯å¦ä½¿ç”¨å•å¼•å·æ›¿ä»£åŒå¼•å·</span><br><span class="hljs-comment">   * <span class="hljs-doctag">@default</span> <span class="hljs-variable">false</span></span><br><span class="hljs-comment">   * <span class="hljs-doctag">@type</span> &#123;<span class="hljs-type">boolean</span>&#125;</span><br><span class="hljs-comment">   */</span><br>  <span class="hljs-attr">jsxSingleQuote</span>: <span class="hljs-literal">false</span>,<br>  <span class="hljs-comment">/**</span><br><span class="hljs-comment">   * æœ«å°¾æ˜¯å¦åŠ ä¸Šé€—å·</span><br><span class="hljs-comment">   * <span class="hljs-doctag">@default</span> &quot;es5&quot;</span><br><span class="hljs-comment">   * <span class="hljs-doctag">@type</span> &#123;<span class="hljs-type">&quot;es5&quot;|&quot;none&quot;|&quot;all&quot;</span>&#125;</span><br><span class="hljs-comment">   */</span><br>  <span class="hljs-attr">trailingComma</span>: <span class="hljs-string">&quot;all&quot;</span>,<br>  <span class="hljs-comment">/**</span><br><span class="hljs-comment">   * åœ¨å¯¹è±¡ï¼Œæ•°ç»„æ‹¬å·ä¸æ–‡å­—ä¹‹é—´åŠ ç©ºæ ¼ &quot;&#123; foo: bar &#125;&quot;</span><br><span class="hljs-comment">   * <span class="hljs-doctag">@default</span> <span class="hljs-variable">true</span></span><br><span class="hljs-comment">   * <span class="hljs-doctag">@type</span> &#123;<span class="hljs-type">boolean</span>&#125;</span><br><span class="hljs-comment">   */</span><br>  <span class="hljs-attr">bracketSpacing</span>: <span class="hljs-literal">true</span>,<br>  <span class="hljs-comment">/**</span><br><span class="hljs-comment">   * æŠŠå¤šè¡ŒHTML (HTML, JSX, Vue, Angular)å…ƒç´ çš„&gt;æ”¾åœ¨æœ€åä¸€è¡Œçš„æœ«å°¾ï¼Œè€Œä¸æ˜¯å•ç‹¬æ”¾åœ¨ä¸‹ä¸€è¡Œ(ä¸é€‚ç”¨äºè‡ªå…³é—­å…ƒç´ )ã€‚</span><br><span class="hljs-comment">   * <span class="hljs-doctag">@default</span> <span class="hljs-variable">false</span></span><br><span class="hljs-comment">   * <span class="hljs-doctag">@type</span> &#123;<span class="hljs-type">boolean</span>&#125;</span><br><span class="hljs-comment">   */</span><br>  <span class="hljs-attr">bracketSameLine</span>: <span class="hljs-literal">false</span>,<br>  <span class="hljs-comment">/**</span><br><span class="hljs-comment">   * å½“ç®­å¤´å‡½æ•°åªæœ‰ä¸€ä¸ªå‚æ•°æ˜¯å¦åŠ æ‹¬å·</span><br><span class="hljs-comment">   * <span class="hljs-doctag">@default</span> &quot;always&quot;</span><br><span class="hljs-comment">   * <span class="hljs-doctag">@type</span> &#123;<span class="hljs-type">&quot;always&quot;|&quot;avoid&quot;</span>&#125;</span><br><span class="hljs-comment">   */</span><br>  <span class="hljs-attr">arrowParens</span>: <span class="hljs-string">&quot;avoid&quot;</span>,<br>  <span class="hljs-comment">/**</span><br><span class="hljs-comment">   * ä¸ºHTMLã€Vueã€Angularå’ŒHandlebarsæŒ‡å®šå…¨å±€ç©ºæ ¼æ•æ„Ÿæ€§</span><br><span class="hljs-comment">   * <span class="hljs-doctag">@default</span> &quot;css&quot;</span><br><span class="hljs-comment">   * <span class="hljs-doctag">@type</span> &#123;<span class="hljs-type">&quot;css&quot;|&quot;strict&quot;|&quot;ignore&quot;</span>&#125;</span><br><span class="hljs-comment">   */</span><br>  <span class="hljs-attr">htmlWhitespaceSensitivity</span>: <span class="hljs-string">&quot;ignore&quot;</span>,<br>  <span class="hljs-comment">/**</span><br><span class="hljs-comment">   * æ˜¯å¦ç¼©è¿›Vueæ–‡ä»¶ä¸­çš„&lt;script&gt;å’Œ&lt;style&gt;æ ‡è®°å†…çš„ä»£ç ã€‚æœ‰äº›äºº(æ¯”å¦‚Vueçš„åˆ›å»ºè€…)ä¸ä½¿ç”¨ç¼©è¿›æ¥ä¿å­˜ç¼©è¿›çº§åˆ«ï¼Œä½†è¿™å¯èƒ½ä¼šç ´åç¼–è¾‘å™¨ä¸­çš„ä»£ç æŠ˜å ã€‚</span><br><span class="hljs-comment">   * <span class="hljs-doctag">@default</span> &quot;always&quot;</span><br><span class="hljs-comment">   * <span class="hljs-doctag">@type</span> &#123;<span class="hljs-type">&quot;always&quot;|&quot;avoid&quot;</span>&#125;</span><br><span class="hljs-comment">   */</span><br>  <span class="hljs-attr">vueIndentScriptAndStyle</span>: <span class="hljs-literal">false</span>,<br>  <span class="hljs-comment">/**</span><br><span class="hljs-comment">   * æ–‡ä»¶ç»“æŸç¬¦</span><br><span class="hljs-comment">   * <span class="hljs-doctag">@default</span> &quot;lf&quot;</span><br><span class="hljs-comment">   * <span class="hljs-doctag">@type</span> &#123;<span class="hljs-type">&quot;lf&quot;|&quot;crlf&quot;|&quot;cr&quot;|&quot;auto&quot;</span>&#125;</span><br><span class="hljs-comment">   */</span><br>  <span class="hljs-attr">endOfLine</span>: <span class="hljs-string">&quot;crlf&quot;</span>,<br>  <span class="hljs-comment">/**</span><br><span class="hljs-comment">   * å› ä¸ºä½¿ç”¨äº†ä¸€äº›æŠ˜è¡Œæ•æ„Ÿå‹çš„æ¸²æŸ“å™¨ï¼ˆå¦‚GitHub commentï¼‰è€ŒæŒ‰ç…§markdownæ–‡æœ¬æ ·å¼è¿›è¡ŒæŠ˜è¡Œ</span><br><span class="hljs-comment">   */</span><br>  <span class="hljs-attr">proseWrap</span>: <span class="hljs-string">&quot;never&quot;</span>,<br>  <span class="hljs-comment">// æ˜¯å¦ä½¿ç”¨æ ¹ç›®å½•ä¸‹çš„EditorConfigé…ç½®æ–‡ä»¶</span><br>  <span class="hljs-attr">useEditorConfig</span>: <span class="hljs-literal">false</span>,<br>  <span class="hljs-comment">/**</span><br><span class="hljs-comment">   * HTML\VUE\JSXæ¯è¡Œåªæœ‰å•ä¸ªå±æ€§</span><br><span class="hljs-comment">   * <span class="hljs-doctag">@default</span> <span class="hljs-variable">true</span></span><br><span class="hljs-comment">   * <span class="hljs-doctag">@type</span> &#123;<span class="hljs-type">boolean</span>&#125;</span><br><span class="hljs-comment">   */</span><br>  <span class="hljs-attr">singleAttributePerLine</span>: <span class="hljs-literal">true</span>,<br>  <span class="hljs-attr">disableLanguages</span>: [<span class="hljs-string">&quot;html&quot;</span>],<br>&#125;;<br></code></pre></td></tr></table></figure><blockquote><p>æ¯æ¬¡ä¿®æ”¹<code>.prettierrc.js</code>é‡å¯æ‰èƒ½ç”Ÿæ•ˆ</p></blockquote><h2 id="è§£å†³å¼‚æ­¥è·å–æ•°æ®ç»„ä»¶ä¸åˆ·æ–°">10ã€è§£å†³å¼‚æ­¥è·å–æ•°æ®ç»„ä»¶ä¸åˆ·æ–°</h2><p>å¯ä»¥æ–°å¢ä¸€ä¸ªçŠ¶æ€ï¼Œæ•°æ®åŠ è½½æ—¶ä¸º<code>false</code>ï¼ŒåŠ è½½æˆåŠŸåå˜ä¸º<code>true</code></p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><code class="hljs ts"><span class="hljs-keyword">const</span> <span class="hljs-title function_">getData</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"></span>) =&gt; &#123;<br>  <span class="hljs-title function_">setIsLodingData</span>(<span class="hljs-literal">true</span>); <span class="hljs-comment">// è®¾ç½®åŠ è½½çŠ¶æ€ä¸º true</span><br>  <span class="hljs-keyword">const</span> notionsPromise = <span class="hljs-title function_">exeSql</span>(<span class="hljs-string">&quot;searchAllNotions&quot;</span>, []).<span class="hljs-title function_">then</span>(<span class="hljs-keyword">async</span> (res) =&gt; &#123;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; res.<span class="hljs-property">length</span>; i++) &#123;<br>      <span class="hljs-keyword">await</span> <span class="hljs-title function_">exeSql</span>(<span class="hljs-string">&quot;searchTagNameById&quot;</span>, [res[i].<span class="hljs-property">tag</span>]).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">res2</span>) =&gt;</span> &#123;<br>        res[i].<span class="hljs-property">tag</span> = res2[<span class="hljs-number">0</span>].<span class="hljs-property">name</span>;<br>      &#125;);<br>    &#125;<br>    <span class="hljs-keyword">return</span> res;<br>  &#125;);<br><br>  <span class="hljs-keyword">const</span> tagsPromise = <span class="hljs-title function_">exeSql</span>(<span class="hljs-string">&quot;searchAllTags&quot;</span>, []);<br><br>  <span class="hljs-keyword">const</span> [notions, tags] = <span class="hljs-keyword">await</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">all</span>([notionsPromise, tagsPromise]);<br><br>  <span class="hljs-title function_">setAllNotions</span>(notions);<br>  <span class="hljs-title function_">setTags</span>(tags);<br>  <span class="hljs-title function_">setIsLodingData</span>(<span class="hljs-literal">false</span>);<br>&#125;;<br><br>&#123;<br>  <span class="hljs-comment">/* æ•°æ®å±•ç¤ºå¡ç‰‡ */</span><br>&#125;<br>&#123;<br>  isLodingData ? (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">ActivityIndicator</span></span></span><br><span class="hljs-tag"><span class="language-xml">      <span class="hljs-attr">animating</span>=<span class="hljs-string">&#123;isLodingData&#125;</span></span></span><br><span class="hljs-tag"><span class="language-xml">      <span class="hljs-attr">color</span>=<span class="hljs-string">&#123;Colors.light.tint&#125;</span></span></span><br><span class="hljs-tag"><span class="language-xml">    /&gt;</span></span><br>  ) : (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">FlatList</span></span></span><br><span class="hljs-tag"><span class="language-xml">      <span class="hljs-attr">data</span>=<span class="hljs-string">&#123;notions.current&#125;</span></span></span><br><span class="hljs-tag"><span class="language-xml">      <span class="hljs-attr">renderItem</span>=<span class="hljs-string">&#123;(&#123;</span> <span class="hljs-attr">item</span> &#125;) =&gt;</span> (</span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">CartItem</span></span></span><br><span class="hljs-tag"><span class="language-xml">          <span class="hljs-attr">cartType</span>=<span class="hljs-string">&#x27;show&#x27;</span></span></span><br><span class="hljs-tag"><span class="language-xml">          <span class="hljs-attr">notion</span>=<span class="hljs-string">&#123;item&#125;</span></span></span><br><span class="hljs-tag"><span class="language-xml">          <span class="hljs-attr">func</span>=<span class="hljs-string">&#123;getData&#125;</span></span></span><br><span class="hljs-tag"><span class="language-xml">        /&gt;</span></span><br><span class="language-xml">      )&#125;</span><br><span class="language-xml">      contentContainerStyle=&#123;&#123;</span><br><span class="language-xml">        gap: defalutSize,</span><br><span class="language-xml">        padding: defalutSize * 0.5,</span><br><span class="language-xml">      &#125;&#125;</span><br><span class="language-xml">    /&gt;</span><br>  );<br>&#125;<br></code></pre></td></tr></table></figure><blockquote><p><code>getData</code>å‡½æ•°ä¸­æœ‰ä¸¤ä¸ªå¼‚æ­¥åŠ è½½å‡½æ•°ï¼Œä¸ºäº†æé«˜è·å–æ•°æ®çš„æ•ˆç‡ï¼Œå¯ä»¥åŒæ—¶å¼‚æ­¥åŠ è½½æ•°æ®ï¼ŒåŠ è½½å®Œæˆåå†èµ‹å€¼</p></blockquote><p>ä¹‹å‰çš„ä»£ç ä¸º</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs ts"><span class="hljs-keyword">const</span> <span class="hljs-title function_">getData</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"></span>) =&gt; &#123;<br>  <span class="hljs-keyword">await</span> <span class="hljs-title function_">exeSql</span>(<span class="hljs-string">&quot;searchAllNotions&quot;</span>, []).<span class="hljs-title function_">then</span>(<span class="hljs-keyword">async</span> res =&gt; &#123;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; res.<span class="hljs-property">length</span>; i++) &#123;<br>      <span class="hljs-keyword">await</span> <span class="hljs-title function_">exeSql</span>(<span class="hljs-string">&quot;searchTagNameById&quot;</span>,[res[i].<span class="hljs-property">tag</span>]).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">res2</span>)=&gt;</span>&#123;<br>        res[i].<span class="hljs-property">tag</span> = res2[<span class="hljs-number">0</span>].<span class="hljs-property">name</span><br>      &#125;)<br>    &#125;<br>    <span class="hljs-title function_">setAllNotions</span>(res);<br>  &#125;)<br><br>  &#125;);<br>  <span class="hljs-keyword">await</span> <span class="hljs-title function_">exeSql</span>(<span class="hljs-string">&quot;searchAllTags&quot;</span>, []).<span class="hljs-title function_">then</span>(<span class="hljs-keyword">async</span> res =&gt; &#123;<br>    <span class="hljs-title function_">setTags</span>(res);<br>  &#125;);<br>&#125;;<br></code></pre></td></tr></table></figure><h2 id="useeffect-å’Œ-useref-åŒºåˆ«">11ã€useEffect å’Œ useRef åŒºåˆ«</h2><h3 id="å®šä¹‰">11.1 å®šä¹‰</h3><ol type="1"><li><code>useEffect</code>ï¼šç®¡ç†çŠ¶æ€ã€‚ç®¡ç†å‡½æ•°ç»„ä»¶çš„çŠ¶æ€å’Œæ›´æ–°çŠ¶æ€ï¼Œå˜åŒ–åé‡æ–°æ¸²æŸ“å¾å»ºã€‚</li><li><code>useRef</code>ï¼šæ“ä½œ DOMå…ƒç´ ã€‚ç”¨äºå‡½æ•°å¼ç»„ä»¶ä¸­è®¿é—®çš„å…¨å±€å˜é‡ï¼Œè€Œä¸å¿…æ¸²æŸ“ç»„ä»¶ã€‚</li></ol><h2 id="è¿”å›é¡µé¢åˆ·æ–°">12ã€è¿”å›é¡µé¢åˆ·æ–°</h2><p>ä½¿ç”¨é¡µé¢ç›‘å¬äº‹ä»¶ï¼Œç›‘å¬<code>navigate</code>çš„å€¼ï¼Œä¸€æ—¦è¿”å›é¡µé¢ï¼Œ<code>navigate</code>çš„å€¼å°±ä¼šå‘ç”Ÿæ”¹å˜ï¼Œä»è€Œè§¦å‘åˆ·æ–°å‡½æ•°ã€‚</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs tsx"><span class="hljs-keyword">import</span> &#123; useNavigation &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;expo-router&quot;</span>;<br><br><span class="hljs-keyword">const</span> navigation = <span class="hljs-title function_">useNavigation</span>();<br><br><span class="hljs-comment">// è¿”å›é¡µé¢åˆ·æ–°</span><br><span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>  <span class="hljs-keyword">const</span> unsubscribe = navigation.<span class="hljs-title function_">addListener</span>(<span class="hljs-string">&quot;focus&quot;</span>, <span class="hljs-function">() =&gt;</span> &#123;<br>    <span class="hljs-title function_">onRefresh</span>();<br>  &#125;);<br>  <span class="hljs-keyword">return</span> unsubscribe;<br>&#125;, [navigation]);<br></code></pre></td></tr></table></figure><h2 id="provider-é¡ºåºé—®é¢˜">13ã€Provider é¡ºåºé—®é¢˜</h2><p>åœ¨å†™ç®€è®°è½¯ä»¶æ—¶ï¼Œå°†æ•°æ®åº“æ“ä½œå’Œçµæ„Ÿéƒ½å°è£…æˆäº†å…¨å±€<code>provider</code>ï¼Œåœ¨çµæ„Ÿé‡Œä½¿ç”¨åˆ°æ•°æ®åº“çš„ç›¸å…³æ“ä½œã€‚</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs tsx"><span class="hljs-comment">// DataProvider</span><br><br><span class="hljs-keyword">const</span> <span class="hljs-title function_">updateNotion</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params">textInput: <span class="hljs-built_in">string</span>, id: <span class="hljs-built_in">string</span></span>) =&gt; &#123;<br>  <span class="hljs-keyword">await</span> <span class="hljs-title function_">exeSql</span>(<span class="hljs-string">&quot;searchNotionById&quot;</span>, [id]).<span class="hljs-title function_">then</span>(<br>    <span class="hljs-keyword">async</span> (<span class="hljs-attr">searchNotionByIdRes</span>: <span class="hljs-built_in">any</span>) =&gt; &#123;<br>      <span class="hljs-keyword">if</span> (searchNotionByIdRes[<span class="hljs-number">0</span>]?.<span class="hljs-property">rows</span>[<span class="hljs-number">0</span>]?.<span class="hljs-property">content</span> === textInput) &#123;<br>        <span class="hljs-keyword">return</span>;<br>      &#125;<br>      <span class="hljs-keyword">const</span> updata_time = <span class="hljs-title function_">dayjs</span>().<span class="hljs-title function_">valueOf</span>();<br>      <span class="hljs-keyword">await</span> <span class="hljs-title function_">exeSql</span>(<span class="hljs-string">&quot;updateNotionById&quot;</span>, [textInput, updata_time, id]).<span class="hljs-title function_">then</span>(<br>        <span class="hljs-function">() =&gt;</span> &#123;&#125;<br>      );<br>    &#125;<br>  );<br>&#125;;<br></code></pre></td></tr></table></figure><p>åœ¨å°è£…æ—¶éœ€è¦å°†<code>DataProvider</code>æ”¾åœ¨<code>SqliteProvider</code>é‡Œé¢ï¼Œä¸ç„¶åœ¨ä½¿ç”¨<code>DataProvider</code>æ—¶ä¼šæ‰¾ä¸åˆ°æ•°æ®åº“ï¼Œå› ä¸ºå…ˆåŠ è½½çš„<code>DataProvider</code>æ—¶<code>SqliteProvider</code>è¿˜æœªåŠ è½½ã€‚</p>]]></content>
    
    
    <summary type="html">åœ¨ä½¿ç”¨expoå¼€å‘è¿‡ç¨‹ä¸­ç»å¸¸ä¼šé‡åˆ°ä¸€äº›é—®é¢˜ï¼Œè¿™é‡Œè®°å½•ä¸€ä¸‹</summary>
    
    
    
    <category term="ç¼–ç¨‹" scheme="http://example.com/categories/%E7%BC%96%E7%A8%8B/"/>
    
    <category term="å‰ç«¯" scheme="http://example.com/categories/%E7%BC%96%E7%A8%8B/%E5%89%8D%E7%AB%AF/"/>
    
    <category term="ReactNative" scheme="http://example.com/categories/%E7%BC%96%E7%A8%8B/%E5%89%8D%E7%AB%AF/ReactNative/"/>
    
    
    <category term="ç¼–ç¨‹" scheme="http://example.com/tags/%E7%BC%96%E7%A8%8B/"/>
    
    <category term="React Native" scheme="http://example.com/tags/React-Native/"/>
    
    <category term="é—®é¢˜" scheme="http://example.com/tags/%E9%97%AE%E9%A2%98/"/>
    
    <category term="è½¯ä»¶å¼€å‘" scheme="http://example.com/tags/%E8%BD%AF%E4%BB%B6%E5%BC%80%E5%8F%91/"/>
    
  </entry>
  
  <entry>
    <title>Reactå­¦ä¹ ç¬”è®°</title>
    <link href="http://example.com/2024/06/29/021%20React%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    <id>http://example.com/2024/06/29/021%20React%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/</id>
    <published>2024-06-29T12:10:00.000Z</published>
    <updated>2025-02-08T06:47:20.941Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å®‰è£…ä¸ä½¿ç”¨">1ã€å®‰è£…ä¸ä½¿ç”¨</h2><ol type="1"><li>å®‰è£…</li></ol><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cmake">npm <span class="hljs-keyword">install</span> -g create-react-app<br></code></pre></td></tr></table></figure><ol start="2" type="1"><li>åˆ›å»ºé¡¹ç›®</li></ol><figure class="highlight dsconfig"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs dsconfig"><span class="hljs-built_in">create-react-app</span> <span class="hljs-string">myapp</span><br></code></pre></td></tr></table></figure><ol start="3" type="1"><li>å¼€å§‹è¿è¡Œ è¿›å…¥åˆ°æ ¹ç›®å½•é‡Œï¼Œè¾“å…¥</li></ol><figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs coffeescript"><span class="hljs-built_in">npm</span> start<br></code></pre></td></tr></table></figure><h2 id="åˆå§‹-react">2ã€åˆå§‹ React</h2><h3 id="åŸºæœ¬æµç¨‹">2.1 åŸºæœ¬æµç¨‹</h3><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-comment">// å¼•å…¥æ¨¡å—</span><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;react&quot;</span>;<br><span class="hljs-keyword">import</span> <span class="hljs-title class_">ReactDOM</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;react-dom&quot;</span>;<br><br><span class="hljs-comment">// æ¸²æŸ“dom</span><br><span class="hljs-title class_">ReactDOM</span>.<span class="hljs-title function_">render</span>(<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Hello World<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span></span>, <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&quot;root&quot;</span>));<br></code></pre></td></tr></table></figure><h3 id="åŸºæœ¬-jsx-è¯­æ³•">2.2 åŸºæœ¬ JSX è¯­æ³•</h3><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">class</span> <span class="hljs-title class_">App</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">React.Component</span> &#123;<br>  <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">return</span> (<br>      <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span></span></span><br><span class="hljs-tag"><span class="language-xml">        <span class="hljs-attr">className</span>=<span class="hljs-string">&#x27;app&#x27;</span></span></span><br><span class="hljs-tag"><span class="language-xml">        <span class="hljs-attr">id</span>=<span class="hljs-string">&#x27;appRoot&#x27;</span></span></span><br><span class="hljs-tag"><span class="language-xml">      &gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">h1</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&#x27;title&#x27;</span>&gt;</span>æ¬¢è¿è¿›å…¥Reactçš„ä¸–ç•Œ<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>React.js æ˜¯ä¸€ä¸ªæ„å»ºé¡µé¢ UI çš„åº“<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>    );<br>  &#125;<br>&#125;<br><span class="hljs-title class_">ReactDOM</span>.<span class="hljs-title function_">render</span>(<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">App</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">App</span>&gt;</span></span>, <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&quot;root&quot;</span>));<br></code></pre></td></tr></table></figure><blockquote><p>åŒéŸ³èŠ‚è¦ä½¿ç”¨é©¼å³°å‘½åï¼Œå¦‚ className fontSize</p></blockquote><h3 id="class-ç»„ä»¶">2.3 class ç»„ä»¶</h3><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">class</span> <span class="hljs-title class_">App</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">React.Component</span> &#123;<br>  a = &#123;<br>    <span class="hljs-attr">id</span>: <span class="hljs-number">1</span>,<br>    <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;å°æ˜&quot;</span>,<br>  &#125;;<br>  <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">return</span> (<br>      <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;()</span> =&gt;</span> this.ceshi(this.a)&#125;&gt;Click<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>    );<br>  &#125;<br>  ceshi = <span class="hljs-function">(<span class="hljs-params">props</span>) =&gt;</span> &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(props);<br>  &#125;;<br>&#125;<br></code></pre></td></tr></table></figure><blockquote><p>å‡½æ•°çš„å†™æ³•æ¨èç®­å¤´å‡½æ•°</p></blockquote><h3 id="å‡½æ•°ç»„ä»¶">2.4 å‡½æ•°ç»„ä»¶</h3><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">const</span> <span class="hljs-title function_">App</span> = (<span class="hljs-params">props</span>) =&gt; &#123;<br>  <span class="hljs-keyword">return</span> <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>æˆ‘æ¥äº†<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span></span>;<br>&#125;;<br></code></pre></td></tr></table></figure><p>ç®€å†™</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">const</span> <span class="hljs-title function_">App</span> = (<span class="hljs-params">props</span>) =&gt; <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>æˆ‘æ¥äº†<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span></span>;<br></code></pre></td></tr></table></figure><blockquote><p>ç»„ä»¶åç§°ä¸€å®šè¦å¤§å†™</p></blockquote><h3 id="ç»„ä»¶æ ·å¼">2.5 ç»„ä»¶æ ·å¼</h3><ol type="1"><li>è¡Œå†…æ ·å¼</li></ol><ul><li>ç¬¬ä¸€ä¸ªæ‹¬å·è¡¨ç¤ºé‡Œé¢å†™ js è¡¨è¾¾å¼ï¼Œç¬¬äºŒä¸ªä»£è¡¨ä¸€ä¸ªå¯¹è±¡</li></ul><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs jsx">&lt;p style=&#123;&#123; <span class="hljs-attr">color</span>: <span class="hljs-string">&quot;red&quot;</span>, <span class="hljs-attr">fontSize</span>: <span class="hljs-string">&quot;14px&quot;</span> &#125;&#125;&gt;<span class="hljs-title class_">Hello</span> world&lt;/p&gt;<br></code></pre></td></tr></table></figure><ol start="2" type="1"><li>class æ ·å¼</li></ol><ul><li>è¦å†™æˆ className</li></ul><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs jsx">&lt;p className=<span class="hljs-string">&#x27;hello&#x27;</span>&gt;<span class="hljs-title class_">Hello</span> world&lt;/p&gt;<br></code></pre></td></tr></table></figure><h3 id="äº‹ä»¶å¤„ç†">2.6 äº‹ä»¶å¤„ç†</h3><ol type="1"><li>ç»‘å®šäº‹ä»¶ onclick</li><li>æ¨èè¿™ç§å‡½æ•°å†™æ³•</li><li>event äº‹ä»¶</li></ol><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">class</span> <span class="hljs-title class_">App</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">React.Component</span> &#123;<br>  a = &#123;<br>    <span class="hljs-attr">id</span>: <span class="hljs-number">1</span>,<br>    <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;å°æ˜&quot;</span>,<br>  &#125;;<br>  <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">return</span> (<br>      <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;()</span> =&gt;</span> this.ceshi(this.a)&#125;&gt;Click<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>    );<br>  &#125;<br>  ceshi = <span class="hljs-function">(<span class="hljs-params">props</span>) =&gt;</span> &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(props);<br>  &#125;;<br>&#125;<br></code></pre></td></tr></table></figure><p><span style="background-color:yellow"><strong>eventäº‹ä»¶</strong></span></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">class</span> <span class="hljs-title class_">App</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">React.Component</span>&#123;<br>    a = &#123;<br>        <span class="hljs-attr">id</span>:<span class="hljs-number">1</span>,<br>        <span class="hljs-attr">name</span>:<span class="hljs-string">&#x27;å°æ˜&#x27;</span><br>    &#125;;<br>    <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>)&#123;<br>        <span class="hljs-keyword">return</span> (<br>            <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">            &#123;//è¿™é‡Œç®­å¤´å‡½æ•°è¦ä¼ é€’å‚æ•°ï¼Œæ‰èƒ½æ•è·åˆ°&#125;</span><br><span class="language-xml">                <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;(e)</span>=&gt;</span>&#123;this.ceshi(e)&#125;&#125;&gt;Click<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>        )<br>    &#125;<br>    ceshi = <span class="hljs-function">(<span class="hljs-params">event</span>)=&gt;</span>&#123;<br>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(event);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><figure><imgsrc="http://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/image-20220515142102870.png"alt="image-20220515142102870" /><figcaption aria-hidden="true">image-20220515142102870</figcaption></figure><h3 id="ref-ä½¿ç”¨">2.7 Ref ä½¿ç”¨</h3><ol type="1"><li>åˆ›å»º<code>myref = React.createRef()</code></li><li>ç»‘å®šæ ‡ç­¾<code>ref=&#123;this.myref&#125;</code></li><li>ä½¿ç”¨</li></ol><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">class</span> <span class="hljs-title class_">App</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">React.Component</span> &#123;<br>  a = &#123;<br>    <span class="hljs-attr">id</span>: <span class="hljs-number">1</span>,<br>    <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;å°æ˜&quot;</span>,<br>  &#125;;<br>  myref = <span class="hljs-title class_">React</span>.<span class="hljs-title function_">createRef</span>();<br>  <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">return</span> (<br>      <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&#123;this.myref&#125;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">input</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">button</span></span></span><br><span class="hljs-tag"><span class="language-xml">          <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;()</span> =&gt;</span> &#123;</span><br><span class="language-xml">            this.ceshi(this.myref.current.value);</span><br><span class="language-xml">          &#125;&#125;</span><br><span class="language-xml">        &gt;</span><br><span class="language-xml">          click</span><br><span class="language-xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>    );<br>  &#125;<br>  ceshi = <span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(event);<br>  &#125;;<br>&#125;<br></code></pre></td></tr></table></figure><blockquote><p>è·å–å½“å‰æ ‡ç­¾ä½¿ç”¨<code>this.myref.current</code></p></blockquote><h2 id="ç»„ä»¶çš„æ•°æ®æŒ‚è½½">3ã€ç»„ä»¶çš„æ•°æ®æŒ‚è½½</h2><h3 id="çŠ¶æ€">3.1 çŠ¶æ€</h3><p>çŠ¶æ€å°±æ˜¯ç»„ä»¶æè¿°æŸç§æ˜¾ç¤ºæƒ…å†µçš„æ•°æ®ï¼Œç”±ç»„ä»¶è‡ªå·±è®¾ç½®å’Œæ›´æ”¹ï¼Œä¹Ÿå°±æ˜¯è¯´ç”±ç»„ä»¶è‡ªå·±ç»´æŠ¤ï¼Œä½¿ç”¨çŠ¶æ€çš„ç›®çš„å°±æ˜¯ä¸ºäº†åœ¨ä¸åŒçš„çŠ¶æ€ä¸‹ä½¿ç»„ä»¶çš„æ˜¾ç¤ºä¸åŒ(è‡ªå·±ç®¡ç†)</p><ol type="1"><li>å®šä¹‰ state</li></ol><blockquote><p>ç›´æ¥å®šä¹‰ï¼Œä¸ render()åŒä¸€çº§</p></blockquote><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-comment">// ç±»ç»„ä»¶</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">App</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">React.Component</span> &#123;<br>  state = &#123;<br>    <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;React&quot;</span>,<br>    <span class="hljs-attr">isLiked</span>: <span class="hljs-literal">false</span>,<br>  &#125;;<br>  <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">return</span> (<br>      <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>æ¬¢è¿æ¥åˆ°&#123;this.state.name&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">button</span>&gt;</span>&#123;this.state.isLiked ? &quot;å–æ¶ˆ&quot; : &quot;æ”¶è—&quot;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>    );<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>æˆ–è€…</p><blockquote><p>é€šè¿‡ constructor åˆå§‹åŒ–</p></blockquote><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-comment">// ç±»ç»„ä»¶</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">App</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">React.Component</span> &#123;<br>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-variable language_">super</span>();<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span> = &#123;<br>      <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;React&quot;</span>,<br>      <span class="hljs-attr">isLiked</span>: <span class="hljs-literal">true</span>,<br>    &#125;;<br>  &#125;<br>  <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">return</span> (<br>      <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>æ¬¢è¿æ¥åˆ°&#123;this.state.name&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">button</span>&gt;</span>&#123;this.state.isLiked ? &quot;å–æ¶ˆ&quot; : &quot;æ”¶è—&quot;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>    );<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="ä¿®æ”¹çŠ¶æ€">3.2 ä¿®æ”¹çŠ¶æ€</h3><ol type="1"><li>åªèƒ½ä½¿ç”¨ setState é‡æ–°èµ‹å€¼</li></ol><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">class</span> <span class="hljs-title class_">App</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">React.Component</span> &#123;<br>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-variable language_">super</span>();<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span> = &#123;<br>      <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;React&quot;</span>,<br>      <span class="hljs-attr">isLiked</span>: <span class="hljs-literal">true</span>,<br>    &#125;;<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">ceshi</span> = <span class="hljs-function">() =&gt;</span> &#123;<br>      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setState</span>(&#123;<br>        <span class="hljs-attr">isLiked</span>: !<span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span>.<span class="hljs-property">isLiked</span>,<br>      &#125;);<br>    &#125;;<br>  &#125;<br>  <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">return</span> (<br>      <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>æ¬¢è¿æ¥åˆ°&#123;this.state.name&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">button</span></span></span><br><span class="hljs-tag"><span class="language-xml">          <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;()</span> =&gt;</span> &#123;</span><br><span class="language-xml">            this.ceshi();</span><br><span class="language-xml">          &#125;&#125;</span><br><span class="language-xml">        &gt;</span><br><span class="language-xml">          &#123;this.state.isLiked ? &quot;å–æ¶ˆ&quot; : &quot;æ”¶è—&quot;&#125;</span><br><span class="language-xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>    );<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>setState æ˜¯å¼‚æ­¥çš„ï¼Œæ‰€ä»¥æƒ³è¦è·å–åˆ°æœ€æ–°çš„stateï¼Œæ²¡æœ‰åŠæ³•è·å–ï¼Œå°±æœ‰äº†ç¬¬äºŒä¸ªå‚æ•°ï¼Œè¿™æ˜¯ä¸€ä¸ªå¯é€‰çš„å›è°ƒå‡½æ•°</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setState</span>(<span class="hljs-function">(<span class="hljs-params">prevState, props</span>) =&gt;</span> &#123;<br>    <span class="hljs-keyword">return</span> &#123;<br>    <span class="hljs-attr">isLiked</span>: !prevState.<span class="hljs-property">isLiked</span><br>    &#125;, <span class="hljs-function">() =&gt;</span> &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;å›è°ƒé‡Œçš„&#x27;</span>,<span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span>.<span class="hljs-property">isLiked</span>)<br>    &#125;)<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;setStateå¤–éƒ¨çš„&#x27;</span>,<span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span>.<span class="hljs-property">isLiked</span>)<br></code></pre></td></tr></table></figure><h3 id="åˆ—è¡¨æ¸²æŸ“">3.3 åˆ—è¡¨æ¸²æŸ“</h3><ol type="1"><li>ä½¿ç”¨ map å¾ªç¯</li></ol><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">class</span> <span class="hljs-title class_">App</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">React.Component</span> &#123;<br>  state = &#123;<br>    <span class="hljs-attr">lists</span>: [<span class="hljs-string">&quot;111&quot;</span>, <span class="hljs-string">&quot;222&quot;</span>, <span class="hljs-string">&quot;333&quot;</span>],<br>  &#125;;<br>  <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">return</span> (<br>      <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span></span><br><span class="language-xml">          &#123;this.state.lists.map((item) =&gt; (</span><br><span class="language-xml">            <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>&#123;item&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span></span><br><span class="language-xml">          ))&#125;</span><br><span class="language-xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>    );<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>ä»¥å¾€çš„</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs jsx">list.<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">item</span>) =&gt;</span> <span class="hljs-string">`&lt;li&gt;&#123;$item&#125;&lt;/li&gt;`</span>);<br></code></pre></td></tr></table></figure><blockquote><p>è¿™é‡Œæ˜¯ react çš„ jsx è¯­æ³•ï¼Œæ‰€ä»¥ä¸ç”¨åŠ å¼•å·</p></blockquote><h3 id="todolist">3.4 TodoList</h3><p>æ·»åŠ </p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs jsx">add = <span class="hljs-function">(<span class="hljs-params">value</span>) =&gt;</span> &#123;<br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(value);<br>  <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span>.<span class="hljs-property">lists</span>.<span class="hljs-title function_">push</span>(value);<br>  <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setState</span>(&#123;<br>    <span class="hljs-attr">lists</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span>.<span class="hljs-property">lists</span>,<br>  &#125;);<br>&#125;;<br></code></pre></td></tr></table></figure><p>ä¸èƒ½å†™æˆ</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs jsx">add = <span class="hljs-function">(<span class="hljs-params">value</span>) =&gt;</span> &#123;<br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(value);<br>  <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setState</span>(&#123;<br>    <span class="hljs-attr">lists</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span>.<span class="hljs-property">lists</span>.<span class="hljs-title function_">push</span>(value),<br>  &#125;);<br>&#125;;<br></code></pre></td></tr></table></figure><p>å› ä¸º push æ–¹æ³•æ”¹å˜çš„æ˜¯åŸæ•°ç»„ï¼Œè€Œæ²¡æœ‰è¿”å›å€¼</p><p>ä»£ç </p><ol type="1"><li>ä½¿ç”¨ push æ–¹æ³•è¿½åŠ ï¼Œæ”¹å˜åŸæ•°ç»„</li><li>ä½¿ç”¨ splice åˆ é™¤ï¼Œæ”¹å˜åŸæ•°ç»„</li></ol><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">class</span> <span class="hljs-title class_">App</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">React.Component</span> &#123;<br>  myref = <span class="hljs-title class_">React</span>.<span class="hljs-title function_">createRef</span>();<br>  state = &#123;<br>    <span class="hljs-attr">lists</span>: [<span class="hljs-string">&quot;111&quot;</span>, <span class="hljs-string">&quot;222&quot;</span>, <span class="hljs-string">&quot;333&quot;</span>],<br>  &#125;;<br>  add = <span class="hljs-function">(<span class="hljs-params">value</span>) =&gt;</span> &#123;<br>    <span class="hljs-keyword">let</span> newList = <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span>.<span class="hljs-property">lists</span>;<br>    newList.<span class="hljs-title function_">push</span>(value);<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setState</span>(<br>      &#123;<br>        <span class="hljs-attr">lists</span>: newList,<br>      &#125;,<br>      <span class="hljs-function">() =&gt;</span> &#123;<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">myref</span>.<span class="hljs-property">current</span>.<span class="hljs-property">value</span> = <span class="hljs-string">&quot;&quot;</span>; <span class="hljs-comment">// ç½®ç©º</span><br>      &#125;<br>    );<br>  &#125;;<br>  <span class="hljs-keyword">delete</span> = <span class="hljs-function">(<span class="hljs-params">index</span>) =&gt;</span> &#123;<br>    <span class="hljs-keyword">let</span> newList = <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span>.<span class="hljs-property">lists</span>;<br>    newList.<span class="hljs-title function_">splice</span>(index, <span class="hljs-number">1</span>);<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setState</span>(<br>      &#123;<br>        <span class="hljs-attr">lists</span>: newList,<br>      &#125;,<br>      <span class="hljs-function">() =&gt;</span> &#123;<br>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;åˆ é™¤æˆåŠŸ&quot;</span>);<br>      &#125;<br>    );<br>  &#125;;<br>  <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">return</span> (<br>      <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&#123;this.myref&#125;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">input</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">button</span></span></span><br><span class="hljs-tag"><span class="language-xml">          <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;()</span> =&gt;</span> &#123;</span><br><span class="language-xml">            this.add(this.myref.current.value);</span><br><span class="language-xml">          &#125;&#125;</span><br><span class="language-xml">        &gt;</span><br><span class="language-xml">          Add</span><br><span class="language-xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span></span><br><span class="language-xml">          &#123;this.state.lists.map((item, index) =&gt; (</span><br><span class="language-xml">            <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">key</span>=<span class="hljs-string">&#123;item&#125;</span>&gt;</span></span><br><span class="language-xml">              &#123;item&#125;&#123;&quot; &quot;&#125;</span><br><span class="language-xml">              <span class="hljs-tag">&lt;<span class="hljs-name">button</span></span></span><br><span class="hljs-tag"><span class="language-xml">                <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;()</span> =&gt;</span> &#123;</span><br><span class="language-xml">                  this.delete(index);</span><br><span class="language-xml">                &#125;&#125;</span><br><span class="language-xml">              &gt;</span><br><span class="language-xml">                delete</span><br><span class="language-xml">              <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">            <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span></span><br><span class="language-xml">          ))&#125;</span><br><span class="language-xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>    );<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="æ¡ä»¶æ¸²æŸ“">3.5 æ¡ä»¶æ¸²æŸ“</h3><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs jsx">&#123;<br>  <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span>.<span class="hljs-property">lists</span>.<span class="hljs-property">length</span> == <span class="hljs-number">0</span> ? <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>æš‚æ— å¾…åŠäº‹é¡¹<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span> : <span class="hljs-literal">null</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>æˆ–è€…</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs jsx">&#123;<br>  <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span>.<span class="hljs-property">lists</span>.<span class="hljs-property">length</span> == <span class="hljs-number">0</span> &amp;&amp; <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>æš‚æ— å¾…åŠäº‹é¡¹<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>æˆ–è€…</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs jsx">.<span class="hljs-property">active</span>&#123;<br>    <span class="hljs-attr">display</span>: none;<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs jsx">&lt;div className=&#123;<span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span>.<span class="hljs-property">lists</span>.<span class="hljs-property">length</span> != <span class="hljs-number">0</span> &amp;&amp; <span class="hljs-string">&quot;active&quot;</span>&#125;&gt;æš‚æ— å¸¦å§&lt;/div&gt;<br></code></pre></td></tr></table></figure><h3 id="çŠ¶æ€å†ä½“éªŒ">3.6 çŠ¶æ€å†ä½“éªŒ</h3><ol type="1"><li>setState å‡½æ•°å¼‚æ­¥</li></ol><p>åœ¨å¼‚æ­¥é€»è¾‘ä¸­ï¼Œæ˜¯åŒæ­¥æ›´æ–°çŠ¶æ€ï¼Œæ›´æ–°çœŸå® dom</p><p>åœ¨åŒæ­¥é€»è¾‘ä¸­ï¼Œæ˜¯å¼‚æ­¥æ›´æ–°çŠ¶æ€ï¼Œæ›´æ–°çœŸå® dom</p><ol start="2" type="1"><li>setState å›è°ƒå‡½æ•°</li></ol><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setState</span>(<br>  &#123;<br>    <span class="hljs-attr">lists</span>: newList,<br>  &#125;,<br>  <span class="hljs-function">() =&gt;</span> &#123;<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">myref</span>.<span class="hljs-property">current</span>.<span class="hljs-property">value</span> = <span class="hljs-string">&quot;&quot;</span>;<br>  &#125;<br>);<br></code></pre></td></tr></table></figure><h3 id="å±æ€§åˆè¯•">3.7 å±æ€§åˆè¯•</h3><ol type="1"><li>åœ¨ç»„ä»¶ä¸Šå†™<code>key=â€˜valueâ€™</code>å½¢å¼ï¼Œåœ¨ç»„ä»¶å†…éƒ¨ç”¨<code>this.props</code>æ¥æ”¶;</li><li>å±æ€§æ˜¯æè¿°æ€§è´¨ã€ç‰¹ç‚¹çš„ï¼Œç»„ä»¶è‡ªå·±ä¸èƒ½éšæ„æ›´æ”¹ï¼›</li></ol><p><span style="background-color:yellow"><strong>1</strong></span></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">class</span> <span class="hljs-title class_">App</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">React.Component</span>&#123;<br>    <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>)&#123;<br>        <span class="hljs-keyword">return</span> (<br>            <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">            &#123;// ä¼ å…¥&#125;</span><br><span class="language-xml">                <span class="hljs-tag">&lt;<span class="hljs-name">NavaBar</span> <span class="hljs-attr">title</span>=<span class="hljs-string">&#x27;å¯¼èˆªæ &#x27;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">NavaBar</span>&gt;</span></span><br><span class="language-xml">            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>        )<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">class</span> <span class="hljs-title class_">NavaBar</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">React.Component</span> &#123;<br>  <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-comment">// æ¥å—</span><br>    <span class="hljs-keyword">let</span> &#123; title &#125; = <span class="hljs-variable language_">this</span>.<span class="hljs-property">props</span>;<br>    <span class="hljs-keyword">return</span> <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>NavaBar - &#123;title&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="å±æ€§éªŒè¯">3.8 å±æ€§éªŒè¯</h3><p>åœ¨ç»„ä»¶å†…éƒ¨</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">class</span> <span class="hljs-title class_">NavaBar</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">React.Component</span> &#123;<br>  <span class="hljs-keyword">static</span> propTypes = &#123;<br>    <span class="hljs-attr">title</span>: kerwinPropTypes.<span class="hljs-property">string</span>,<br>  &#125;;<br>  <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">let</span> &#123; title &#125; = <span class="hljs-variable language_">this</span>.<span class="hljs-property">props</span>;<br>    <span class="hljs-keyword">return</span> <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>NavaBar - &#123;title&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="é»˜è®¤å±æ€§">3.9 é»˜è®¤å±æ€§</h3><p>åœ¨ç»„ä»¶å†…éƒ¨</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">class</span> <span class="hljs-title class_">NavaBar</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">React.Component</span> &#123;<br>  <span class="hljs-keyword">static</span> defaultProps = &#123;<br>    <span class="hljs-attr">title</span>: <span class="hljs-string">&quot;æˆ‘æ˜¯&quot;</span>,<br>  &#125;;<br>  <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">let</span> &#123; title &#125; = <span class="hljs-variable language_">this</span>.<span class="hljs-property">props</span>;<br>    <span class="hljs-keyword">return</span> <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>NavaBar - &#123;title&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2id="è¡¨å•ä¸­çš„å—æ§ç»„ä»¶ä¸éå—æ§ç»„ä»¶">4ã€è¡¨å•ä¸­çš„å—æ§ç»„ä»¶ä¸éå—æ§ç»„ä»¶</h2><h3 id="éå—æ§ç»„ä»¶">4.1 éå—æ§ç»„ä»¶</h3><ol type="1"><li>React è¦ç¼–å†™ä¸€ä¸ªéå—æ§ç»„ä»¶ï¼Œå¯ä»¥ ä½¿ç”¨ ref æ¥ä» DOMèŠ‚ç‚¹ä¸­è·å–è¡¨å•æ•°æ®ï¼Œå°±æ˜¯éå—æ§ç»„ä»¶ã€‚</li><li>æ¯”å¦‚åœ¨ä½¿ç”¨ input è¾“å…¥æ¡†è·å–è¾“å…¥æ¡†å†…å®¹æ—¶ï¼Œæ˜¯é€šè¿‡æ“ä½œåŸç”Ÿ DOMèŠ‚ç‚¹æ¥è·å–çš„ï¼Œä¸å—æ§åˆ¶ï¼›</li></ol><figure><imgsrc="http://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/image-20220515182305778.png"alt="image-20220515182305778" /><figcaption aria-hidden="true">image-20220515182305778</figcaption></figure><p>åªèƒ½ä½¿ç”¨<code>defaultValue</code></p><h3 id="å—æ§">4.2 å—æ§</h3><ol type="1"><li>é€šè¿‡ value åŠ¨æ€ç»‘å®šçŠ¶æ€ï¼Œè¿™é‡Œå¯ä»¥æŠŠ input æ ‡ç­¾çœ‹æˆä¸€ä¸ªç»„ä»¶ï¼›</li></ol><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;react&quot;</span>;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">App</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">React.Component</span> &#123;<br>  state = &#123;<br>    <span class="hljs-attr">usename</span>: <span class="hljs-string">&quot;æˆ‘æ˜¯å¤§å‚»é€¼&quot;</span>,<br>  &#125;;<br>  <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">return</span> (<br>      <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">input</span></span></span><br><span class="hljs-tag"><span class="language-xml">          <span class="hljs-attr">value</span>=<span class="hljs-string">&#123;this.state.usename&#125;</span></span></span><br><span class="hljs-tag"><span class="language-xml">          <span class="hljs-attr">onChange</span>=<span class="hljs-string">&#123;(e)</span> =&gt;</span> &#123;</span><br><span class="language-xml">            this.setState(&#123;</span><br><span class="language-xml">              usename: e.target.value,</span><br><span class="language-xml">            &#125;);</span><br><span class="language-xml">          &#125;&#125;</span><br><span class="language-xml">        &gt;<span class="hljs-tag">&lt;/<span class="hljs-name">input</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">button</span></span></span><br><span class="hljs-tag"><span class="language-xml">          <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;()</span> =&gt;</span> &#123;</span><br><span class="language-xml">            console.log(this.state.usename);</span><br><span class="language-xml">          &#125;&#125;</span><br><span class="language-xml">        &gt;</span><br><span class="language-xml">          ç™»å½•</span><br><span class="language-xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">button</span></span></span><br><span class="hljs-tag"><span class="language-xml">          <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;()</span> =&gt;</span> &#123;</span><br><span class="language-xml">            this.setState(&#123;</span><br><span class="language-xml">              usename: &quot;&quot;,</span><br><span class="language-xml">            &#125;);</span><br><span class="language-xml">          &#125;&#125;</span><br><span class="language-xml">        &gt;</span><br><span class="language-xml">          é‡ç½®</span><br><span class="language-xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>    );<br>  &#125;<br>&#125;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">App</span>;<br></code></pre></td></tr></table></figure><h3 id="å—æ§åº”ç”¨-1">4.3 å—æ§åº”ç”¨ 1</h3><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;react&quot;</span>;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">App</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">React.Component</span> &#123;<br>  state = &#123;<br>    <span class="hljs-attr">inputValue</span>: <span class="hljs-string">&quot;&quot;</span>,<br>    <span class="hljs-attr">cinma</span>: [<br>      &#123;<br>        <span class="hljs-attr">id</span>: <span class="hljs-number">0</span>,<br>        <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;a&quot;</span>,<br>      &#125;,<br>      &#123;<br>        <span class="hljs-attr">id</span>: <span class="hljs-number">1</span>,<br>        <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;b&quot;</span>,<br>      &#125;,<br>      &#123;<br>        <span class="hljs-attr">id</span>: <span class="hljs-number">2</span>,<br>        <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;c&quot;</span>,<br>      &#125;,<br>      &#123;<br>        <span class="hljs-attr">id</span>: <span class="hljs-number">3</span>,<br>        <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;d&quot;</span>,<br>      &#125;,<br>    ],<br>  &#125;;<br>  <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">return</span> (<br>      <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">input</span></span></span><br><span class="hljs-tag"><span class="language-xml">          <span class="hljs-attr">value</span>=<span class="hljs-string">&#123;this.state.inputValue&#125;</span></span></span><br><span class="hljs-tag"><span class="language-xml">          <span class="hljs-attr">onChange</span>=<span class="hljs-string">&#123;(e)</span> =&gt;</span> &#123;</span><br><span class="language-xml">            this.setState(&#123;</span><br><span class="language-xml">              inputValue: e.target.value,</span><br><span class="language-xml">            &#125;);</span><br><span class="language-xml">          &#125;&#125;</span><br><span class="language-xml">        &gt;<span class="hljs-tag">&lt;/<span class="hljs-name">input</span>&gt;</span></span><br><span class="language-xml">        &#123;this.getList().map((item) =&gt; (</span><br><span class="language-xml">          <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">key</span>=<span class="hljs-string">&#123;item.id&#125;</span>&gt;</span>&#123;item.name&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span></span><br><span class="language-xml">        ))&#125;</span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>    );<br>  &#125;<br>  <span class="hljs-title function_">getList</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span>.<span class="hljs-property">cinma</span>.<span class="hljs-title function_">filter</span>(<span class="hljs-function">(<span class="hljs-params">item</span>) =&gt;</span><br>      item.<span class="hljs-property">name</span><br>        .<span class="hljs-title function_">toUpperCase</span>()<br>        .<span class="hljs-title function_">includes</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span>.<span class="hljs-property">inputValue</span>.<span class="hljs-title function_">toLocaleUpperCase</span>())<br>    );<br>  &#125;<br>&#125;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">App</span>;<br></code></pre></td></tr></table></figure><h3 id="todolist-å—æ§">4.4 todoList å—æ§</h3><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;react&quot;</span>;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">App</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">React.Component</span> &#123;<br>  state = &#123;<br>    <span class="hljs-attr">inputValue</span>: <span class="hljs-string">&quot;&quot;</span>,<br>    <span class="hljs-attr">lists</span>: [<br>      &#123;<br>        <span class="hljs-attr">id</span>: <span class="hljs-number">0</span>,<br>        <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;a&quot;</span>,<br>        <span class="hljs-attr">isChecked</span>: <span class="hljs-literal">false</span>,<br>      &#125;,<br>      &#123;<br>        <span class="hljs-attr">id</span>: <span class="hljs-number">1</span>,<br>        <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;b&quot;</span>,<br>        <span class="hljs-attr">isChecked</span>: <span class="hljs-literal">false</span>,<br>      &#125;,<br>      &#123;<br>        <span class="hljs-attr">id</span>: <span class="hljs-number">2</span>,<br>        <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;c&quot;</span>,<br>        <span class="hljs-attr">isChecked</span>: <span class="hljs-literal">false</span>,<br>      &#125;,<br>    ],<br>  &#125;;<br>  <span class="hljs-title function_">add</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">let</span> newList = <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span>.<span class="hljs-property">lists</span>;<br>    newList.<span class="hljs-title function_">push</span>(&#123;<br>      <span class="hljs-attr">id</span>: <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>() * <span class="hljs-number">100000</span>,<br>      <span class="hljs-attr">name</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span>.<span class="hljs-property">inputValue</span>,<br>      <span class="hljs-attr">isChecked</span>: <span class="hljs-literal">false</span>,<br>    &#125;);<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setState</span>(&#123;<br>      <span class="hljs-attr">lists</span>: newList,<br>      <span class="hljs-attr">inputValue</span>: <span class="hljs-string">&quot;&quot;</span>,<br>    &#125;);<br>  &#125;<br>  <span class="hljs-keyword">delete</span> = <span class="hljs-function">(<span class="hljs-params">index</span>) =&gt;</span> &#123;<br>    <span class="hljs-keyword">let</span> newList = <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span>.<span class="hljs-property">lists</span>;<br>    newList.<span class="hljs-title function_">splice</span>(index, <span class="hljs-number">1</span>);<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setState</span>(&#123;<br>      <span class="hljs-attr">lists</span>: newList,<br>    &#125;);<br>  &#125;;<br>  handchange = <span class="hljs-function">(<span class="hljs-params">index</span>) =&gt;</span> &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(index);<br>    <span class="hljs-keyword">let</span> newList = [...<span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span>.<span class="hljs-property">lists</span>];<br>    newList[index].<span class="hljs-property">isChecked</span> = !newList[index].<span class="hljs-property">isChecked</span>;<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setState</span>(&#123;<br>      <span class="hljs-attr">lists</span>: newList,<br>    &#125;);<br>  &#125;;<br>  <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">return</span> (<br>      <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">input</span></span></span><br><span class="hljs-tag"><span class="language-xml">          <span class="hljs-attr">value</span>=<span class="hljs-string">&#123;this.state.inputValue&#125;</span></span></span><br><span class="hljs-tag"><span class="language-xml">          <span class="hljs-attr">onChange</span>=<span class="hljs-string">&#123;(e)</span> =&gt;</span> &#123;</span><br><span class="language-xml">            this.setState(&#123;</span><br><span class="language-xml">              inputValue: e.target.value,</span><br><span class="language-xml">            &#125;);</span><br><span class="language-xml">          &#125;&#125;</span><br><span class="language-xml">        &gt;<span class="hljs-tag">&lt;/<span class="hljs-name">input</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">button</span></span></span><br><span class="hljs-tag"><span class="language-xml">          <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;()</span> =&gt;</span> &#123;</span><br><span class="language-xml">            this.add();</span><br><span class="language-xml">          &#125;&#125;</span><br><span class="language-xml">        &gt;</span><br><span class="language-xml">          Add</span><br><span class="language-xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span></span><br><span class="language-xml">          &#123;this.state.lists.map((item, index) =&gt; (</span><br><span class="language-xml">            <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">key</span>=<span class="hljs-string">&#123;item.id&#125;</span>&gt;</span></span><br><span class="language-xml">              <span class="hljs-tag">&lt;<span class="hljs-name">input</span></span></span><br><span class="hljs-tag"><span class="language-xml">                <span class="hljs-attr">type</span>=<span class="hljs-string">&#x27;checkbox&#x27;</span></span></span><br><span class="hljs-tag"><span class="language-xml">                <span class="hljs-attr">checked</span>=<span class="hljs-string">&#123;item.isChecked&#125;</span></span></span><br><span class="hljs-tag"><span class="language-xml">                <span class="hljs-attr">onChange</span>=<span class="hljs-string">&#123;()</span> =&gt;</span> &#123;</span><br><span class="language-xml">                  this.handchange(index);</span><br><span class="language-xml">                &#125;&#125;</span><br><span class="language-xml">              &gt;<span class="hljs-tag">&lt;/<span class="hljs-name">input</span>&gt;</span></span><br><span class="language-xml">              <span class="hljs-tag">&lt;<span class="hljs-name">span</span></span></span><br><span class="hljs-tag"><span class="language-xml">                <span class="hljs-attr">style</span>=<span class="hljs-string">&#123;&#123;</span> <span class="hljs-attr">textDecoration:</span> <span class="hljs-attr">item.isChecked</span> ? &quot;<span class="hljs-attr">line-through</span>&quot; <span class="hljs-attr">:</span> &quot;&quot; &#125;&#125;</span></span><br><span class="hljs-tag"><span class="language-xml">              &gt;</span></span><br><span class="language-xml">                &#123;item.name&#125;</span><br><span class="language-xml">              <span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><br><span class="language-xml">              <span class="hljs-tag">&lt;<span class="hljs-name">button</span></span></span><br><span class="hljs-tag"><span class="language-xml">                <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;()</span> =&gt;</span> &#123;</span><br><span class="language-xml">                  this.delete(index);</span><br><span class="language-xml">                &#125;&#125;</span><br><span class="language-xml">              &gt;</span><br><span class="language-xml">                delete</span><br><span class="language-xml">              <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">            <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span></span><br><span class="language-xml">          ))&#125;</span><br><span class="language-xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span></span><br><span class="language-xml">        &#123;this.state.lists.length == 0 &amp;&amp; <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>æš‚æ— å¾…åŠäº‹é¡¹<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>&#125;</span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>    );<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="ç»„ä»¶é€šä¿¡æ–¹å¼">5ã€ç»„ä»¶é€šä¿¡æ–¹å¼</h2><h3 id="å­ä¼ çˆ¶">5.1 å­ä¼ çˆ¶</h3><ol type="1"><li>å­ç»„ä»¶ä¸èƒ½ç›´æ¥è®¿é—®çˆ¶ç»„ä»¶çš„çŠ¶æ€ï¼Œä½†æ˜¯å¯ä»¥é€šè¿‡å›è°ƒå‡½æ•°é€šçŸ¥çˆ¶ç»„ä»¶æ”¹å˜çŠ¶æ€ï¼›</li><li>å­©å­ä¸èƒ½åŠ¨çˆ¶äº²æ‰‹é‡Œçš„é’±ï¼Œä½†æ˜¯å­©å­å¯ä»¥æ‰“ç”µè¯ç»™çˆ¶äº²ï¼Œè®©çˆ¶äº²å‘é’±ï¼›</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><code class="hljs react">import React, &#123; Component &#125; from &#x27;react&#x27;<br><br>class NavBar extends Component&#123;<br>    render()&#123;<br>        return(<br>            &lt;div&gt;æˆ‘æ˜¯å¯¼èˆªæ <br>                &lt;button onClick=&#123;()=&gt;&#123;<br>                    this.props.isShowList();<br>                &#125;&#125;&gt;ç‚¹æˆ‘&lt;/button&gt;<br><br>            &lt;/div&gt;<br>        )<br>    &#125;<br>&#125;<br><br>class ListBar extends Component&#123;<br>    render()&#123;<br>        return(<br>            &lt;div&gt;<br>                &lt;ul style=&#123;&#123;backgroundColor:&#x27;yellow&#x27;,width:&#x27;200px&#x27;&#125;&#125;&gt;<br>                    &lt;li&gt;1&lt;/li&gt;<br>                    &lt;li&gt;1&lt;/li&gt;<br>                    &lt;li&gt;1&lt;/li&gt;<br>                    &lt;li&gt;1&lt;/li&gt;<br>                    &lt;li&gt;1&lt;/li&gt;<br>                    &lt;li&gt;1&lt;/li&gt;<br>                    &lt;li&gt;1&lt;/li&gt;<br>                    &lt;li&gt;1&lt;/li&gt;<br>                    &lt;li&gt;1&lt;/li&gt;<br>                    &lt;li&gt;1&lt;/li&gt;<br>                    &lt;li&gt;1&lt;/li&gt;<br>                &lt;/ul&gt;<br>            &lt;/div&gt;<br>        )<br>    &#125;<br>&#125;<br><br><br><br>export default class App extends Component &#123;<br>  state = &#123;<br>    isShow:true<br>  &#125;<br>  render() &#123;<br>    return (<br>      &lt;div&gt;<br>          &lt;NavBar isShowList=&#123;()=&gt;&#123;<br>              this.setState(&#123;<br>                  isShow:!this.state.isShow<br>              &#125;)<br>          &#125;&#125;&gt;&lt;/NavBar&gt;<br>          &#123;this.state.isShow &amp;&amp; &lt;ListBar&gt;&lt;/ListBar&gt;&#125;<br>      &lt;/div&gt;<br>    )<br>  &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><h3 id="ä¸­é—´äºº">5.2 ä¸­é—´äºº</h3><figure><imgsrc="http://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/image-20220517230844506.png"alt="image-20220517230844506" /><figcaption aria-hidden="true">image-20220517230844506</figcaption></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><code class="hljs react">import React, &#123; Component &#125; from &#x27;react&#x27;<br>import axios from &#x27;axios&#x27;<br>import &#x27;./06-index.css&#x27;<br><br>export default class App extends Component &#123;<br>    constructor()&#123;<br>        super()<br>        this.state=&#123;<br>            filmList:[],<br>            detail:&quot;&quot;<br>        &#125;<br>        axios.get(`../text.json`).then(res=&gt;&#123;<br>            console.log(res.data.data)<br>            this.setState(&#123;<br>                filmList:res.data.data<br>            &#125;)<br>        &#125;)<br>    &#125;<br><br>  render() &#123;<br>    return (<br>      &lt;div&gt;<br>          &#123;<br>              this.state.filmList.map(item=&gt;&lt;Film key=&#123;item.id&#125; &#123;...item&#125; onEvent=&#123;(value)=&gt;&#123;<br>                this.setState(&#123;<br>                    detail:value<br>                &#125;)<br>              &#125;&#125;&gt;&lt;/Film&gt;)<br>          &#125;<br>          &lt;FilmDetial detail=&#123;this.state.detail&#125;&gt;&lt;/FilmDetial&gt;<br>      &lt;/div&gt;<br>    )<br>  &#125;<br>&#125;<br><br><br>class Film extends Component&#123;<br>    render()&#123;<br><br>        let &#123;name,src,detail&#125; = this.props<br>        return &lt;div className=&#x27;filmitem&#x27; onClick=&#123;()=&gt;&#123;<br>            this.props.onEvent(detail)<br>        &#125;&#125;&gt;<br>            &lt;img src=&#123;src&#125; alt=&#123;name&#125;&gt;&lt;/img&gt;<br>            &#123;this.props.name&#125;<br>        &lt;/div&gt;<br>    &#125;<br>&#125;<br><br><br>class FilmDetial extends Component&#123;<br>    render()&#123;<br>        return &lt;div className=&#x27;filmdetail&#x27;&gt;<br>            &#123;this.props.detail&#125;<br>        &lt;/div&gt;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="å­ä¼ çˆ¶è¡¨å•">5.3 å­ä¼ çˆ¶è¡¨å•</h3><ol type="1"><li>å­ç»„ä»¶è¾“å…¥æ¡†åŠ¨æ€ç»‘å®šçˆ¶ç»„ä»¶ä¸Šçš„çŠ¶æ€å€¼</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><code class="hljs react">import React, &#123; Component &#125; from &#x27;react&#x27;<br><br>export default class App extends Component &#123;<br>    state = &#123;<br>        name:&#x27;å°æ˜&#x27;,<br>        password:&#x27;123456&#x27;<br>    &#125;<br>  render() &#123;<br>    return (<br>      &lt;div&gt;<br>        &lt;h2&gt;ç™»å½•é¡µé¢&lt;/h2&gt;<br>        &lt;Filed lable = &quot;ç”¨æˆ·å&quot; type = &quot;text&quot; value = &#123;this.state.name&#125; onEvent=&#123;(value)=&gt;&#123;<br>            this.setState(&#123;<br>                name:value<br>            &#125;)<br>        &#125;&#125;/&gt;<br>        &lt;Filed lable = &quot;å¯†ç &quot; type = &quot;password&quot; value = &#123;this.state.password&#125; onEvent=&#123;(value)=&gt;&#123;<br>            this.setState(&#123;<br>                password:value<br>            &#125;)<br>        &#125;&#125;/&gt;<br>        &lt;button onClick=&#123;()=&gt;&#123;<br>            console.log(this.state.name,this.state.password);<br>        &#125;&#125;&gt;ç™»å½•&lt;/button&gt;<br>        &lt;button onClick=&#123;()=&gt;&#123;<br>            this.setState(&#123;<br>                name:&#x27;&#x27;,<br>                password:&#x27;&#x27;<br>            &#125;)<br>        &#125;&#125;&gt;å–æ¶ˆ&lt;/button&gt;<br>      &lt;/div&gt;<br>    )<br>  &#125;<br>&#125;<br><br>class Filed extends Component&#123;<br>    render()&#123;<br>        let &#123;lable,type,onEvent,value&#125; = this.props<br>        return(<br>        &lt;div&gt;<br>            &lt;span&gt;&#123;lable&#125;&lt;/span&gt;<br>            &lt;input type=&#123;type&#125; value=&#123;value&#125; onChange=&#123;(e)=&gt;&#123;<br>                onEvent(e.target.value)<br>            &#125;&#125;&gt;&lt;/input&gt;<br>        &lt;/div&gt;<br>    )&#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><h3 id="ref-è¡¨å•">5.4 ref è¡¨å•</h3><ol type="1"><li>åœ¨ç»„ä»¶ä¸ŠæŒ‚è½½ ref å¯ä»¥è·å¾—ç»„ä»¶ï¼›</li><li>çˆ¶ç»„ä»¶ç»™å­ç»„ä»¶æŒ‚è½½ ref å¯ä»¥æ‹¿åˆ°å­ç»„ä»¶çš„<code>dom</code>ï¼›</li><li>å­ç»„ä»¶å†…éƒ¨è‡ªå·±è®¾ç½®çŠ¶æ€å’Œç»‘å®š value å€¼ï¼›</li><li>é€šè¿‡ç‚¹å‡»æŒ‰é’®<code>this.username.current</code>è·å–ç»„ä»¶æ ‡ç­¾ï¼›</li><li>å°±å¯ä»¥æ‹¿åˆ°å­ç»„ä»¶å†…çš„çŠ¶æ€å’Œå‡½æ•°ï¼ˆæ¸…ç©ºå‡½æ•°åœ¨å­ç»„ä»¶è‡ªå·±å†…éƒ¨ï¼‰ï¼›</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><code class="hljs react">import React, &#123; Component &#125; from &#x27;react&#x27;<br><br>export default class App extends Component &#123;<br>    username = React.createRef();<br>    password = React.createRef();<br><br>  render() &#123;<br>    return (<br>      &lt;div&gt;<br>        &lt;h2&gt;ç™»å½•é¡µé¢&lt;/h2&gt;<br>        &#123;/* è¿™é‡Œä½¿ç”¨refèƒ½æ‹¿åˆ°ç»„ä»¶æ ‡ç­¾ */&#125;<br>        &lt;Filed lable = &quot;ç”¨æˆ·så&quot; type = &quot;text&quot; ref=&#123;this.username&#125;/&gt;<br>        &lt;Filed lable = &quot;å¯†ç &quot; type = &quot;password&quot; ref=&#123;this.password&#125;/&gt;<br>        &lt;button onClick=&#123;()=&gt;&#123;<br>            console.log(this.username.current.state.value);<br>            console.log(this.password.current.state.value);<br>        &#125;&#125;&gt;ç™»å½•&lt;/button&gt;<br>        &lt;button onClick=&#123;()=&gt;&#123;<br>            this.username.current.clear()<br>            this.password.current.clear()<br>        &#125;&#125;&gt;å–æ¶ˆ&lt;/button&gt;<br>      &lt;/div&gt;<br>    )<br>  &#125;<br>&#125;<br><br>class Filed extends Component&#123;<br>    state = &#123;<br>        value:&quot;&quot;<br>    &#125;<br>    clear()&#123;<br>        // è™½ç„¶è¿™ä¸ªå‡½æ•°èƒ½æ‰§è¡Œï¼Œä½†æ˜¯å¹¶æ²¡æœ‰ä½¿renderé‡æ–°æ‰§è¡Œ<br>        // éœ€è¦åŠ å°†inputè¾“å…¥æ¡†ç»‘å®švalue<br>        this.setState(&#123;<br>            value:&quot;&quot;<br>        &#125;)<br>    &#125;<br>    render()&#123;<br>        let &#123;lable,type&#125; = this.props<br>        return(<br>        &lt;div&gt;<br>            &lt;span&gt;&#123;lable&#125;&lt;/span&gt;<br>            &lt;input type=&#123;type&#125; value=&#123;this.state.value&#125; onChange=&#123;(e)=&gt;&#123;<br>                console.log(e.target.value);<br>                this.setState(&#123;<br>                    value:e.target.value<br>                &#125;)<br>            &#125;&#125;&gt;&lt;/input&gt;<br>        &lt;/div&gt;<br>    )&#125;<br>&#125;<br></code></pre></td></tr></table></figure><blockquote><p>å­ç»„ä»¶å†…çš„è¾“å…¥æ¡†è¦ä¸è‡ªå·±çš„çŠ¶æ€ value ç»‘å®šï¼Œå¦åˆ™æ‰§è¡Œ clearå‡½æ•°ä¸ä¼šè§¦å‘ render()</p></blockquote><h2 id="hooks">6ã€Hooks</h2><ol type="1"><li>é«˜é˜¶ç»„ä»¶ä¸ºäº†å¤ç”¨ï¼Œå¯¼è‡´ä»£ç å±‚çº§å¤æ‚</li><li>ç”Ÿå‘½å‘¨æœŸçš„å¤æ‚</li><li>å†™æˆ functional ç»„ä»¶,æ— çŠ¶æ€ç»„ä»¶ ï¼Œå› ä¸ºéœ€è¦çŠ¶æ€ï¼Œåˆæ”¹æˆäº†class,æˆæœ¬é«˜</li></ol><h3 id="usestate">6.1 <code>useState</code></h3><ol type="1"><li><code>[a,b] = arr;</code>æ­¤æ—¶ arr æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œè§£æ„èµ‹å€¼ï¼›</li><li>ä½¿ç”¨<code>useState</code>ä¼šè¿”å›ä¸€ä¸ªæ•°ç»„ï¼Œé‡Œé¢æœ‰ä¸€ä¸ªå€¼å’Œå‡½æ•°ï¼›</li></ol><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, &#123; useState &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;react&quot;</span>;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">const</span> [username, setusername] = <span class="hljs-title function_">useState</span>(<span class="hljs-string">&quot;mtl&quot;</span>);<br><br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">button</span></span></span><br><span class="hljs-tag"><span class="language-xml">        <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;()</span> =&gt;</span> &#123;</span><br><span class="language-xml">          setusername(&quot;å¤§ç™½&quot;);</span><br><span class="language-xml">        &#125;&#125;</span><br><span class="language-xml">      &gt;</span><br><span class="language-xml">        click</span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">      &#123;username&#125;</span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>  );<br>&#125;<br></code></pre></td></tr></table></figure><p>é‡å†™ todolist</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, &#123; useState &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;react&quot;</span>;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">APP</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">const</span> [text, setText] = <span class="hljs-title function_">useState</span>(<span class="hljs-string">&quot;&quot;</span>);<br>  <span class="hljs-keyword">const</span> [list, setList] = <span class="hljs-title function_">useState</span>([<span class="hljs-string">&quot;aaa&quot;</span>, <span class="hljs-string">&quot;bbb&quot;</span>, <span class="hljs-string">&quot;ccc&quot;</span>]); <span class="hljs-comment">//åˆå§‹åˆ—è¡¨å€¼</span><br><br>  <span class="hljs-keyword">const</span> <span class="hljs-title function_">add</span> = (<span class="hljs-params"></span>) =&gt; &#123;<br>    <span class="hljs-comment">// ç»“æ„åˆ—è¡¨å¹¶æ·»åŠ æ–°å€¼</span><br>    <span class="hljs-title function_">setList</span>([...list, text]);<br>  &#125;;<br><br>  <span class="hljs-keyword">const</span> <span class="hljs-title function_">del</span> = (<span class="hljs-params">index</span>) =&gt; &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(index);<br>    <span class="hljs-comment">// ä¸è¦ç›´æ¥æ›´æ”¹åŸæ•°ç»„ï¼Œåˆ›å»ºä¸€ä¸ªæ–°æ•°ç»„</span><br>    <span class="hljs-keyword">const</span> newlist = [...list];<br>    <span class="hljs-comment">// åˆ é™¤ç´¢å¼•ä½ç½®1ä¸ªå…ƒç´ </span><br>    newlist.<span class="hljs-title function_">splice</span>(index, <span class="hljs-number">1</span>);<br>    <span class="hljs-title function_">setList</span>(newlist);<br>  &#125;;<br><br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">input</span></span></span><br><span class="hljs-tag"><span class="language-xml">        <span class="hljs-attr">onChange</span>=<span class="hljs-string">&#123;(e)</span> =&gt;</span> &#123;</span><br><span class="language-xml">          setText(e.target.value);</span><br><span class="language-xml">        &#125;&#125;</span><br><span class="language-xml">      &gt;<span class="hljs-tag">&lt;/<span class="hljs-name">input</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">button</span></span></span><br><span class="hljs-tag"><span class="language-xml">        <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;()</span> =&gt;</span> &#123;</span><br><span class="language-xml">          add();</span><br><span class="language-xml">        &#125;&#125;</span><br><span class="language-xml">      &gt;</span><br><span class="language-xml">        add</span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span></span><br><span class="language-xml">        &#123;list.map((item, index) =&gt; (</span><br><span class="language-xml">          <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">key</span>=<span class="hljs-string">&#123;index&#125;</span>&gt;</span></span><br><span class="language-xml">            &#123;item&#125;</span><br><span class="language-xml">            <span class="hljs-tag">&lt;<span class="hljs-name">button</span></span></span><br><span class="hljs-tag"><span class="language-xml">              <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;()</span> =&gt;</span> &#123;</span><br><span class="language-xml">                del(index);</span><br><span class="language-xml">              &#125;&#125;</span><br><span class="language-xml">            &gt;</span><br><span class="language-xml">              del</span><br><span class="language-xml">            <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">          <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span></span><br><span class="language-xml">        ))&#125;</span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>  );<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">Reactå­¦ä¹ ç¬”è®°ï¼ŒåŒ…å«åŸºæœ¬æ¦‚å¿µã€ç»„ä»¶ï¼ˆå—æ§ç»„ä»¶å’Œéå—æ§ç»„ä»¶ï¼‰ï¼Œç»„ä»¶é€šä¿¡ç­‰</summary>
    
    
    
    <category term="ç¼–ç¨‹" scheme="http://example.com/categories/%E7%BC%96%E7%A8%8B/"/>
    
    <category term="å‰ç«¯" scheme="http://example.com/categories/%E7%BC%96%E7%A8%8B/%E5%89%8D%E7%AB%AF/"/>
    
    <category term="React" scheme="http://example.com/categories/%E7%BC%96%E7%A8%8B/%E5%89%8D%E7%AB%AF/React/"/>
    
    
    <category term="ç¼–ç¨‹" scheme="http://example.com/tags/%E7%BC%96%E7%A8%8B/"/>
    
    <category term="React" scheme="http://example.com/tags/React/"/>
    
    <category term="å­¦ä¹ ç¬”è®°" scheme="http://example.com/tags/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    
  </entry>
  
  <entry>
    <title>Googleæœç´¢æŠ€å·§</title>
    <link href="http://example.com/2024/06/28/026%20Google%E6%90%9C%E7%B4%A2%E6%8A%80%E5%B7%A7/"/>
    <id>http://example.com/2024/06/28/026%20Google%E6%90%9C%E7%B4%A2%E6%8A%80%E5%B7%A7/</id>
    <published>2024-06-28T12:42:00.000Z</published>
    <updated>2025-02-08T06:50:21.656Z</updated>
    
    <content type="html"><![CDATA[<h2 id="è°·æ­Œæœç´¢å…³é”®è¯">1ã€è°·æ­Œæœç´¢å…³é”®è¯</h2><ol type="1"><li>é™å®šå…³é”®è¯ ""</li><li>é™å®šæ ‡é¢˜ inltitle:</li><li>é™å®šå†…å®¹ intext</li><li>é™å®šç½‘å€ inurl</li><li>é™å®šç½‘ç«™ site</li><li>é™å®šå›¾ç‰‡å¤§å° imagesize</li><li>é™å®šæ–‡ä»¶ç±»å‹ filetype</li></ol><h2 id="ä¸‹è½½æ²¹ç®¡è§†é¢‘">2ã€ä¸‹è½½æ²¹ç®¡è§†é¢‘</h2><p>åœ¨è§†é¢‘ç½‘å€å‰åŠ ä¸Š 9x</p>]]></content>
    
    
    <summary type="html">Googleæœç´¢æŠ€å·§</summary>
    
    
    
    <category term="æŠ€æœ¯" scheme="http://example.com/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
    <category term="æœç´¢æŠ€å·§" scheme="http://example.com/tags/%E6%90%9C%E7%B4%A2%E6%8A%80%E5%B7%A7/"/>
    
    <category term="google" scheme="http://example.com/tags/google/"/>
    
  </entry>
  
  <entry>
    <title>Fluentä¸­çš„æµ®åŠ›æ¨¡å‹</title>
    <link href="http://example.com/2024/06/25/019%20Fluent%E4%B8%AD%E7%9A%84%E6%B5%AE%E5%8A%9B%E6%A8%A1%E5%9E%8B/"/>
    <id>http://example.com/2024/06/25/019%20Fluent%E4%B8%AD%E7%9A%84%E6%B5%AE%E5%8A%9B%E6%A8%A1%E5%9E%8B/</id>
    <published>2024-06-25T02:23:00.000Z</published>
    <updated>2025-02-08T06:47:20.940Z</updated>
    
    <content type="html"><![CDATA[<h1 id="fluent-ä¸­çš„æµ®åŠ›æ¨¡å‹">Fluent ä¸­çš„æµ®åŠ›æ¨¡å‹</h1><h2 id="åŸºæœ¬æ¦‚å¿µ">1ã€åŸºæœ¬æ¦‚å¿µ</h2><p>å½“è®¡ç®—åŸŸå¼€å¯é‡åŠ›åœºå’Œèƒ½é‡åœºæ—¶ï¼Œå¯åœ¨<code>ke</code>æ¨¡å‹ä¸­è€ƒè™‘æµ®åŠ›çš„äº§ç”Ÿã€‚</p><p>ç”±äºæµ®åŠ›è€Œäº§ç”Ÿçš„æ¹æµå…¬å¼ï¼š</p><p><span class="math display">\[G_b=\betag_i\frac{\mu_t}{\mathrm{Pr}_t}\frac{\partial T}{\partialx_i}\]</span></p><p>å…¶ä¸­<spanclass="math inline">\(Pr_{t}\)</span>æ˜¯èƒ½é‡çš„æ¹æµæ™®æœ—ç‰¹æ•°ï¼Œ<spanclass="math inline">\(g_{i}\)</span>æ˜¯é‡åŠ›çŸ¢é‡åœ¨<spanclass="math inline">\(i\)</span>æ–¹å‘ä¸Šçš„åˆ†é‡ã€‚å¯¹äºæ ‡å‡†å’Œå¯å®ç°<code>ke</code>æ¨¡å‹ï¼Œ<spanclass="math inline">\(Pr_{t}=0.85\)</span>ã€‚åœ¨<code>RNG ke</code>æ¨¡å‹ï¼Œ$Pr_{t}=<span class="math inline">\(ã€‚å…¶ä¸­\)</span>$ç”±ä»¥ä¸‹å…¬å¼è®¡ç®—ï¼š</p><p><spanclass="math display">\[\left|\frac{\alpha-1.3929}{\alpha_0-1.3929}\right|^{0.6321}\left|\frac{\alpha+2.3929}{\alpha_0+2.3929}\right|^{0.3679}=\frac{\mu_{\mathrm{mol}}}{\mu_{\mathrm{eff}}}\]</span></p><p>å…¶ä¸­<spanclass="math inline">\(\alpha_{0}=1.0\)</span>ï¼Œåœ¨é«˜é›·è¯ºæ•°é™åˆ¶ä¸‹ï¼Œ<spanclass="math inline">\(\mu_{\mathrm{mol}}/\mu_{\mathrm{eff}}\ll1\)</span>ï¼Œ<spanclass="math inline">\(\alpha_{k}=\alpha_{\epsilon}\approx1.393\)</span></p><p>ç³»æ•°$$å®šä¹‰ä¸º</p><p><spanclass="math display">\[\beta=-\frac1\rho\left(\frac{\partial\rho}{\partialT}\right)_p\]</span></p><p>å¯¹äºç†æƒ³æ°”ä½“çŠ¶æ€æ–¹ç¨‹ï¼š</p><p><spanclass="math display">\[G_b=-g_i\frac{\mu_t}{\rho\mathrm{Pr}_t}\frac{\partial\rho}{\partialx_i}\]</span></p><blockquote><p>åœ¨ä¸ç¨³å®šåˆ†å±‚ä¸­ï¼Œæ¹åŠ¨èƒ½è¶‹äºå¢å¤§ã€‚å¯¹äºä¸ç¨³å®šçš„åˆ†å±‚ï¼Œæµ®åŠ›ä¼šæŠ‘åˆ¶æ¹æµã€‚</p></blockquote><p>å—æµ®åŠ›å½±å“ç¨‹åº¦ç”±å¸¸æ•°<span class="math inline">\(C_{3\epsilon}\)</span>å†³å®šï¼Œåœ¨ Fluent ä¸­å¯é€šè¿‡ä»¥ä¸‹å…¬å¼è®¡ç®—</p><p><spanclass="math display">\[C_{3\epsilon}=\tanh\left|\frac{v}{u}\right|\]</span></p><p><spanclass="math inline">\(v\)</span>æ˜¯å¹³è¡Œäºé‡åŠ›çŸ¢é‡çš„æµé€Ÿåˆ†é‡ï¼Œ<spanclass="math inline">\(u\)</span>æ˜¯å‚ç›´äºé‡åŠ›çŸ¢é‡çš„æµé€Ÿåˆ†é‡ã€‚å¯¹äºä¸»æµæ–¹å‘ä¸é‡åŠ›æ–¹å‘ä¸€è‡´çš„æµ®åŠ›å‰ªåˆ‡å±‚ï¼Œè¯¥å¸¸æ•°ä¸º1ã€‚å¯¹äºå‚ç›´äºé‡åŠ›çŸ¢é‡çš„æµ®åŠ›å‰ªåˆ‡å±‚ï¼Œè¯¥å€¼ä¸º 0ã€‚</p><h2 id="å¦‚ä½•æ“ä½œ">2ã€å¦‚ä½•æ“ä½œ</h2><p>å¼€å¯é‡åŠ›åŠ é€Ÿåº¦å’Œèƒ½é‡æ–¹ç¨‹ï¼Œå³å¯åœ¨<code>ke</code>æ¨¡å‹ä¸­è®¾ç½®å…¨æµ®åŠ›æ¨¡å‹ã€‚</p><p><imgsrc="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/20240625092823.png" /></p>]]></content>
    
    
    <summary type="html">Fluentä¸­çš„æµ®åŠ›æ¨¡å‹</summary>
    
    
    
    <category term="æ¨¡æ‹Ÿ" scheme="http://example.com/categories/%E6%A8%A1%E6%8B%9F/"/>
    
    <category term="Fluent" scheme="http://example.com/categories/%E6%A8%A1%E6%8B%9F/Fluent/"/>
    
    
    <category term="Fluent" scheme="http://example.com/tags/Fluent/"/>
    
    <category term="æ¨¡æ‹Ÿ" scheme="http://example.com/tags/%E6%A8%A1%E6%8B%9F/"/>
    
  </entry>
  
  <entry>
    <title>Pythonè£…é¥°å™¨</title>
    <link href="http://example.com/2024/04/25/018%20Python%E8%A3%85%E9%A5%B0%E5%99%A8%E4%BD%BF%E7%94%A8/"/>
    <id>http://example.com/2024/04/25/018%20Python%E8%A3%85%E9%A5%B0%E5%99%A8%E4%BD%BF%E7%94%A8/</id>
    <published>2024-04-25T08:41:00.000Z</published>
    <updated>2025-02-08T06:47:20.940Z</updated>
    
    <content type="html"><![CDATA[<h1 id="è£…é¥°å™¨å®šä¹‰">1ã€è£…é¥°å™¨å®šä¹‰</h1><p>å‡½æ•°æœ¬èº«ä¹Ÿæ˜¯å¯¹è±¡ï¼Œèƒ½èµ‹å€¼ç»™å˜é‡ï¼Œé€šè¿‡å˜é‡åç§°å¯ä»¥è°ƒç”¨å‡½æ•°çš„åŠŸèƒ½ã€‚æ­¤å¤–èƒ½é€šè¿‡<code>__name__</code>å±æ€§æ‹¿åˆ°å‡½æ•°çš„åç§°ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">fun1</span>():<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;fun1&quot;</span>)<br><br>f1 = fun1<br>f1.__name__<br><span class="hljs-comment"># &#x27;fun1&#x27;</span><br></code></pre></td></tr></table></figure><p>è£…é¥°å™¨æ˜¯åœ¨ä¸æ”¹å˜åŸå‡½æ•°æ¡ä»¶ä¸‹ï¼Œä¸ºåŸå‡½æ•°è°ƒç”¨å‰å¢åŠ æ–°çš„åŠŸèƒ½ã€‚è£…é¥°å™¨å…¶å®æ˜¯ä¸€ä¸ªé«˜é˜¶å‡½æ•°ï¼Œé«˜é˜¶å‡½æ•°<code>hightfunc</code>æ¥å—ä¸€ä¸ªå‡½æ•°å¯¹è±¡<code>func</code>ï¼Œåœ¨é«˜é˜¶å‡½æ•°å†…éƒ¨å®šä¹‰ä¸€ä¸ªæ–°çš„å‡½æ•°<code>wrapper</code>ï¼Œæ–°çš„å‡½æ•°<code>wrapper</code>åœ¨è°ƒç”¨<code>func</code>å‡½æ•°å¯¹è±¡å‰åæ‰§è¡Œä¸€å®šçš„æ“ä½œï¼Œä¹‹åè¿”å›<code>func</code>ï¼Œæ•´ä¸ªå‘Šè¯«é«˜é˜¶å‡½æ•°å†è¿”å›<code>wrapper</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">log</span>(<span class="hljs-params">func</span>):<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">wrapper</span>():<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;call <span class="hljs-subst">&#123;func.__name__&#125;</span>&quot;</span>)<br>        <span class="hljs-keyword">return</span> func<br>    <span class="hljs-keyword">return</span> wrapper<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">fun1</span>():<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;fun1&quot;</span>)<br><br>log(fun1)()<br></code></pre></td></tr></table></figure><p>å†™æˆè¯­æ³•ç³–çš„å½¢å¼</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">log</span>(<span class="hljs-params">func</span>):<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">wrapper</span>():<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;call <span class="hljs-subst">&#123;func.__name__&#125;</span>&quot;</span>)<br>        <span class="hljs-keyword">return</span> func<br>    <span class="hljs-keyword">return</span> wrapper<br><br><span class="hljs-meta">@log</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">fun1</span>():<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;fun1&quot;</span>)<br><br>fun1()<br></code></pre></td></tr></table></figure><h1 id="è£…é¥°å™¨æœ‰å‚å‡½æ•°æ— å‚">2ã€è£…é¥°å™¨æœ‰å‚å‡½æ•°æ— å‚</h1><p>ä½¿ç”¨è£…é¥°å™¨æ—¶ï¼Œä¼ å…¥å˜é‡</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> logging<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">log</span>(<span class="hljs-params">level=<span class="hljs-string">&#x27;debug&#x27;</span></span>):<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">decorator</span>(<span class="hljs-params">func</span>):<br>        <span class="hljs-keyword">def</span> <span class="hljs-title function_">wrapper</span>():<br>            func()<br>            <span class="hljs-keyword">if</span> level == <span class="hljs-string">&#x27;warning&#x27;</span>:<br>                logging.warning(<span class="hljs-string">&quot;&#123;&#125; is called&quot;</span>.<span class="hljs-built_in">format</span>(func.__name__))<br>            <span class="hljs-keyword">else</span>:<br>                logging.debug(<span class="hljs-string">&quot;&#123;&#125; is called&quot;</span>.<span class="hljs-built_in">format</span>(func.__name__))<br>            <span class="hljs-keyword">return</span> func<br>        <span class="hljs-keyword">return</span> wrapper<br>    <span class="hljs-keyword">return</span> decorator<br><br><span class="hljs-meta">@log(<span class="hljs-params">level=<span class="hljs-string">&quot;warning&quot;</span></span>) </span><span class="hljs-comment"># æ·»åŠ å¸¦å‚æ•°çš„è£…é¥°å™¨ log()</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">func</span>():<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;func()è°ƒç”¨äº†&quot;</span>)<br><br>func()<br><br><span class="hljs-comment"># WARNING:root:func is called</span><br><span class="hljs-comment"># func()è°ƒç”¨äº†</span><br></code></pre></td></tr></table></figure><h1 id="è£…é¥°å™¨å’Œå‡½æ•°å‡æœ‰å‚">3ã€è£…é¥°å™¨å’Œå‡½æ•°å‡æœ‰å‚</h1><p>éœ€è¦ä½¿ç”¨<code>*args, **kwargs</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> logging<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">log</span>(<span class="hljs-params">level=<span class="hljs-string">&#x27;debug&#x27;</span></span>):<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">decorator</span>(<span class="hljs-params">func</span>):<br>        <span class="hljs-keyword">def</span> <span class="hljs-title function_">wrapper</span>(<span class="hljs-params">*args, **kwargs</span>):<br>            ret = func(*args, **kwargs)<br>            <span class="hljs-keyword">if</span> level == <span class="hljs-string">&#x27;warning&#x27;</span>:<br>                logging.warning(<span class="hljs-string">&quot;&#123;&#125; is called&quot;</span>.<span class="hljs-built_in">format</span>(func.__name__))<br>            <span class="hljs-keyword">else</span>:<br>                logging.debug(<span class="hljs-string">&quot;&#123;&#125; is called&quot;</span>.<span class="hljs-built_in">format</span>(func.__name__))<br>            <span class="hljs-keyword">return</span> ret<br>        <span class="hljs-keyword">return</span> wrapper<br>    <span class="hljs-keyword">return</span> decorator<br><br><span class="hljs-meta">@log(<span class="hljs-params">level=<span class="hljs-string">&quot;warning&quot;</span></span>) </span><span class="hljs-comment"># æ·»åŠ å¸¦å‚æ•°çš„è£…é¥°å™¨ log()</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">func</span>(<span class="hljs-params">n,m</span>):<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;from func(), n=<span class="hljs-subst">&#123;n&#125;</span>,m=<span class="hljs-subst">&#123;m&#125;</span>&quot;</span>)<br><br>func(<span class="hljs-number">0</span>,<span class="hljs-number">2</span>)<br></code></pre></td></tr></table></figure><p>å¯¹äº<code>*args, **kwargs</code>æˆ‘äº†è§£çš„è¿˜ä¸å¤šï¼Œè¿™é‡Œä¸åšè¿‡å¤šä»‹ç»ã€‚</p><ul><li><code>*args (Non-Keyword Arguments)</code>ç›¸å½“äºåˆ—è¡¨<code>['Hello'``, ``'Welcome'``, ``'to'``, ``'GeeksforGeeks']</code></li><li><code>**kwargs (Keyword Arguments)</code>ç›¸å½“äºå­—å…¸<code>&#123;first='Geeks', mid='for', last='Geeks'&#125;</code></li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># *args</span><br><span class="hljs-built_in">list</span> = [<span class="hljs-string">&quot;apple&quot;</span>,<span class="hljs-string">&quot;banana&quot;</span>,<span class="hljs-string">&quot;Pomelo&quot;</span>]<br><span class="hljs-keyword">def</span> <span class="hljs-title function_">func</span>(<span class="hljs-params">*argv</span>):<br>    <span class="hljs-keyword">for</span> arg <span class="hljs-keyword">in</span> argv:<br>        <span class="hljs-built_in">print</span>(arg+<span class="hljs-string">&quot; &quot;</span>)<br>func(*<span class="hljs-built_in">list</span>)<br><span class="hljs-comment"># apple</span><br><span class="hljs-comment"># banana</span><br><span class="hljs-comment"># Pomelo</span><br><br><span class="hljs-comment"># **kwargs</span><br>dic = &#123;<span class="hljs-string">&quot;1&quot;</span>:<span class="hljs-string">&quot;apple&quot;</span>,<span class="hljs-string">&quot;2&quot;</span>:<span class="hljs-string">&quot;banana&quot;</span>,<span class="hljs-string">&quot;3&quot;</span>:<span class="hljs-string">&quot;Pomelo&quot;</span>&#125;<br><span class="hljs-keyword">def</span> <span class="hljs-title function_">func</span>(<span class="hljs-params">**kwargs</span>):<br>    <span class="hljs-keyword">for</span> key,value <span class="hljs-keyword">in</span> kwargs.items():<br>        <span class="hljs-built_in">print</span>(key+<span class="hljs-string">&quot;=&quot;</span>+value)<br>func(**dic)<br><span class="hljs-comment"># 1=apple</span><br><span class="hljs-comment"># 2=banana</span><br><span class="hljs-comment"># 3=Pomelo</span><br><br><br><span class="hljs-comment"># *args,**kwargs</span><br><span class="hljs-built_in">list</span> = [<span class="hljs-string">&quot;apple&quot;</span>,<span class="hljs-string">&quot;banana&quot;</span>,<span class="hljs-string">&quot;Pomelo&quot;</span>]<br>dic = &#123;<span class="hljs-string">&quot;1&quot;</span>:<span class="hljs-string">&quot;apple&quot;</span>,<span class="hljs-string">&quot;2&quot;</span>:<span class="hljs-string">&quot;banana&quot;</span>,<span class="hljs-string">&quot;3&quot;</span>:<span class="hljs-string">&quot;Pomelo&quot;</span>&#125;<br><span class="hljs-keyword">def</span> <span class="hljs-title function_">func</span>(<span class="hljs-params">*argv,**kwargs</span>):<br>    <span class="hljs-keyword">for</span> arg <span class="hljs-keyword">in</span> argv:<br>        <span class="hljs-built_in">print</span>(arg+<span class="hljs-string">&quot; &quot;</span>)<br>    <span class="hljs-keyword">for</span> key,value <span class="hljs-keyword">in</span> kwargs.items():<br>        <span class="hljs-built_in">print</span>(key+<span class="hljs-string">&quot;=&quot;</span>+value)<br>func(*<span class="hljs-built_in">list</span>,**dic)<br><span class="hljs-comment"># apple</span><br><span class="hljs-comment"># banana</span><br><span class="hljs-comment"># Pomelo</span><br><span class="hljs-comment"># 1=apple</span><br><span class="hljs-comment"># 2=banana</span><br><span class="hljs-comment"># 3=Pomelo</span><br></code></pre></td></tr></table></figure><h1 id="ç±»æ–¹æ³•è£…é¥°å™¨">4ã€ç±»æ–¹æ³•è£…é¥°å™¨</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> time<br><span class="hljs-keyword">def</span> <span class="hljs-title function_">decorator</span>(<span class="hljs-params">func</span>):<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">wrapper</span>(<span class="hljs-params">self, *args, **kwargs</span>):<br>        start_time = time.time()<br>        ret = func(self, *args, **kwargs)<br>        end_time = time.time()<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;%s.%s() cost %f second!&quot;</span> % (self.__class__,<br>              func.__name__, end_time - start_time))<br>        <span class="hljs-keyword">return</span> ret<br>    <span class="hljs-keyword">return</span> wrapper<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">TestDecorator</span>():<br><span class="hljs-meta">    @decorator</span><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">mysleep</span>(<span class="hljs-params">self, n</span>):<br>        time.sleep(n)<br><br>obj = TestDecorator()<br>obj.mysleep(<span class="hljs-number">1</span>)<br></code></pre></td></tr></table></figure><h1 id="è£…é¥°å™¨ç±»">5ã€è£…é¥°å™¨ç±»</h1><p>ä¼šè°ƒç”¨<code>__init__</code>å’Œ<code>__call__</code>å‡½æ•°</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Tracer</span>():<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, func</span>):<br>        self.func = func<br>        self.calls = <span class="hljs-number">0</span><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__call__</span>(<span class="hljs-params">self, *args, **kwargs</span>):<br>        self.calls += <span class="hljs-number">1</span><br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;call %s() %d times&quot;</span> % (self.func.__name__, self.calls))<br>        <span class="hljs-keyword">return</span> self.func(*args, **kwargs)<br><br><span class="hljs-meta">@Tracer</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">test_tracer</span>(<span class="hljs-params">val, name=<span class="hljs-string">&quot;default&quot;</span></span>):<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;func() name:%s, val: %d&quot;</span> % (name, val))<br><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">2</span>):<br>    test_tracer(i, name=(<span class="hljs-string">&quot;name&quot;</span> + <span class="hljs-built_in">str</span>(i)))<br><br>&gt;&gt;&gt;<br>call test_tracer() <span class="hljs-number">1</span> times<br>func() name:name0, val: <span class="hljs-number">0</span><br>call test_tracer() <span class="hljs-number">2</span> times<br>func() name:name1, val: <span class="hljs-number">1</span><br></code></pre></td></tr></table></figure><h1 id="å¸¦å‚æ•°è£…é¥°å™¨ç±»">6ã€ å¸¦å‚æ•°è£…é¥°å™¨ç±»</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Tracer</span>():<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, arg0</span>): <span class="hljs-comment"># å¯æ”¯æŒä»»æ„å‚æ•°</span><br>        self.arg0 = arg0<br>        self.calls = <span class="hljs-number">0</span><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__call__</span>(<span class="hljs-params">self, func</span>):<br>        <span class="hljs-keyword">def</span> <span class="hljs-title function_">wrapper</span>(<span class="hljs-params">*args, **kwargs</span>):<br>            self.calls += <span class="hljs-number">1</span><br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;arg0:%d call %s() %d times&quot;</span> % (self.arg0, func.__name__, self.calls))<br>            <span class="hljs-keyword">return</span> func(*args, **kwargs)<br>        <span class="hljs-keyword">return</span> wrapper<br><br><span class="hljs-meta">@Tracer(<span class="hljs-params">arg0=<span class="hljs-number">0</span></span>)</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">test_tracer</span>(<span class="hljs-params">val, name=<span class="hljs-string">&quot;default&quot;</span></span>):<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;func() name:%s, val: %d&quot;</span> % (name, val))<br><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">2</span>):<br>    test_tracer(i, name=(<span class="hljs-string">&quot;name&quot;</span> + <span class="hljs-built_in">str</span>(i)))<br><br>&gt;&gt;&gt;<br>arg0:<span class="hljs-number">0</span> call test_tracer() <span class="hljs-number">1</span> times<br>func() name:name0, val: <span class="hljs-number">0</span><br>arg0:<span class="hljs-number">0</span> call test_tracer() <span class="hljs-number">2</span> times<br>func() name:name1, val: <span class="hljs-number">1</span><br></code></pre></td></tr></table></figure><h1 id="å†…ç½®è£…é¥°å™¨">7ã€å†…ç½®è£…é¥°å™¨</h1><h2 id="staticmethod">7.1 staticmethod</h2><p>ç±»çš„é™æ€å‡½æ•°è£…é¥°å™¨ï¼Œå¯é€šè¿‡ç±»åç›´æ¥è°ƒç”¨</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">C</span>():<br><span class="hljs-meta">    @staticmethod</span><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">static_method</span>():<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;This is a static method!&quot;</span>)<br><br>C.static_method()     <span class="hljs-comment"># ç±»åç›´æ¥è°ƒç”¨</span><br><br>c = C()<br>c.static_method()     <span class="hljs-comment"># ç±»å¯¹è±¡è°ƒç”¨</span><br><br>&gt;&gt;&gt;<br>This <span class="hljs-keyword">is</span> a static method!<br>This <span class="hljs-keyword">is</span> a static method!<br></code></pre></td></tr></table></figure><h2 id="classmethod">7.2 classmethod</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">C</span>():<br><span class="hljs-meta">    @classmethod</span><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">class_method</span>(<span class="hljs-params">cls</span>):<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;This is &quot;</span>, cls)<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">B</span>(<span class="hljs-title class_ inherited__">C</span>):<br>  <span class="hljs-keyword">pass</span><br><br>C.class_method()  <span class="hljs-comment"># ç±»åç›´æ¥è°ƒç”¨</span><br>c = C()<br>c.class_method()  <span class="hljs-comment"># ç±»å¯¹è±¡è°ƒç”¨</span><br><br>B.class_method()  <span class="hljs-comment"># ç»§æ‰¿ç±»è°ƒç”¨</span><br><br>&gt;&gt;&gt;<br>This <span class="hljs-keyword">is</span>  &lt;<span class="hljs-keyword">class</span> <span class="hljs-string">&#x27;__main__.C&#x27;</span>&gt;<br>This <span class="hljs-keyword">is</span>  &lt;<span class="hljs-keyword">class</span> <span class="hljs-string">&#x27;__main__.C&#x27;</span>&gt;<br>This <span class="hljs-keyword">is</span>  &lt;<span class="hljs-keyword">class</span> <span class="hljs-string">&#x27;__main__.B&#x27;</span>&gt;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">pythonè£…é¥°å™¨ä½¿ç”¨</summary>
    
    
    
    <category term="ç¼–ç¨‹" scheme="http://example.com/categories/%E7%BC%96%E7%A8%8B/"/>
    
    <category term="Python" scheme="http://example.com/categories/%E7%BC%96%E7%A8%8B/Python/"/>
    
    
    <category term="Python" scheme="http://example.com/tags/Python/"/>
    
    <category term="è£…é¥°å™¨" scheme="http://example.com/tags/%E8%A3%85%E9%A5%B0%E5%99%A8/"/>
    
  </entry>
  
  <entry>
    <title>Pythonå¸¸ç”¨æŠ€å·§</title>
    <link href="http://example.com/2024/04/24/017%20Python%E5%B8%B8%E7%94%A8%E6%8A%80%E5%B7%A7%E5%88%86%E4%BA%AB/"/>
    <id>http://example.com/2024/04/24/017%20Python%E5%B8%B8%E7%94%A8%E6%8A%80%E5%B7%A7%E5%88%86%E4%BA%AB/</id>
    <published>2024-04-24T15:28:00.000Z</published>
    <updated>2025-02-08T06:47:20.940Z</updated>
    
    <content type="html"><![CDATA[<h1 id="æ¨å¯¼å¼">1ã€æ¨å¯¼å¼</h1><p>æ¨å¯¼å¼åˆå«åšè§£æå¼ï¼Œæ˜¯ç®€åŒ–å†—ä½™ä»£ç å®è´¨æœ‰æ•ˆçš„æ–¹æ³•ï¼Œ<code>Python</code>ä¸­å®ç”¨çš„è¯­æ³•ç³–ï¼Œå¯ä»¥åˆ†ä¸ºä»¥ä¸‹å‡ ç±»ï¼š</p><ol type="1"><li>åˆ—è¡¨æ¨å¯¼å¼ï¼ˆâ­ï¼‰</li><li>å­—å…¸æ¨å¯¼å¼ï¼ˆâ­ï¼‰</li><li>é›†åˆæ¨å¯¼å¼</li><li>å…ƒç¥–æ¨å¯¼å¼</li></ol><p>ä¸‹é¢åªä»‹ç»å¸¸ç”¨çš„åˆ—è¡¨æ¨å¯¼å¼å’Œå­—å…¸æ¨å¯¼å¼ã€‚</p><h2 id="åˆ—è¡¨æ¨å¯¼å¼">1.1 åˆ—è¡¨æ¨å¯¼å¼</h2><p>å¯¹åˆ—è¡¨ä¸­æ¯ä¸ªå…ƒç´ è¿›è¡Œä¸€å®šæ“ä½œã€‚</p><p>åŸºæœ¬ä½¿ç”¨</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-built_in">list</span> = [<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>,<span class="hljs-number">5</span>,<span class="hljs-number">6</span>,<span class="hljs-number">7</span>,<span class="hljs-number">8</span>,<span class="hljs-number">9</span>,<span class="hljs-number">10</span>]<br>list1 = [x+<span class="hljs-number">2</span> <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> <span class="hljs-built_in">list</span>]<br><span class="hljs-built_in">print</span>(list1)<br><span class="hljs-comment"># [3, 4, 5, 6, 7, 8, 9, 10, 11, 12]</span><br></code></pre></td></tr></table></figure><p>æ¡ä»¶è¡¨è¾¾å¼</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-built_in">list</span> = [<span class="hljs-string">&quot;Bob&quot;</span>,<span class="hljs-string">&quot;Jason&quot;</span>,<span class="hljs-string">&quot;Peter&quot;</span>,<span class="hljs-string">&quot;Jani&quot;</span>,<span class="hljs-string">&quot;Tom&quot;</span>]<br>list1 = [name+<span class="hljs-string">&quot;666&quot;</span> <span class="hljs-keyword">for</span> name <span class="hljs-keyword">in</span> <span class="hljs-built_in">list</span> <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(name) &gt; <span class="hljs-number">3</span>]<br><span class="hljs-built_in">print</span>(list1)<br><span class="hljs-comment"># [&#x27;Jason666&#x27;, &#x27;Peter666&#x27;, &#x27;Jani666&#x27;]</span><br></code></pre></td></tr></table></figure><p>å¤šä¸ª for å¾ªç¯</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python">time = [<span class="hljs-string">&#x27;%.2d:%.2d&#x27;</span>%(h,m )<span class="hljs-keyword">for</span> h <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">24</span>) <span class="hljs-keyword">for</span> m <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">0</span>,<span class="hljs-number">60</span>,<span class="hljs-number">5</span>) ]<br><span class="hljs-built_in">print</span>(time)<br><span class="hljs-comment"># [&#x27;00:00&#x27;, &#x27;00:05&#x27;, &#x27;00:10&#x27;, &#x27;00:15&#x27;, &#x27;00:20&#x27;, &#x27;00:25&#x27;, &#x27;00:30&#x27;, &#x27;00:35&#x27;, &#x27;00:40&#x27;, &#x27;00:45&#x27;, &#x27;00:50&#x27;, &#x27;00:55&#x27;, &#x27;01:00&#x27;, &#x27;01:05&#x27;, &#x27;01:10&#x27;, &#x27;01:15&#x27;, &#x27;01:20&#x27;, &#x27;01:25&#x27;, &#x27;01:30&#x27;, &#x27;01:35&#x27;, &#x27;01:40&#x27;, &#x27;01:45&#x27;, &#x27;01:50&#x27;, &#x27;01:55&#x27;, &#x27;02:00&#x27;, &#x27;02:05&#x27;, &#x27;02:10&#x27;, &#x27;02:15&#x27;, &#x27;02:20&#x27;, &#x27;02:25&#x27;, &#x27;02:30&#x27;, &#x27;02:35&#x27;, &#x27;02:40&#x27;, &#x27;02:45&#x27;, &#x27;02:50&#x27;, &#x27;02:55&#x27;, &#x27;03:00&#x27;, &#x27;03:05&#x27;, &#x27;03:10&#x27;, &#x27;03:15&#x27;, &#x27;03:20&#x27;, &#x27;03:25&#x27;, &#x27;03:30&#x27;, &#x27;03:35&#x27;, &#x27;03:40&#x27;, &#x27;03:45&#x27;, &#x27;03:50&#x27;, &#x27;03:55&#x27;, &#x27;04:00&#x27;, &#x27;04:05&#x27;, &#x27;04:10&#x27;, &#x27;04:15&#x27;, &#x27;04:20&#x27;, &#x27;04:25&#x27;, &#x27;04:30&#x27;, &#x27;04:35&#x27;, &#x27;04:40&#x27;, &#x27;04:45&#x27;, &#x27;04:50&#x27;, &#x27;04:55&#x27;, &#x27;05:00&#x27;, &#x27;05:05&#x27;, &#x27;05:10&#x27;, &#x27;05:15&#x27;, &#x27;05:20&#x27;, &#x27;05:25&#x27;, &#x27;05:30&#x27;, &#x27;05:35&#x27;, &#x27;05:40&#x27;, &#x27;05:45&#x27;, &#x27;05:50&#x27;, &#x27;05:55&#x27;, &#x27;06:00&#x27;, &#x27;06:05&#x27;, &#x27;06:10&#x27;, &#x27;06:15&#x27;, &#x27;06:20&#x27;, &#x27;06:25&#x27;, &#x27;06:30&#x27;, &#x27;06:35&#x27;, &#x27;06:40&#x27;, &#x27;06:45&#x27;, &#x27;06:50&#x27;, &#x27;06:55&#x27;, &#x27;07:00&#x27;, &#x27;07:05&#x27;, &#x27;07:10&#x27;, &#x27;07:15&#x27;, &#x27;07:20&#x27;, &#x27;07:25&#x27;, &#x27;07:30&#x27;, &#x27;07:35&#x27;, &#x27;07:40&#x27;, &#x27;07:45&#x27;, &#x27;07:50&#x27;, &#x27;07:55&#x27;, &#x27;08:00&#x27;, &#x27;08:05&#x27;, &#x27;08:10&#x27;, &#x27;08:15&#x27;, &#x27;08:20&#x27;, &#x27;08:25&#x27;, &#x27;08:30&#x27;, &#x27;08:35&#x27;, &#x27;08:40&#x27;, &#x27;08:45&#x27;, &#x27;08:50&#x27;, &#x27;08:55&#x27;, &#x27;09:00&#x27;, &#x27;09:05&#x27;, &#x27;09:10&#x27;, &#x27;09:15&#x27;, &#x27;09:20&#x27;, &#x27;09:25&#x27;, &#x27;09:30&#x27;, &#x27;09:35&#x27;, &#x27;09:40&#x27;, &#x27;09:45&#x27;, &#x27;09:50&#x27;, &#x27;09:55&#x27;, &#x27;10:00&#x27;, &#x27;10:05&#x27;, &#x27;10:10&#x27;, &#x27;10:15&#x27;, &#x27;10:20&#x27;, &#x27;10:25&#x27;, &#x27;10:30&#x27;, &#x27;10:35&#x27;, &#x27;10:40&#x27;, &#x27;10:45&#x27;, &#x27;10:50&#x27;, &#x27;10:55&#x27;, &#x27;11:00&#x27;, &#x27;11:05&#x27;, &#x27;11:10&#x27;, &#x27;11:15&#x27;, &#x27;11:20&#x27;, &#x27;11:25&#x27;, &#x27;11:30&#x27;, &#x27;11:35&#x27;, &#x27;11:40&#x27;, &#x27;11:45&#x27;, &#x27;11:50&#x27;, &#x27;11:55&#x27;, &#x27;12:00&#x27;, &#x27;12:05&#x27;, &#x27;12:10&#x27;, &#x27;12:15&#x27;, &#x27;12:20&#x27;, &#x27;12:25&#x27;, &#x27;12:30&#x27;, &#x27;12:35&#x27;, &#x27;12:40&#x27;, &#x27;12:45&#x27;, &#x27;12:50&#x27;, &#x27;12:55&#x27;, &#x27;13:00&#x27;, &#x27;13:05&#x27;, &#x27;13:10&#x27;, &#x27;13:15&#x27;, &#x27;13:20&#x27;, &#x27;13:25&#x27;, &#x27;13:30&#x27;, &#x27;13:35&#x27;, &#x27;13:40&#x27;, &#x27;13:45&#x27;, &#x27;13:50&#x27;, &#x27;13:55&#x27;, &#x27;14:00&#x27;, &#x27;14:05&#x27;, &#x27;14:10&#x27;, &#x27;14:15&#x27;, &#x27;14:20&#x27;, &#x27;14:25&#x27;, &#x27;14:30&#x27;, &#x27;14:35&#x27;, &#x27;14:40&#x27;, &#x27;14:45&#x27;, &#x27;14:50&#x27;, &#x27;14:55&#x27;, &#x27;15:00&#x27;, &#x27;15:05&#x27;, &#x27;15:10&#x27;, &#x27;15:15&#x27;, &#x27;15:20&#x27;, &#x27;15:25&#x27;, &#x27;15:30&#x27;, &#x27;15:35&#x27;, &#x27;15:40&#x27;, &#x27;15:45&#x27;, &#x27;15:50&#x27;, &#x27;15:55&#x27;, &#x27;16:00&#x27;, &#x27;16:05&#x27;, &#x27;16:10&#x27;, &#x27;16:15&#x27;, &#x27;16:20&#x27;, &#x27;16:25&#x27;, &#x27;16:30&#x27;, &#x27;16:35&#x27;, &#x27;16:40&#x27;, &#x27;16:45&#x27;, &#x27;16:50&#x27;, &#x27;16:55&#x27;, &#x27;17:00&#x27;, &#x27;17:05&#x27;, &#x27;17:10&#x27;, &#x27;17:15&#x27;, &#x27;17:20&#x27;, &#x27;17:25&#x27;, &#x27;17:30&#x27;, &#x27;17:35&#x27;, &#x27;17:40&#x27;, &#x27;17:45&#x27;, &#x27;17:50&#x27;, &#x27;17:55&#x27;, &#x27;18:00&#x27;, &#x27;18:05&#x27;, &#x27;18:10&#x27;, &#x27;18:15&#x27;, &#x27;18:20&#x27;, &#x27;18:25&#x27;, &#x27;18:30&#x27;, &#x27;18:35&#x27;, &#x27;18:40&#x27;, &#x27;18:45&#x27;, &#x27;18:50&#x27;, &#x27;18:55&#x27;, &#x27;19:00&#x27;, &#x27;19:05&#x27;, &#x27;19:10&#x27;, &#x27;19:15&#x27;, &#x27;19:20&#x27;, &#x27;19:25&#x27;, &#x27;19:30&#x27;, &#x27;19:35&#x27;, &#x27;19:40&#x27;, &#x27;19:45&#x27;, &#x27;19:50&#x27;, &#x27;19:55&#x27;, &#x27;20:00&#x27;, &#x27;20:05&#x27;, &#x27;20:10&#x27;, &#x27;20:15&#x27;, &#x27;20:20&#x27;, &#x27;20:25&#x27;, &#x27;20:30&#x27;, &#x27;20:35&#x27;, &#x27;20:40&#x27;, &#x27;20:45&#x27;, &#x27;20:50&#x27;, &#x27;20:55&#x27;, &#x27;21:00&#x27;, &#x27;21:05&#x27;, &#x27;21:10&#x27;, &#x27;21:15&#x27;, &#x27;21:20&#x27;, &#x27;21:25&#x27;, &#x27;21:30&#x27;, &#x27;21:35&#x27;, &#x27;21:40&#x27;, &#x27;21:45&#x27;, &#x27;21:50&#x27;, &#x27;21:55&#x27;, &#x27;22:00&#x27;, &#x27;22:05&#x27;, &#x27;22:10&#x27;, &#x27;22:15&#x27;, &#x27;22:20&#x27;, &#x27;22:25&#x27;, &#x27;22:30&#x27;, &#x27;22:35&#x27;, &#x27;22:40&#x27;, &#x27;22:45&#x27;, &#x27;22:50&#x27;, &#x27;22:55&#x27;, &#x27;23:00&#x27;, &#x27;23:05&#x27;, &#x27;23:10&#x27;, &#x27;23:15&#x27;, &#x27;23:20&#x27;, &#x27;23:25&#x27;, &#x27;23:30&#x27;, &#x27;23:35&#x27;, &#x27;23:40&#x27;, &#x27;23:45&#x27;, &#x27;23:50&#x27;, &#x27;23:55&#x27;]</span><br></code></pre></td></tr></table></figure><p>å¤šä¸ª for å¾ªç¯+æ¡ä»¶è¡¨è¾¾å¼</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-built_in">list</span> = [(x, y) <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> [<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>] <span class="hljs-keyword">for</span> y <span class="hljs-keyword">in</span> [<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">4</span>] <span class="hljs-keyword">if</span> x != y]<br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">list</span>)<br><span class="hljs-comment"># [(1, 3), (1, 4), (2, 3), (2, 1), (2, 4), (3, 1), (3, 4)]</span><br></code></pre></td></tr></table></figure><h2 id="å­—å…¸æ¨å¯¼å¼">1.2 å­—å…¸æ¨å¯¼å¼</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python">listdemo = [<span class="hljs-string">&quot;Bob&quot;</span>,<span class="hljs-string">&quot;Jason&quot;</span>,<span class="hljs-string">&quot;Peter&quot;</span>,<span class="hljs-string">&quot;Jani&quot;</span>,<span class="hljs-string">&quot;Tom&quot;</span>]<br>newdict = &#123;key:<span class="hljs-built_in">len</span>(key) <span class="hljs-keyword">for</span> key <span class="hljs-keyword">in</span> listdemo&#125;<br><span class="hljs-built_in">print</span>(newdict)<br><span class="hljs-comment"># &#123;&#x27;Bob&#x27;: 3, &#x27;Jason&#x27;: 5, &#x27;Peter&#x27;: 5, &#x27;Jani&#x27;: 4, &#x27;Tom&#x27;: 3&#125;</span><br></code></pre></td></tr></table></figure><p>äº’æ¢ key å’Œ value çš„å€¼</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python">person = &#123;<span class="hljs-string">&#x27;è§’è‰²å&#x27;</span>:<span class="hljs-string">&#x27;å®«æœ¬æ­¦è—&#x27;</span>,<span class="hljs-string">&#x27;å®šä½&#x27;</span>:<span class="hljs-string">&#x27;åˆºå®¢&#x27;</span>&#125;<br>person_reverse = &#123;k:v <span class="hljs-keyword">for</span> v,k <span class="hljs-keyword">in</span> person.items()&#125;<br><span class="hljs-built_in">print</span>(person_reverse)<br><span class="hljs-comment"># &#123;&#x27;å®«æœ¬æ­¦è—&#x27;: &#x27;è§’è‰²å&#x27;, &#x27;åˆºå®¢&#x27;: &#x27;å®šä½&#x27;&#125;</span><br></code></pre></td></tr></table></figure><h1 id="å­—å…¸éå†">2ã€å­—å…¸éå†</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python">person = &#123;<span class="hljs-string">&#x27;è§’è‰²å&#x27;</span>:<span class="hljs-string">&#x27;å®«æœ¬æ­¦è—&#x27;</span>,<span class="hljs-string">&#x27;å®šä½&#x27;</span>:<span class="hljs-string">&#x27;åˆºå®¢&#x27;</span>&#125;<br><span class="hljs-keyword">for</span> key,value <span class="hljs-keyword">in</span> person.items():<br>    <span class="hljs-built_in">print</span>(key,value)<br></code></pre></td></tr></table></figure><h1 id="åˆ¤æ–­å…ƒç´ æ˜¯å¦åœ¨åˆ—è¡¨ä¸­">3ã€åˆ¤æ–­å…ƒç´ æ˜¯å¦åœ¨åˆ—è¡¨ä¸­</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python">listdemo = [<span class="hljs-string">&quot;Bob&quot;</span>,<span class="hljs-string">&quot;Jason&quot;</span>,<span class="hljs-string">&quot;Peter&quot;</span>,<span class="hljs-string">&quot;Jani&quot;</span>,<span class="hljs-string">&quot;Tom&quot;</span>]<br><span class="hljs-keyword">if</span> <span class="hljs-string">&quot;Peter&quot;</span> <span class="hljs-keyword">in</span> listdemo:<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Yes&quot;</span>)<br><span class="hljs-comment"># Yes</span><br></code></pre></td></tr></table></figure><h1 id="åè½¬å­—ç¬¦ä¸²">4ã€åè½¬å­—ç¬¦ä¸²</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python">name = <span class="hljs-string">&quot;Tom&quot;</span><br>reverse_name = name[::-<span class="hljs-number">1</span>]<br><span class="hljs-built_in">print</span>(reverse_name)<br><span class="hljs-comment"># moT</span><br></code></pre></td></tr></table></figure><h1 id="åè½¬åˆ—è¡¨">5ã€åè½¬åˆ—è¡¨</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python">name_list = [<span class="hljs-string">&quot;Bob&quot;</span>,<span class="hljs-string">&quot;Jason&quot;</span>,<span class="hljs-string">&quot;Peter&quot;</span>,<span class="hljs-string">&quot;Jani&quot;</span>,<span class="hljs-string">&quot;Tom&quot;</span>]<br>reverse_name_list = name_list[::-<span class="hljs-number">1</span>]<br><span class="hljs-built_in">print</span>(reverse_name_list)<br><span class="hljs-comment"># [&#x27;Tom&#x27;, &#x27;Jani&#x27;, &#x27;Peter&#x27;, &#x27;Jason&#x27;, &#x27;Bob&#x27;]</span><br></code></pre></td></tr></table></figure><h1 id="è·å–æ—¶é—´">6ã€è·å–æ—¶é—´</h1><p>è·å–å½“å‰æ—¶é—´</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> datetime<br>current_time = datetime.datetime.now()<br><span class="hljs-built_in">print</span>(current_time)<br><span class="hljs-comment"># 2024-04-24 23:59:57.567560</span><br></code></pre></td></tr></table></figure><p>è·å–å½“å‰æ—¥æœŸ</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> datetime<br>current_date = datetime.date.today()<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;å½“å‰æ—¥æœŸ:&quot;</span>, current_date)<br><span class="hljs-comment"># å½“å‰æ—¥æœŸ: 2024-04-25</span><br></code></pre></td></tr></table></figure><p>è·å–æ¯«ç§’çº§æ—¶é—´ï¼ˆç¨‹åºæ‰§è¡Œæ—¶é—´ï¼‰</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> time<br>start_time = time.time()<br>numbers = [i <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1000000</span>)]<br>end_time = time.time()<br>time_ = end_time - start_time<br><span class="hljs-built_in">print</span>(time_)<br><span class="hljs-comment"># 0.03652048110961914</span><br></code></pre></td></tr></table></figure><h1 id="ä¸‰å…ƒè¿ç®—ç¬¦">7ã€ä¸‰å…ƒè¿ç®—ç¬¦</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python">a = <span class="hljs-number">1</span><br>b = <span class="hljs-number">2</span><br><span class="hljs-built_in">max</span> = a <span class="hljs-keyword">if</span> a&gt;b <span class="hljs-keyword">else</span> b<br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">max</span>)<br><span class="hljs-comment"># 2</span><br></code></pre></td></tr></table></figure><h1 id="æšä¸¾å¾ªç¯">8ã€æšä¸¾å¾ªç¯</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python">fruits = [<span class="hljs-string">&#x27;apple&#x27;</span>,<span class="hljs-string">&#x27;banana&#x27;</span>]<br><span class="hljs-keyword">for</span> index,fruit <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(fruits):<br>    <span class="hljs-built_in">print</span>(index,fruit)<br><span class="hljs-comment"># 0 apple</span><br><span class="hljs-comment"># 1 banana</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">pythonå®ç”¨å°æŠ€å·§ï¼ŒåŠ å¿«ä»£ç å¼€å‘ã€ç®€åŒ–ä»£ç ç»“æ„ï¼ŒæŒç»­æ›´æ–°ä¸­......</summary>
    
    
    
    <category term="ç¼–ç¨‹" scheme="http://example.com/categories/%E7%BC%96%E7%A8%8B/"/>
    
    <category term="Python" scheme="http://example.com/categories/%E7%BC%96%E7%A8%8B/Python/"/>
    
    
    <category term="Python" scheme="http://example.com/tags/Python/"/>
    
    <category term="æŠ€å·§" scheme="http://example.com/tags/%E6%8A%80%E5%B7%A7/"/>
    
  </entry>
  
  <entry>
    <title>è§£å†³matplotlibç»˜å›¾ä¸­è‹±æ–‡æ··ç”¨é—®é¢˜</title>
    <link href="http://example.com/2024/04/17/016%20matplotlib%E7%BB%98%E5%9B%BE%E4%B8%AD%E8%8B%B1%E6%96%87%E6%B7%B7%E7%94%A8%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3/"/>
    <id>http://example.com/2024/04/17/016%20matplotlib%E7%BB%98%E5%9B%BE%E4%B8%AD%E8%8B%B1%E6%96%87%E6%B7%B7%E7%94%A8%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3/</id>
    <published>2024-04-16T16:28:00.000Z</published>
    <updated>2025-02-08T06:47:20.940Z</updated>
    
    <content type="html"><![CDATA[<p>æœ€è¿‘åœ¨å¤„ç†å®éªŒæ•°æ®ï¼Œå› ä¸ºæœ‰ c++åŸºç¡€ï¼Œå°è¯•ä½¿ç”¨ python è¿›è¡Œç»˜å›¾ã€‚</p><blockquote><p>ç›®å‰é‡åˆ°ä¸€ä¸ªé—®é¢˜ï¼šæƒ³è¦åœ¨ä¸€å¼ å›¾ä¸­ä¸­æ–‡ä½¿ç”¨å®‹ä½“ï¼Œè‹±æ–‡ä½¿ç”¨æ–°ç½—é©¬å­—ä½“è¯¥å¦‚ä½•è§£å†³ï¼Ÿ</p></blockquote><p>åœ¨ç½‘ä¸ŠæŸ¥é˜…äº†å¤§é‡çš„èµ„æ–™ï¼Œæ‰¾åˆ°äº†å‡ ç§è§£å†³åŠæ³•ï¼Œæ€»ç»“èµ·æ¥å°± 3 ç§ï¼š</p><ol type="1"><li>å…¨å±€ä½¿ç”¨ä¸­æ–‡ï¼Œåœ¨éœ€è¦ä½¿ç”¨è‹±æ–‡çš„åœ°æ–¹ä½¿ç”¨ latex å…¬å¼ä¹¦å†™ï¼›</li><li>ä½¿ç”¨å¤–éƒ¨</li><li>åˆå¹¶å®‹ä½“å’Œæ–°ç½—é©¬å­—ä½“ä¸ºæ–°å­—ä½“<code>timessimsun</code>ï¼Œé‡æ–°å¯¼å…¥matplotlib</li></ol><h2 id="ç¬¬ä¸€ç§æ–¹æ¡ˆå…¨å±€å®‹ä½“latex-æ–°ç½—é©¬">ç¬¬ä¸€ç§æ–¹æ¡ˆï¼šå…¨å±€å®‹ä½“+latexæ–°ç½—é©¬</h2><p>æ¯”å¦‚åœ¨ç»˜åˆ¶ text æ—¶ï¼Œè‹±æ–‡ä½¿ç”¨ latexå…¬å¼è¿›è¡Œä¹¦å†™ï¼Œå¯å°†è‹±æ–‡æ˜¾ç¤ºä¸ºæ–°ç½—é©¬å­—ä½“ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> matplotlib.pyplot <span class="hljs-keyword">as</span> plt<br>rc = &#123;<span class="hljs-string">&quot;font.family&quot;</span> : <span class="hljs-string">&quot;Times New Roman&quot;</span>,<br>      <span class="hljs-string">&quot;mathtext.fontset&quot;</span> : <span class="hljs-string">&quot;stix&quot;</span>,<br>      &#125;<br>plt.rcParams.update(rc)<br>fig,ax = plt.subplots(dpi = <span class="hljs-number">300</span>)<br>ax.set_xlabel(<span class="hljs-string">r&#x27;å¯†åº¦$\mathrm&#123;kg/m&#125;^3$&#x27;</span>,fontname = <span class="hljs-string">&#x27;SimSun&#x27;</span>,fontsize = <span class="hljs-number">20</span>)<br>ax.text(<span class="hljs-number">0.2</span>,<span class="hljs-number">0.8</span>,<span class="hljs-string">r&#x27;å®‹ä½“ $\mathrm&#123;Times New Roman&#125;$(æ­£ä½“)&#x27;</span>,fontname = <span class="hljs-string">&#x27;SimSun&#x27;</span>,fontsize = <span class="hljs-number">20</span>)<br>ax.text(<span class="hljs-number">0.2</span>,<span class="hljs-number">0.6</span>,<span class="hljs-string">r&#x27;å®‹ä½“ $Times New Roman$(æ–œä½“)&#x27;</span>,fontname = <span class="hljs-string">&#x27;SimSun&#x27;</span>,fontsize = <span class="hljs-number">20</span>)<br>ax.text(<span class="hljs-number">0.2</span>,<span class="hljs-number">0.4</span>,<span class="hljs-string">r&#x27;$\mathrm&#123;m^3&#125;\ m^3$&#x27;</span>,fontsize = <span class="hljs-number">30</span>)<br>fig.tight_layout()<br>plt.show()<br></code></pre></td></tr></table></figure><figure><imgsrc="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/image-20240417004233122.png"alt="image-20240417004233122" /><figcaption aria-hidden="true">image-20240417004233122</figcaption></figure><p>è¿™æ—¶å¯èƒ½è¿˜æ˜¯ä¸è¡Œï¼ŒåŸå› æ˜¯<code>matplotlib</code>æ²¡æœ‰æ‰¾åˆ°å®‹ä½“</p><p><strong>ä¿®æ”¹é…ç½®æ–‡ä»¶</strong></p><p><code>C:\Users\23984\.conda\envs\py-data-deal\Lib\site-packages\matplotlib\mpl-data\matplotlibrc</code>ï¼Œä¹Ÿå°±æ˜¯<code>Python</code>ç›®å½•ä¸‹çš„<code>Lib\site-packages\matplotlib\mpl-data\matplotlibrc</code></p><p>ä¿®æ”¹å­—ä½“ç±»å‹ä¸º<code>serif</code>ï¼Œå¹¶æ·»åŠ å®‹ä½“</p><figure><imgsrc="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/image-20240417010437557.png"alt="image-20240417010437557" /><figcaption aria-hidden="true">image-20240417010437557</figcaption></figure><p><strong>æ›´æ”¹ç¼“å­˜æ–‡ä»¶</strong></p><p><code>C:\Users\23984\.matplotlib\fontlist-v330.json</code></p><p>åœ¨ ttflistä¸­é‡æ–°æ–°å¢ä¸€ä»½<code>simsun</code>å­—ä½“ï¼Œå®šä½åˆ°å­—ä½“å­˜æ”¾çš„ä½ç½®</p><blockquote><p>è¿™ä¸ªå­—ä½“å¯åœ¨ç”µè„‘é»˜è®¤å­—ä½“åº“ä¸­æ‰¾åˆ°ï¼Œåœ¨<code>C:\Windows\Fonts</code>ç›®å½•ä¸‹</p></blockquote><figure><imgsrc="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/image-20240417010608917.png"alt="image-20240417010608917" /><figcaption aria-hidden="true">image-20240417010608917</figcaption></figure><p>å®Œæˆ</p><blockquote><p>ä½†æ˜¯è¿™ä¸ªæ–¹æ³•æœ‰ä¸ªå¾ˆæ˜æ˜¾çš„å±€é™æ€§ï¼Œå°±æ˜¯éœ€è¦æ‰‹åŠ¨åœ¨è‹±æ–‡çš„åœ°æ–¹è¾“å…¥ latexå…¬å¼ï¼Œå…¶ä¸€å¯¹ä¸ç†Ÿæ‚‰ latexçš„ä¼™ä¼´ä¸å‹å¥½ï¼Œå…¶äºŒè‹¥æ•°å­—æ˜¯å­˜å‚¨åœ¨ä¸€ä¸ªå˜é‡ä¸­å¦‚ä½•åœ¨ latexè·å–å˜é‡çš„å€¼ã€‚æ¯”å¦‚åœ¨ç»˜åˆ¶ lengend æ—¶ï¼Œ1000g/m3 ä¸­çš„ 1000æ˜¯å­˜å‚¨åœ¨åŠ¨æ€å˜é‡ä¸­çš„ï¼Œè¿™æ—¶å°±ä¸èƒ½é€šè¿‡ç¬¬ä¸€ç§æ–¹æ³•æ˜¾ç¤ºæ›´æ”¹ä¸ºæ–°ç½—é©¬å­—ä½“ã€‚</p></blockquote><h2 id="ç¬¬äºŒç§æ–¹æ¡ˆlatex-åŒ…">ç¬¬äºŒç§æ–¹æ¡ˆï¼šlatex åŒ…</h2><p>è¿™ç§æ–¹æ¡ˆéœ€è¦ä½¿ç”¨ç¬¬ä¸‰æ–¹ LaTex åŒ… ï¼ŒxeCJKæ˜¯ä¸€ä¸ªæä¾›ä¸­æ–‡ã€æ—¥æ–‡å’ŒéŸ©æ–‡æ”¯æŒçš„è½¯ä»¶åŒ…ã€‚è¾“å…¥ä»¥ä¸‹ä»£ç è€æ˜¯æŠ¥é”™ï¼Œç›®å‰æˆ‘æ²¡æœ‰æˆåŠŸï¼Œæ‰€ä»¥æ­¤æ–¹æ¡ˆä¸åšè¯¦ç»†ä»‹ç»ï¼Œå¦‚æœæœ‰å°ä¼™ä¼´é€šè¿‡è¿™ç§æ–¹æ³•æˆåŠŸäº†ï¼Œè¿˜è¯·ä¸€èµ·äº¤æµå­¦ä¹ ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> matplotlib<br>mpl.use(<span class="hljs-string">&#x27;pgf&#x27;</span>) <span class="hljs-comment"># stwich backend to pgf</span><br><span class="hljs-keyword">import</span> matplotlib.pyplot <span class="hljs-keyword">as</span> plt<br>    plt.rcParams.update(&#123;<br>    <span class="hljs-string">&quot;text.usetex&quot;</span>: <span class="hljs-literal">True</span>,<span class="hljs-comment"># use default xelatex</span><br>    <span class="hljs-string">&quot;pgf.rcfonts&quot;</span>: <span class="hljs-literal">False</span>,<span class="hljs-comment"># turn off default matplotlib fonts properties</span><br>    <span class="hljs-string">&quot;pgf.preamble&quot;</span>: [<br>         <span class="hljs-string">r&#x27;\usepackage&#123;fontspec&#125;&#x27;</span>,<br>         <span class="hljs-string">r&#x27;\setmainfont&#123;Times New Roman&#125;&#x27;</span>,<span class="hljs-comment"># EN fonts Romans</span><br>         <span class="hljs-string">r&#x27;\usepackage&#123;xeCJK&#125;&#x27;</span>,<span class="hljs-comment"># import xeCJK</span><br>         <span class="hljs-string">r&#x27;\setCJKmainfont&#123;SimSun&#125;&#x27;</span>,<span class="hljs-comment"># set CJK fonts as SimSun</span><br>         <span class="hljs-string">r&#x27;\xeCJKsetup&#123;CJKecglue=&#125;&#x27;</span>,<span class="hljs-comment"># turn off one space between CJK and EN fonts</span><br>         ]<br>&#125;)<br>plt.rcParams[<span class="hljs-string">&#x27;savefig.dpi&#x27;</span>]=<span class="hljs-number">300</span><br>plt.figure(figsize=(<span class="hljs-number">4.5</span>, <span class="hljs-number">2.5</span>))<br>plt.plot(<span class="hljs-built_in">range</span>(<span class="hljs-number">5</span>))<br>plt.text(<span class="hljs-number">2.5</span>, <span class="hljs-number">2.</span>, <span class="hljs-string">&quot;\CJKfontspec&#123;SimHei&#125;&#123;é»‘ä½“æ ‡æ³¨&#125;&quot;</span>)<span class="hljs-comment"># Annotation by SimHei</span><br>plt.xlabel(<span class="hljs-string">&quot;å®‹ä½“åæ ‡æ ‡ç­¾(units)&quot;</span>)<span class="hljs-comment"># CJK&amp;EN fonts mixed</span><br>plt.tight_layout(<span class="hljs-number">.5</span>)<br>plt.savefig(<span class="hljs-string">&#x27;examples.png&#x27;</span>)<br></code></pre></td></tr></table></figure><h2 id="ç¬¬ä¸‰ç§æ–¹æ³•åˆå¹¶æ–°å­—ä½“">ç¬¬ä¸‰ç§æ–¹æ³•ï¼šåˆå¹¶æ–°å­—ä½“</h2><p>è¿™æ˜¯æ¯”è¾ƒæ¨èçš„ä¸€ç§æ–¹æ³•ï¼Œå°±æ˜¯å°†æ–°ç½—é©¬å’Œå®‹ä½“ä¸¤ç§å­—ä½“åˆå¹¶ä¸ºä¸€ç§å­—ä½“ä½¿ç”¨ï¼Œéœ€è¦ä½¿ç”¨å­—ä½“åˆå¹¶å·¥å…·ï¼Œè¿™é‡Œæˆ‘ç›´æ¥åœ¨ç½‘ä¸Šæ‰¾åˆ°äº†åˆ«äººåˆå¹¶å¥½çš„ï¼Œ<ahref="https://pan.baidu.com/s/1Dis12wv7cbDE-l61oGcnWQ?pwd=t036">ç‚¹å‡»ä¸‹è½½</a>ã€‚</p><p>å°†åˆå¹¶å¥½çš„å­—ä½“æ”¾åœ¨<code>matplotlib</code>åŒ…ç›®å½•ä¸‹ï¼Œæˆ‘è¿™é‡Œä½¿ç”¨çš„æ˜¯<code>anaconda</code>å­—ä½“æ–‡ä»¶å¤¹æ˜¯<code>C:\Users\23984\.conda\envs\py-data-deal\Lib\site-packages\matplotlib\mpl-data\fonts\ttf</code>ï¼Œåœ¨<code>Python</code>ç¯å¢ƒä¸‹çš„<code>Lib\site-packages\matplotlib\mpl-data\fonts\ttf</code></p><figure><imgsrc="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/image-20240417005515518.png"alt="image-20240417005515518" /><figcaption aria-hidden="true">image-20240417005515518</figcaption></figure><p><strong>ä¿®æ”¹é…ç½®æ–‡ä»¶</strong></p><p><code>C:\Users\23984\.conda\envs\py-data-deal\Lib\site-packages\matplotlib\mpl-data\matplotlibrc</code>ï¼Œä¹Ÿå°±æ˜¯<code>Python</code>ç›®å½•ä¸‹çš„<code>Lib\site-packages\matplotlib\mpl-data\matplotlibrc</code></p><p>ä¿®æ”¹å­—ä½“ç±»å‹ä¸º<code>serif</code>ï¼Œå¹¶æ·»åŠ æ–°å’Œæˆçš„å­—ä½“</p><figure><imgsrc="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/image-20240417005737211.png"alt="image-20240417005737211" /><figcaption aria-hidden="true">image-20240417005737211</figcaption></figure><p><strong>æ›´æ”¹ç¼“å­˜æ–‡ä»¶</strong></p><p><code>C:\Users\23984\.matplotlib\fontlist-v330.json</code></p><p>åœ¨ ttflistä¸­é‡æ–°æ–°å¢ä¸€ä»½<code>timessimsun</code>å­—ä½“ï¼Œå®šä½åˆ°å­—ä½“å­˜æ”¾çš„ä½ç½®</p><figure><imgsrc="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/image-20240417005920759.png"alt="image-20240417005920759" /><figcaption aria-hidden="true">image-20240417005920759</figcaption></figure><p><strong>æµ‹è¯•ä»£ç </strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> matplotlib.pyplot <span class="hljs-keyword">as</span> plt<br><span class="hljs-keyword">from</span> matplotlib <span class="hljs-keyword">import</span> rcParams<br><br><br>config = &#123;<br>      <span class="hljs-string">&quot;font.family&quot;</span>:<span class="hljs-string">&#x27;serif&#x27;</span>,<br>      <span class="hljs-string">&quot;mathtext.fontset&quot;</span>:<span class="hljs-string">&#x27;stix&#x27;</span>,<br>      <span class="hljs-string">&quot;font.serif&quot;</span>: <span class="hljs-string">&#x27;timessimsun&#x27;</span>,<br>&#125;<br>rcParams.update(config)<br>plt.rcParams[<span class="hljs-string">&#x27;axes.unicode_minus&#x27;</span>] = <span class="hljs-literal">False</span>    <span class="hljs-comment"># è§£å†³è´Ÿå·æ˜¾ç¤ºä¸ºæ–¹å—çš„é—®é¢˜</span><br><br>fig,ax = plt.subplots(dpi = <span class="hljs-number">300</span>)<br>ax.set_xlabel(<span class="hljs-string">r&#x27;å¯†åº¦$\mathrm&#123;kg/m&#125;^3$&#x27;</span>,fontsize = <span class="hljs-number">20</span>)<br>ax.text(<span class="hljs-number">0.05</span>,<span class="hljs-number">0.6</span>,<span class="hljs-string">r&#x27;matplotlibä¸­æ–‡ä½¿ç”¨å®‹ä½“è‹±æ–‡ä½¿ç”¨æ–°ç½—é©¬&#x27;</span>,fontsize = <span class="hljs-number">20</span>)<br>fig.tight_layout()<br>plt.show()<br></code></pre></td></tr></table></figure><figure><imgsrc="https://test-123456-md-images.oss-cn-beijing.aliyuncs.com/img/image-20240417011423583.png"alt="image-20240417011423583" /><figcaption aria-hidden="true">image-20240417011423583</figcaption></figure><p>å®Œæˆ</p><blockquote><p>å‚è€ƒé“¾æ¥:https://stackoverflow.com/questions/44008032/how-to-mix-chinese-and-english-with-matplotlib</p></blockquote>]]></content>
    
    
    <summary type="html">ä½¿ç”¨pythonç»˜å›¾æ—¶ï¼Œæƒ³è¦åœ¨ä¸€å¼ å›¾ä¸­ä¸­æ–‡ä½¿ç”¨å®‹ä½“ï¼Œè‹±æ–‡ä½¿ç”¨æ–°ç½—é©¬å­—ä½“è¯¥å¦‚ä½•è§£å†³ï¼Ÿ</summary>
    
    
    
    <category term="ç¼–ç¨‹" scheme="http://example.com/categories/%E7%BC%96%E7%A8%8B/"/>
    
    <category term="Python" scheme="http://example.com/categories/%E7%BC%96%E7%A8%8B/Python/"/>
    
    
    <category term="Python" scheme="http://example.com/tags/Python/"/>
    
    <category term="matplotlib" scheme="http://example.com/tags/matplotlib/"/>
    
    <category term="ç§‘ç ”" scheme="http://example.com/tags/%E7%A7%91%E7%A0%94/"/>
    
  </entry>
  
</feed>
